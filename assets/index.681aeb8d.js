var to=Object.defineProperty,eo=Object.defineProperties;var ro=Object.getOwnPropertyDescriptors;var Lt=Object.getOwnPropertySymbols;var Je=Object.prototype.hasOwnProperty,Ye=Object.prototype.propertyIsEnumerable;var Ve=(e,t,r)=>t in e?to(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,I=(e,t)=>{for(var r in t||(t={}))Je.call(t,r)&&Ve(e,r,t[r]);if(Lt)for(var r of Lt(t))Ye.call(t,r)&&Ve(e,r,t[r]);return e},L=(e,t)=>eo(e,ro(t));var Ke=(e,t)=>{var r={};for(var n in e)Je.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&Lt)for(var n of Lt(e))t.indexOf(n)<0&&Ye.call(e,n)&&(r[n]=e[n]);return r};const no=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerpolicy&&(i.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?i.credentials="include":o.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(o){if(o.ep)return;o.ep=!0;const i=r(o);fetch(o.href,i)}};no();var X=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},J={},Lr={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t;function t(r){var n,o=r.Symbol;if(typeof o=="function")if(o.observable)n=o.observable;else{n=o.for("https://github.com/benlesh/symbol-observable");try{o.observable=n}catch{}}else n="@@observable";return n}})(Lr);var oo=Lr,Xe=Object.prototype.toString,Rr=function(t){var r=Xe.call(t),n=r==="[object Arguments]";return n||(n=r!=="[object Array]"&&t!==null&&typeof t=="object"&&typeof t.length=="number"&&t.length>=0&&Xe.call(t.callee)==="[object Function]"),n},Br;if(!Object.keys){var Rt=Object.prototype.hasOwnProperty,Ze=Object.prototype.toString,io=Rr,Qe=Object.prototype.propertyIsEnumerable,so=!Qe.call({toString:null},"toString"),ao=Qe.call(function(){},"prototype"),Bt=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],le=function(e){var t=e.constructor;return t&&t.prototype===e},uo={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},co=function(){if(typeof window=="undefined")return!1;for(var e in window)try{if(!uo["$"+e]&&Rt.call(window,e)&&window[e]!==null&&typeof window[e]=="object")try{le(window[e])}catch{return!0}}catch{return!0}return!1}(),lo=function(e){if(typeof window=="undefined"||!co)return le(e);try{return le(e)}catch{return!1}};Br=function(t){var r=t!==null&&typeof t=="object",n=Ze.call(t)==="[object Function]",o=io(t),i=r&&Ze.call(t)==="[object String]",a=[];if(!r&&!n&&!o)throw new TypeError("Object.keys called on a non-object");var c=ao&&n;if(i&&t.length>0&&!Rt.call(t,0))for(var f=0;f<t.length;++f)a.push(String(f));if(o&&t.length>0)for(var h=0;h<t.length;++h)a.push(String(h));else for(var v in t)!(c&&v==="prototype")&&Rt.call(t,v)&&a.push(String(v));if(so)for(var m=lo(t),b=0;b<Bt.length;++b)!(m&&Bt[b]==="constructor")&&Rt.call(t,Bt[b])&&a.push(Bt[b]);return a}}var fo=Br,po=Array.prototype.slice,ho=Rr,tr=Object.keys,qt=tr?function(t){return tr(t)}:fo,er=Object.keys;qt.shim=function(){if(Object.keys){var t=function(){var r=Object.keys(arguments);return r&&r.length===arguments.length}(1,2);t||(Object.keys=function(n){return ho(n)?er(po.call(n)):er(n)})}else Object.keys=qt;return Object.keys||qt};var yo=qt,mo=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var t={},r=Symbol("test"),n=Object(r);if(typeof r=="string"||Object.prototype.toString.call(r)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var o=42;t[r]=o;for(r in t)return!1;if(typeof Object.keys=="function"&&Object.keys(t).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(t).length!==0)return!1;var i=Object.getOwnPropertySymbols(t);if(i.length!==1||i[0]!==r||!Object.prototype.propertyIsEnumerable.call(t,r))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var a=Object.getOwnPropertyDescriptor(t,r);if(a.value!==o||a.enumerable!==!0)return!1}return!0},rr=typeof Symbol!="undefined"&&Symbol,vo=mo,go=function(){return typeof rr!="function"||typeof Symbol!="function"||typeof rr("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:vo()},_o="Function.prototype.bind called on incompatible ",fe=Array.prototype.slice,bo=Object.prototype.toString,wo="[object Function]",So=function(t){var r=this;if(typeof r!="function"||bo.call(r)!==wo)throw new TypeError(_o+r);for(var n=fe.call(arguments,1),o,i=function(){if(this instanceof o){var v=r.apply(this,n.concat(fe.call(arguments)));return Object(v)===v?v:this}else return r.apply(t,n.concat(fe.call(arguments)))},a=Math.max(0,r.length-n.length),c=[],f=0;f<a;f++)c.push("$"+f);if(o=Function("binder","return function ("+c.join(",")+"){ return binder.apply(this,arguments); }")(i),r.prototype){var h=function(){};h.prototype=r.prototype,o.prototype=new h,h.prototype=null}return o},Oo=So,Ur=Function.prototype.bind||Oo,Ao=Ur,$o=Ao.call(Function.call,Object.prototype.hasOwnProperty),k,At=SyntaxError,Wr=Function,wt=TypeError,pe=function(e){try{return Wr('"use strict"; return ('+e+").constructor;")()}catch{}},pt=Object.getOwnPropertyDescriptor;if(pt)try{pt({},"")}catch{pt=null}var he=function(){throw new wt},xo=pt?function(){try{return arguments.callee,he}catch{try{return pt(arguments,"callee").get}catch{return he}}}():he,mt=go(),at=Object.getPrototypeOf||function(e){return e.__proto__},_t={},Eo=typeof Uint8Array=="undefined"?k:at(Uint8Array),St={"%AggregateError%":typeof AggregateError=="undefined"?k:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer=="undefined"?k:ArrayBuffer,"%ArrayIteratorPrototype%":mt?at([][Symbol.iterator]()):k,"%AsyncFromSyncIteratorPrototype%":k,"%AsyncFunction%":_t,"%AsyncGenerator%":_t,"%AsyncGeneratorFunction%":_t,"%AsyncIteratorPrototype%":_t,"%Atomics%":typeof Atomics=="undefined"?k:Atomics,"%BigInt%":typeof BigInt=="undefined"?k:BigInt,"%Boolean%":Boolean,"%DataView%":typeof DataView=="undefined"?k:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array=="undefined"?k:Float32Array,"%Float64Array%":typeof Float64Array=="undefined"?k:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry=="undefined"?k:FinalizationRegistry,"%Function%":Wr,"%GeneratorFunction%":_t,"%Int8Array%":typeof Int8Array=="undefined"?k:Int8Array,"%Int16Array%":typeof Int16Array=="undefined"?k:Int16Array,"%Int32Array%":typeof Int32Array=="undefined"?k:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":mt?at(at([][Symbol.iterator]())):k,"%JSON%":typeof JSON=="object"?JSON:k,"%Map%":typeof Map=="undefined"?k:Map,"%MapIteratorPrototype%":typeof Map=="undefined"||!mt?k:at(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise=="undefined"?k:Promise,"%Proxy%":typeof Proxy=="undefined"?k:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect=="undefined"?k:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set=="undefined"?k:Set,"%SetIteratorPrototype%":typeof Set=="undefined"||!mt?k:at(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer=="undefined"?k:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":mt?at(""[Symbol.iterator]()):k,"%Symbol%":mt?Symbol:k,"%SyntaxError%":At,"%ThrowTypeError%":xo,"%TypedArray%":Eo,"%TypeError%":wt,"%Uint8Array%":typeof Uint8Array=="undefined"?k:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray=="undefined"?k:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array=="undefined"?k:Uint16Array,"%Uint32Array%":typeof Uint32Array=="undefined"?k:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap=="undefined"?k:WeakMap,"%WeakRef%":typeof WeakRef=="undefined"?k:WeakRef,"%WeakSet%":typeof WeakSet=="undefined"?k:WeakSet},Po=function e(t){var r;if(t==="%AsyncFunction%")r=pe("async function () {}");else if(t==="%GeneratorFunction%")r=pe("function* () {}");else if(t==="%AsyncGeneratorFunction%")r=pe("async function* () {}");else if(t==="%AsyncGenerator%"){var n=e("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if(t==="%AsyncIteratorPrototype%"){var o=e("%AsyncGenerator%");o&&(r=at(o.prototype))}return St[t]=r,r},nr={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Ft=Ur,Qt=$o,Co=Ft.call(Function.call,Array.prototype.concat),No=Ft.call(Function.apply,Array.prototype.splice),or=Ft.call(Function.call,String.prototype.replace),te=Ft.call(Function.call,String.prototype.slice),Io=Ft.call(Function.call,RegExp.prototype.exec),ko=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Do=/\\(\\)?/g,To=function(t){var r=te(t,0,1),n=te(t,-1);if(r==="%"&&n!=="%")throw new At("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&r!=="%")throw new At("invalid intrinsic syntax, expected opening `%`");var o=[];return or(t,ko,function(i,a,c,f){o[o.length]=c?or(f,Do,"$1"):a||i}),o},Fo=function(t,r){var n=t,o;if(Qt(nr,n)&&(o=nr[n],n="%"+o[0]+"%"),Qt(St,n)){var i=St[n];if(i===_t&&(i=Po(n)),typeof i=="undefined"&&!r)throw new wt("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:o,name:n,value:i}}throw new At("intrinsic "+t+" does not exist!")},jo=function(t,r){if(typeof t!="string"||t.length===0)throw new wt("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new wt('"allowMissing" argument must be a boolean');if(Io(/^%?[^%]*%?$/g,t)===null)throw new At("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=To(t),o=n.length>0?n[0]:"",i=Fo("%"+o+"%",r),a=i.name,c=i.value,f=!1,h=i.alias;h&&(o=h[0],No(n,Co([0,1],h)));for(var v=1,m=!0;v<n.length;v+=1){var b=n[v],u=te(b,0,1),l=te(b,-1);if((u==='"'||u==="'"||u==="`"||l==='"'||l==="'"||l==="`")&&u!==l)throw new At("property names with quotes must have matching quotes");if((b==="constructor"||!m)&&(f=!0),o+="."+b,a="%"+o+"%",Qt(St,a))c=St[a];else if(c!=null){if(!(b in c)){if(!r)throw new wt("base intrinsic for "+t+" exists, but the property is not available.");return}if(pt&&v+1>=n.length){var p=pt(c,b);m=!!p,m&&"get"in p&&!("originalValue"in p.get)?c=p.get:c=c[b]}else m=Qt(c,b),c=c[b];m&&!f&&(St[a]=c)}}return c},Mo=jo,Ee=Mo("%Object.defineProperty%",!0),Pe=function(){if(Ee)try{return Ee({},"a",{value:1}),!0}catch{return!1}return!1};Pe.hasArrayLengthDefineBug=function(){if(!Pe())return null;try{return Ee([],"length",{value:1}).length!==1}catch{return!0}};var Lo=Pe,Ro=yo,Bo=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",Uo=Object.prototype.toString,Wo=Array.prototype.concat,Gr=Object.defineProperty,Go=function(e){return typeof e=="function"&&Uo.call(e)==="[object Function]"},zo=Lo(),zr=Gr&&zo,qo=function(e,t,r,n){t in e&&(!Go(n)||!n())||(zr?Gr(e,t,{configurable:!0,enumerable:!1,value:r,writable:!0}):e[t]=r)},qr=function(e,t){var r=arguments.length>2?arguments[2]:{},n=Ro(t);Bo&&(n=Wo.call(n,Object.getOwnPropertySymbols(t)));for(var o=0;o<n.length;o+=1)qo(e,n[o],t[n[o]],r[n[o]])};qr.supportsDescriptors=!!zr;var Hr=qr,Dt={exports:{}};typeof self!="undefined"?Dt.exports=self:typeof window!="undefined"?Dt.exports=window:Dt.exports=Function("return this")();var Ho=Dt.exports,Vr=function(){return typeof X!="object"||!X||X.Math!==Math||X.Array!==Array?Ho:X},Vo=Hr,Jo=Vr,Yo=function(){var t=Jo();if(Vo.supportsDescriptors){var r=Object.getOwnPropertyDescriptor(t,"globalThis");(!r||r.configurable&&(r.enumerable||!r.writable||globalThis!==t))&&Object.defineProperty(t,"globalThis",{configurable:!0,enumerable:!1,value:t,writable:!0})}else(typeof globalThis!="object"||globalThis!==t)&&(t.globalThis=t);return t},Ko=Hr,Xo=Dt.exports,Jr=Vr,Zo=Yo,Qo=Jr(),Yr=function(){return Qo};Ko(Yr,{getPolyfill:Jr,implementation:Xo,shim:Zo});var ti=Yr,ei=X&&X.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)o.hasOwnProperty(i)&&(n[i]=o[i])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(J,"__esModule",{value:!0});J.NO_IL=je=J.NO=J.MemoryStream=tt=J.Stream=void 0;var ri=oo,ni=ti,Ut=ri.default(ni.getPolyfill()),A={},je=J.NO=A;function W(){}function Ht(e){for(var t=e.length,r=Array(t),n=0;n<t;++n)r[n]=e[n];return r}function oi(e,t){return function(n){return e(n)&&t(n)}}function Me(e,t,r){try{return e.f(t)}catch(n){return r._e(n),A}}var lt={_n:W,_e:W,_c:W};J.NO_IL=lt;function ir(e){e._start=function(r){r.next=r._n,r.error=r._e,r.complete=r._c,this.start(r)},e._stop=e.stop}var ii=function(){function e(t,r){this._stream=t,this._listener=r}return e.prototype.unsubscribe=function(){this._stream._remove(this._listener)},e}(),si=function(){function e(t){this._listener=t}return e.prototype.next=function(t){this._listener._n(t)},e.prototype.error=function(t){this._listener._e(t)},e.prototype.complete=function(){this._listener._c()},e}(),ai=function(){function e(t){this.type="fromObservable",this.ins=t,this.active=!1}return e.prototype._start=function(t){this.out=t,this.active=!0,this._sub=this.ins.subscribe(new si(t)),this.active||this._sub.unsubscribe()},e.prototype._stop=function(){this._sub&&this._sub.unsubscribe(),this.active=!1},e}(),ui=function(){function e(t){this.type="merge",this.insArr=t,this.out=A,this.ac=0}return e.prototype._start=function(t){this.out=t;var r=this.insArr,n=r.length;this.ac=n;for(var o=0;o<n;o++)r[o]._add(this)},e.prototype._stop=function(){for(var t=this.insArr,r=t.length,n=0;n<r;n++)t[n]._remove(this);this.out=A},e.prototype._n=function(t){var r=this.out;r!==A&&r._n(t)},e.prototype._e=function(t){var r=this.out;r!==A&&r._e(t)},e.prototype._c=function(){if(--this.ac<=0){var t=this.out;if(t===A)return;t._c()}},e}(),ci=function(){function e(t,r,n){this.i=t,this.out=r,this.p=n,n.ils.push(this)}return e.prototype._n=function(t){var r=this.p,n=this.out;if(n!==A&&r.up(t,this.i)){var o=Ht(r.vals);n._n(o)}},e.prototype._e=function(t){var r=this.out;r!==A&&r._e(t)},e.prototype._c=function(){var t=this.p;t.out!==A&&--t.Nc===0&&t.out._c()},e}(),li=function(){function e(t){this.type="combine",this.insArr=t,this.out=A,this.ils=[],this.Nc=this.Nn=0,this.vals=[]}return e.prototype.up=function(t,r){var n=this.vals[r],o=this.Nn?n===A?--this.Nn:this.Nn:0;return this.vals[r]=t,o===0},e.prototype._start=function(t){this.out=t;var r=this.insArr,n=this.Nc=this.Nn=r.length,o=this.vals=new Array(n);if(n===0)t._n([]),t._c();else for(var i=0;i<n;i++)o[i]=A,r[i]._add(new ci(i,t,this))},e.prototype._stop=function(){for(var t=this.insArr,r=t.length,n=this.ils,o=0;o<r;o++)t[o]._remove(n[o]);this.out=A,this.ils=[],this.vals=[]},e}(),fi=function(){function e(t){this.type="fromArray",this.a=t}return e.prototype._start=function(t){for(var r=this.a,n=0,o=r.length;n<o;n++)t._n(r[n]);t._c()},e.prototype._stop=function(){},e}(),pi=function(){function e(t){this.type="fromPromise",this.on=!1,this.p=t}return e.prototype._start=function(t){var r=this;this.on=!0,this.p.then(function(n){r.on&&(t._n(n),t._c())},function(n){t._e(n)}).then(W,function(n){setTimeout(function(){throw n})})},e.prototype._stop=function(){this.on=!1},e}(),hi=function(){function e(t){this.type="periodic",this.period=t,this.intervalID=-1,this.i=0}return e.prototype._start=function(t){var r=this;function n(){t._n(r.i++)}this.intervalID=setInterval(n,this.period)},e.prototype._stop=function(){this.intervalID!==-1&&clearInterval(this.intervalID),this.intervalID=-1,this.i=0},e}(),di=function(){function e(t,r){this.type="debug",this.ins=t,this.out=A,this.s=W,this.l="",typeof r=="string"?this.l=r:typeof r=="function"&&(this.s=r)}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=A},e.prototype._n=function(t){var r=this.out;if(r!==A){var n=this.s,o=this.l;if(n!==W)try{n(t)}catch(i){r._e(i)}else o?console.log(o+":",t):console.log(t);r._n(t)}},e.prototype._e=function(t){var r=this.out;r!==A&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==A&&t._c()},e}(),yi=function(){function e(t,r){this.type="drop",this.ins=r,this.out=A,this.max=t,this.dropped=0}return e.prototype._start=function(t){this.out=t,this.dropped=0,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=A},e.prototype._n=function(t){var r=this.out;r!==A&&this.dropped++>=this.max&&r._n(t)},e.prototype._e=function(t){var r=this.out;r!==A&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==A&&t._c()},e}(),mi=function(){function e(t,r){this.out=t,this.op=r}return e.prototype._n=function(){this.op.end()},e.prototype._e=function(t){this.out._e(t)},e.prototype._c=function(){this.op.end()},e}(),vi=function(){function e(t,r){this.type="endWhen",this.ins=r,this.out=A,this.o=t,this.oil=lt}return e.prototype._start=function(t){this.out=t,this.o._add(this.oil=new mi(t,this)),this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.o._remove(this.oil),this.out=A,this.oil=lt},e.prototype.end=function(){var t=this.out;t!==A&&t._c()},e.prototype._n=function(t){var r=this.out;r!==A&&r._n(t)},e.prototype._e=function(t){var r=this.out;r!==A&&r._e(t)},e.prototype._c=function(){this.end()},e}(),de=function(){function e(t,r){this.type="filter",this.ins=r,this.out=A,this.f=t}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=A},e.prototype._n=function(t){var r=this.out;if(r!==A){var n=Me(this,t,r);n===A||!n||r._n(t)}},e.prototype._e=function(t){var r=this.out;r!==A&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==A&&t._c()},e}(),gi=function(){function e(t,r){this.out=t,this.op=r}return e.prototype._n=function(t){this.out._n(t)},e.prototype._e=function(t){this.out._e(t)},e.prototype._c=function(){this.op.inner=A,this.op.less()},e}(),_i=function(){function e(t){this.type="flatten",this.ins=t,this.out=A,this.open=!0,this.inner=A,this.il=lt}return e.prototype._start=function(t){this.out=t,this.open=!0,this.inner=A,this.il=lt,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.inner!==A&&this.inner._remove(this.il),this.out=A,this.open=!0,this.inner=A,this.il=lt},e.prototype.less=function(){var t=this.out;t!==A&&!this.open&&this.inner===A&&t._c()},e.prototype._n=function(t){var r=this.out;if(r!==A){var n=this,o=n.inner,i=n.il;o!==A&&i!==lt&&o._remove(i),(this.inner=t)._add(this.il=new gi(r,this))}},e.prototype._e=function(t){var r=this.out;r!==A&&r._e(t)},e.prototype._c=function(){this.open=!1,this.less()},e}(),bi=function(){function e(t,r,n){var o=this;this.type="fold",this.ins=n,this.out=A,this.f=function(i){return t(o.acc,i)},this.acc=this.seed=r}return e.prototype._start=function(t){this.out=t,this.acc=this.seed,t._n(this.acc),this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=A,this.acc=this.seed},e.prototype._n=function(t){var r=this.out;if(r!==A){var n=Me(this,t,r);n!==A&&r._n(this.acc=n)}},e.prototype._e=function(t){var r=this.out;r!==A&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==A&&t._c()},e}(),wi=function(){function e(t){this.type="last",this.ins=t,this.out=A,this.has=!1,this.val=A}return e.prototype._start=function(t){this.out=t,this.has=!1,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=A,this.val=A},e.prototype._n=function(t){this.has=!0,this.val=t},e.prototype._e=function(t){var r=this.out;r!==A&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==A&&(this.has?(t._n(this.val),t._c()):t._e(new Error("last() failed because input stream completed")))},e}(),Si=function(){function e(t,r){this.type="map",this.ins=r,this.out=A,this.f=t}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=A},e.prototype._n=function(t){var r=this.out;if(r!==A){var n=Me(this,t,r);n!==A&&r._n(n)}},e.prototype._e=function(t){var r=this.out;r!==A&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==A&&t._c()},e}(),Oi=function(){function e(t){this.type="remember",this.ins=t,this.out=A}return e.prototype._start=function(t){this.out=t,this.ins._add(t)},e.prototype._stop=function(){this.ins._remove(this.out),this.out=A},e}(),Ai=function(){function e(t,r){this.type="replaceError",this.ins=r,this.out=A,this.f=t}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=A},e.prototype._n=function(t){var r=this.out;r!==A&&r._n(t)},e.prototype._e=function(t){var r=this.out;if(r!==A)try{this.ins._remove(this),(this.ins=this.f(t))._add(this)}catch(n){r._e(n)}},e.prototype._c=function(){var t=this.out;t!==A&&t._c()},e}(),$i=function(){function e(t,r){this.type="startWith",this.ins=t,this.out=A,this.val=r}return e.prototype._start=function(t){this.out=t,this.out._n(this.val),this.ins._add(t)},e.prototype._stop=function(){this.ins._remove(this.out),this.out=A},e}(),xi=function(){function e(t,r){this.type="take",this.ins=r,this.out=A,this.max=t,this.taken=0}return e.prototype._start=function(t){this.out=t,this.taken=0,this.max<=0?t._c():this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=A},e.prototype._n=function(t){var r=this.out;if(r!==A){var n=++this.taken;n<this.max?r._n(t):n===this.max&&(r._n(t),r._c())}},e.prototype._e=function(t){var r=this.out;r!==A&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==A&&t._c()},e}(),Le=function(){function e(t){this._prod=t||A,this._ils=[],this._stopID=A,this._dl=A,this._d=!1,this._target=null,this._err=A}return e.prototype._n=function(t){var r=this._ils,n=r.length;if(this._d&&this._dl._n(t),n==1)r[0]._n(t);else{if(n==0)return;for(var o=Ht(r),i=0;i<n;i++)o[i]._n(t)}},e.prototype._e=function(t){if(this._err===A){this._err=t;var r=this._ils,n=r.length;if(this._x(),this._d&&this._dl._e(t),n==1)r[0]._e(t);else{if(n==0)return;for(var o=Ht(r),i=0;i<n;i++)o[i]._e(t)}if(!this._d&&n==0)throw this._err}},e.prototype._c=function(){var t=this._ils,r=t.length;if(this._x(),this._d&&this._dl._c(),r==1)t[0]._c();else{if(r==0)return;for(var n=Ht(t),o=0;o<r;o++)n[o]._c()}},e.prototype._x=function(){this._ils.length!==0&&(this._prod!==A&&this._prod._stop(),this._err=A,this._ils=[])},e.prototype._stopNow=function(){this._prod._stop(),this._err=A,this._stopID=A},e.prototype._add=function(t){var r=this._target;if(r)return r._add(t);var n=this._ils;if(n.push(t),!(n.length>1))if(this._stopID!==A)clearTimeout(this._stopID),this._stopID=A;else{var o=this._prod;o!==A&&o._start(this)}},e.prototype._remove=function(t){var r=this,n=this._target;if(n)return n._remove(t);var o=this._ils,i=o.indexOf(t);i>-1&&(o.splice(i,1),this._prod!==A&&o.length<=0?(this._err=A,this._stopID=setTimeout(function(){return r._stopNow()})):o.length===1&&this._pruneCycles())},e.prototype._pruneCycles=function(){this._hasNoSinks(this,[])&&this._remove(this._ils[0])},e.prototype._hasNoSinks=function(t,r){if(r.indexOf(t)!==-1)return!0;if(t.out===this)return!0;if(t.out&&t.out!==A)return this._hasNoSinks(t.out,r.concat(t));if(t._ils){for(var n=0,o=t._ils.length;n<o;n++)if(!this._hasNoSinks(t._ils[n],r.concat(t)))return!1;return!0}else return!1},e.prototype.ctor=function(){return this instanceof rt?rt:e},e.prototype.addListener=function(t){t._n=t.next||W,t._e=t.error||W,t._c=t.complete||W,this._add(t)},e.prototype.removeListener=function(t){this._remove(t)},e.prototype.subscribe=function(t){return this.addListener(t),new ii(this,t)},e.prototype[Ut]=function(){return this},e.create=function(t){if(t){if(typeof t.start!="function"||typeof t.stop!="function")throw new Error("producer requires both start and stop functions");ir(t)}return new e(t)},e.createWithMemory=function(t){return t&&ir(t),new rt(t)},e.never=function(){return new e({_start:W,_stop:W})},e.empty=function(){return new e({_start:function(t){t._c()},_stop:W})},e.throw=function(t){return new e({_start:function(r){r._e(t)},_stop:W})},e.from=function(t){if(typeof t[Ut]=="function")return e.fromObservable(t);if(typeof t.then=="function")return e.fromPromise(t);if(Array.isArray(t))return e.fromArray(t);throw new TypeError("Type of input to from() must be an Array, Promise, or Observable")},e.of=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return e.fromArray(t)},e.fromArray=function(t){return new e(new fi(t))},e.fromPromise=function(t){return new e(new pi(t))},e.fromObservable=function(t){if(t.endWhen!==void 0)return t;var r=typeof t[Ut]=="function"?t[Ut]():t;return new e(new ai(r))},e.periodic=function(t){return new e(new hi(t))},e.prototype._map=function(t){return new(this.ctor())(new Si(t,this))},e.prototype.map=function(t){return this._map(t)},e.prototype.mapTo=function(t){var r=this.map(function(){return t}),n=r._prod;return n.type="mapTo",r},e.prototype.filter=function(t){var r=this._prod;return r instanceof de?new e(new de(oi(r.f,t),r.ins)):new e(new de(t,this))},e.prototype.take=function(t){return new(this.ctor())(new xi(t,this))},e.prototype.drop=function(t){return new e(new yi(t,this))},e.prototype.last=function(){return new e(new wi(this))},e.prototype.startWith=function(t){return new rt(new $i(this,t))},e.prototype.endWhen=function(t){return new(this.ctor())(new vi(t,this))},e.prototype.fold=function(t,r){return new rt(new bi(t,r,this))},e.prototype.replaceError=function(t){return new(this.ctor())(new Ai(t,this))},e.prototype.flatten=function(){return new e(new _i(this))},e.prototype.compose=function(t){return t(this)},e.prototype.remember=function(){return new rt(new Oi(this))},e.prototype.debug=function(t){return new(this.ctor())(new di(this,t))},e.prototype.imitate=function(t){if(t instanceof rt)throw new Error("A MemoryStream was given to imitate(), but it only supports a Stream. Read more about this restriction here: https://github.com/staltz/xstream#faq");this._target=t;for(var r=this._ils,n=r.length,o=0;o<n;o++)t._add(r[o]);this._ils=[]},e.prototype.shamefullySendNext=function(t){this._n(t)},e.prototype.shamefullySendError=function(t){this._e(t)},e.prototype.shamefullySendComplete=function(){this._c()},e.prototype.setDebugListener=function(t){t?(this._d=!0,t._n=t.next||W,t._e=t.error||W,t._c=t.complete||W,this._dl=t):(this._d=!1,this._dl=A)},e.merge=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return new e(new ui(r))},e.combine=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return new e(new li(r))},e}(),tt=J.Stream=Le,rt=function(e){ei(t,e);function t(r){var n=e.call(this,r)||this;return n._has=!1,n}return t.prototype._n=function(r){this._v=r,this._has=!0,e.prototype._n.call(this,r)},t.prototype._add=function(r){var n=this._target;if(n)return n._add(r);var o=this._ils;if(o.push(r),o.length>1){this._has&&r._n(this._v);return}if(this._stopID!==A)this._has&&r._n(this._v),clearTimeout(this._stopID),this._stopID=A;else if(this._has)r._n(this._v);else{var i=this._prod;i!==A&&i._start(this)}},t.prototype._stopNow=function(){this._has=!1,e.prototype._stopNow.call(this)},t.prototype._x=function(){this._has=!1,e.prototype._x.call(this)},t.prototype.map=function(r){return this._map(r)},t.prototype.mapTo=function(r){return e.prototype.mapTo.call(this,r)},t.prototype.take=function(r){return e.prototype.take.call(this,r)},t.prototype.endWhen=function(r){return e.prototype.endWhen.call(this,r)},t.prototype.replaceError=function(r){return e.prototype.replaceError.call(this,r)},t.prototype.remember=function(){return this},t.prototype.debug=function(r){return e.prototype.debug.call(this,r)},t}(Le);J.MemoryStream=rt;var Ei=Le,P=J.default=Ei,Re={};Object.defineProperty(Re,"__esModule",{value:!0});function Kr(){var e;return typeof window!="undefined"?e=window:typeof X!="undefined"?e=X:e=this,e.Cyclejs=e.Cyclejs||{},e=e.Cyclejs,e.adaptStream=e.adaptStream||function(t){return t},e}function Pi(e){Kr().adaptStream=e}Re.setAdapt=Pi;function Ci(e){return Kr().adaptStream(e)}var H=Re.adapt=Ci;function Ni(e,t){if(typeof e!="function")throw new Error("First argument given to isolate() must be a 'dataflowComponent' function");if(t===null)throw new Error("Second argument given to isolate() must not be null")}function Ii(e,t,r){var n={};return Object.keys(e).forEach(function(o){if(typeof t=="string"){n[o]=t;return}var i=t[o];if(typeof i!="undefined"){n[o]=i;return}var a=t["*"];if(typeof a!="undefined"){n[o]=a;return}n[o]=r}),n}function ki(e,t){var r={};for(var n in e){var o=e[n];e.hasOwnProperty(n)&&o&&t[n]!==null&&typeof o.isolateSource=="function"?r[n]=o.isolateSource(o,t[n]):e.hasOwnProperty(n)&&(r[n]=e[n])}return r}function Di(e,t,r){var n={};for(var o in t){var i=e[o],a=t[o];t.hasOwnProperty(o)&&i&&r[o]!==null&&typeof i.isolateSink=="function"?n[o]=H(i.isolateSink(P.fromObservable(a),r[o])):t.hasOwnProperty(o)&&(n[o]=t[o])}return n}var Xr=0;function sr(){return"cycle"+ ++Xr}function ut(e,t){t===void 0&&(t=sr()),Ni(e,t);var r=typeof t=="object"?sr():"",n=typeof t=="string"||typeof t=="object"?t:t.toString();return function(i){for(var a=[],c=1;c<arguments.length;c++)a[c-1]=arguments[c];var f=Ii(i,n,r),h=ki(i,f),v=e.apply(void 0,[h].concat(a)),m=Di(i,v,f);return m}}ut.reset=function(){return Xr=0};var ae={};Object.defineProperty(ae,"__esModule",{value:!0});ae.DropRepeatsOperator=void 0;var Ti=J,ye={},Zr=function(){function e(t,r){this.ins=t,this.type="dropRepeats",this.out=null,this.v=ye,this.isEq=r||function(n,o){return n===o}}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=null,this.v=ye},e.prototype._n=function(t){var r=this.out;if(!!r){var n=this.v;n!==ye&&this.isEq(t,n)||(this.v=t,r._n(t))}},e.prototype._e=function(t){var r=this.out;!r||r._e(t)},e.prototype._c=function(){var t=this.out;!t||t._c()},e}();ae.DropRepeatsOperator=Zr;function Fi(e){return e===void 0&&(e=void 0),function(r){return new Ti.Stream(new Zr(r,e))}}var ji=ae.default=Fi,Ce=globalThis&&globalThis.__assign||function(){return Ce=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Ce.apply(this,arguments)};function Mi(e,t,r){if(r===e[t])return e;var n=parseInt(t);return typeof r=="undefined"?e.filter(function(o,i){return i!==n}):e.map(function(o,i){return i===n?r:o})}function Qr(e){return typeof e=="string"||typeof e=="number"?function(r){if(typeof r!="undefined")return r[e]}:e.get}function Li(e){return typeof e=="string"||typeof e=="number"?function(r,n){var o,i;return Array.isArray(r)?Mi(r,e,n):typeof r=="undefined"?(o={},o[e]=n,o):Ce({},r,(i={},i[e]=n,i))}:e.set}function Ri(e,t){return e.select(t)}function Bi(e,t){var r=Qr(t),n=Li(t);return e.map(function(o){return function(a){var c=r(a),f=o(c);return c===f?a:n(a,f)}})}var Nt=function(){function e(t,r){this.isolateSource=Ri,this.isolateSink=Bi,this._stream=t.filter(function(n){return typeof n!="undefined"}).compose(ji()).remember(),this._name=r,this.stream=H(this._stream),this._stream._isCycleSource=r}return e.prototype.select=function(t){var r=Qr(t);return new e(this._stream.map(r),this._name)},e}(),Ui=function(){function e(t,r,n){this.ins=n,this.out=t,this.p=r}return e.prototype._n=function(t){this.p;var r=this.out;r!==null&&r._n(t)},e.prototype._e=function(t){var r=this.out;r!==null&&r._e(t)},e.prototype._c=function(){},e}(),Wi=function(){function e(t,r){this.type="pickMerge",this.ins=r,this.out=null,this.sel=t,this.ils=new Map,this.inst=null}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this);var t=this.ils;t.forEach(function(r,n){r.ins._remove(r),r.ins=null,r.out=null,t.delete(n)}),t.clear(),this.out=null,this.ils=new Map,this.inst=null},e.prototype._n=function(t){this.inst=t;for(var r=t.arr,n=this.ils,o=this.out,i=this.sel,a=r.length,c=0;c<a;++c){var f=r[c],h=f._key,v=P.fromObservable(f[i]||P.never());n.has(h)||(n.set(h,new Ui(o,this,v)),v._add(n.get(h)))}n.forEach(function(m,b){(!t.dict.has(b)||!t.dict.get(b))&&(m.ins._remove(m),m.ins=null,m.out=null,n.delete(b))})},e.prototype._e=function(t){var r=this.out;r!==null&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==null&&t._c()},e}();function Gi(e){return function(r){return new tt(new Wi(e,r))}}var zi=function(){function e(t,r,n,o){this.key=t,this.out=r,this.p=n,this.val=je,this.ins=o}return e.prototype._n=function(t){this.p;var r=this.out;this.val=t,r!==null&&this.p.up()},e.prototype._e=function(t){var r=this.out;r!==null&&r._e(t)},e.prototype._c=function(){},e}(),qi=function(){function e(t,r){this.type="combine",this.ins=r,this.sel=t,this.out=null,this.ils=new Map,this.inst=null}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this);var t=this.ils;t.forEach(function(r){r.ins._remove(r),r.ins=null,r.out=null,r.val=null}),t.clear(),this.out=null,this.ils=new Map,this.inst=null},e.prototype.up=function(){for(var t=this.inst.arr,r=t.length,n=this.ils,o=Array(r),i=0;i<r;++i){var a=t[i],c=a._key;if(!n.has(c))return;var f=n.get(c).val;if(f===je)return;o[i]=f}this.out._n(o)},e.prototype._n=function(t){this.inst=t;var r=t.arr,n=this.ils,o=this.out,i=this.sel,a=t.dict,c=r.length,f=!1;if(n.forEach(function(u,l){a.has(l)||(u.ins._remove(u),u.ins=null,u.out=null,u.val=null,n.delete(l),f=!0)}),c===0){o._n([]);return}for(var h=0;h<c;++h){var v=r[h],m=v._key;if(!v[i])throw new Error("pickCombine found an undefined child sink stream");var b=P.fromObservable(v[i]);n.has(m)||(n.set(m,new zi(m,o,this,b)),b._add(n.get(m)))}f&&this.up()},e.prototype._e=function(t){var r=this.out;r!==null&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==null&&t._c()},e}();function Hi(e){return function(r){return new tt(new qi(e,r))}}var ee=globalThis&&globalThis.__assign||function(){return ee=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},ee.apply(this,arguments)},Vi=function(){function e(t){this._instances$=t}return e.prototype.pickMerge=function(t){return H(this._instances$.compose(Gi(t)))},e.prototype.pickCombine=function(t){return H(this._instances$.compose(Hi(t)))},e}();function Ji(e){return{"*":null}}function Yi(e,t){return{get:function(r){if(typeof r!="undefined"){for(var n=0,o=r.length;n<o;++n)if(""+e(r[n],n)===t)return r[n];return}},set:function(r,n){return typeof r=="undefined"?[n]:typeof n=="undefined"?r.filter(function(o,i){return""+e(o,i)!==t}):r.map(function(o,i){return""+e(o,i)===t?n:o})}}}var Ki={get:function(e){return e},set:function(e,t){return t}};function Xi(e){return function(r){var n=e.channel||"state",o=e.itemKey,i=e.itemScope||Ji,a=P.fromObservable(r[n].stream),c=a.fold(function(f,h){var v,m,b,u,l=f.dict;if(Array.isArray(h)){for(var p=Array(h.length),d=new Set,y=0,w=h.length;y<w;++y){var g=""+(o?o(h[y],y):y);if(d.add(g),l.has(g))p[y]=l.get(g);else{var _=o?Yi(o,g):""+y,S=i(g),O=typeof S=="string"?(v={"*":S},v[n]=_,v):ee({},S,(m={},m[n]=_,m)),E=e.itemFactory?e.itemFactory(h[y],y):e.item,x=ut(E,O)(r);l.set(g,x),p[y]=x}p[y]._key=g}return l.forEach(function(C,D){d.has(D)||l.delete(D)}),d.clear(),{dict:l,arr:p}}else{l.clear();var g=""+(o?o(h,0):"this"),_=Ki,S=i(g),O=typeof S=="string"?(b={"*":S},b[n]=_,b):ee({},S,(u={},u[n]=_,u)),E=e.itemFactory?e.itemFactory(h,0):e.item,x=ut(E,O)(r);return l.set(g,x),{dict:l,arr:[x]}}},{dict:new Map,arr:[]});return e.collectSinks(new Vi(c))}}var tn={};Object.defineProperty(tn,"__esModule",{value:!0});var Zi=J,Qi=function(){function e(t){this.streams=t,this.type="concat",this.out=null,this.i=0}return e.prototype._start=function(t){this.out=t,this.streams[this.i]._add(this)},e.prototype._stop=function(){var t=this.streams;this.i<t.length&&t[this.i]._remove(this),this.i=0,this.out=null},e.prototype._n=function(t){var r=this.out;!r||r._n(t)},e.prototype._e=function(t){var r=this.out;!r||r._e(t)},e.prototype._c=function(){var t=this.out;if(!!t){var r=this.streams;r[this.i]._remove(this),++this.i<r.length?r[this.i]._add(this):t._c()}},e}();function ts(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new Zi.Stream(new Qi(e))}var en=tn.default=ts,rn={};Object.defineProperty(rn,"__esModule",{value:!0});function es(){return typeof queueMicrotask!="undefined"?queueMicrotask:typeof setImmediate!="undefined"?setImmediate:typeof process!="undefined"?process.nextTick:setTimeout}var nn=rn.default=es,me=nn();function rs(e,t){return t===void 0&&(t="state"),function(n){var o=P.create(),i=o.fold(function(h,v){return v(h)},void 0).drop(1),a=n;a[t]=new Nt(i,t);var c=e(a);if(c[t]){var f=en(P.fromObservable(c[t]),P.never());f.subscribe({next:function(h){return me(function(){return o._n(h)})},error:function(h){return me(function(){return o._e(h)})},complete:function(){return me(function(){return o._c()})}})}return c}}function ns(){var e;return typeof window!="undefined"?e=window:typeof global!="undefined"?e=global:e=this,e.Cyclejs=e.Cyclejs||{},e=e.Cyclejs,e.adaptStream=e.adaptStream||function(t){return t},e}function os(e){return ns().adaptStream(e)}function is(e){var t={};for(var r in e)e.hasOwnProperty(r)&&(t[r]=P.create());return t}function ss(e,t){var r={};for(var n in e)e.hasOwnProperty(n)&&(r[n]=e[n](t[n],n),r[n]&&typeof r[n]=="object"&&(r[n]._isCycleSource=n));return r}function as(e){for(var t in e)e.hasOwnProperty(t)&&e[t]&&typeof e[t].shamefullySendNext=="function"&&(e[t]=os(e[t]));return e}function us(e,t){var r=nn(),n=Object.keys(e).filter(function(c){return!!t[c]}),o={},i={};n.forEach(function(c){o[c]={_n:[],_e:[]},i[c]={next:function(f){return o[c]._n.push(f)},error:function(f){return o[c]._e.push(f)},complete:function(){}}});var a=n.map(function(c){return P.fromObservable(e[c]).subscribe(i[c])});return n.forEach(function(c){var f=t[c],h=function(m){r(function(){return f._n(m)})},v=function(m){r(function(){(console.error||console.log)(m),f._e(m)})};o[c]._n.forEach(h),o[c]._e.forEach(v),i[c].next=h,i[c].error=v,i[c]._n=h,i[c]._e=v}),o=null,function(){a.forEach(function(f){return f.unsubscribe()})}}function cs(e){Object.keys(e).forEach(function(t){return e[t]._c()})}function ls(e){for(var t in e)e.hasOwnProperty(t)&&e[t]&&e[t].dispose&&e[t].dispose()}function on(e){return Object.keys(e).length===0}function fs(e,t){if(typeof e!="function")throw new Error("First argument given to Cycle must be the 'main' function.");if(typeof t!="object"||t===null)throw new Error("Second argument given to Cycle must be an object with driver functions as properties.");if(on(t))throw new Error("Second argument given to Cycle must be an object with at least one driver function declared as a property.");var r=ps(t),n=e(r.sources);typeof window!="undefined"&&(window.Cyclejs=window.Cyclejs||{},window.Cyclejs.sinks=n);function o(){var i=r.run(n);return function(){i(),r.dispose()}}return{sinks:n,sources:r.sources,run:o}}function ps(e){if(typeof e!="object"||e===null)throw new Error("Argument given to setupReusable must be an object with driver functions as properties.");if(on(e))throw new Error("Argument given to setupReusable must be an object with at least one driver function declared as a property.");var t=is(e),r=ss(e,t),n=as(r);function o(a){return us(a,t)}function i(){ls(n),cs(t)}return{sources:n,run:o,dispose:i}}function hs(e,t){var r=fs(e,t);return typeof window!="undefined"&&window.CyclejsDevTool_startGraphSerializer&&window.CyclejsDevTool_startGraphSerializer(r.sinks),r.run()}function ds(e,t){return document.createElement(e,t)}function ys(e,t,r){return document.createElementNS(e,t,r)}function ms(){return ht(document.createDocumentFragment())}function vs(e){return document.createTextNode(e)}function gs(e){return document.createComment(e)}function _s(e,t,r){if(et(e)){let n=e;for(;n&&et(n);)n=ht(n).parent;e=n!=null?n:e}et(t)&&(t=ht(t,e)),r&&et(r)&&(r=ht(r).firstChildNode),e.insertBefore(t,r)}function bs(e,t){e.removeChild(t)}function ws(e,t){et(t)&&(t=ht(t,e)),e.appendChild(t)}function sn(e){if(et(e)){for(;e&&et(e);)e=ht(e).parent;return e!=null?e:null}return e.parentNode}function Ss(e){var t;if(et(e)){const r=ht(e),n=sn(r);if(n&&r.lastChildNode){const o=Array.from(n.childNodes),i=o.indexOf(r.lastChildNode);return(t=o[i+1])!==null&&t!==void 0?t:null}return null}return e.nextSibling}function Os(e){return e.tagName}function As(e,t){e.textContent=t}function $s(e){return e.textContent}function xs(e){return e.nodeType===1}function Es(e){return e.nodeType===3}function Ps(e){return e.nodeType===8}function et(e){return e.nodeType===11}function ht(e,t){var r,n,o;const i=e;return(r=i.parent)!==null&&r!==void 0||(i.parent=t!=null?t:null),(n=i.firstChildNode)!==null&&n!==void 0||(i.firstChildNode=e.firstChild),(o=i.lastChildNode)!==null&&o!==void 0||(i.lastChildNode=e.lastChild),i}const an={createElement:ds,createElementNS:ys,createTextNode:vs,createDocumentFragment:ms,createComment:gs,insertBefore:_s,removeChild:bs,appendChild:ws,parentNode:sn,nextSibling:Ss,tagName:Os,setTextContent:As,getTextContent:$s,isElement:xs,isText:Es,isComment:Ps,isDocumentFragment:et};function Q(e,t,r,n,o){const i=t===void 0?void 0:t.key;return{sel:e,data:t,children:r,text:n,elm:o,key:i}}const re=Array.isArray;function Vt(e){return typeof e=="string"||typeof e=="number"||e instanceof String||e instanceof Number}function Wt(e){return e===void 0}function q(e){return e!==void 0}const ve=Q("",{},[],void 0,void 0);function Pt(e,t){var r,n;const o=e.key===t.key,i=((r=e.data)===null||r===void 0?void 0:r.is)===((n=t.data)===null||n===void 0?void 0:n.is),a=e.sel===t.sel,c=!e.sel&&e.sel===t.sel?typeof e.text==typeof t.text:!0;return a&&o&&i&&c}function Cs(){throw new Error("The document fragment is not supported on this platform.")}function Ns(e,t){return e.isElement(t)}function Is(e,t){return e.isDocumentFragment(t)}function ks(e,t,r){var n;const o={};for(let i=t;i<=r;++i){const a=(n=e[i])===null||n===void 0?void 0:n.key;a!==void 0&&(o[a]=i)}return o}const Ds=["create","update","remove","destroy","pre","post"];function Ts(e,t,r){const n={create:[],update:[],remove:[],destroy:[],pre:[],post:[]},o=t!==void 0?t:an;for(const l of Ds)for(const p of e){const d=p[l];d!==void 0&&n[l].push(d)}function i(l){const p=l.id?"#"+l.id:"",d=l.getAttribute("class"),y=d?"."+d.split(" ").join("."):"";return Q(o.tagName(l).toLowerCase()+p+y,{},[],void 0,l)}function a(l){return Q(void 0,{},[],void 0,l)}function c(l,p){return function(){if(--p===0){const y=o.parentNode(l);y!==null&&o.removeChild(y,l)}}}function f(l,p){var d,y,w,g;let _,S=l.data;if(S!==void 0){const x=(d=S.hook)===null||d===void 0?void 0:d.init;q(x)&&(x(l),S=l.data)}const O=l.children,E=l.sel;if(E==="!")Wt(l.text)&&(l.text=""),l.elm=o.createComment(l.text);else if(E==="")l.elm=o.createTextNode(l.text);else if(E!==void 0){const x=E.indexOf("#"),C=E.indexOf(".",x),D=x>0?x:E.length,T=C>0?C:E.length,M=x!==-1||C!==-1?E.slice(0,Math.min(D,T)):E,j=l.elm=q(S)&&q(_=S.ns)?o.createElementNS(_,M,S):o.createElement(M,S);for(D<T&&j.setAttribute("id",E.slice(D+1,T)),C>0&&j.setAttribute("class",E.slice(T+1).replace(/\./g," ")),_=0;_<n.create.length;++_)n.create[_](ve,l);if(Vt(l.text)&&(!re(O)||O.length===0)&&o.appendChild(j,o.createTextNode(l.text)),re(O))for(_=0;_<O.length;++_){const V=O[_];V!=null&&o.appendChild(j,f(V,p))}const B=l.data.hook;q(B)&&((y=B.create)===null||y===void 0||y.call(B,ve,l),B.insert&&p.push(l))}else if(((w=r==null?void 0:r.experimental)===null||w===void 0?void 0:w.fragments)&&l.children){for(l.elm=((g=o.createDocumentFragment)!==null&&g!==void 0?g:Cs)(),_=0;_<n.create.length;++_)n.create[_](ve,l);for(_=0;_<l.children.length;++_){const x=l.children[_];x!=null&&o.appendChild(l.elm,f(x,p))}}else l.elm=o.createTextNode(l.text);return l.elm}function h(l,p,d,y,w,g){for(;y<=w;++y){const _=d[y];_!=null&&o.insertBefore(l,f(_,g),p)}}function v(l){var p,d;const y=l.data;if(y!==void 0){(d=(p=y==null?void 0:y.hook)===null||p===void 0?void 0:p.destroy)===null||d===void 0||d.call(p,l);for(let w=0;w<n.destroy.length;++w)n.destroy[w](l);if(l.children!==void 0)for(let w=0;w<l.children.length;++w){const g=l.children[w];g!=null&&typeof g!="string"&&v(g)}}}function m(l,p,d,y){for(var w,g;d<=y;++d){let _,S;const O=p[d];if(O!=null)if(q(O.sel)){v(O),_=n.remove.length+1,S=c(O.elm,_);for(let x=0;x<n.remove.length;++x)n.remove[x](O,S);const E=(g=(w=O==null?void 0:O.data)===null||w===void 0?void 0:w.hook)===null||g===void 0?void 0:g.remove;q(E)?E(O,S):S()}else O.children?(v(O),m(l,O.children,0,O.children.length-1)):o.removeChild(l,O.elm)}}function b(l,p,d,y){let w=0,g=0,_=p.length-1,S=p[0],O=p[_],E=d.length-1,x=d[0],C=d[E],D,T,M,j;for(;w<=_&&g<=E;)S==null?S=p[++w]:O==null?O=p[--_]:x==null?x=d[++g]:C==null?C=d[--E]:Pt(S,x)?(u(S,x,y),S=p[++w],x=d[++g]):Pt(O,C)?(u(O,C,y),O=p[--_],C=d[--E]):Pt(S,C)?(u(S,C,y),o.insertBefore(l,S.elm,o.nextSibling(O.elm)),S=p[++w],C=d[--E]):Pt(O,x)?(u(O,x,y),o.insertBefore(l,O.elm,S.elm),O=p[--_],x=d[++g]):(D===void 0&&(D=ks(p,w,_)),T=D[x.key],Wt(T)?(o.insertBefore(l,f(x,y),S.elm),x=d[++g]):Wt(D[C.key])?(o.insertBefore(l,f(C,y),o.nextSibling(O.elm)),C=d[--E]):(M=p[T],M.sel!==x.sel?o.insertBefore(l,f(x,y),S.elm):(u(M,x,y),p[T]=void 0,o.insertBefore(l,M.elm,S.elm)),x=d[++g]));g<=E&&(j=d[E+1]==null?null:d[E+1].elm,h(l,j,d,g,E,y)),w<=_&&m(l,p,w,_)}function u(l,p,d){var y,w,g,_,S,O,E,x;const C=(y=p.data)===null||y===void 0?void 0:y.hook;(w=C==null?void 0:C.prepatch)===null||w===void 0||w.call(C,l,p);const D=p.elm=l.elm;if(l===p)return;if(p.data!==void 0||q(p.text)&&p.text!==l.text){(g=p.data)!==null&&g!==void 0||(p.data={}),(_=l.data)!==null&&_!==void 0||(l.data={});for(let j=0;j<n.update.length;++j)n.update[j](l,p);(E=(O=(S=p.data)===null||S===void 0?void 0:S.hook)===null||O===void 0?void 0:O.update)===null||E===void 0||E.call(O,l,p)}const T=l.children,M=p.children;Wt(p.text)?q(T)&&q(M)?T!==M&&b(D,T,M,d):q(M)?(q(l.text)&&o.setTextContent(D,""),h(D,null,M,0,M.length-1,d)):q(T)?m(D,T,0,T.length-1):q(l.text)&&o.setTextContent(D,""):l.text!==p.text&&(q(T)&&m(D,T,0,T.length-1),o.setTextContent(D,p.text)),(x=C==null?void 0:C.postpatch)===null||x===void 0||x.call(C,l,p)}return function(p,d){let y,w,g;const _=[];for(y=0;y<n.pre.length;++y)n.pre[y]();for(Ns(o,p)?p=i(p):Is(o,p)&&(p=a(p)),Pt(p,d)?u(p,d,_):(w=p.elm,g=o.parentNode(w),f(d,_),g!==null&&(o.insertBefore(g,d.elm,o.nextSibling(w)),m(g,[p],0,0))),y=0;y<_.length;++y)_[y].data.hook.insert(_[y]);for(y=0;y<n.post.length;++y)n.post[y]();return d}}function Be(e,t,r){if(e.ns="http://www.w3.org/2000/svg",r!=="foreignObject"&&t!==void 0)for(let n=0;n<t.length;++n){const o=t[n];if(typeof o=="string")continue;const i=o.data;i!==void 0&&Be(i,o.children,o.sel)}}function nt(e,t,r){let n={},o,i,a;if(r!==void 0?(t!==null&&(n=t),re(r)?o=r:Vt(r)?i=r.toString():r&&r.sel&&(o=[r])):t!=null&&(re(t)?o=t:Vt(t)?i=t.toString():t&&t.sel?o=[t]:n=t),o!==void 0)for(a=0;a<o.length;++a)Vt(o[a])&&(o[a]=Q(void 0,void 0,void 0,o[a],void 0));return e.startsWith("svg")&&(e.length===3||e[3]==="."||e[3]==="#")&&Be(n,o,e),Q(e,n,o,i,void 0)}function Ne(e,t){const r=t!==void 0?t:an;let n;if(r.isElement(e)){const o=e.id?"#"+e.id:"",i=e.getAttribute("class"),a=i?"."+i.split(" ").join("."):"",c=r.tagName(e).toLowerCase()+o+a,f={},h={},v={},m=[];let b,u,l;const p=e.attributes,d=e.childNodes;for(u=0,l=p.length;u<l;u++)b=p[u].nodeName,b.startsWith("data-")?h[b.slice(5)]=p[u].nodeValue||"":b!=="id"&&b!=="class"&&(f[b]=p[u].nodeValue);for(u=0,l=d.length;u<l;u++)m.push(Ne(d[u],t));return Object.keys(f).length>0&&(v.attrs=f),Object.keys(h).length>0&&(v.dataset=h),c.startsWith("svg")&&(c.length===3||c[3]==="."||c[3]==="#")&&Be(v,m,c),Q(c,v,m,void 0,e)}else return r.isText(e)?(n=r.getTextContent(e),Q(void 0,void 0,void 0,n,e)):r.isComment(e)?(n=r.getTextContent(e),Q("!",{},[],n,e)):Q("",{},[],void 0,e)}const Fs="http://www.w3.org/1999/xlink",js="http://www.w3.org/2000/xmlns/",Ms="http://www.w3.org/XML/1998/namespace",ar=58,Ls=120,Rs=109;function ur(e,t){let r;const n=t.elm;let o=e.data.attrs,i=t.data.attrs;if(!(!o&&!i)&&o!==i){o=o||{},i=i||{};for(r in i){const a=i[r];o[r]!==a&&(a===!0?n.setAttribute(r,""):a===!1?n.removeAttribute(r):r.charCodeAt(0)!==Ls?n.setAttribute(r,a):r.charCodeAt(3)===ar?n.setAttributeNS(Ms,r,a):r.charCodeAt(5)===ar?r.charCodeAt(1)===Rs?n.setAttributeNS(js,r,a):n.setAttributeNS(Fs,r,a):n.setAttribute(r,a))}for(r in o)r in i||n.removeAttribute(r)}}const Bs={create:ur,update:ur};function cr(e,t){let r,n;const o=t.elm;let i=e.data.class,a=t.data.class;if(!(!i&&!a)&&i!==a){i=i||{},a=a||{};for(n in i)i[n]&&!Object.prototype.hasOwnProperty.call(a,n)&&o.classList.remove(n);for(n in a)r=a[n],r!==i[n]&&o.classList[r?"add":"remove"](n)}}const Us={create:cr,update:cr},lr=/[A-Z]/g;function fr(e,t){const r=t.elm;let n=e.data.dataset,o=t.data.dataset,i;if(!n&&!o||n===o)return;n=n||{},o=o||{};const a=r.dataset;for(i in n)i in o||(a?i in a&&delete a[i]:r.removeAttribute("data-"+i.replace(lr,"-$&").toLowerCase()));for(i in o)n[i]!==o[i]&&(a?a[i]=o[i]:r.setAttribute("data-"+i.replace(lr,"-$&").toLowerCase(),o[i]))}const Ws={create:fr,update:fr};function pr(e,t){let r,n,o;const i=t.elm;let a=e.data.props,c=t.data.props;if(!(!a&&!c)&&a!==c){a=a||{},c=c||{};for(r in c)n=c[r],o=a[r],o!==n&&(r!=="value"||i[r]!==n)&&(i[r]=n)}}const Gs={create:pr,update:pr},hr=typeof(window==null?void 0:window.requestAnimationFrame)=="function"?window.requestAnimationFrame.bind(window):setTimeout,zs=function(e){hr(function(){hr(e)})};let Ie=!1;function qs(e,t,r){zs(function(){e[t]=r})}function dr(e,t){let r,n;const o=t.elm;let i=e.data.style,a=t.data.style;if(!i&&!a||i===a)return;i=i||{},a=a||{};const c="delayed"in i;for(n in i)n in a||(n[0]==="-"&&n[1]==="-"?o.style.removeProperty(n):o.style[n]="");for(n in a)if(r=a[n],n==="delayed"&&a.delayed)for(const f in a.delayed)r=a.delayed[f],(!c||r!==i.delayed[f])&&qs(o.style,f,r);else n!=="remove"&&r!==i[n]&&(n[0]==="-"&&n[1]==="-"?o.style.setProperty(n,r):o.style[n]=r)}function Hs(e){let t,r;const n=e.elm,o=e.data.style;if(!(!o||!(t=o.destroy)))for(r in t)n.style[r]=t[r]}function Vs(e,t){const r=e.data.style;if(!r||!r.remove){t();return}Ie||(e.elm.offsetLeft,Ie=!0);let n;const o=e.elm;let i=0;const a=r.remove;let c=0;const f=[];for(n in a)f.push(n),o.style[n]=a[n];const v=getComputedStyle(o)["transition-property"].split(", ");for(;i<v.length;++i)f.indexOf(v[i])!==-1&&c++;o.addEventListener("transitionend",function(m){m.target===o&&--c,c===0&&t()})}function Js(){Ie=!1}const Ys={pre:Js,create:dr,update:dr,destroy:Hs,remove:Vs};function ne(e,t,r,n,o){r===void 0&&(r=!1),n===void 0&&(n=!1),o===void 0&&(o=!1);var i=null;return tt.create({start:function(c){n?i=function(h){cn(h,n),c.next(h)}:i=function(h){c.next(h)},e.addEventListener(t,i,{capture:r,passive:o})},stop:function(){e.removeEventListener(t,i,r),i=null}})}function un(e,t){for(var r=Object.keys(e),n=r.length,o=0;o<n;o++){var i=r[o];if(typeof e[i]=="object"&&typeof t[i]=="object"){if(!un(e[i],t[i]))return!1}else if(e[i]!==t[i])return!1}return!0}function cn(e,t){if(t)if(typeof t=="boolean")e.preventDefault();else if(Ks(t))t(e)&&e.preventDefault();else if(typeof t=="object")un(t,e)&&e.preventDefault();else throw new Error("preventDefault has to be either a boolean, predicate function or object")}function Ks(e){return typeof e=="function"}var Xs=function(){function e(t){this._name=t}return e.prototype.select=function(t){return this},e.prototype.elements=function(){var t=H(P.of([document]));return t._isCycleSource=this._name,t},e.prototype.element=function(){var t=H(P.of(document));return t._isCycleSource=this._name,t},e.prototype.events=function(t,r,n){r===void 0&&(r={});var o;o=ne(document,t,r.useCapture,r.preventDefault);var i=H(o);return i._isCycleSource=this._name,i},e}(),Zs=function(){function e(t){this._name=t}return e.prototype.select=function(t){return this},e.prototype.elements=function(){var t=H(P.of([document.body]));return t._isCycleSource=this._name,t},e.prototype.element=function(){var t=H(P.of(document.body));return t._isCycleSource=this._name,t},e.prototype.events=function(t,r,n){r===void 0&&(r={});var o;o=ne(document.body,t,r.useCapture,r.preventDefault);var i=H(o);return i._isCycleSource=this._name,i},e}();function Qs(e){var t=1,r=11;return typeof HTMLElement=="object"?e instanceof HTMLElement||e instanceof DocumentFragment:e&&typeof e=="object"&&e!==null&&(e.nodeType===t||e.nodeType===r)&&typeof e.nodeName=="string"}function ta(e){return e.length>1&&(e[0]==="."||e[0]==="#")}function ea(e){return e.nodeType===11}function ra(e){if(typeof e!="string"&&!Qs(e))throw new Error("Given container is not a DOM element neither a selector string.")}function na(e){var t=typeof e=="string"?document.querySelector(e):e;if(typeof e=="string"&&t===null)throw new Error("Cannot render into unknown element `"+e+"`");return t}function ln(e){for(var t="",r=e.length-1;r>=0&&e[r].type==="selector";r--)t=e[r].scope+" "+t;return t.trim()}function Ue(e,t){if(!Array.isArray(e)||!Array.isArray(t)||e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==t[r].type||e[r].scope!==t[r].scope)return!1;return!0}var fn=function(){function e(t,r){this.namespace=t,this.isolateModule=r,this._namespace=t.filter(function(n){return n.type!=="selector"})}return e.prototype.isDirectlyInScope=function(t){var r=this.isolateModule.getNamespace(t);if(!r||this._namespace.length>r.length||!Ue(this._namespace,r.slice(0,this._namespace.length)))return!1;for(var n=this._namespace.length;n<r.length;n++)if(r[n].type==="total")return!1;return!0},e}();function oa(e){return Array.prototype.slice.call(e)}var pn=function(){function e(t,r){this.namespace=t,this.isolateModule=r}return e.prototype.call=function(){var t=this.namespace,r=ln(t),n=new fn(t,this.isolateModule),o=this.isolateModule.getElement(t.filter(function(i){return i.type!=="selector"}));return o===void 0?[]:r===""?[o]:oa(o.querySelectorAll(r)).filter(n.isDirectlyInScope,n).concat(o.matches(r)?[o]:[])},e}(),Tt=globalThis&&globalThis.__assign||function(){return Tt=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Tt.apply(this,arguments)};function ia(e){return function(t,r){return r===":root"?t:t.map(function(n){if(!n)return n;var o=hn(r),i=Tt({},n,{data:Tt({},n.data,{isolate:!n.data||!Array.isArray(n.data.isolate)?e.concat([o]):n.data.isolate})});return Tt({},i,{key:i.key!==void 0?i.key:JSON.stringify(i.data.isolate)})})}}function hn(e){return{type:ta(e)?"sibling":"total",scope:e}}var sa=function(){function e(t,r,n,o,i,a){n===void 0&&(n=[]),this._rootElement$=t,this._sanitation$=r,this._namespace=n,this._isolateModule=o,this._eventDelegator=i,this._name=a,this.isolateSource=function(c,f){return new e(c._rootElement$,c._sanitation$,c._namespace.concat(hn(f)),c._isolateModule,c._eventDelegator,c._name)},this.isolateSink=ia(this._namespace)}return e.prototype._elements=function(){if(this._namespace.length===0)return this._rootElement$.map(function(r){return[r]});var t=new pn(this._namespace,this._isolateModule);return this._rootElement$.map(function(){return t.call()})},e.prototype.elements=function(){var t=H(this._elements().remember());return t._isCycleSource=this._name,t},e.prototype.element=function(){var t=H(this._elements().filter(function(r){return r.length>0}).map(function(r){return r[0]}).remember());return t._isCycleSource=this._name,t},Object.defineProperty(e.prototype,"namespace",{get:function(){return this._namespace},enumerable:!0,configurable:!0}),e.prototype.select=function(t){if(typeof t!="string")throw new Error("DOM driver's select() expects the argument to be a string as a CSS selector");if(t==="document")return new Xs(this._name);if(t==="body")return new Zs(this._name);var r=t===":root"?[]:this._namespace.concat({type:"selector",scope:t.trim()});return new e(this._rootElement$,this._sanitation$,r,this._isolateModule,this._eventDelegator,this._name)},e.prototype.events=function(t,r,n){if(r===void 0&&(r={}),typeof t!="string")throw new Error("DOM driver's events() expects argument to be a string representing the event type to listen for.");var o=this._eventDelegator.addEventListener(t,this._namespace,r,n),i=H(o);return i._isCycleSource=this._name,i},e.prototype.dispose=function(){this._sanitation$.shamefullySendNext(null)},e}(),$t={},aa=X&&X.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),o=0,t=0;t<r;t++)for(var i=arguments[t],a=0,c=i.length;a<c;a++,o++)n[o]=i[a];return n};Object.defineProperty($t,"__esModule",{value:!0});$t.SampleCombineOperator=$t.SampleCombineListener=void 0;var ua=J,ot={},dn=function(){function e(t,r){this.i=t,this.p=r,r.ils[t]=this}return e.prototype._n=function(t){var r=this.p;r.out!==ot&&r.up(t,this.i)},e.prototype._e=function(t){this.p._e(t)},e.prototype._c=function(){this.p.down(this.i,this)},e}();$t.SampleCombineListener=dn;var yn=function(){function e(t,r){this.type="sampleCombine",this.ins=t,this.others=r,this.out=ot,this.ils=[],this.Nn=0,this.vals=[]}return e.prototype._start=function(t){this.out=t;for(var r=this.others,n=this.Nn=r.length,o=this.vals=new Array(n),i=0;i<n;i++)o[i]=ot,r[i]._add(new dn(i,this));this.ins._add(this)},e.prototype._stop=function(){var t=this.others,r=t.length,n=this.ils;this.ins._remove(this);for(var o=0;o<r;o++)t[o]._remove(n[o]);this.out=ot,this.vals=[],this.ils=[]},e.prototype._n=function(t){var r=this.out;r!==ot&&(this.Nn>0||r._n(aa([t],this.vals)))},e.prototype._e=function(t){var r=this.out;r!==ot&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==ot&&t._c()},e.prototype.up=function(t,r){var n=this.vals[r];this.Nn>0&&n===ot&&this.Nn--,this.vals[r]=t},e.prototype.down=function(t,r){this.others[t]._remove(r)},e}();$t.SampleCombineOperator=yn;var mn;mn=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return function(o){return new ua.Stream(new yn(o,t))}};var ca=$t.default=mn;globalThis&&globalThis.__assign;function vn(e){if(!e.sel)return{tagName:"",id:"",className:""};var t=e.sel,r=t.indexOf("#"),n=t.indexOf(".",r),o=r>0?r:t.length,i=n>0?n:t.length,a=r!==-1||n!==-1?t.slice(0,Math.min(o,i)):t,c=o<i?t.slice(o+1,i):void 0,f=n>0?t.slice(i+1).replace(/\./g," "):void 0;return{tagName:a,id:c,className:f}}function la(e){var t=vn(e).className,r=t===void 0?"":t;if(!e.data)return r;var n=e.data,o=n.class,i=n.props;if(o){var a=Object.keys(o).filter(function(c){return o[c]});r+=" "+a.join(" ")}return i&&i.className&&(r+=" "+i.className),r&&r.trim()}var It;typeof self!="undefined"?It=self:typeof window!="undefined"?It=window:typeof global!="undefined"?It=global:It=Function("return this")();var yr=It.Symbol;typeof yr=="function"&&yr("parent");var fa=function(){function e(t){this.rootElement=t}return e.prototype.call=function(t){if(ea(this.rootElement))return this.wrapDocFrag(t===null?[]:[t]);if(t===null)return this.wrap([]);var r=vn(t),n=r.tagName,o=r.id,i=la(t),a=t.data||{},c=a.props||{},f=c.id,h=f===void 0?o:f,v=typeof h=="string"&&h.toUpperCase()===this.rootElement.id.toUpperCase()&&n.toUpperCase()===this.rootElement.tagName.toUpperCase()&&i.toUpperCase()===this.rootElement.className.toUpperCase();return v?t:this.wrap([t])},e.prototype.wrapDocFrag=function(t){return Q("",{isolate:[]},t,void 0,this.rootElement)},e.prototype.wrap=function(t){var r=this.rootElement,n=r.tagName,o=r.id,i=r.className,a=o?"#"+o:"",c=i?"."+i.split(" ").join("."):"",f=nt(""+n.toLowerCase()+a+c,{},t);return f.data=f.data||{},f.data.isolate=f.data.isolate||[],f},e}(),pa=[Ys,Us,Gs,Bs,Ws],gn=function(){function e(t){this.mapper=t,this.tree=[void 0,{}]}return e.prototype.set=function(t,r,n){for(var o=this.tree,i=n!==void 0?n:t.length,a=0;a<i;a++){var c=this.mapper(t[a]),f=o[1][c];f||(f=[void 0,{}],o[1][c]=f),o=f}o[0]=r},e.prototype.getDefault=function(t,r,n){return this.get(t,r,n)},e.prototype.get=function(t,r,n){for(var o=this.tree,i=n!==void 0?n:t.length,a=0;a<i;a++){var c=this.mapper(t[a]),f=o[1][c];if(!f)if(r)f=[void 0,{}],o[1][c]=f;else return;o=f}return r&&!o[0]&&(o[0]=r()),o[0]},e.prototype.delete=function(t){for(var r=this.tree,n=0;n<t.length-1;n++){var o=r[1][this.mapper(t[n])];if(!o)return;r=o}delete r[1][this.mapper(t[t.length-1])]},e}(),ha=function(){function e(){this.namespaceTree=new gn(function(t){return t.scope}),this.namespaceByElement=new Map,this.vnodesBeingRemoved=[]}return e.prototype.setEventDelegator=function(t){this.eventDelegator=t},e.prototype.insertElement=function(t,r){this.namespaceByElement.set(r,t),this.namespaceTree.set(t,r)},e.prototype.removeElement=function(t){this.namespaceByElement.delete(t);var r=this.getNamespace(t);r&&this.namespaceTree.delete(r)},e.prototype.getElement=function(t,r){return this.namespaceTree.get(t,void 0,r)},e.prototype.getRootElement=function(t){if(this.namespaceByElement.has(t))return t;for(var r=t;!this.namespaceByElement.has(r);)if(r=r.parentNode,r){if(r.tagName==="HTML")throw new Error("No root element found, this should not happen at all")}else return;return r},e.prototype.getNamespace=function(t){var r=this.getRootElement(t);if(!!r)return this.namespaceByElement.get(r)},e.prototype.createModule=function(){var t=this;return{create:function(r,n){var o=n.elm,i=n.data,a=i===void 0?{}:i,c=a.isolate;Array.isArray(c)&&t.insertElement(c,o)},update:function(r,n){var o=r.elm,i=r.data,a=i===void 0?{}:i,c=n.elm,f=n.data,h=f===void 0?{}:f,v=a.isolate,m=h.isolate;Ue(v,m)||Array.isArray(v)&&t.removeElement(o),Array.isArray(m)&&t.insertElement(m,c)},destroy:function(r){t.vnodesBeingRemoved.push(r)},remove:function(r,n){t.vnodesBeingRemoved.push(r),n()},post:function(){for(var r=t.vnodesBeingRemoved,n=r.length-1;n>=0;n--){var o=r[n],i=o.data!==void 0?o.data.isolation:void 0;i!==void 0&&t.removeElement(i),t.eventDelegator.removeElement(o.elm,i)}t.vnodesBeingRemoved=[]}}},e}(),da=function(){function e(){this.arr=[],this.prios=[]}return e.prototype.add=function(t,r){for(var n=0;n<this.arr.length;n++)if(this.prios[n]<r){this.arr.splice(n,0,t),this.prios.splice(n,0,r);return}this.arr.push(t),this.prios.push(r)},e.prototype.forEach=function(t){for(var r=0;r<this.arr.length;r++)t(this.arr[r],r,this.arr)},e.prototype.delete=function(t){for(var r=0;r<this.arr.length;r++)if(this.arr[r]===t){this.arr.splice(r,1),this.prios.splice(r,1);return}},e}(),oe=globalThis&&globalThis.__assign||function(){return oe=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},oe.apply(this,arguments)},ya=["blur","canplay","canplaythrough","durationchange","emptied","ended","focus","load","loadeddata","loadedmetadata","mouseenter","mouseleave","pause","play","playing","ratechange","reset","scroll","seeked","seeking","stalled","submit","suspend","timeupdate","unload","volumechange","waiting"],ma=function(){function e(t,r){var n=this;this.rootElement$=t,this.isolateModule=r,this.virtualListeners=new gn(function(o){return o.scope}),this.nonBubblingListenersToAdd=new Set,this.virtualNonBubblingListener=[],this.isolateModule.setEventDelegator(this),this.domListeners=new Map,this.domListenersToAdd=new Map,this.nonBubblingListeners=new Map,t.addListener({next:function(o){n.origin!==o&&(n.origin=o,n.resetEventListeners(),n.domListenersToAdd.forEach(function(i,a){return n.setupDOMListener(a,i)}),n.domListenersToAdd.clear()),n.nonBubblingListenersToAdd.forEach(function(i){n.setupNonBubblingListener(i)})}})}return e.prototype.addEventListener=function(t,r,n,o){var i=P.never(),a,c=new fn(r,this.isolateModule),f=o===void 0?ya.indexOf(t)===-1:o;if(f)return this.domListeners.has(t)||this.setupDOMListener(t,!!n.passive),a=this.insertListener(i,c,t,n),i;var h=[];this.nonBubblingListenersToAdd.forEach(function(S){return h.push(S)});for(var v=void 0,m=0,b=h.length,u=function(S){S[0];var O=S[1],E=S[2];return S[3],t===O&&Ue(E.namespace,r)};!v&&m<b;){var l=h[m];v=u(l)?l:v,m++}var p=v,d;if(p){var w=p[0];d=w}else{var y=new pn(r,this.isolateModule);a=this.insertListener(i,c,t,n),p=[i,t,y,a],d=i,this.nonBubblingListenersToAdd.add(p),this.setupNonBubblingListener(p)}var g=this,_=null;return P.create({start:function(S){_=d.subscribe(S)},stop:function(){p[0];var S=p[1],O=p[2];p[3];var E=O.call();E.forEach(function(x){var C=x.subs;C&&C[S]&&(C[S].unsubscribe(),delete C[S])}),g.nonBubblingListenersToAdd.delete(p),_.unsubscribe()}})},e.prototype.removeElement=function(t,r){r!==void 0&&this.virtualListeners.delete(r);var n=[];this.nonBubblingListeners.forEach(function(a,c){if(a.has(t)){n.push([c,t]);var f=t.subs;f&&Object.keys(f).forEach(function(h){f[h].unsubscribe()})}});for(var o=0;o<n.length;o++){var i=this.nonBubblingListeners.get(n[o][0]);!i||(i.delete(n[o][1]),i.size===0?this.nonBubblingListeners.delete(n[o][0]):this.nonBubblingListeners.set(n[o][0],i))}},e.prototype.insertListener=function(t,r,n,o){var i=[],a=r._namespace,c=a.length;do i.push(this.getVirtualListeners(n,a,!0,c)),c--;while(c>=0&&a[c].type!=="total");for(var f=oe({},o,{scopeChecker:r,subject:t,bubbles:!!o.bubbles,useCapture:!!o.useCapture,passive:!!o.passive}),h=0;h<i.length;h++)i[h].add(f,a.length);return f},e.prototype.getVirtualListeners=function(t,r,n,o){n===void 0&&(n=!1);var i=o!==void 0?o:r.length;if(!n)for(var a=i-1;a>=0;a--){if(r[a].type==="total"){i=a+1;break}i=a}var c=this.virtualListeners.getDefault(r,function(){return new Map},i);return c.has(t)||c.set(t,new da),c.get(t)},e.prototype.setupDOMListener=function(t,r){var n=this;if(this.origin){var o=ne(this.origin,t,!1,!1,r).subscribe({next:function(i){return n.onEvent(t,i,r)},error:function(){},complete:function(){}});this.domListeners.set(t,{sub:o,passive:r})}else this.domListenersToAdd.set(t,r)},e.prototype.setupNonBubblingListener=function(t){t[0];var r=t[1],n=t[2],o=t[3];if(!!this.origin){var i=n.call();if(i.length){var a=this;i.forEach(function(c){var f,h=c.subs;if(!h||!h[r]){var v=ne(c,r,!1,!1,o.passive).subscribe({next:function(b){return a.onEvent(r,b,!!o.passive,!1)},error:function(){},complete:function(){}});a.nonBubblingListeners.has(r)||a.nonBubblingListeners.set(r,new Map);var m=a.nonBubblingListeners.get(r);if(!m)return;m.set(c,{sub:v,destination:o}),c.subs=oe({},h,(f={},f[r]=v,f))}})}}},e.prototype.resetEventListeners=function(){for(var t=this.domListeners.entries(),r=t.next();!r.done;){var n=r.value,o=n[0],i=n[1],a=i.sub,c=i.passive;a.unsubscribe(),this.setupDOMListener(o,c),r=t.next()}},e.prototype.putNonBubblingListener=function(t,r,n,o){var i=this.nonBubblingListeners.get(t);if(!!i){var a=i.get(r);a&&a.destination.passive===o&&a.destination.useCapture===n&&(this.virtualNonBubblingListener[0]=a.destination)}},e.prototype.onEvent=function(t,r,n,o){o===void 0&&(o=!0);var i=this.patchEvent(r),a=this.isolateModule.getRootElement(r.target);if(o){var c=this.isolateModule.getNamespace(r.target);if(!c)return;var f=this.getVirtualListeners(t,c);this.bubble(t,r.target,a,i,f,c,c.length-1,!0,n),this.bubble(t,r.target,a,i,f,c,c.length-1,!1,n)}else this.putNonBubblingListener(t,r.target,!0,n),this.doBubbleStep(t,r.target,a,i,this.virtualNonBubblingListener,!0,n),this.putNonBubblingListener(t,r.target,!1,n),this.doBubbleStep(t,r.target,a,i,this.virtualNonBubblingListener,!1,n),r.stopPropagation()},e.prototype.bubble=function(t,r,n,o,i,a,c,f,h){!f&&!o.propagationHasBeenStopped&&this.doBubbleStep(t,r,n,o,i,f,h);var v=n,m=c;if(r===n)if(c>=0&&a[c].type==="sibling")v=this.isolateModule.getElement(a,c),m--;else return;r.parentNode&&v&&this.bubble(t,r.parentNode,v,o,i,a,m,f,h),f&&!o.propagationHasBeenStopped&&this.doBubbleStep(t,r,n,o,i,f,h)},e.prototype.doBubbleStep=function(t,r,n,o,i,a,c){!n||(this.mutateEventCurrentTarget(o,r),i.forEach(function(f){if(f.passive===c&&f.useCapture===a){var h=ln(f.scopeChecker.namespace);!o.propagationHasBeenStopped&&f.scopeChecker.isDirectlyInScope(r)&&(h!==""&&r.matches(h)||h===""&&r===n)&&(cn(o,f.preventDefault),f.subject.shamefullySendNext(o))}}))},e.prototype.patchEvent=function(t){var r=t;r.propagationHasBeenStopped=!1;var n=r.stopPropagation;return r.stopPropagation=function(){n.call(this),this.propagationHasBeenStopped=!0},r},e.prototype.mutateEventCurrentTarget=function(t,r){try{Object.defineProperty(t,"currentTarget",{value:r,configurable:!0})}catch{console.log("please use event.ownerTarget")}t.ownerTarget=r},e}();function va(e){if(!Array.isArray(e))throw new Error("Optional modules option must be an array for snabbdom modules")}function ga(e){if(!e||typeof e.addListener!="function"||typeof e.fold!="function")throw new Error("The DOM driver function expects as input a Stream of virtual DOM elements")}function _a(e){return P.merge(e,P.never())}function ba(e){return e.elm}function wa(e){(console.error||console.log)(e)}function Sa(){return P.create({start:function(e){document.readyState==="loading"?document.addEventListener("readystatechange",function(){var t=document.readyState;(t==="interactive"||t==="complete")&&(e.next(null),e.complete())}):(e.next(null),e.complete())},stop:function(){}})}function Oa(e){return e.data=e.data||{},e.data.isolate=[],e}function Aa(e,t){t===void 0&&(t={}),ra(e);var r=t.modules||pa;va(r);var n=new ha,o=t&&t.snabbdomOptions||void 0,i=Ts([n.createModule()].concat(r),void 0,o),a=Sa(),c,f,h=P.create({start:function(m){f=new MutationObserver(function(){return m.next(null)})},stop:function(){f.disconnect()}});function v(m,b){b===void 0&&(b="DOM"),ga(m);var u=P.create(),l=a.map(function(){var g=na(e)||document.body;return c=new fa(g),g}),p=m.remember();p.addListener({}),h.addListener({});var d=l.map(function(g){return P.merge(p.endWhen(u),u).map(function(_){return c.call(_)}).startWith(Oa(Ne(g))).fold(i,Ne(g)).drop(1).map(ba).startWith(g).map(function(_){return f.observe(_,{childList:!0,attributes:!0,characterData:!0,subtree:!0,attributeOldValue:!0,characterDataOldValue:!0}),_}).compose(_a)}).flatten(),y=en(a,h).endWhen(u).compose(ca(d)).map(function(g){return g[1]}).remember();y.addListener({error:t.reportSnabbdomError||wa});var w=new ma(y,n);return new sa(y,u,[],n,w,b)}return v}function $a(e){return typeof e=="string"&&e.length>0}function xa(e){return $a(e)&&(e[0]==="."||e[0]==="#")}function _n(e){return function(r,n,o){var i=typeof r!="undefined",a=typeof n!="undefined",c=typeof o!="undefined";return xa(r)?a&&c?nt(e+r,n,o):a?nt(e+r,n):nt(e+r,{}):c?nt(e+r,n,o):a?nt(e,r,n):i?nt(e,r):nt(e,{})}}var Ea=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","colorProfile","cursor","defs","desc","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotlight","feTile","feTurbulence","filter","font","fontFace","fontFaceFormat","fontFaceName","fontFaceSrc","fontFaceUri","foreignObject","g","glyph","glyphRef","hkern","image","line","linearGradient","marker","mask","metadata","missingGlyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],Pa=_n("svg");Ea.forEach(function(e){Pa[e]=_n(e)});var Ca=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","dd","del","details","dfn","dir","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","meta","nav","noscript","object","ol","optgroup","option","p","param","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","u","ul","video"];Ca.forEach(function(e){});function Na(e,t,r={}){const{combineList:n=["DOM"],globalList:o=["EVENTS"],stateSourceName:i="STATE",domSourceName:a="DOM",container:c="div",containerClass:f}=r;return h=>{const v=Date.now(),m={item:e,itemKey:(u,l)=>typeof u.id!="undefined"?u.id:l,itemScope:u=>u,channel:i,collectSinks:u=>Object.entries(h).reduce((l,[p,d])=>{if(n.includes(p)){const y=u.pickCombine(p);p===a&&c?l[a]=y.map(w=>({sel:c,data:f?{props:{className:f}}:{},children:w,key:v,text:void 0,elm:void 0})):l[p]=y}else l[p]=u.pickMerge(p);return l},{})},b={[i]:t};return o.forEach(u=>b[u]=null),n.forEach(u=>b[u]=null),Ia(m,b,h)}}function Ia(e,t,r){return ut(Xi(e),t)(r)}var Y=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},ue={},z={},bn={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t;function t(r){var n,o=r.Symbol;if(typeof o=="function")if(o.observable)n=o.observable;else{n=o.for("https://github.com/benlesh/symbol-observable");try{o.observable=n}catch{}}else n="@@observable";return n}})(bn);var ka=bn,mr=Object.prototype.toString,wn=function(t){var r=mr.call(t),n=r==="[object Arguments]";return n||(n=r!=="[object Array]"&&t!==null&&typeof t=="object"&&typeof t.length=="number"&&t.length>=0&&mr.call(t.callee)==="[object Function]"),n},ge,vr;function Da(){if(vr)return ge;vr=1;var e;if(!Object.keys){var t=Object.prototype.hasOwnProperty,r=Object.prototype.toString,n=wn,o=Object.prototype.propertyIsEnumerable,i=!o.call({toString:null},"toString"),a=o.call(function(){},"prototype"),c=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],f=function(b){var u=b.constructor;return u&&u.prototype===b},h={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},v=function(){if(typeof window=="undefined")return!1;for(var b in window)try{if(!h["$"+b]&&t.call(window,b)&&window[b]!==null&&typeof window[b]=="object")try{f(window[b])}catch{return!0}}catch{return!0}return!1}(),m=function(b){if(typeof window=="undefined"||!v)return f(b);try{return f(b)}catch{return!1}};e=function(u){var l=u!==null&&typeof u=="object",p=r.call(u)==="[object Function]",d=n(u),y=l&&r.call(u)==="[object String]",w=[];if(!l&&!p&&!d)throw new TypeError("Object.keys called on a non-object");var g=a&&p;if(y&&u.length>0&&!t.call(u,0))for(var _=0;_<u.length;++_)w.push(String(_));if(d&&u.length>0)for(var S=0;S<u.length;++S)w.push(String(S));else for(var O in u)!(g&&O==="prototype")&&t.call(u,O)&&w.push(String(O));if(i)for(var E=m(u),x=0;x<c.length;++x)!(E&&c[x]==="constructor")&&t.call(u,c[x])&&w.push(c[x]);return w}}return ge=e,ge}var Ta=Array.prototype.slice,Fa=wn,gr=Object.keys,Jt=gr?function(t){return gr(t)}:Da(),_r=Object.keys;Jt.shim=function(){if(Object.keys){var t=function(){var r=Object.keys(arguments);return r&&r.length===arguments.length}(1,2);t||(Object.keys=function(n){return Fa(n)?_r(Ta.call(n)):_r(n)})}else Object.keys=Jt;return Object.keys||Jt};var ja=Jt,Ma=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var t={},r=Symbol("test"),n=Object(r);if(typeof r=="string"||Object.prototype.toString.call(r)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var o=42;t[r]=o;for(r in t)return!1;if(typeof Object.keys=="function"&&Object.keys(t).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(t).length!==0)return!1;var i=Object.getOwnPropertySymbols(t);if(i.length!==1||i[0]!==r||!Object.prototype.propertyIsEnumerable.call(t,r))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var a=Object.getOwnPropertyDescriptor(t,r);if(a.value!==o||a.enumerable!==!0)return!1}return!0},br=typeof Symbol!="undefined"&&Symbol,La=Ma,Ra=function(){return typeof br!="function"||typeof Symbol!="function"||typeof br("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:La()},wr={foo:{}},Ba=Object,Ua=function(){return{__proto__:wr}.foo===wr.foo&&!({__proto__:null}instanceof Ba)},Wa="Function.prototype.bind called on incompatible ",_e=Array.prototype.slice,Ga=Object.prototype.toString,za="[object Function]",qa=function(t){var r=this;if(typeof r!="function"||Ga.call(r)!==za)throw new TypeError(Wa+r);for(var n=_e.call(arguments,1),o,i=function(){if(this instanceof o){var v=r.apply(this,n.concat(_e.call(arguments)));return Object(v)===v?v:this}else return r.apply(t,n.concat(_e.call(arguments)))},a=Math.max(0,r.length-n.length),c=[],f=0;f<a;f++)c.push("$"+f);if(o=Function("binder","return function ("+c.join(",")+"){ return binder.apply(this,arguments); }")(i),r.prototype){var h=function(){};h.prototype=r.prototype,o.prototype=new h,h.prototype=null}return o},Ha=qa,Sn=Function.prototype.bind||Ha,Va=Sn,Ja=Va.call(Function.call,Object.prototype.hasOwnProperty),N,xt=SyntaxError,On=Function,Ot=TypeError,be=function(e){try{return On('"use strict"; return ('+e+").constructor;")()}catch{}},dt=Object.getOwnPropertyDescriptor;if(dt)try{dt({},"")}catch{dt=null}var we=function(){throw new Ot},Ya=dt?function(){try{return arguments.callee,we}catch{try{return dt(arguments,"callee").get}catch{return we}}}():we,vt=Ra(),Ka=Ua(),U=Object.getPrototypeOf||(Ka?function(e){return e.__proto__}:null),bt={},Xa=typeof Uint8Array=="undefined"||!U?N:U(Uint8Array),yt={"%AggregateError%":typeof AggregateError=="undefined"?N:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer=="undefined"?N:ArrayBuffer,"%ArrayIteratorPrototype%":vt&&U?U([][Symbol.iterator]()):N,"%AsyncFromSyncIteratorPrototype%":N,"%AsyncFunction%":bt,"%AsyncGenerator%":bt,"%AsyncGeneratorFunction%":bt,"%AsyncIteratorPrototype%":bt,"%Atomics%":typeof Atomics=="undefined"?N:Atomics,"%BigInt%":typeof BigInt=="undefined"?N:BigInt,"%BigInt64Array%":typeof BigInt64Array=="undefined"?N:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array=="undefined"?N:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView=="undefined"?N:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array=="undefined"?N:Float32Array,"%Float64Array%":typeof Float64Array=="undefined"?N:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry=="undefined"?N:FinalizationRegistry,"%Function%":On,"%GeneratorFunction%":bt,"%Int8Array%":typeof Int8Array=="undefined"?N:Int8Array,"%Int16Array%":typeof Int16Array=="undefined"?N:Int16Array,"%Int32Array%":typeof Int32Array=="undefined"?N:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":vt&&U?U(U([][Symbol.iterator]())):N,"%JSON%":typeof JSON=="object"?JSON:N,"%Map%":typeof Map=="undefined"?N:Map,"%MapIteratorPrototype%":typeof Map=="undefined"||!vt||!U?N:U(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise=="undefined"?N:Promise,"%Proxy%":typeof Proxy=="undefined"?N:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect=="undefined"?N:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set=="undefined"?N:Set,"%SetIteratorPrototype%":typeof Set=="undefined"||!vt||!U?N:U(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer=="undefined"?N:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":vt&&U?U(""[Symbol.iterator]()):N,"%Symbol%":vt?Symbol:N,"%SyntaxError%":xt,"%ThrowTypeError%":Ya,"%TypedArray%":Xa,"%TypeError%":Ot,"%Uint8Array%":typeof Uint8Array=="undefined"?N:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray=="undefined"?N:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array=="undefined"?N:Uint16Array,"%Uint32Array%":typeof Uint32Array=="undefined"?N:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap=="undefined"?N:WeakMap,"%WeakRef%":typeof WeakRef=="undefined"?N:WeakRef,"%WeakSet%":typeof WeakSet=="undefined"?N:WeakSet};if(U)try{null.error}catch(e){var Za=U(U(e));yt["%Error.prototype%"]=Za}var Qa=function e(t){var r;if(t==="%AsyncFunction%")r=be("async function () {}");else if(t==="%GeneratorFunction%")r=be("function* () {}");else if(t==="%AsyncGeneratorFunction%")r=be("async function* () {}");else if(t==="%AsyncGenerator%"){var n=e("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if(t==="%AsyncIteratorPrototype%"){var o=e("%AsyncGenerator%");o&&U&&(r=U(o.prototype))}return yt[t]=r,r},Sr={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},jt=Sn,ie=Ja,tu=jt.call(Function.call,Array.prototype.concat),eu=jt.call(Function.apply,Array.prototype.splice),Or=jt.call(Function.call,String.prototype.replace),se=jt.call(Function.call,String.prototype.slice),ru=jt.call(Function.call,RegExp.prototype.exec),nu=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,ou=/\\(\\)?/g,iu=function(t){var r=se(t,0,1),n=se(t,-1);if(r==="%"&&n!=="%")throw new xt("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&r!=="%")throw new xt("invalid intrinsic syntax, expected opening `%`");var o=[];return Or(t,nu,function(i,a,c,f){o[o.length]=c?Or(f,ou,"$1"):a||i}),o},su=function(t,r){var n=t,o;if(ie(Sr,n)&&(o=Sr[n],n="%"+o[0]+"%"),ie(yt,n)){var i=yt[n];if(i===bt&&(i=Qa(n)),typeof i=="undefined"&&!r)throw new Ot("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:o,name:n,value:i}}throw new xt("intrinsic "+t+" does not exist!")},au=function(t,r){if(typeof t!="string"||t.length===0)throw new Ot("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new Ot('"allowMissing" argument must be a boolean');if(ru(/^%?[^%]*%?$/,t)===null)throw new xt("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=iu(t),o=n.length>0?n[0]:"",i=su("%"+o+"%",r),a=i.name,c=i.value,f=!1,h=i.alias;h&&(o=h[0],eu(n,tu([0,1],h)));for(var v=1,m=!0;v<n.length;v+=1){var b=n[v],u=se(b,0,1),l=se(b,-1);if((u==='"'||u==="'"||u==="`"||l==='"'||l==="'"||l==="`")&&u!==l)throw new xt("property names with quotes must have matching quotes");if((b==="constructor"||!m)&&(f=!0),o+="."+b,a="%"+o+"%",ie(yt,a))c=yt[a];else if(c!=null){if(!(b in c)){if(!r)throw new Ot("base intrinsic for "+t+" exists, but the property is not available.");return}if(dt&&v+1>=n.length){var p=dt(c,b);m=!!p,m&&"get"in p&&!("originalValue"in p.get)?c=p.get:c=c[b]}else m=ie(c,b),c=c[b];m&&!f&&(yt[a]=c)}}return c},uu=au,ke=uu("%Object.defineProperty%",!0),De=function(){if(ke)try{return ke({},"a",{value:1}),!0}catch{return!1}return!1};De.hasArrayLengthDefineBug=function(){if(!De())return null;try{return ke([],"length",{value:1}).length!==1}catch{return!0}};var cu=De,lu=ja,fu=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",pu=Object.prototype.toString,hu=Array.prototype.concat,An=Object.defineProperty,du=function(e){return typeof e=="function"&&pu.call(e)==="[object Function]"},yu=cu(),$n=An&&yu,mu=function(e,t,r,n){if(t in e){if(n===!0){if(e[t]===r)return}else if(!du(n)||!n())return}$n?An(e,t,{configurable:!0,enumerable:!1,value:r,writable:!0}):e[t]=r},xn=function(e,t){var r=arguments.length>2?arguments[2]:{},n=lu(t);fu&&(n=hu.call(n,Object.getOwnPropertySymbols(t)));for(var o=0;o<n.length;o+=1)mu(e,n[o],t[n[o]],r[n[o]])};xn.supportsDescriptors=!!$n;var En=xn,Pn=Y,vu=Pn,Cn=function(){return typeof Y!="object"||!Y||Y.Math!==Math||Y.Array!==Array?vu:Y},gu=En,_u=Cn,bu=function(){var t=_u();if(gu.supportsDescriptors){var r=Object.getOwnPropertyDescriptor(t,"globalThis");(!r||r.configurable&&(r.enumerable||!r.writable||globalThis!==t))&&Object.defineProperty(t,"globalThis",{configurable:!0,enumerable:!1,value:t,writable:!0})}else(typeof globalThis!="object"||globalThis!==t)&&(t.globalThis=t);return t},wu=En,Su=Pn,Nn=Cn,Ou=bu,Au=Nn(),In=function(){return Au};wu(In,{getPolyfill:Nn,implementation:Su,shim:Ou});var $u=In,xu=Y&&Y.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)o.hasOwnProperty(i)&&(n[i]=o[i])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(z,"__esModule",{value:!0});z.NO_IL=z.NO=z.MemoryStream=z.Stream=void 0;var Eu=ka,Pu=$u,Gt=Eu.default(Pu.getPolyfill()),$={};z.NO=$;function G(){}function Yt(e){for(var t=e.length,r=Array(t),n=0;n<t;++n)r[n]=e[n];return r}function Cu(e,t){return function(n){return e(n)&&t(n)}}function We(e,t,r){try{return e.f(t)}catch(n){return r._e(n),$}}var ft={_n:G,_e:G,_c:G};z.NO_IL=ft;function Ar(e){e._start=function(r){r.next=r._n,r.error=r._e,r.complete=r._c,this.start(r)},e._stop=e.stop}var Nu=function(){function e(t,r){this._stream=t,this._listener=r}return e.prototype.unsubscribe=function(){this._stream._remove(this._listener)},e}(),Iu=function(){function e(t){this._listener=t}return e.prototype.next=function(t){this._listener._n(t)},e.prototype.error=function(t){this._listener._e(t)},e.prototype.complete=function(){this._listener._c()},e}(),ku=function(){function e(t){this.type="fromObservable",this.ins=t,this.active=!1}return e.prototype._start=function(t){this.out=t,this.active=!0,this._sub=this.ins.subscribe(new Iu(t)),this.active||this._sub.unsubscribe()},e.prototype._stop=function(){this._sub&&this._sub.unsubscribe(),this.active=!1},e}(),Du=function(){function e(t){this.type="merge",this.insArr=t,this.out=$,this.ac=0}return e.prototype._start=function(t){this.out=t;var r=this.insArr,n=r.length;this.ac=n;for(var o=0;o<n;o++)r[o]._add(this)},e.prototype._stop=function(){for(var t=this.insArr,r=t.length,n=0;n<r;n++)t[n]._remove(this);this.out=$},e.prototype._n=function(t){var r=this.out;r!==$&&r._n(t)},e.prototype._e=function(t){var r=this.out;r!==$&&r._e(t)},e.prototype._c=function(){if(--this.ac<=0){var t=this.out;if(t===$)return;t._c()}},e}(),Tu=function(){function e(t,r,n){this.i=t,this.out=r,this.p=n,n.ils.push(this)}return e.prototype._n=function(t){var r=this.p,n=this.out;if(n!==$&&r.up(t,this.i)){var o=Yt(r.vals);n._n(o)}},e.prototype._e=function(t){var r=this.out;r!==$&&r._e(t)},e.prototype._c=function(){var t=this.p;t.out!==$&&--t.Nc===0&&t.out._c()},e}(),Fu=function(){function e(t){this.type="combine",this.insArr=t,this.out=$,this.ils=[],this.Nc=this.Nn=0,this.vals=[]}return e.prototype.up=function(t,r){var n=this.vals[r],o=this.Nn?n===$?--this.Nn:this.Nn:0;return this.vals[r]=t,o===0},e.prototype._start=function(t){this.out=t;var r=this.insArr,n=this.Nc=this.Nn=r.length,o=this.vals=new Array(n);if(n===0)t._n([]),t._c();else for(var i=0;i<n;i++)o[i]=$,r[i]._add(new Tu(i,t,this))},e.prototype._stop=function(){for(var t=this.insArr,r=t.length,n=this.ils,o=0;o<r;o++)t[o]._remove(n[o]);this.out=$,this.ils=[],this.vals=[]},e}(),ju=function(){function e(t){this.type="fromArray",this.a=t}return e.prototype._start=function(t){for(var r=this.a,n=0,o=r.length;n<o;n++)t._n(r[n]);t._c()},e.prototype._stop=function(){},e}(),Mu=function(){function e(t){this.type="fromPromise",this.on=!1,this.p=t}return e.prototype._start=function(t){var r=this;this.on=!0,this.p.then(function(n){r.on&&(t._n(n),t._c())},function(n){t._e(n)}).then(G,function(n){setTimeout(function(){throw n})})},e.prototype._stop=function(){this.on=!1},e}(),Lu=function(){function e(t){this.type="periodic",this.period=t,this.intervalID=-1,this.i=0}return e.prototype._start=function(t){var r=this;function n(){t._n(r.i++)}this.intervalID=setInterval(n,this.period)},e.prototype._stop=function(){this.intervalID!==-1&&clearInterval(this.intervalID),this.intervalID=-1,this.i=0},e}(),Ru=function(){function e(t,r){this.type="debug",this.ins=t,this.out=$,this.s=G,this.l="",typeof r=="string"?this.l=r:typeof r=="function"&&(this.s=r)}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=$},e.prototype._n=function(t){var r=this.out;if(r!==$){var n=this.s,o=this.l;if(n!==G)try{n(t)}catch(i){r._e(i)}else o?console.log(o+":",t):console.log(t);r._n(t)}},e.prototype._e=function(t){var r=this.out;r!==$&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==$&&t._c()},e}(),Bu=function(){function e(t,r){this.type="drop",this.ins=r,this.out=$,this.max=t,this.dropped=0}return e.prototype._start=function(t){this.out=t,this.dropped=0,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=$},e.prototype._n=function(t){var r=this.out;r!==$&&this.dropped++>=this.max&&r._n(t)},e.prototype._e=function(t){var r=this.out;r!==$&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==$&&t._c()},e}(),Uu=function(){function e(t,r){this.out=t,this.op=r}return e.prototype._n=function(){this.op.end()},e.prototype._e=function(t){this.out._e(t)},e.prototype._c=function(){this.op.end()},e}(),Wu=function(){function e(t,r){this.type="endWhen",this.ins=r,this.out=$,this.o=t,this.oil=ft}return e.prototype._start=function(t){this.out=t,this.o._add(this.oil=new Uu(t,this)),this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.o._remove(this.oil),this.out=$,this.oil=ft},e.prototype.end=function(){var t=this.out;t!==$&&t._c()},e.prototype._n=function(t){var r=this.out;r!==$&&r._n(t)},e.prototype._e=function(t){var r=this.out;r!==$&&r._e(t)},e.prototype._c=function(){this.end()},e}(),Se=function(){function e(t,r){this.type="filter",this.ins=r,this.out=$,this.f=t}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=$},e.prototype._n=function(t){var r=this.out;if(r!==$){var n=We(this,t,r);n===$||!n||r._n(t)}},e.prototype._e=function(t){var r=this.out;r!==$&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==$&&t._c()},e}(),Gu=function(){function e(t,r){this.out=t,this.op=r}return e.prototype._n=function(t){this.out._n(t)},e.prototype._e=function(t){this.out._e(t)},e.prototype._c=function(){this.op.inner=$,this.op.less()},e}(),zu=function(){function e(t){this.type="flatten",this.ins=t,this.out=$,this.open=!0,this.inner=$,this.il=ft}return e.prototype._start=function(t){this.out=t,this.open=!0,this.inner=$,this.il=ft,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.inner!==$&&this.inner._remove(this.il),this.out=$,this.open=!0,this.inner=$,this.il=ft},e.prototype.less=function(){var t=this.out;t!==$&&!this.open&&this.inner===$&&t._c()},e.prototype._n=function(t){var r=this.out;if(r!==$){var n=this,o=n.inner,i=n.il;o!==$&&i!==ft&&o._remove(i),(this.inner=t)._add(this.il=new Gu(r,this))}},e.prototype._e=function(t){var r=this.out;r!==$&&r._e(t)},e.prototype._c=function(){this.open=!1,this.less()},e}(),qu=function(){function e(t,r,n){var o=this;this.type="fold",this.ins=n,this.out=$,this.f=function(i){return t(o.acc,i)},this.acc=this.seed=r}return e.prototype._start=function(t){this.out=t,this.acc=this.seed,t._n(this.acc),this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=$,this.acc=this.seed},e.prototype._n=function(t){var r=this.out;if(r!==$){var n=We(this,t,r);n!==$&&r._n(this.acc=n)}},e.prototype._e=function(t){var r=this.out;r!==$&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==$&&t._c()},e}(),Hu=function(){function e(t){this.type="last",this.ins=t,this.out=$,this.has=!1,this.val=$}return e.prototype._start=function(t){this.out=t,this.has=!1,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=$,this.val=$},e.prototype._n=function(t){this.has=!0,this.val=t},e.prototype._e=function(t){var r=this.out;r!==$&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==$&&(this.has?(t._n(this.val),t._c()):t._e(new Error("last() failed because input stream completed")))},e}(),Vu=function(){function e(t,r){this.type="map",this.ins=r,this.out=$,this.f=t}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=$},e.prototype._n=function(t){var r=this.out;if(r!==$){var n=We(this,t,r);n!==$&&r._n(n)}},e.prototype._e=function(t){var r=this.out;r!==$&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==$&&t._c()},e}(),Ju=function(){function e(t){this.type="remember",this.ins=t,this.out=$}return e.prototype._start=function(t){this.out=t,this.ins._add(t)},e.prototype._stop=function(){this.ins._remove(this.out),this.out=$},e}(),Yu=function(){function e(t,r){this.type="replaceError",this.ins=r,this.out=$,this.f=t}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=$},e.prototype._n=function(t){var r=this.out;r!==$&&r._n(t)},e.prototype._e=function(t){var r=this.out;if(r!==$)try{this.ins._remove(this),(this.ins=this.f(t))._add(this)}catch(n){r._e(n)}},e.prototype._c=function(){var t=this.out;t!==$&&t._c()},e}(),Ku=function(){function e(t,r){this.type="startWith",this.ins=t,this.out=$,this.val=r}return e.prototype._start=function(t){this.out=t,this.out._n(this.val),this.ins._add(t)},e.prototype._stop=function(){this.ins._remove(this.out),this.out=$},e}(),Xu=function(){function e(t,r){this.type="take",this.ins=r,this.out=$,this.max=t,this.taken=0}return e.prototype._start=function(t){this.out=t,this.taken=0,this.max<=0?t._c():this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=$},e.prototype._n=function(t){var r=this.out;if(r!==$){var n=++this.taken;n<this.max?r._n(t):n===this.max&&(r._n(t),r._c())}},e.prototype._e=function(t){var r=this.out;r!==$&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==$&&t._c()},e}(),Ge=function(){function e(t){this._prod=t||$,this._ils=[],this._stopID=$,this._dl=$,this._d=!1,this._target=null,this._err=$}return e.prototype._n=function(t){var r=this._ils,n=r.length;if(this._d&&this._dl._n(t),n==1)r[0]._n(t);else{if(n==0)return;for(var o=Yt(r),i=0;i<n;i++)o[i]._n(t)}},e.prototype._e=function(t){if(this._err===$){this._err=t;var r=this._ils,n=r.length;if(this._x(),this._d&&this._dl._e(t),n==1)r[0]._e(t);else{if(n==0)return;for(var o=Yt(r),i=0;i<n;i++)o[i]._e(t)}if(!this._d&&n==0)throw this._err}},e.prototype._c=function(){var t=this._ils,r=t.length;if(this._x(),this._d&&this._dl._c(),r==1)t[0]._c();else{if(r==0)return;for(var n=Yt(t),o=0;o<r;o++)n[o]._c()}},e.prototype._x=function(){this._ils.length!==0&&(this._prod!==$&&this._prod._stop(),this._err=$,this._ils=[])},e.prototype._stopNow=function(){this._prod._stop(),this._err=$,this._stopID=$},e.prototype._add=function(t){var r=this._target;if(r)return r._add(t);var n=this._ils;if(n.push(t),!(n.length>1))if(this._stopID!==$)clearTimeout(this._stopID),this._stopID=$;else{var o=this._prod;o!==$&&o._start(this)}},e.prototype._remove=function(t){var r=this,n=this._target;if(n)return n._remove(t);var o=this._ils,i=o.indexOf(t);i>-1&&(o.splice(i,1),this._prod!==$&&o.length<=0?(this._err=$,this._stopID=setTimeout(function(){return r._stopNow()})):o.length===1&&this._pruneCycles())},e.prototype._pruneCycles=function(){this._hasNoSinks(this,[])&&this._remove(this._ils[0])},e.prototype._hasNoSinks=function(t,r){if(r.indexOf(t)!==-1)return!0;if(t.out===this)return!0;if(t.out&&t.out!==$)return this._hasNoSinks(t.out,r.concat(t));if(t._ils){for(var n=0,o=t._ils.length;n<o;n++)if(!this._hasNoSinks(t._ils[n],r.concat(t)))return!1;return!0}else return!1},e.prototype.ctor=function(){return this instanceof it?it:e},e.prototype.addListener=function(t){t._n=t.next||G,t._e=t.error||G,t._c=t.complete||G,this._add(t)},e.prototype.removeListener=function(t){this._remove(t)},e.prototype.subscribe=function(t){return this.addListener(t),new Nu(this,t)},e.prototype[Gt]=function(){return this},e.create=function(t){if(t){if(typeof t.start!="function"||typeof t.stop!="function")throw new Error("producer requires both start and stop functions");Ar(t)}return new e(t)},e.createWithMemory=function(t){return t&&Ar(t),new it(t)},e.never=function(){return new e({_start:G,_stop:G})},e.empty=function(){return new e({_start:function(t){t._c()},_stop:G})},e.throw=function(t){return new e({_start:function(r){r._e(t)},_stop:G})},e.from=function(t){if(typeof t[Gt]=="function")return e.fromObservable(t);if(typeof t.then=="function")return e.fromPromise(t);if(Array.isArray(t))return e.fromArray(t);throw new TypeError("Type of input to from() must be an Array, Promise, or Observable")},e.of=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return e.fromArray(t)},e.fromArray=function(t){return new e(new ju(t))},e.fromPromise=function(t){return new e(new Mu(t))},e.fromObservable=function(t){if(t.endWhen!==void 0)return t;var r=typeof t[Gt]=="function"?t[Gt]():t;return new e(new ku(r))},e.periodic=function(t){return new e(new Lu(t))},e.prototype._map=function(t){return new(this.ctor())(new Vu(t,this))},e.prototype.map=function(t){return this._map(t)},e.prototype.mapTo=function(t){var r=this.map(function(){return t}),n=r._prod;return n.type="mapTo",r},e.prototype.filter=function(t){var r=this._prod;return r instanceof Se?new e(new Se(Cu(r.f,t),r.ins)):new e(new Se(t,this))},e.prototype.take=function(t){return new(this.ctor())(new Xu(t,this))},e.prototype.drop=function(t){return new e(new Bu(t,this))},e.prototype.last=function(){return new e(new Hu(this))},e.prototype.startWith=function(t){return new it(new Ku(this,t))},e.prototype.endWhen=function(t){return new(this.ctor())(new Wu(t,this))},e.prototype.fold=function(t,r){return new it(new qu(t,r,this))},e.prototype.replaceError=function(t){return new(this.ctor())(new Yu(t,this))},e.prototype.flatten=function(){return new e(new zu(this))},e.prototype.compose=function(t){return t(this)},e.prototype.remember=function(){return new it(new Ju(this))},e.prototype.debug=function(t){return new(this.ctor())(new Ru(this,t))},e.prototype.imitate=function(t){if(t instanceof it)throw new Error("A MemoryStream was given to imitate(), but it only supports a Stream. Read more about this restriction here: https://github.com/staltz/xstream#faq");this._target=t;for(var r=this._ils,n=r.length,o=0;o<n;o++)t._add(r[o]);this._ils=[]},e.prototype.shamefullySendNext=function(t){this._n(t)},e.prototype.shamefullySendError=function(t){this._e(t)},e.prototype.shamefullySendComplete=function(){this._c()},e.prototype.setDebugListener=function(t){t?(this._d=!0,t._n=t.next||G,t._e=t.error||G,t._c=t.complete||G,this._dl=t):(this._d=!1,this._dl=$)},e.merge=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return new e(new Du(r))},e.combine=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return new e(new Fu(r))},e}();z.Stream=Ge;var it=function(e){xu(t,e);function t(r){var n=e.call(this,r)||this;return n._has=!1,n}return t.prototype._n=function(r){this._v=r,this._has=!0,e.prototype._n.call(this,r)},t.prototype._add=function(r){var n=this._target;if(n)return n._add(r);var o=this._ils;if(o.push(r),o.length>1){this._has&&r._n(this._v);return}if(this._stopID!==$)this._has&&r._n(this._v),clearTimeout(this._stopID),this._stopID=$;else if(this._has)r._n(this._v);else{var i=this._prod;i!==$&&i._start(this)}},t.prototype._stopNow=function(){this._has=!1,e.prototype._stopNow.call(this)},t.prototype._x=function(){this._has=!1,e.prototype._x.call(this)},t.prototype.map=function(r){return this._map(r)},t.prototype.mapTo=function(r){return e.prototype.mapTo.call(this,r)},t.prototype.take=function(r){return e.prototype.take.call(this,r)},t.prototype.endWhen=function(r){return e.prototype.endWhen.call(this,r)},t.prototype.replaceError=function(r){return e.prototype.replaceError.call(this,r)},t.prototype.remember=function(){return this},t.prototype.debug=function(r){return e.prototype.debug.call(this,r)},t}(Ge);z.MemoryStream=it;var Zu=Ge;z.default=Zu;Object.defineProperty(ue,"__esModule",{value:!0});ue.DropRepeatsOperator=void 0;var Qu=z,Oe={},kn=function(){function e(t,r){this.ins=t,this.type="dropRepeats",this.out=null,this.v=Oe,this.isEq=r||function(n,o){return n===o}}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=null,this.v=Oe},e.prototype._n=function(t){var r=this.out;if(!!r){var n=this.v;n!==Oe&&this.isEq(t,n)||(this.v=t,r._n(t))}},e.prototype._e=function(t){var r=this.out;!r||r._e(t)},e.prototype._c=function(){var t=this.out;!t||t._c()},e}();ue.DropRepeatsOperator=kn;function tc(e){return e===void 0&&(e=void 0),function(r){return new Qu.Stream(new kn(r,e))}}var K=ue.default=tc;function ec(e,t,r,n={}){const{switched:o=["DOM"],stateSourceName:i="STATE"}=n,a=typeof t;if(!t)throw new Error("Missing 'name$' parameter for switchable()");if(!(a==="string"||a==="function"||t instanceof tt))throw new Error("Invalid 'name$' parameter for switchable(): expects Stream, String, or Function");if(t instanceof tt){const c=t.compose(K()).startWith(r).remember();return f=>$r(e,f,c,o)}else{const c=a==="function"&&t||(f=>f[t]);return f=>{const h=f&&(typeof i=="string"&&f[i]||f.STATE||f.state).stream;if(!h instanceof tt)throw new Error(`Could not find the state source: ${i}`);const v=h.map(c).filter(m=>typeof m=="string").compose(K()).startWith(r).remember();return $r(e,f,v,o,i)}}}function $r(e,t,r,n=["DOM"],o="STATE"){typeof n=="string"&&(n=[n]);const i=Object.entries(e).map(([c,f])=>{if(t[o]){const h=t[o].stream,v=P.combine(r,h).filter(([b,u])=>b==c).map(([b,u])=>u).remember(),m=new t[o].constructor(v,t[o]._name);return[c,f(L(I({},t),{state:m}))]}return[c,f(t)]});return Object.keys(t).reduce((c,f)=>{if(n.includes(f))c[f]=r.map(h=>{const v=i.find(([m,b])=>m===h);return v&&v[1][f]||P.never()}).flatten().remember().startWith(void 0);else{const h=i.filter(([v,m])=>m[f]!==void 0).map(([v,m])=>m[f]);c[f]=P.merge(...h)}return c},{})}var Dn={};Object.defineProperty(Dn,"__esModule",{value:!0});var rc=z,nc=function(){function e(t,r){this.dt=t,this.ins=r,this.type="delay",this.out=null}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=null},e.prototype._n=function(t){var r=this.out;if(!!r)var n=setInterval(function(){r._n(t),clearInterval(n)},this.dt)},e.prototype._e=function(t){var r=this.out;if(!!r)var n=setInterval(function(){r._e(t),clearInterval(n)},this.dt)},e.prototype._c=function(){var t=this.out;if(!!t)var r=setInterval(function(){t._c(),clearInterval(r)},this.dt)},e}();function oc(e){return function(r){return new rc.Stream(new nc(e,r))}}var Ae=Dn.default=oc,Tn={};Object.defineProperty(Tn,"__esModule",{value:!0});var ic=z,sc=function(){function e(t){this.streams=t,this.type="concat",this.out=null,this.i=0}return e.prototype._start=function(t){this.out=t,this.streams[this.i]._add(this)},e.prototype._stop=function(){var t=this.streams;this.i<t.length&&t[this.i]._remove(this),this.i=0,this.out=null},e.prototype._n=function(t){var r=this.out;!r||r._n(t)},e.prototype._e=function(t){var r=this.out;!r||r._e(t)},e.prototype._c=function(){var t=this.out;if(!!t){var r=this.streams;r[this.i]._remove(this),++this.i<r.length?r[this.i]._add(this):t._c()}},e}();function ac(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new ic.Stream(new sc(e))}var $e=Tn.default=ac,Fn={};Object.defineProperty(Fn,"__esModule",{value:!0});var kt=z,uc=function(){function e(t,r){this.dt=t,this.ins=r,this.type="debounce",this.out=null,this.id=null,this.t=kt.NO}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=null,this.clearInterval()},e.prototype.clearInterval=function(){var t=this.id;t!==null&&clearInterval(t),this.id=null},e.prototype._n=function(t){var r=this,n=this.out;!n||(this.clearInterval(),this.t=t,this.id=setInterval(function(){r.clearInterval(),n._n(t),r.t=kt.NO},this.dt))},e.prototype._e=function(t){var r=this.out;!r||(this.clearInterval(),r._e(t))},e.prototype._c=function(){var t=this.out;!t||(this.clearInterval(),this.t!=kt.NO&&t._n(this.t),this.t=kt.NO,t._c())},e}();function cc(e){return function(r){return new kt.Stream(new uc(e,r))}}var zt=Fn.default=cc;const xr=typeof window!="undefined"&&window||process&&process.env||{},Er="BOOTSTRAP",gt="INITIALIZE",lc="HYDRATE",Ct="PARENT",fc="CHILD";let pc=0;const Pr="~#~#~ABORT~#~#~";function Kt(e){const{name:t,sources:r,isolateOpts:n,stateSourceName:o="STATE"}=e;if(r&&!F(r))throw new Error("Sources must be a Cycle.js sources object:",t);let i;typeof n=="string"?i={[o]:n}:n===!0?i={}:i=n;const a=typeof r=="undefined";let c;if(F(i)){const f=h=>{const v=L(I({},e),{sources:h});return new xe(v).sinks};c=a?ut(f,i):ut(f,i)(r)}else c=a?f=>new xe(L(I({},e),{sources:f})).sinks:new xe(e).sinks;return c.componentName=t,c.isSygnalComponent=!0,c}class xe{constructor({name:t="NO NAME",sources:r,intent:n,model:o,context:i,response:a,view:c,peers:f={},components:h={},initialState:v,calculated:m,storeCalculatedInState:b=!0,DOMSourceName:u="DOM",stateSourceName:l="STATE",requestSourceName:p="HTTP",debug:d=!1}){if(!r||!F(r))throw new Error("Missing or invalid sources");this.name=t,this.sources=r,this.intent=n,this.model=o,this.context=i,this.response=a,this.view=c,this.peers=f,this.components=h,this.initialState=v,this.calculated=m,this.storeCalculatedInState=b,this.DOMSourceName=u,this.stateSourceName=l,this.requestSourceName=p,this.sourceNames=Object.keys(r),this._debug=d,this.isSubComponent=this.sourceNames.includes("props$");const y=r[l]&&r[l].stream;y&&(this.currentState=v||{},this.sources[l]=new Nt(y.map(S=>(this.currentState=S,S))));const w=r.props$;w&&(this.sources.props$=w.map(S=>(this.currentProps=S,S)));const g=r.children$;g&&(this.sources.children$=g.map(S=>(this.currentChildren=S,S))),!this.isSubComponent&&typeof this.intent=="undefined"&&typeof this.model=="undefined"&&(this.initialState=v||!0,this.intent=S=>({__NOOP_ACTION__:P.never()}),this.model={__NOOP_ACTION__:S=>S});const _=pc++;this.addCalculated=this.createMemoizedAddCalculated(),this.log=hc(`${_} | ${t}`),this.initChildSources$(),this.initIntent$(),this.initAction$(),this.initState(),this.initContext(),this.initModel$(),this.initPeers$(),this.initSubComponentSink$(),this.initSubComponentsRendered$(),this.initVdom$(),this.initSinks(),this.sinks.__index=_,this.log("Instantiated",!0)}get debug(){return this._debug||xr.SYGNAL_DEBUG==="true"||xr.SYGNAL_DEBUG===!0}initIntent$(){if(!!this.intent){if(typeof this.intent!="function")throw new Error("Intent must be a function");if(this.intent$=this.intent(this.sources),!(this.intent$ instanceof tt)&&!F(this.intent$))throw new Error("Intent must return either an action$ stream or map of event streams")}}initAction$(){const t=this.sources&&this.sources[this.requestSourceName]||null;if(!this.intent$){this.action$=P.never();return}let r;if(this.intent$ instanceof tt)r=this.intent$;else{const f=Object.entries(this.intent$).map(([h,v])=>v.map(m=>({type:h,data:m})));r=P.merge(P.never(),...f)}const n=r instanceof tt?r:r.apply&&r(this.sources)||P.never(),o=P.of({type:Er}).compose(Ae(10)),i=this.model[Er]?$e(o,n):$e(P.of({}).compose(Ae(1)),n);let a;t&&typeof t.select=="function"?a=t.select("initial").flatten():a=P.never();const c=a.map(f=>({type:lc,data:f}));this.action$=P.merge(i,c).compose(this.log(({type:f})=>`<${f}> Action triggered`))}initState(){this.model!=null&&(this.model[gt]===void 0?this.model[gt]={[this.stateSourceName]:(t,r)=>I({},this.addCalculated(r))}:Object.keys(this.model[gt]).forEach(t=>{t!==this.stateSourceName&&(console.warn(`${gt} can only be used with the ${this.stateSourceName} source... disregarding ${t}`),delete this.model[gt][t])}))}initContext(){var n;if(!this.context&&!this.sources.__parentContext$){this.context$=P.of({});return}const t=((n=this.sources[this.stateSourceName])==null?void 0:n.stream.startWith({}).compose(K(Z)))||P.never(),r=this.sources.__parentContext$.startWith({}).compose(K(Z))||P.of({});this.context&&!F(this.context)&&console.error(`[${this.name}] Context must be an object mapping names to values of functions: ignoring provided ${typeof this.context}`),this.context$=P.combine(t,r).map(([o,i])=>{const a=F(i)?i:{},c=F(this.context)?this.context:{},f=this.currentState,h=Object.entries(c).reduce((m,b)=>{const[u,l]=b;let p;const d=typeof l;if(d==="string")p=f[l];else if(d==="boolean")p=f[u];else if(d==="function")p=l(f);else return console.error(`[${this.name}] Invalid context entry '${u}': must be the name of a state property or a function returning a value to use`),m;return m[u]=p,m},{}),v=I(I({},a),h);return this.currentContext=v,v}).compose(K(Z)).startWith({}),this.context$.subscribe({next:o=>o})}initModel$(){if(typeof this.model=="undefined"){this.model$=this.sourceNames.reduce((f,h)=>(f[h]=P.never(),f),{});return}const t={type:gt,data:this.initialState};this.isSubComponent&&this.initialState&&console.warn(`[${this.name}] Initial state provided to sub-component. This will overwrite any state provided by the parent component.`);const r=this.initialState?$e(P.of(t),this.action$).compose(Ae(0)):this.action$,n=()=>this.makeOnAction(r,!0,this.action$),o=()=>this.makeOnAction(this.action$,!1,this.action$),i=Object.entries(this.model),a={};i.forEach(f=>{let[h,v]=f;if(typeof v=="function"&&(v={[this.stateSourceName]:v}),!F(v))throw new Error(`Entry for each action must be an object: ${this.name} ${h}`);Object.entries(v).forEach(b=>{const[u,l]=b,p=u===this.stateSourceName,d=u===Ct,y=p?n():o(),g=(d?y(h,l).map(_=>({name:this.name,value:_})):y(h,l)).compose(this.log(_=>{if(p)return`<${h}> State reducer added`;if(d)return`<${h}> Data sent to parent component: ${JSON.stringify(_.value).replaceAll('"',"")}`;{const S=_&&(_.type||_.command||_.name||_.key||Array.isArray(_)&&"Array"||_);return`<${h}> Data sent to [${u}]: ${JSON.stringify(S).replaceAll('"',"")}`}}));Array.isArray(a[u])?a[u].push(g):a[u]=[g]})});const c=Object.entries(a).reduce((f,h)=>{const[v,m]=h;return f[v]=P.merge(P.never(),...m),f},{});this.model$=c}initPeers$(){const t=this.sourceNames.reduce((r,n)=>(n==this.DOMSourceName?r[n]={}:r[n]=[],r),{});this.peers$=Object.entries(this.peers).reduce((r,[n,o])=>{const i=o(this.sources);return this.sourceNames.forEach(a=>{a==this.DOMSourceName?r[a][n]=i[a]:r[a].push(i[a])}),r},t)}initChildSources$(){let t;const r=P.create({start:n=>{t=n.next.bind(n)},stop:n=>{}}).map(n=>P.merge(...n)).flatten();this.sources[fc]={select:n=>{const o=r;return(n?o.filter(c=>c.name===n):o).map(c=>c.value)}},this.newChildSources=n=>{typeof t=="function"&&t(n)}}initSubComponentSink$(){const t=P.create({start:r=>{this.newSubComponentSinks=r.next.bind(r)},stop:r=>{}});t.subscribe({next:r=>r}),this.subComponentSink$=t.filter(r=>Object.keys(r).length>0)}initSubComponentsRendered$(){const t=P.create({start:r=>{this.triggerSubComponentsRendered=r.next.bind(r)},stop:r=>{}});this.subComponentsRendered$=t.startWith(null)}initVdom$(){if(typeof this.view!="function"){this.vdom$=P.of(null);return}const t=this.collectRenderParameters();this.vdom$=t.map(this.view).compose(this.log("View rendered")).map(r=>r||{sel:"div",data:{},children:[]}).compose(this.instantiateSubComponents.bind(this)).filter(r=>r!==void 0).compose(this.renderVdom.bind(this))}initSinks(){this.sinks=this.sourceNames.reduce((t,r)=>{if(r==this.DOMSourceName)return t;const n=this.subComponentSink$&&r!==Ct?this.subComponentSink$.map(o=>o[r]).filter(o=>!!o).flatten():P.never();return r===this.stateSourceName?t[r]=P.merge(this.model$[r]||P.never(),n,this.sources[this.stateSourceName].stream.filter(o=>!1),...this.peers$[r]||[]):t[r]=P.merge(this.model$[r]||P.never(),n,...this.peers$[r]||[]),t},{}),this.sinks[this.DOMSourceName]=this.vdom$,this.sinks[Ct]=this.model$[Ct]||P.never()}makeOnAction(t,r=!0,n){return n=n||t,(o,i)=>{const a=t.filter(({type:f})=>f==o);let c;if(typeof i=="function")c=a.map(f=>{const h=(b,u,l=10)=>{if(typeof l!="number")throw new Error(`[${this.name} ] Invalid delay value provided to next() function in model action '${o}'. Must be a number in ms.`);setTimeout(()=>{n.shamefullySendNext({type:b,data:u})},l),this.log(`<${o}> Triggered a next() action: <${b}> ${l}ms delay`,!0)},v={props:this.currentProps,children:this.currentChildren,context:this.currentContext};let m=f.data;if(r)return b=>{const u=this.isSubComponent?this.currentState:b,l=this.addCalculated(u),p=i(l,m,h,v);return p==Pr?u:this.cleanupCalculated(p)};{const b=this.addCalculated(this.currentState),u=i(b,m,h,v),l=typeof u;if(F(u)||["string","number","boolean","function"].includes(l))return u;if(l=="undefined")return console.warn(`'undefined' value sent to ${o}`),u;throw new Error(`Invalid reducer type for ${o} ${l}`)}}).filter(f=>f!=Pr);else if(i===void 0||i===!0)c=a.map(({data:f})=>f);else{const f=i;c=a.mapTo(f)}return c}}createMemoizedAddCalculated(){let t,r;return function(n){if(!this.calculated||!F(n)||Array.isArray(n))return n;if(n===t)return r;if(!F(this.calculated))throw new Error("'calculated' parameter must be an object mapping calculated state field named to functions");const o=this.getCalculatedValues(n);if(!o)return t=n,r=n,n;const i=I(I({},n),o);return t=n,r=i,i}}getCalculatedValues(t){const r=Object.entries(this.calculated||{});if(r.length!==0)return r.reduce((n,[o,i])=>{if(typeof i!="function")throw new Error(`Missing or invalid calculator function for calculated field '${o}`);try{n[o]=i(t)}catch(a){console.warn(`Calculated field '${o}' threw an error during calculation: ${a.message}`)}return n},{})}cleanupCalculated(t){if(!t||!F(t)||Array.isArray(t))return t;const r=this.storeCalculatedInState?this.addCalculated(t):t,n=I({},r);return!this.calculated||this.storeCalculatedInState||Object.keys(this.calculated).forEach(i=>{this.initialState&&typeof this.initialState[i]!="undefined"?n[i]=this.initialState[i]:delete n[i]}),n}collectRenderParameters(){const t=this.sources[this.stateSourceName],r=I({},this.peers$[this.DOMSourceName]),n=t&&t.isolateSource(t,{get:f=>this.addCalculated(f)}),o=n&&n.stream||P.never();r.state=o.compose(K(Z)),this.sources.props$&&(r.props=this.sources.props$.compose(K(dc))),this.sources.children$&&(r.children=this.sources.children$.compose(K(Z))),this.context$&&(r.context=this.context$.compose(K(Z)));const i=[],a=[];return Object.entries(r).forEach(([f,h])=>{i.push(f),a.push(h)}),P.combine(...a).compose(zt(1)).map(f=>i.reduce((v,m,b)=>(v[m]=f[b],m==="state"&&(v[this.stateSourceName]=f[b],v.calculated=f[b]&&this.getCalculatedValues(f[b])||{}),v),{}))}instantiateSubComponents(t){return t.fold((r,n)=>{const o=Object.keys(this.components),i=jn(n,o),a=Object.entries(i),c={"::ROOT::":n};if(a.length===0)return c;const f={},h=[];let v=0;const m=a.reduce((u,[l,p])=>{const d=p.data,y=d.props||{},w=p.children||[],g=d.isCollection||!1,_=d.isSwitchable||!1,S=D=>{Object.entries(D).forEach(([T,M])=>{f[T]||(f[T]=[]),T===Ct?h.push(M):T!==this.DOMSourceName&&f[T].push(M)})};if(r[l]){const D=r[l];return u[l]=D,D.props$.shamefullySendNext(y),D.children$.shamefullySendNext(w),S(D.sink$),u}const O=P.create().startWith(y),E=P.create().startWith(w);let x;g?x=this.instantiateCollection.bind(this):_?x=this.instantiateSwitchable.bind(this):x=this.instantiateCustomComponent.bind(this),v++;const C=x(p,O,E);return C[this.DOMSourceName]=C[this.DOMSourceName]?this.makeCoordinatedSubComponentDomSink(C[this.DOMSourceName]):P.never(),u[l]={sink$:C,props$:O,children$:E},S(C),u},c),b=Object.entries(f).reduce((u,[l,p])=>(p.length===0||(u[l]=p.length===1?p[0]:P.merge(...p)),u),{});return this.newSubComponentSinks(b),this.newChildSources(h),v>0&&this.log(`New sub components instantiated: ${v}`,!0),m},{})}makeCoordinatedSubComponentDomSink(t){const r=t.remember();return this.sources[this.stateSourceName].stream.compose(K(Z)).map(o=>r).flatten().debug(o=>this.triggerSubComponentsRendered()).remember()}instantiateCollection(t,r,n){const i=t.data.props||{};let a=typeof i.filter=="function"?i.filter:void 0,c=Nr(i.sort);const f={filter:a,sort:c},h=P.combine(this.sources[this.stateSourceName].stream.startWith(this.currentState),r.startWith(i)).compose(zt(1)).map(([g,_])=>(_.filter!==f.filter&&(f.filter=typeof _.filter=="function"?_.filter:void 0),_.sort!==f.sort&&(f.sort=Nr(_.sort)),F(g)?this.addCalculated(g):g)),v=new Nt(h),m=i.from,b=i.of,u=i.idfield||"id";let l,p;if(typeof b=="function")if(b.isSygnalComponent)p=b;else{const g=b.componentName||b.label||b.name||"FUNCTION_COMPONENT",_=b,{model:S,intent:O,context:E,peers:x,components:C,initialState:D,calculated:T,storeCalculatedInState:M,DOMSourceName:j,stateSourceName:B,debug:V}=b;p=Kt({name:g,view:_,model:S,intent:O,context:E,peers:x,components:C,initialState:D,calculated:T,storeCalculatedInState:M,DOMSourceName:j,stateSourceName:B,debug:V})}else if(this.components[b])p=this.components[b];else throw new Error(`[${this.name}] Invalid 'of' propery in collection: ${b}`);const d={get:g=>{if(!Array.isArray(g[m]))return[];const _=g[m],S=typeof f.filter=="function"?_.filter(f.filter):_;return(f.sort,S.sort(f.sort)).map((x,C)=>F(x)?L(I({},x),{[u]:x[u]||C}):{value:x,[u]:C})},set:(g,_)=>{if(this.calculated&&m in this.calculated)return console.warn(`Collection sub-component of ${this.name} attempted to update state on a calculated field '${m}': Update ignored`),g;const S=[];for(const O of g[m].map((E,x)=>F(E)?L(I({},E),{[u]:E[u]||x}):{__primitive:!0,value:E,[u]:x}))if(typeof f.filter=="function"&&!f.filter(O))S.push(O.__primitive?O.value:O);else{const E=_.find(x=>x[u]===O[u]);typeof E!="undefined"&&S.push(O.__primitive?E.value:E)}return L(I({},g),{[m]:S})}};m===void 0?l={get:g=>!(g instanceof Array)&&g.value&&g.value instanceof Array?g.value:g,set:(g,_)=>_}:typeof m=="string"?F(this.currentState)?!(this.currentState&&m in this.currentState)&&!(this.calculated&&m in this.calculated)?(console.error(`Collection component in ${this.name} is attempting to use non-existent state property '${m}': To fix this error, specify a valid array property on the state.  Attempting to use parent component state.`),l=void 0):(Array.isArray(this.currentState[m])||console.warn(`State property '${m}' in collection comopnent of ${this.name} is not an array: No components will be instantiated in the collection.`),l=d):(Array.isArray(this.currentState[m])||console.warn(`State property '${m}' in collection component of ${this.name} is not an array: No components will be instantiated in the collection.`),l=d):F(m)?typeof m.get!="function"?(console.error(`Collection component in ${this.name} has an invalid 'from' field: Expecting 'undefined', a string indicating an array property in the state, or an object with 'get' and 'set' functions for retrieving and setting child state from the current state. Attempting to use parent component state.`),l=void 0):l={get:g=>{const _=m.get(g);return Array.isArray(_)?_:(console.warn(`State getter function in collection component of ${this.name} did not return an array: No components will be instantiated in the collection. Returned value:`,_),[])},set:m.set}:(console.error(`Collection component in ${this.name} has an invalid 'from' field: Expecting 'undefined', a string indicating an array property in the state, or an object with 'get' and 'set' functions for retrieving and setting child state from the current state. Attempting to use parent component state.`),l=void 0);const y=L(I({},this.sources),{[this.stateSourceName]:v,props$:r,children$:n,__parentContext$:this.context$,PARENT:null}),w=Na(p,l,{container:null})(y);if(!F(w))throw new Error("Invalid sinks returned from component factory of collection element");return w}instantiateSwitchable(t,r,n){const i=t.data.props||{},a=this.sources[this.stateSourceName].stream.startWith(this.currentState).map(d=>F(d)?this.addCalculated(d):d),c=new Nt(a),f=i.state;let h;const v={get:d=>d[f],set:(d,y)=>this.calculated&&f in this.calculated?(console.warn(`Switchable sub-component of ${this.name} attempted to update state on a calculated field '${f}': Update ignored`),d):!F(y)||Array.isArray(y)?L(I({},d),{[f]:y}):L(I({},d),{[f]:y})},m={get:d=>d,set:(d,y)=>y};typeof f=="undefined"?h=m:typeof f=="string"?h=v:F(f)?typeof f.get!="function"?(console.error(`Switchable component in ${this.name} has an invalid 'state' field: Expecting 'undefined', a string indicating an array property in the state, or an object with 'get' and 'set' functions for retrieving and setting sub-component state from the current state. Attempting to use parent component state.`),h=m):h={get:f.get,set:f.set}:(console.error(`Invalid state provided to switchable sub-component of ${this.name}: Expecting string, object, or undefined, but found ${typeof f}. Attempting to use parent component state.`),h=m);const b=i.of;Object.keys(b).forEach(d=>{const y=b[d];if(!y.isSygnalComponent){const w=y.componentName||y.label||y.name||"FUNCTION_COMPONENT",g=y,{model:_,intent:S,context:O,peers:E,components:x,initialState:C,calculated:D,storeCalculatedInState:T,DOMSourceName:M,stateSourceName:j,debug:B}=y,V={name:w,view:g,model:_,intent:S,context:O,peers:E,components:x,initialState:C,calculated:D,storeCalculatedInState:T,DOMSourceName:M,stateSourceName:j,debug:B};b[d]=Kt(V)}});const l=L(I({},this.sources),{[this.stateSourceName]:c,props$:r,children$:n,__parentContext$:this.context$}),p=ut(ec(b,r.map(d=>d.current)),{[this.stateSourceName]:h})(l);if(!F(p))throw new Error("Invalid sinks returned from component factory of switchable element");return p}instantiateCustomComponent(t,r,n){const o=t.sel,a=t.data.props||{},c=this.sources[this.stateSourceName].stream.startWith(this.currentState).map(d=>F(d)?this.addCalculated(d):d),f=new Nt(c),h=a.state;typeof a.sygnalFactory!="function"&&F(a.sygnalOptions)&&(a.sygnalFactory=Kt(a.sygnalOptions));const v=o==="sygnal-factory"?a.sygnalFactory:this.components[o]||a.sygnalFactory;if(!v)throw o==="sygnal-factory"?new Error("Component not found on element with Capitalized selector and nameless function: JSX transpilation replaces selectors starting with upper case letters with functions in-scope with the same name, Sygnal cannot see the name of the resulting component."):new Error(`Component not found: ${o}`);let m;const b={get:d=>d[h],set:(d,y)=>this.calculated&&h in this.calculated?(console.warn(`Sub-component of ${this.name} attempted to update state on a calculated field '${h}': Update ignored`),d):L(I({},d),{[h]:y})},u={get:d=>d,set:(d,y)=>y};typeof h=="undefined"?m=u:typeof h=="string"?m=b:F(h)?typeof h.get!="function"?(console.error(`Sub-component in ${this.name} has an invalid 'state' field: Expecting 'undefined', a string indicating an array property in the state, or an object with 'get' and 'set' functions for retrieving and setting sub-component state from the current state. Attempting to use parent component state.`),m=u):m={get:h.get,set:h.set}:(console.error(`Invalid state provided to sub-component of ${this.name}: Expecting string, object, or undefined, but found ${typeof h}. Attempting to use parent component state.`),m=u);const l=L(I({},this.sources),{[this.stateSourceName]:f,props$:r,children$:n,__parentContext$:this.context$}),p=ut(v,{[this.stateSourceName]:m})(l);if(!F(p)){const d=o==="sygnal-factory"?"custom element":o;throw new Error("Invalid sinks returned from component factory:",d)}return p}renderVdom(t){return P.combine(this.subComponentsRendered$,t).compose(zt(1)).map(([r,n])=>{const o=Object.keys(this.components),i=n["::ROOT::"],a=Object.entries(n).filter(([h])=>h!=="::ROOT::");if(a.length===0)return P.of(i);const c=[],f=a.map(([h,v])=>(c.push(h),v.sink$[this.DOMSourceName].startWith(void 0)));return f.length===0?P.of(i):P.combine(...f).compose(zt(1)).map(h=>{const v=h.reduce((u,l,p)=>(u[c[p]]=l,u),{}),m=Rn(i);return Mn(m,v,o)})}).flatten().filter(r=>!!r).remember()}}function hc(e){return function(t,r=!1){const n=typeof t=="function"?t:o=>t;if(r){this.debug&&console.log(`[${e}] ${n(t)}`);return}else return o=>o.debug(i=>{this.debug&&console.log(`[${e}] ${n(i)}`)})}}function jn(e,t,r=0,n=0,o){var u,l,p,d,y,w;if(!e)return{};if((u=e.data)!=null&&u.componentsProcessed)return{};r===0&&(e.data.componentsProcessed=!0);const i=e.sel,a=i&&i.toLowerCase()==="collection",c=i&&i.toLowerCase()==="switchable",f=i&&["collection","switchable","sygnal-factory",...t].includes(i)||typeof((p=(l=e.data)==null?void 0:l.props)==null?void 0:p.sygnalFactory)=="function"||F((y=(d=e.data)==null?void 0:d.props)==null?void 0:y.sygnalOptions),h=e.data&&e.data.props||{};e.data&&e.data.attrs;const v=e.children||[];let m={},b=o;if(f){if(b=Ln(e,r,n,o),a){if(!h.of)throw new Error("Collection element missing required 'component' property");if(typeof h.of!="string"&&typeof h.of!="function")throw new Error(`Invalid 'component' property of collection element: found ${typeof h.of} requires string or component factory function`);if(typeof h.of!="function"&&!t.includes(h.of))throw new Error(`Specified component for collection not found: ${h.of}`);typeof h.from!="undefined"&&!(typeof h.from=="string"||Array.isArray(h.from)||typeof h.from.get=="function")&&console.warn(`No valid array found for collection ${typeof h.of=="string"?h.of:"function component"}: no collection components will be created`,h.from),e.data.isCollection=!0,(w=e.data).props||(w.props={})}else if(c){if(!h.of)throw new Error("Switchable element missing required 'of' property");if(!F(h.of))throw new Error(`Invalid 'of' property of switchable element: found ${typeof h.of} requires object mapping names to component factories`);if(!Object.values(h.of).every(S=>typeof S=="function"))throw new Error("One or more components provided to switchable element is not a valid component factory");if(!h.current||typeof h.current!="string"&&typeof h.current!="function")throw new Error(`Missing or invalid 'current' property for switchable element: found '${typeof h.current}' requires string or function`);if(!Object.keys(h.of).includes(h.current))throw new Error(`Component '${h.current}' not found in switchable element`);e.data.isSwitchable=!0}typeof h.key=="undefined"&&(e.data.props.key=b),m[b]=e}return v.length>0&&v.map((g,_)=>jn(g,t,r+1,n+_,b)).forEach(g=>{Object.entries(g).forEach(([_,S])=>m[_]=S)}),m}function Mn(e,t,r,n=0,o=0,i){var b,u,l,p,d,y,w;if(!e)return;if((b=e.data)!=null&&b.componentsInjected)return e;n===0&&e.data&&(e.data.componentsInjected=!0);const a=e.sel||"NO SELECTOR",c=["collection","switchable","sygnal-factory",...r].includes(a)||typeof((l=(u=e.data)==null?void 0:u.props)==null?void 0:l.sygnalFactory)=="function"||F((d=(p=e.data)==null?void 0:p.props)==null?void 0:d.sygnalOptions),f=(y=e==null?void 0:e.data)==null?void 0:y.isCollection,h=(w=e==null?void 0:e.data)==null?void 0:w.isSwitchable;e.data&&e.data.props;const v=e.children||[];let m=i;if(c){m=Ln(e,n,o,i);const g=t[m];return f?(e.sel="div",e.children=Array.isArray(g)?g:[g],e):g}else return v.length>0&&(e.children=v.map((g,_)=>Mn(g,t,r,n+1,o+_,m)).flat()),e}function Ln(e,t,r,n){var m;const o=e.sel,i=typeof o=="string"?o:"functionComponent",a=`${t}:${r}`,c=((m=e.data)==null?void 0:m.props)||{},f=c.id&&JSON.stringify(c.id).replaceAll('"',"")||a;return`${n?`${n}|`:""}${i}::${f}`}function Rn(e){return typeof e=="undefined"?e:L(I({},e),{children:Array.isArray(e.children)?e.children.map(Rn):void 0,data:e.data&&L(I({},e.data),{componentsInjected:!1})})}function dc(e,t){return Z(yc(e))}function Z(e,t,r=5,n=0){if(n>r)return!1;if(e===t)return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;for(let a=0;a<e.length;a++)if(!Z(e[a],t[a],r,n+1))return!1;return!0}const o=Object.keys(e),i=Object.keys(t);if(o.length!==i.length)return!1;for(const a of o)if(!i.includes(a)||!Z(e[a],t[a],r,n+1))return!1;return!0}function yc(e){if(!F(e))return e;const a=e,{state:t,of:r,from:n,filter:o}=a;return Ke(a,["state","of","from","filter"])}function F(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}function Xt(e,t,r=!0){const n=r?1:-1;switch(!0){case e>t:return 1*n;case e<t:return-1*n;default:return 0}}function Cr(e){const t=Object.entries(e);if(t.length>1){console.error("Sort objects can only have one key:",e);return}const r=t[0],[n,o]=r;if(!["string","number"].includes(typeof o)){console.error("Sort object properties must be a string or number:",e);return}let i=!0;if(typeof o=="string"){if(!["asc","dec"].includes(o.toLowerCase())){console.error("Sort object string values must be asc or dec:",e);return}i=o.toLowerCase()==="asc"}if(typeof o=="number"){if(o!==1&&o!==-1){console.error("Sort object number values must be 1 or -1:",e);return}i=o===1}return(a,c)=>Xt(a[n],c[n],i)}function Nr(e){if(!e)return;const t=typeof e;if(t==="function")return e;if(t==="string"){if(e.toLowerCase()==="asc"||e.toLowerCase()==="dec"){const n=e.toLowerCase()==="asc";return(o,i)=>Xt(o,i,n)}const r=e;return(n,o)=>Xt(n[r],o[r],!0)}else if(Array.isArray(e)){const r=e.map(n=>{if(typeof n=="function")return n;if(typeof n=="string"&&!["asc","dec"].includes(n.toLowerCase()))return(o,i)=>Xt(o[n],i[n],!0);if(F(n))return Cr(n)});return(n,o)=>r.filter(i=>typeof i=="function").reduce((i,a)=>i!==0?i:a(n,o),0)}else{if(F(e))return Cr(e);console.error("Invalid sort option (ignoring):",item);return}}function mc(e,t={}){let{events:r=["input","submit"],preventDefault:n=!0}=t;typeof r=="string"&&(r=[r]);const o=r.map(a=>e.events(a));return P.merge(...o).map(a=>{n&&a.preventDefault();const c=a.type==="submit"?a.srcElement:a.currentTarget,f=new FormData(c);let h={};h.event=a,h.eventType=a.type;const v=c.querySelector("input[type=submit]:focus");if(v){const{name:m,value:b}=v;h[m||"submit"]=b}for(let[m,b]of f.entries())h[m]=b;return h})}var ze={};Object.defineProperty(ze,"__esModule",{value:!0});function Bn(){var e;return typeof window!="undefined"?e=window:typeof Y!="undefined"?e=Y:e=this,e.Cyclejs=e.Cyclejs||{},e=e.Cyclejs,e.adaptStream=e.adaptStream||function(t){return t},e}function vc(e){Bn().adaptStream=e}ze.setAdapt=vc;function gc(e){return Bn().adaptStream(e)}var _c=ze.adapt=gc;function bc(e){const t=new EventTarget;return e.subscribe({next:r=>t.dispatchEvent(new CustomEvent("data",{detail:r}))}),{select:r=>{const n=!r,o=Array.isArray(r)?r:[r];let i;const a=P.create({start:c=>{i=({detail:f})=>{const h=f&&f.data||null;(n||o.includes(f.type))&&c.next(h)},t.addEventListener("data",i)},stop:c=>t.removeEventListener("data",i)});return _c(a)}}}function wc(e){e.addListener({next:t=>{console.log(t)}})}function Sc(e,t={},r={}){const{mountPoint:n="#root",fragments:o=!0}=r;if(!e.isSygnalComponent){const f=e.name||e.componentName||e.label||"FUNCTIONAL_COMPONENT",h=e,{model:v,intent:m,context:b,peers:u,components:l,initialState:p,calculated:d,storeCalculatedInState:y,DOMSourceName:w,stateSourceName:g,debug:_}=e;e=Kt({name:f,view:h,model:v,intent:m,context:b,peers:u,components:l,initialState:p,calculated:d,storeCalculatedInState:y,DOMSourceName:w,stateSourceName:g,debug:_})}const i=rs(e,"STATE"),a={EVENTS:bc,DOM:Aa(n,{snabbdomOptions:{experimental:{fragments:o}}}),LOG:wc},c=I(I({},a),t);return hs(i,c)}function Un(...e){return e.reduce((t,r)=>(typeof r=="string"&&!t.includes(r)?t.push(...Gn(r)):Array.isArray(r)?t.push(...Oc(r)):typeof r=="object"&&t.push(...Ac(r)),t),[]).join(" ")}function Wn(e){return/^[a-zA-Z0-9-_]+$/.test(e)}function Gn(e){if(typeof e!="string")throw new Error("Class name must be a string");return e.trim().split(" ").reduce((t,r)=>{if(r.trim().length===0)return t;if(!Wn(r))throw new Error(`${r} is not a valid CSS class name`);return t.push(r),t},[])}function Oc(e){return e.map(Gn).flat()}function Ac(e){return Object.entries(e).filter(([r,n])=>typeof n=="function"?n():!!n).map(([r,n])=>{const o=r.trim();if(!Wn(o))throw new Error(`${o} is not a valid CSS class name`);return o})}var zn={};Object.defineProperty(zn,"__esModule",{value:!0});var $c=z,xc=function(){function e(t,r){this.dt=t,this.ins=r,this.type="throttle",this.out=null,this.id=null}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=null,this.id=null},e.prototype.clearInterval=function(){var t=this.id;t!==null&&clearInterval(t),this.id=null},e.prototype._n=function(t){var r=this,n=this.out;!n||this.id||(n._n(t),this.id=setInterval(function(){r.clearInterval()},this.dt))},e.prototype._e=function(t){var r=this.out;!r||(this.clearInterval(),r._e(t))},e.prototype._c=function(){var t=this.out;!t||(this.clearInterval(),t._c())},e}();function Ec(e){return function(r){return new $c.Stream(new xc(e,r))}}zn.default=Ec;var Et={},Pc=Y&&Y.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),o=0,t=0;t<r;t++)for(var i=arguments[t],a=0,c=i.length;a<c;a++,o++)n[o]=i[a];return n};Object.defineProperty(Et,"__esModule",{value:!0});Et.SampleCombineOperator=Et.SampleCombineListener=void 0;var Cc=z,st={},qn=function(){function e(t,r){this.i=t,this.p=r,r.ils[t]=this}return e.prototype._n=function(t){var r=this.p;r.out!==st&&r.up(t,this.i)},e.prototype._e=function(t){this.p._e(t)},e.prototype._c=function(){this.p.down(this.i,this)},e}();Et.SampleCombineListener=qn;var Hn=function(){function e(t,r){this.type="sampleCombine",this.ins=t,this.others=r,this.out=st,this.ils=[],this.Nn=0,this.vals=[]}return e.prototype._start=function(t){this.out=t;for(var r=this.others,n=this.Nn=r.length,o=this.vals=new Array(n),i=0;i<n;i++)o[i]=st,r[i]._add(new qn(i,this));this.ins._add(this)},e.prototype._stop=function(){var t=this.others,r=t.length,n=this.ils;this.ins._remove(this);for(var o=0;o<r;o++)t[o]._remove(n[o]);this.out=st,this.vals=[],this.ils=[]},e.prototype._n=function(t){var r=this.out;r!==st&&(this.Nn>0||r._n(Pc([t],this.vals)))},e.prototype._e=function(t){var r=this.out;r!==st&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==st&&t._c()},e.prototype.up=function(t,r){var n=this.vals[r];this.Nn>0&&n===st&&this.Nn--,this.vals[r]=t},e.prototype.down=function(t,r){this.others[t]._remove(r)},e}();Et.SampleCombineOperator=Hn;var Vn;Vn=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return function(o){return new Cc.Stream(new Hn(o,t))}};var Nc=Et.default=Vn;function Ic(e){e.subscribe({next:t=>{const{selector:r,value:n}=t.data;if(t.type==="SET_VALUE")for(let o of document.querySelectorAll(r))o.value=n||"",o.dispatchEvent(new Event("change"));t.type==="FOCUS"&&document.querySelector(r).focus()}})}function kc(e){return e.addListener({next:({key:t,value:r})=>{try{localStorage.setItem(t,JSON.stringify(r))}catch(n){console.log(n)}}}),{get:(t,r,n=!1)=>{const o=window.localStorage.getItem(t);let i;try{i=o&&o!="null"?JSON.parse(o):r}catch{console.log("Error reading from local storage"),i=r}return n?e.filter(({key:a,value:c})=>t==a).map(({value:a})=>a).compose(K()).startWith(i):P.of(i)}}}var Jn={};(function(e){(function(t){var r=document.location;function n(){return r.hash===""||r.hash==="#"}var o={mode:"modern",hash:r.hash,history:!1,check:function(){var u=r.hash;u!=this.hash&&(this.hash=u,this.onHashChanged())},fire:function(){this.mode==="modern"?this.history===!0?window.onpopstate():window.onhashchange():this.onHashChanged()},init:function(u,l){var p=this;this.history=l,i.listeners||(i.listeners=[]);function d(w){for(var g=0,_=i.listeners.length;g<_;g++)i.listeners[g](w)}if("onhashchange"in window&&(document.documentMode===void 0||document.documentMode>7))this.history===!0?setTimeout(function(){window.onpopstate=d},500):window.onhashchange=d,this.mode="modern";else{var y=document.createElement("iframe");y.id="state-frame",y.style.display="none",document.body.appendChild(y),this.writeFrame(""),"onpropertychange"in document&&"attachEvent"in document&&document.attachEvent("onpropertychange",function(){event.propertyName==="location"&&p.check()}),window.setInterval(function(){p.check()},50),this.onHashChanged=d,this.mode="legacy"}return i.listeners.push(u),this.mode},destroy:function(u){if(!(!i||!i.listeners))for(var l=i.listeners,p=l.length-1;p>=0;p--)l[p]===u&&l.splice(p,1)},setHash:function(u){return this.mode==="legacy"&&this.writeFrame(u),this.history===!0?(window.history.pushState({},document.title,u),this.fire()):r.hash=u[0]==="/"?u:"/"+u,this},writeFrame:function(u){var l=document.getElementById("state-frame"),p=l.contentDocument||l.contentWindow.document;p.open(),p.write("<script>_hash = '"+u+"'; onload = parent.listener.syncHash;<script>"),p.close()},syncHash:function(){var u=this._hash;return u!=r.hash&&(r.hash=u),this},onHashChanged:function(){}},i=t.Router=function(u){if(!(this instanceof i))return new i(u);this.params={},this.routes={},this.methods=["on","once","after","before"],this.scope=[],this._methods={},this._insert=this.insert,this.insert=this.insertEx,this.historySupport=(window.history!=null?window.history.pushState:null)!=null,this.configure(),this.mount(u||{})};i.prototype.init=function(u){var l=this,p;return this.handler=function(d){var y=d&&d.newURL||window.location.hash,w=l.history===!0?l.getPath():y.replace(/.*#/,"");l.dispatch("on",w.charAt(0)==="/"?w:"/"+w)},o.init(this.handler,this.history),this.history===!1?n()&&u?r.hash=u:n()||l.dispatch("on","/"+r.hash.replace(/^(#\/|#|\/)/,"")):(this.convert_hash_in_init?(p=n()&&u?u:n()?null:r.hash.replace(/^#/,""),p&&window.history.replaceState({},document.title,p)):p=this.getPath(),(p||this.run_in_init===!0)&&this.handler()),this},i.prototype.explode=function(){var u=this.history===!0?this.getPath():r.hash;return u.charAt(1)==="/"&&(u=u.slice(1)),u.slice(1,u.length).split("/")},i.prototype.setRoute=function(u,l,p){var d=this.explode();return typeof u=="number"&&typeof l=="string"?d[u]=l:typeof p=="string"?d.splice(u,l,s):d=[u],o.setHash(d.join("/")),d},i.prototype.insertEx=function(u,l,p,d){return u==="once"&&(u="on",p=function(y){var w=!1;return function(){if(!w)return w=!0,y.apply(this,arguments)}}(p)),this._insert(u,l,p,d)},i.prototype.getRoute=function(u){var l=u;if(typeof u=="number")l=this.explode()[u];else if(typeof u=="string"){var p=this.explode();l=p.indexOf(u)}else l=this.explode();return l},i.prototype.destroy=function(){return o.destroy(this.handler),this},i.prototype.getPath=function(){var u=window.location.pathname;return u.substr(0,1)!=="/"&&(u="/"+u),u};function a(u,l){for(var p=0;p<u.length;p+=1)if(l(u[p],p,u)===!1)return}function c(u){for(var l=[],p=0,d=u.length;p<d;p++)l=l.concat(u[p]);return l}function f(u,l,p){if(!u.length)return p();var d=0;(function y(){l(u[d],function(w){w||w===!1?(p(w),p=function(){}):(d+=1,d===u.length?p():y())})})()}function h(u,l,p){p=u;for(var d in l)if(l.hasOwnProperty(d)&&(p=l[d](u),p!==u))break;return p===u?"([._a-zA-Z0-9-%()]+)":p}function v(u,l){for(var p,d=0,y="";p=u.substr(d).match(/[^\w\d\- %@&]*\*[^\w\d\- %@&]*/);)d=p.index+p[0].length,p[0]=p[0].replace(/^\*/,"([_.()!\\ %@&a-zA-Z0-9-]+)"),y+=u.substr(0,p.index)+p[0];u=y+=u.substr(d);var w=u.match(/:([^\/]+)/ig),g,_;if(w){_=w.length;for(var S=0;S<_;S++)g=w[S],g.slice(0,2)==="::"?u=g.slice(1):u=u.replace(g,h(g,l))}return u}function m(u,l,_,S){var y=0,w=0,g=0,_=(_||"(").toString(),S=(S||")").toString(),O;for(O=0;O<u.length;O++){var E=u[O];if(E.indexOf(_,y)>E.indexOf(S,y)||~E.indexOf(_,y)&&!~E.indexOf(S,y)||!~E.indexOf(_,y)&&~E.indexOf(S,y)){if(w=E.indexOf(_,y),g=E.indexOf(S,y),~w&&!~g||!~w&&~g){var x=u.slice(0,(O||1)+1).join(l);u=[x].concat(u.slice((O||1)+1))}y=(g>w?g:w)+1,O=0}else y=0}return u}var b=/\?.*/;i.prototype.configure=function(u){u=u||{};for(var l=0;l<this.methods.length;l++)this._methods[this.methods[l]]=!0;return this.recurse=u.recurse||this.recurse||!1,this.async=u.async||!1,this.delimiter=u.delimiter||"/",this.strict=typeof u.strict=="undefined"?!0:u.strict,this.notfound=u.notfound,this.resource=u.resource,this.history=u.html5history&&this.historySupport||!1,this.run_in_init=this.history===!0&&u.run_handler_in_init!==!1,this.convert_hash_in_init=this.history===!0&&u.convert_hash_in_init!==!1,this.every={after:u.after||null,before:u.before||null,on:u.on||null},this},i.prototype.param=function(u,l){u[0]!==":"&&(u=":"+u);var p=new RegExp(u,"g");return this.params[u]=function(d){return d.replace(p,l.source||l)},this},i.prototype.on=i.prototype.route=function(u,l,p){var d=this;if(!p&&typeof l=="function"&&(p=l,l=u,u="on"),Array.isArray(l))return l.forEach(function(y){d.on(u,y,p)});if(l.source&&(l=l.source.replace(/\\\//ig,"/")),Array.isArray(u))return u.forEach(function(y){d.on(y.toLowerCase(),l,p)});l=l.split(new RegExp(this.delimiter)),l=m(l,this.delimiter),this.insert(u,this.scope.concat(l),p)},i.prototype.path=function(u,l){var p=this.scope.length;u.source&&(u=u.source.replace(/\\\//ig,"/")),u=u.split(new RegExp(this.delimiter)),u=m(u,this.delimiter),this.scope=this.scope.concat(u),l.call(this,this),this.scope.splice(p,u.length)},i.prototype.dispatch=function(u,l,p){var d=this,y=this.traverse(u,l.replace(b,""),this.routes,""),w=this._invoked,g;if(this._invoked=!0,!y||y.length===0)return this.last=[],typeof this.notfound=="function"&&this.invoke([this.notfound],{method:u,path:l},p),!1;this.recurse==="forward"&&(y=y.reverse());function _(){d.last=y.after,d.invoke(d.runlist(y),d,p)}return g=this.every&&this.every.after?[this.every.after].concat(this.last):[this.last],g&&g.length>0&&w?(this.async?this.invoke(g,this,_):(this.invoke(g,this),_()),!0):(_(),!0)},i.prototype.invoke=function(u,l,p){var d=this,y;this.async?(y=function(w,g){if(Array.isArray(w))return f(w,y,g);typeof w=="function"&&w.apply(l,(u.captures||[]).concat(g))},f(u,y,function(){p&&p.apply(l,arguments)})):(y=function(w){if(Array.isArray(w))return a(w,y);if(typeof w=="function")return w.apply(l,u.captures||[]);typeof w=="string"&&d.resource&&d.resource[w].apply(l,u.captures||[])},a(u,y))},i.prototype.traverse=function(u,l,p,d,y){var w=[],g,_,S,O;function E(C){if(!y)return C;function D(j){for(var B=[],V=0;V<j.length;V++)B[V]=Array.isArray(j[V])?D(j[V]):j[V];return B}function T(j){for(var B=j.length-1;B>=0;B--)Array.isArray(j[B])?(T(j[B]),j[B].length===0&&j.splice(B,1)):y(j[B])||j.splice(B,1)}var M=D(C);return M.matched=C.matched,M.captures=C.captures,M.after=C.after.filter(y),T(M),M}if(l===this.delimiter&&p[u])return O=[[p.before,p[u]].filter(Boolean)],O.after=[p.after].filter(Boolean),O.matched=!0,O.captures=[],E(O);for(var x in p)if(p.hasOwnProperty(x)&&(!this._methods[x]||this._methods[x]&&typeof p[x]=="object"&&!Array.isArray(p[x]))){if(g=_=d+this.delimiter+x,this.strict||(_+="["+this.delimiter+"]?"),S=l.match(new RegExp("^"+_)),!S)continue;if(S[0]&&S[0]==l&&p[x][u])return O=[[p[x].before,p[x][u]].filter(Boolean)],O.after=[p[x].after].filter(Boolean),O.matched=!0,O.captures=S.slice(1),this.recurse&&p===this.routes&&(O.push([p.before,p.on].filter(Boolean)),O.after=O.after.concat([p.after].filter(Boolean))),E(O);if(O=this.traverse(u,l,p[x],g),O.matched)return O.length>0&&(w=w.concat(O)),this.recurse&&(w.push([p[x].before,p[x].on].filter(Boolean)),O.after=O.after.concat([p[x].after].filter(Boolean)),p===this.routes&&(w.push([p.before,p.on].filter(Boolean)),O.after=O.after.concat([p.after].filter(Boolean)))),w.matched=!0,w.captures=O.captures,w.after=O.after,E(w)}return!1},i.prototype.insert=function(u,l,p,d){var y,w,g,_,S;if(l=l.filter(function(O){return O&&O.length>0}),d=d||this.routes,S=l.shift(),/\:|\*/.test(S)&&!/\\d|\\w/.test(S)&&(S=v(S,this.params)),l.length>0)return d[S]=d[S]||{},this.insert(u,l,p,d[S]);if(!S&&!l.length&&d===this.routes){switch(y=typeof d[u],y){case"function":d[u]=[d[u],p];return;case"object":d[u].push(p);return;case"undefined":d[u]=p;return}return}if(w=typeof d[S],g=Array.isArray(d[S]),d[S]&&!g&&w=="object")switch(y=typeof d[S][u],y){case"function":d[S][u]=[d[S][u],p];return;case"object":d[S][u].push(p);return;case"undefined":d[S][u]=p;return}else if(w=="undefined"){_={},_[u]=p,d[S]=_;return}throw new Error("Invalid route context: "+w)},i.prototype.extend=function(u){var l=this,p=u.length,d;function y(w){l._methods[w]=!0,l[w]=function(){var g=arguments.length===1?[w,""]:[w];l.on.apply(l,g.concat(Array.prototype.slice.call(arguments)))}}for(d=0;d<p;d++)y(u[d])},i.prototype.runlist=function(u){var l=this.every&&this.every.before?[this.every.before].concat(c(u)):c(u);return this.every&&this.every.on&&l.push(this.every.on),l.captures=u.captures,l.source=u.source,l},i.prototype.mount=function(u,l){if(!u||typeof u!="object"||Array.isArray(u))return;var p=this;l=l||[],Array.isArray(l)||(l=l.split(p.delimiter));function d(w,g){var _=w,S=w.split(p.delimiter),O=typeof u[w],E=S[0]===""||!p._methods[S[0]],x=E?"on":_;if(E&&(_=_.slice((_.match(new RegExp("^"+p.delimiter))||[""])[0].length),S.shift()),E&&O==="object"&&!Array.isArray(u[w])){g=g.concat(S),p.mount(u[w],g);return}E&&(g=g.concat(_.split(p.delimiter)),g=m(g,p.delimiter)),p.insert(x,g,u[w])}for(var y in u)u.hasOwnProperty(y)&&d(y,l.slice(0))}})(e)})(Jn);function Dc(e){const t=new Jn.Router;t.configure({notfound:n=>{window.location.hash=""}}),t.init();const r=P.create({start:n=>{e.subscribe({next:o=>{o=Array.isArray(o)?o:[o];for(let i of o)t.on(i,a=>{n.next(i)})}})},stop:n=>{}});return H(r)}var Zt=Object.prototype.hasOwnProperty,Yn=Object.prototype.toString,Ir=Object.defineProperty,kr=Object.getOwnPropertyDescriptor,Dr=function(t){return typeof Array.isArray=="function"?Array.isArray(t):Yn.call(t)==="[object Array]"},Tr=function(t){if(!t||Yn.call(t)!=="[object Object]")return!1;var r=Zt.call(t,"constructor"),n=t.constructor&&t.constructor.prototype&&Zt.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!r&&!n)return!1;var o;for(o in t);return typeof o=="undefined"||Zt.call(t,o)},Fr=function(t,r){Ir&&r.name==="__proto__"?Ir(t,r.name,{enumerable:!0,configurable:!0,value:r.newValue,writable:!0}):t[r.name]=r.newValue},jr=function(t,r){if(r==="__proto__")if(Zt.call(t,r)){if(kr)return kr(t,r).value}else return;return t[r]},Kn=function e(){var t,r,n,o,i,a,c=arguments[0],f=1,h=arguments.length,v=!1;for(typeof c=="boolean"&&(v=c,c=arguments[1]||{},f=2),(c==null||typeof c!="object"&&typeof c!="function")&&(c={});f<h;++f)if(t=arguments[f],t!=null)for(r in t)n=jr(c,r),o=jr(t,r),c!==o&&(v&&o&&(Tr(o)||(i=Dr(o)))?(i?(i=!1,a=n&&Dr(n)?n:[]):a=n&&Tr(n)?n:{},Fr(c,{name:r,newValue:e(v,a,o)})):typeof o!="undefined"&&Fr(c,{name:r,newValue:o}));return c};const Tc=e=>e===void 0,Fc=e=>typeof e=="number",jc=e=>typeof e=="string",Xn=e=>jc(e)||Fc(e),Mc=e=>Array.isArray(e),Lc=e=>typeof e=="object"&&e!==null,Rc=e=>typeof e=="function",Bc=e=>Lc(e)&&"sel"in e&&"data"in e&&"children"in e&&"text"in e,Uc={svg:1,circle:1,ellipse:1,line:1,polygon:1,polyline:1,rect:1,g:1,path:1,text:1},Wc=e=>e.sel in Uc,Te=(...e)=>Kn(!0,...e),Gc=(...e)=>Kn(!1,...e),Zn=(e,t,r)=>{let n=r;for(let o=0;o<e.length;o++){const i=e[o];Mc(i)?n=Zn(i,t,n):n=t(n,i)}return n},qe=(e,t)=>Object.keys(e).map(r=>t(r,e[r])).reduce((r,n)=>Te(r,n),{}),zc=(e,t)=>qe(e,(r,n)=>{const o=r.indexOf("-");if(o>-1&&t[r.slice(0,o)]!==void 0){const i={[r.slice(o+1)]:n};return{[r.slice(0,o)]:i}}return{[r]:n}}),Mr=(e,t)=>qe(t,(r,n)=>r!==e?{[r]:n}:{}),Qn=e=>Xn(e)?{text:e,sel:void 0,data:void 0,children:void 0,elm:void 0,key:void 0}:void 0,He=e=>Wc(e)?Gc(e,{data:Mr("props",Te(e.data,{ns:"http://www.w3.org/2000/svg",attrs:Mr("className",Te(e.data.props,{class:e.data.props?e.data.props.className:void 0}))}))},{children:Tc(e.children)?void 0:e.children.map(t=>He(t))}):e,ct={for:"attrs",role:"attrs",tabindex:"attrs","aria-*":"attrs",key:null},qc=(e,t)=>qe(e,(r,n)=>{const o={[r]:n};if(ct[r]&&t[ct[r]]!==void 0)return{[ct[r]]:o};if(ct[r]===null)return{};const i=Object.keys(ct);for(let a=0;a<i.length;a++){const c=i[a];if(c.charAt(c.length-1)==="*"&&r.indexOf(c.slice(0,-1))===0&&t[ct[c]]!==void 0)return{[ct[c]]:o}}return t[r]!==void 0?{[t[r]?t[r]:r]:n}:t.props!==void 0?{props:o}:o}),Hc=(e,t)=>He(qc(zc(e,t),t)),Vc=e=>e.length>1||!Xn(e[0])?void 0:e[0].toString(),Jc=e=>Zn(e,(t,r)=>{const n=Bc(r)?r:Qn(r);return t.push(n),t},[]),Yc={attrs:"",props:"",class:"",data:"dataset",style:"",hook:"",on:""},Kc=e=>(t,r,...n)=>{if(typeof t=="undefined"&&(t="UNDEFINED",console.error("JSX Error: Capitalized HTML element without corresponding factory function.  Components with names where the first letter is capital MUST be defined or included at the parent component's file scope.")),Rc(t)){if(t.name==="Fragment")return t(r||{},n);if(r||(r={}),t.isSygnalComponent){const i=t;t=t.componentName||t.label||t.name||"sygnal-factory",r.sygnalFactory=i}else{const i=t.componentName||t.label||t.name||"FUNCTION_COMPONENT",a=t,{model:c,intent:f,context:h,peers:v,components:m,initialState:b,calculated:u,storeCalculatedInState:l,DOMSourceName:p,stateSourceName:d,debug:y}=t,w={name:i,view:a,model:c,intent:f,context:h,peers:v,components:m,initialState:b,calculated:u,storeCalculatedInState:l,DOMSourceName:p,stateSourceName:d,debug:y};r.sygnalOptions=w,t=i}}const o=Vc(n);return He({sel:t,data:r?Hc(r,e):{},children:typeof o!="undefined"?Qn(o):Jc(n),text:o,elm:void 0,key:r?r.key:void 0})},R=Kc(Yc);function Xc(e,t=""){const r=e.events("input"),n=e.events("keydown"),o=e.events("keyup");e.events("change");const i=e.events("focus"),a=e.events("blur"),c=P.merge(i,r).map(v=>v.target.value).startWith(t).remember(),f=n.filter(v=>v.keyCode===13).mapTo("enter"),h=n.filter(v=>v.keyCode===27).mapTo("escape");return{value$:c,input$:r,enter$:f,escape$:h,focus$:i,blur$:a,keydown$:n,keyup$:o}}function ce({state:e}){const{id:t,completed:r,editing:n,title:o}=e,i=Un("todo","todo-"+t,{completed:r,editing:n});return R("li",{className:i},R("div",{className:"view"},R("input",{className:"toggle",type:"checkbox",checked:!!r}),R("label",null,o),R("button",{className:"destroy"})),R("input",{className:"edit",type:"text",value:o}))}ce.calculated={inputSelector:e=>`.todo-${e.id} .edit`};ce.model={TOGGLE:e=>L(I({},e),{completed:!e.completed}),DESTROY:e=>{},EDIT_START:(e,t,r)=>{const n=e.inputSelector;return r("SET_EDIT_VALUE",{selector:n,value:e.title}),r("FOCUS_EDIT_FIELD",{selector:n},100),L(I({},e),{editing:!0,cachedTitle:e.title})},EDIT_DONE:(e,t)=>e.editing===!1?e:L(I({},e),{title:t,editing:!1,cachedTitle:""}),EDIT_CANCEL:(e,t,r)=>{const n=e.inputSelector;return r("SET_EDIT_VALUE",{selector:n,value:e.cachedTitle}),L(I({},e),{title:e.cachedTitle,editing:!1,cachedTitle:""})},SET_EDIT_VALUE:{DOMFX:(e,t)=>({type:"SET_VALUE",data:t})},FOCUS_EDIT_FIELD:{DOMFX:(e,t)=>({type:"FOCUS",data:t})}};ce.intent=({DOM:e})=>{const t=e.select(".toggle").events("click"),r=e.select(".todo label").events("dblclick"),n=e.select(".destroy").events("click"),o=e.select(".edit"),{value$:i,enter$:a,escape$:c,blur$:f}=Xc(o),h=P.merge(a,f).compose(Nc(i)).map(([v,m])=>m);return{TOGGLE:t,DESTROY:n,EDIT_START:r,EDIT_DONE:h,EDIT_CANCEL:c}};window.DEBUG=!0;const Fe={all:e=>!0,active:e=>!e.completed,completed:e=>e.completed};function Mt({state:e}){const{visibility:t,total:r,remaining:n,completed:o,allDone:i}=e,a=Object.keys(Fe),c=h=>h.charAt(0).toUpperCase()+h.slice(1),f=h=>R("li",null,R("a",{href:`#/${h}`,className:Un({selected:t==h})},c(h)));return R("section",{className:"todoapp"},R("header",{className:"header"},R("h1",null,"todos"),R("form",{className:"new-todo-form"},R("input",{className:"new-todo",name:"new-todo",autofocus:!0,autocomplete:"off",placeholder:"What needs to be done?"}))),r>0&&R("section",{className:"main"},R("input",{id:"toggle-all",className:"toggle-all",type:"checkbox",checked:i}),R("label",{for:"toggle-all"},"Mark all as complete"),R("ul",{className:"todo-list"},R("collection",{of:ce,from:"todos",filter:Fe[t],test:t}))),r>0&&R("footer",{className:"footer"},R("span",{className:"todo-count"},R("strong",null,n)," ",n===1?"item":"items"," left"),R("ul",{className:"filters"},a.map(f)),o>0&&R("button",{className:"clear-completed"},"Clear completed")))}Mt.initialState={visibility:"all",todos:[]};Mt.calculated={total:e=>e.todos.length,remaining:e=>e.todos.filter(t=>!t.completed).length,completed:e=>e.todos.filter(t=>t.completed).length,allDone:e=>e.todos.every(t=>t.completed)};Mt.model={VISIBILITY:(e,t)=>L(I({},e),{visibility:t}),FROM_STORE:(e,t)=>L(I({},e),{todos:t}),NEW_TODO:(e,t,r)=>{const o={id:Date.now(),title:t,completed:!1};return r("CLEAR_FORM"),L(I({},e),{todos:[...e.todos,o]})},TOGGLE_ALL:e=>{const t=e.todos.every(n=>n.completed),r=e.todos.map(n=>L(I({},n),{completed:!t}));return L(I({},e),{todos:r})},CLEAR_COMPLETED:e=>{const t=e.todos.filter(r=>!r.completed);return L(I({},e),{todos:t})},CLEAR_FORM:{DOMFX:{type:"SET_VALUE",data:{selector:".new-todo"}}},ADD_ROUTE:{ROUTER:!0},TO_STORE:{STORE:(e,t)=>{const r=e.todos.map(({id:n,title:o,completed:i})=>({id:n,title:o,completed:i}));return{key:"todos",value:r}}}};Mt.intent=({STATE:e,DOM:t,ROUTER:r,STORE:n})=>{const o=n.get("todos",[]),i=t.select(".toggle-all").events("click"),a=t.select(".clear-completed").events("click"),c=t.select(".new-todo-form"),f=mc(c,{events:"submit"}).map(m=>m["new-todo"].trim()).filter(m=>m!==""),h=P.fromArray(Object.keys(Fe)),v=e.stream.drop(2);return{VISIBILITY:r,FROM_STORE:o,NEW_TODO:f,TOGGLE_ALL:i,CLEAR_COMPLETED:a,ADD_ROUTE:h,TO_STORE:v}};const Zc={DOMFX:Ic,STORE:kc,ROUTER:Dc};Sc(Mt,Zc);
