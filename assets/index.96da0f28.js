var Gn=Object.defineProperty,zn=Object.defineProperties;var Hn=Object.getOwnPropertyDescriptors;var Ge=Object.getOwnPropertySymbols;var Vn=Object.prototype.hasOwnProperty,Jn=Object.prototype.propertyIsEnumerable;var ze=(e,t,r)=>t in e?Gn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Y=(e,t)=>{for(var r in t||(t={}))Vn.call(t,r)&&ze(e,r,t[r]);if(Ge)for(var r of Ge(t))Jn.call(t,r)&&ze(e,r,t[r]);return e},X=(e,t)=>zn(e,Hn(t));const Kn=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerpolicy&&(i.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?i.credentials="include":o.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(o){if(o.ep)return;o.ep=!0;const i=r(o);fetch(o.href,i)}};Kn();var Q=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},H={},Dr={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t;function t(r){var n,o=r.Symbol;if(typeof o=="function")if(o.observable)n=o.observable;else{n=o.for("https://github.com/benlesh/symbol-observable");try{o.observable=n}catch{}}else n="@@observable";return n}})(Dr);var Yn=Dr,He=Object.prototype.toString,kr=function(t){var r=He.call(t),n=r==="[object Arguments]";return n||(n=r!=="[object Array]"&&t!==null&&typeof t=="object"&&typeof t.length=="number"&&t.length>=0&&He.call(t.callee)==="[object Function]"),n},jr;if(!Object.keys){var Ut=Object.prototype.hasOwnProperty,Ve=Object.prototype.toString,Xn=kr,Je=Object.prototype.propertyIsEnumerable,Zn=!Je.call({toString:null},"toString"),Qn=Je.call(function(){},"prototype"),qt=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],ae=function(e){var t=e.constructor;return t&&t.prototype===e},to={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},eo=function(){if(typeof window=="undefined")return!1;for(var e in window)try{if(!to["$"+e]&&Ut.call(window,e)&&window[e]!==null&&typeof window[e]=="object")try{ae(window[e])}catch{return!0}}catch{return!0}return!1}(),ro=function(e){if(typeof window=="undefined"||!eo)return ae(e);try{return ae(e)}catch{return!1}};jr=function(t){var r=t!==null&&typeof t=="object",n=Ve.call(t)==="[object Function]",o=Xn(t),i=r&&Ve.call(t)==="[object String]",a=[];if(!r&&!n&&!o)throw new TypeError("Object.keys called on a non-object");var u=Qn&&n;if(i&&t.length>0&&!Ut.call(t,0))for(var p=0;p<t.length;++p)a.push(String(p));if(o&&t.length>0)for(var h=0;h<t.length;++h)a.push(String(h));else for(var m in t)!(u&&m==="prototype")&&Ut.call(t,m)&&a.push(String(m));if(Zn)for(var d=ro(t),O=0;O<qt.length;++O)!(d&&qt[O]==="constructor")&&Ut.call(t,qt[O])&&a.push(qt[O]);return a}}var no=jr,oo=Array.prototype.slice,io=kr,Ke=Object.keys,Ht=Ke?function(t){return Ke(t)}:no,Ye=Object.keys;Ht.shim=function(){if(Object.keys){var t=function(){var r=Object.keys(arguments);return r&&r.length===arguments.length}(1,2);t||(Object.keys=function(n){return io(n)?Ye(oo.call(n)):Ye(n)})}else Object.keys=Ht;return Object.keys||Ht};var ao=Ht,so=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var t={},r=Symbol("test"),n=Object(r);if(typeof r=="string"||Object.prototype.toString.call(r)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var o=42;t[r]=o;for(r in t)return!1;if(typeof Object.keys=="function"&&Object.keys(t).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(t).length!==0)return!1;var i=Object.getOwnPropertySymbols(t);if(i.length!==1||i[0]!==r||!Object.prototype.propertyIsEnumerable.call(t,r))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var a=Object.getOwnPropertyDescriptor(t,r);if(a.value!==o||a.enumerable!==!0)return!1}return!0},Xe=typeof Symbol!="undefined"&&Symbol,uo=so,fo=function(){return typeof Xe!="function"||typeof Symbol!="function"||typeof Xe("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:uo()},co="Function.prototype.bind called on incompatible ",se=Array.prototype.slice,lo=Object.prototype.toString,po="[object Function]",ho=function(t){var r=this;if(typeof r!="function"||lo.call(r)!==po)throw new TypeError(co+r);for(var n=se.call(arguments,1),o,i=function(){if(this instanceof o){var m=r.apply(this,n.concat(se.call(arguments)));return Object(m)===m?m:this}else return r.apply(t,n.concat(se.call(arguments)))},a=Math.max(0,r.length-n.length),u=[],p=0;p<a;p++)u.push("$"+p);if(o=Function("binder","return function ("+u.join(",")+"){ return binder.apply(this,arguments); }")(i),r.prototype){var h=function(){};h.prototype=r.prototype,o.prototype=new h,h.prototype=null}return o},yo=ho,Mr=Function.prototype.bind||yo,vo=Mr,mo=vo.call(Function.call,Object.prototype.hasOwnProperty),C,Et=SyntaxError,Lr=Function,Ot=TypeError,ue=function(e){try{return Lr('"use strict"; return ('+e+").constructor;")()}catch{}},vt=Object.getOwnPropertyDescriptor;if(vt)try{vt({},"")}catch{vt=null}var fe=function(){throw new Ot},go=vt?function(){try{return arguments.callee,fe}catch{try{return vt(arguments,"callee").get}catch{return fe}}}():fe,gt=fo(),lt=Object.getPrototypeOf||function(e){return e.__proto__},wt={},bo=typeof Uint8Array=="undefined"?C:lt(Uint8Array),At={"%AggregateError%":typeof AggregateError=="undefined"?C:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer=="undefined"?C:ArrayBuffer,"%ArrayIteratorPrototype%":gt?lt([][Symbol.iterator]()):C,"%AsyncFromSyncIteratorPrototype%":C,"%AsyncFunction%":wt,"%AsyncGenerator%":wt,"%AsyncGeneratorFunction%":wt,"%AsyncIteratorPrototype%":wt,"%Atomics%":typeof Atomics=="undefined"?C:Atomics,"%BigInt%":typeof BigInt=="undefined"?C:BigInt,"%Boolean%":Boolean,"%DataView%":typeof DataView=="undefined"?C:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array=="undefined"?C:Float32Array,"%Float64Array%":typeof Float64Array=="undefined"?C:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry=="undefined"?C:FinalizationRegistry,"%Function%":Lr,"%GeneratorFunction%":wt,"%Int8Array%":typeof Int8Array=="undefined"?C:Int8Array,"%Int16Array%":typeof Int16Array=="undefined"?C:Int16Array,"%Int32Array%":typeof Int32Array=="undefined"?C:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":gt?lt(lt([][Symbol.iterator]())):C,"%JSON%":typeof JSON=="object"?JSON:C,"%Map%":typeof Map=="undefined"?C:Map,"%MapIteratorPrototype%":typeof Map=="undefined"||!gt?C:lt(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise=="undefined"?C:Promise,"%Proxy%":typeof Proxy=="undefined"?C:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect=="undefined"?C:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set=="undefined"?C:Set,"%SetIteratorPrototype%":typeof Set=="undefined"||!gt?C:lt(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer=="undefined"?C:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":gt?lt(""[Symbol.iterator]()):C,"%Symbol%":gt?Symbol:C,"%SyntaxError%":Et,"%ThrowTypeError%":go,"%TypedArray%":bo,"%TypeError%":Ot,"%Uint8Array%":typeof Uint8Array=="undefined"?C:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray=="undefined"?C:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array=="undefined"?C:Uint16Array,"%Uint32Array%":typeof Uint32Array=="undefined"?C:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap=="undefined"?C:WeakMap,"%WeakRef%":typeof WeakRef=="undefined"?C:WeakRef,"%WeakSet%":typeof WeakSet=="undefined"?C:WeakSet},_o=function e(t){var r;if(t==="%AsyncFunction%")r=ue("async function () {}");else if(t==="%GeneratorFunction%")r=ue("function* () {}");else if(t==="%AsyncGeneratorFunction%")r=ue("async function* () {}");else if(t==="%AsyncGenerator%"){var n=e("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if(t==="%AsyncIteratorPrototype%"){var o=e("%AsyncGenerator%");o&&(r=lt(o.prototype))}return At[t]=r,r},Ze={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Rt=Mr,Xt=mo,wo=Rt.call(Function.call,Array.prototype.concat),So=Rt.call(Function.apply,Array.prototype.splice),Qe=Rt.call(Function.call,String.prototype.replace),Zt=Rt.call(Function.call,String.prototype.slice),Oo=Rt.call(Function.call,RegExp.prototype.exec),Ao=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Eo=/\\(\\)?/g,xo=function(t){var r=Zt(t,0,1),n=Zt(t,-1);if(r==="%"&&n!=="%")throw new Et("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&r!=="%")throw new Et("invalid intrinsic syntax, expected opening `%`");var o=[];return Qe(t,Ao,function(i,a,u,p){o[o.length]=u?Qe(p,Eo,"$1"):a||i}),o},$o=function(t,r){var n=t,o;if(Xt(Ze,n)&&(o=Ze[n],n="%"+o[0]+"%"),Xt(At,n)){var i=At[n];if(i===wt&&(i=_o(n)),typeof i=="undefined"&&!r)throw new Ot("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:o,name:n,value:i}}throw new Et("intrinsic "+t+" does not exist!")},No=function(t,r){if(typeof t!="string"||t.length===0)throw new Ot("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new Ot('"allowMissing" argument must be a boolean');if(Oo(/^%?[^%]*%?$/g,t)===null)throw new Et("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=xo(t),o=n.length>0?n[0]:"",i=$o("%"+o+"%",r),a=i.name,u=i.value,p=!1,h=i.alias;h&&(o=h[0],So(n,wo([0,1],h)));for(var m=1,d=!0;m<n.length;m+=1){var O=n[m],f=Zt(O,0,1),c=Zt(O,-1);if((f==='"'||f==="'"||f==="`"||c==='"'||c==="'"||c==="`")&&f!==c)throw new Et("property names with quotes must have matching quotes");if((O==="constructor"||!d)&&(p=!0),o+="."+O,a="%"+o+"%",Xt(At,a))u=At[a];else if(u!=null){if(!(O in u)){if(!r)throw new Ot("base intrinsic for "+t+" exists, but the property is not available.");return}if(vt&&m+1>=n.length){var l=vt(u,O);d=!!l,d&&"get"in l&&!("originalValue"in l.get)?u=l.get:u=u[O]}else d=Xt(u,O),u=u[O];d&&!p&&(At[a]=u)}}return u},To=No,ge=To("%Object.defineProperty%",!0),be=function(){if(ge)try{return ge({},"a",{value:1}),!0}catch{return!1}return!1};be.hasArrayLengthDefineBug=function(){if(!be())return null;try{return ge([],"length",{value:1}).length!==1}catch{return!0}};var Io=be,Po=ao,Co=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",Do=Object.prototype.toString,ko=Array.prototype.concat,Rr=Object.defineProperty,jo=function(e){return typeof e=="function"&&Do.call(e)==="[object Function]"},Mo=Io(),Fr=Rr&&Mo,Lo=function(e,t,r,n){t in e&&(!jo(n)||!n())||(Fr?Rr(e,t,{configurable:!0,enumerable:!1,value:r,writable:!0}):e[t]=r)},Br=function(e,t){var r=arguments.length>2?arguments[2]:{},n=Po(t);Co&&(n=ko.call(n,Object.getOwnPropertySymbols(t)));for(var o=0;o<n.length;o+=1)Lo(e,n[o],t[n[o]],r[n[o]])};Br.supportsDescriptors=!!Fr;var Ur=Br,Mt={exports:{}};typeof self!="undefined"?Mt.exports=self:typeof window!="undefined"?Mt.exports=window:Mt.exports=Function("return this")();var Ro=Mt.exports,qr=function(){return typeof Q!="object"||!Q||Q.Math!==Math||Q.Array!==Array?Ro:Q},Fo=Ur,Bo=qr,Uo=function(){var t=Bo();if(Fo.supportsDescriptors){var r=Object.getOwnPropertyDescriptor(t,"globalThis");(!r||r.configurable&&(r.enumerable||!r.writable||globalThis!==t))&&Object.defineProperty(t,"globalThis",{configurable:!0,enumerable:!1,value:t,writable:!0})}else(typeof globalThis!="object"||globalThis!==t)&&(t.globalThis=t);return t},qo=Ur,Wo=Mt.exports,Wr=qr,Go=Uo,zo=Wr(),Gr=function(){return zo};qo(Gr,{getPolyfill:Wr,implementation:Wo,shim:Go});var Ho=Gr,Vo=Q&&Q.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)o.hasOwnProperty(i)&&(n[i]=o[i])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(H,"__esModule",{value:!0});H.NO_IL=De=H.NO=H.MemoryStream=ot=H.Stream=void 0;var Jo=Yn,Ko=Ho,Wt=Jo.default(Ko.getPolyfill()),A={},De=H.NO=A;function z(){}function Vt(e){for(var t=e.length,r=Array(t),n=0;n<t;++n)r[n]=e[n];return r}function Yo(e,t){return function(n){return e(n)&&t(n)}}function ke(e,t,r){try{return e.f(t)}catch(n){return r._e(n),A}}var yt={_n:z,_e:z,_c:z};H.NO_IL=yt;function tr(e){e._start=function(r){r.next=r._n,r.error=r._e,r.complete=r._c,this.start(r)},e._stop=e.stop}var Xo=function(){function e(t,r){this._stream=t,this._listener=r}return e.prototype.unsubscribe=function(){this._stream._remove(this._listener)},e}(),Zo=function(){function e(t){this._listener=t}return e.prototype.next=function(t){this._listener._n(t)},e.prototype.error=function(t){this._listener._e(t)},e.prototype.complete=function(){this._listener._c()},e}(),Qo=function(){function e(t){this.type="fromObservable",this.ins=t,this.active=!1}return e.prototype._start=function(t){this.out=t,this.active=!0,this._sub=this.ins.subscribe(new Zo(t)),this.active||this._sub.unsubscribe()},e.prototype._stop=function(){this._sub&&this._sub.unsubscribe(),this.active=!1},e}(),ti=function(){function e(t){this.type="merge",this.insArr=t,this.out=A,this.ac=0}return e.prototype._start=function(t){this.out=t;var r=this.insArr,n=r.length;this.ac=n;for(var o=0;o<n;o++)r[o]._add(this)},e.prototype._stop=function(){for(var t=this.insArr,r=t.length,n=0;n<r;n++)t[n]._remove(this);this.out=A},e.prototype._n=function(t){var r=this.out;r!==A&&r._n(t)},e.prototype._e=function(t){var r=this.out;r!==A&&r._e(t)},e.prototype._c=function(){if(--this.ac<=0){var t=this.out;if(t===A)return;t._c()}},e}(),ei=function(){function e(t,r,n){this.i=t,this.out=r,this.p=n,n.ils.push(this)}return e.prototype._n=function(t){var r=this.p,n=this.out;if(n!==A&&r.up(t,this.i)){var o=Vt(r.vals);n._n(o)}},e.prototype._e=function(t){var r=this.out;r!==A&&r._e(t)},e.prototype._c=function(){var t=this.p;t.out!==A&&--t.Nc===0&&t.out._c()},e}(),ri=function(){function e(t){this.type="combine",this.insArr=t,this.out=A,this.ils=[],this.Nc=this.Nn=0,this.vals=[]}return e.prototype.up=function(t,r){var n=this.vals[r],o=this.Nn?n===A?--this.Nn:this.Nn:0;return this.vals[r]=t,o===0},e.prototype._start=function(t){this.out=t;var r=this.insArr,n=this.Nc=this.Nn=r.length,o=this.vals=new Array(n);if(n===0)t._n([]),t._c();else for(var i=0;i<n;i++)o[i]=A,r[i]._add(new ei(i,t,this))},e.prototype._stop=function(){for(var t=this.insArr,r=t.length,n=this.ils,o=0;o<r;o++)t[o]._remove(n[o]);this.out=A,this.ils=[],this.vals=[]},e}(),ni=function(){function e(t){this.type="fromArray",this.a=t}return e.prototype._start=function(t){for(var r=this.a,n=0,o=r.length;n<o;n++)t._n(r[n]);t._c()},e.prototype._stop=function(){},e}(),oi=function(){function e(t){this.type="fromPromise",this.on=!1,this.p=t}return e.prototype._start=function(t){var r=this;this.on=!0,this.p.then(function(n){r.on&&(t._n(n),t._c())},function(n){t._e(n)}).then(z,function(n){setTimeout(function(){throw n})})},e.prototype._stop=function(){this.on=!1},e}(),ii=function(){function e(t){this.type="periodic",this.period=t,this.intervalID=-1,this.i=0}return e.prototype._start=function(t){var r=this;function n(){t._n(r.i++)}this.intervalID=setInterval(n,this.period)},e.prototype._stop=function(){this.intervalID!==-1&&clearInterval(this.intervalID),this.intervalID=-1,this.i=0},e}(),ai=function(){function e(t,r){this.type="debug",this.ins=t,this.out=A,this.s=z,this.l="",typeof r=="string"?this.l=r:typeof r=="function"&&(this.s=r)}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=A},e.prototype._n=function(t){var r=this.out;if(r!==A){var n=this.s,o=this.l;if(n!==z)try{n(t)}catch(i){r._e(i)}else o?console.log(o+":",t):console.log(t);r._n(t)}},e.prototype._e=function(t){var r=this.out;r!==A&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==A&&t._c()},e}(),si=function(){function e(t,r){this.type="drop",this.ins=r,this.out=A,this.max=t,this.dropped=0}return e.prototype._start=function(t){this.out=t,this.dropped=0,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=A},e.prototype._n=function(t){var r=this.out;r!==A&&this.dropped++>=this.max&&r._n(t)},e.prototype._e=function(t){var r=this.out;r!==A&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==A&&t._c()},e}(),ui=function(){function e(t,r){this.out=t,this.op=r}return e.prototype._n=function(){this.op.end()},e.prototype._e=function(t){this.out._e(t)},e.prototype._c=function(){this.op.end()},e}(),fi=function(){function e(t,r){this.type="endWhen",this.ins=r,this.out=A,this.o=t,this.oil=yt}return e.prototype._start=function(t){this.out=t,this.o._add(this.oil=new ui(t,this)),this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.o._remove(this.oil),this.out=A,this.oil=yt},e.prototype.end=function(){var t=this.out;t!==A&&t._c()},e.prototype._n=function(t){var r=this.out;r!==A&&r._n(t)},e.prototype._e=function(t){var r=this.out;r!==A&&r._e(t)},e.prototype._c=function(){this.end()},e}(),ce=function(){function e(t,r){this.type="filter",this.ins=r,this.out=A,this.f=t}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=A},e.prototype._n=function(t){var r=this.out;if(r!==A){var n=ke(this,t,r);n===A||!n||r._n(t)}},e.prototype._e=function(t){var r=this.out;r!==A&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==A&&t._c()},e}(),ci=function(){function e(t,r){this.out=t,this.op=r}return e.prototype._n=function(t){this.out._n(t)},e.prototype._e=function(t){this.out._e(t)},e.prototype._c=function(){this.op.inner=A,this.op.less()},e}(),li=function(){function e(t){this.type="flatten",this.ins=t,this.out=A,this.open=!0,this.inner=A,this.il=yt}return e.prototype._start=function(t){this.out=t,this.open=!0,this.inner=A,this.il=yt,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.inner!==A&&this.inner._remove(this.il),this.out=A,this.open=!0,this.inner=A,this.il=yt},e.prototype.less=function(){var t=this.out;t!==A&&!this.open&&this.inner===A&&t._c()},e.prototype._n=function(t){var r=this.out;if(r!==A){var n=this,o=n.inner,i=n.il;o!==A&&i!==yt&&o._remove(i),(this.inner=t)._add(this.il=new ci(r,this))}},e.prototype._e=function(t){var r=this.out;r!==A&&r._e(t)},e.prototype._c=function(){this.open=!1,this.less()},e}(),pi=function(){function e(t,r,n){var o=this;this.type="fold",this.ins=n,this.out=A,this.f=function(i){return t(o.acc,i)},this.acc=this.seed=r}return e.prototype._start=function(t){this.out=t,this.acc=this.seed,t._n(this.acc),this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=A,this.acc=this.seed},e.prototype._n=function(t){var r=this.out;if(r!==A){var n=ke(this,t,r);n!==A&&r._n(this.acc=n)}},e.prototype._e=function(t){var r=this.out;r!==A&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==A&&t._c()},e}(),hi=function(){function e(t){this.type="last",this.ins=t,this.out=A,this.has=!1,this.val=A}return e.prototype._start=function(t){this.out=t,this.has=!1,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=A,this.val=A},e.prototype._n=function(t){this.has=!0,this.val=t},e.prototype._e=function(t){var r=this.out;r!==A&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==A&&(this.has?(t._n(this.val),t._c()):t._e(new Error("last() failed because input stream completed")))},e}(),di=function(){function e(t,r){this.type="map",this.ins=r,this.out=A,this.f=t}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=A},e.prototype._n=function(t){var r=this.out;if(r!==A){var n=ke(this,t,r);n!==A&&r._n(n)}},e.prototype._e=function(t){var r=this.out;r!==A&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==A&&t._c()},e}(),yi=function(){function e(t){this.type="remember",this.ins=t,this.out=A}return e.prototype._start=function(t){this.out=t,this.ins._add(t)},e.prototype._stop=function(){this.ins._remove(this.out),this.out=A},e}(),vi=function(){function e(t,r){this.type="replaceError",this.ins=r,this.out=A,this.f=t}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=A},e.prototype._n=function(t){var r=this.out;r!==A&&r._n(t)},e.prototype._e=function(t){var r=this.out;if(r!==A)try{this.ins._remove(this),(this.ins=this.f(t))._add(this)}catch(n){r._e(n)}},e.prototype._c=function(){var t=this.out;t!==A&&t._c()},e}(),mi=function(){function e(t,r){this.type="startWith",this.ins=t,this.out=A,this.val=r}return e.prototype._start=function(t){this.out=t,this.out._n(this.val),this.ins._add(t)},e.prototype._stop=function(){this.ins._remove(this.out),this.out=A},e}(),gi=function(){function e(t,r){this.type="take",this.ins=r,this.out=A,this.max=t,this.taken=0}return e.prototype._start=function(t){this.out=t,this.taken=0,this.max<=0?t._c():this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=A},e.prototype._n=function(t){var r=this.out;if(r!==A){var n=++this.taken;n<this.max?r._n(t):n===this.max&&(r._n(t),r._c())}},e.prototype._e=function(t){var r=this.out;r!==A&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==A&&t._c()},e}(),je=function(){function e(t){this._prod=t||A,this._ils=[],this._stopID=A,this._dl=A,this._d=!1,this._target=null,this._err=A}return e.prototype._n=function(t){var r=this._ils,n=r.length;if(this._d&&this._dl._n(t),n==1)r[0]._n(t);else{if(n==0)return;for(var o=Vt(r),i=0;i<n;i++)o[i]._n(t)}},e.prototype._e=function(t){if(this._err===A){this._err=t;var r=this._ils,n=r.length;if(this._x(),this._d&&this._dl._e(t),n==1)r[0]._e(t);else{if(n==0)return;for(var o=Vt(r),i=0;i<n;i++)o[i]._e(t)}if(!this._d&&n==0)throw this._err}},e.prototype._c=function(){var t=this._ils,r=t.length;if(this._x(),this._d&&this._dl._c(),r==1)t[0]._c();else{if(r==0)return;for(var n=Vt(t),o=0;o<r;o++)n[o]._c()}},e.prototype._x=function(){this._ils.length!==0&&(this._prod!==A&&this._prod._stop(),this._err=A,this._ils=[])},e.prototype._stopNow=function(){this._prod._stop(),this._err=A,this._stopID=A},e.prototype._add=function(t){var r=this._target;if(r)return r._add(t);var n=this._ils;if(n.push(t),!(n.length>1))if(this._stopID!==A)clearTimeout(this._stopID),this._stopID=A;else{var o=this._prod;o!==A&&o._start(this)}},e.prototype._remove=function(t){var r=this,n=this._target;if(n)return n._remove(t);var o=this._ils,i=o.indexOf(t);i>-1&&(o.splice(i,1),this._prod!==A&&o.length<=0?(this._err=A,this._stopID=setTimeout(function(){return r._stopNow()})):o.length===1&&this._pruneCycles())},e.prototype._pruneCycles=function(){this._hasNoSinks(this,[])&&this._remove(this._ils[0])},e.prototype._hasNoSinks=function(t,r){if(r.indexOf(t)!==-1)return!0;if(t.out===this)return!0;if(t.out&&t.out!==A)return this._hasNoSinks(t.out,r.concat(t));if(t._ils){for(var n=0,o=t._ils.length;n<o;n++)if(!this._hasNoSinks(t._ils[n],r.concat(t)))return!1;return!0}else return!1},e.prototype.ctor=function(){return this instanceof ut?ut:e},e.prototype.addListener=function(t){t._n=t.next||z,t._e=t.error||z,t._c=t.complete||z,this._add(t)},e.prototype.removeListener=function(t){this._remove(t)},e.prototype.subscribe=function(t){return this.addListener(t),new Xo(this,t)},e.prototype[Wt]=function(){return this},e.create=function(t){if(t){if(typeof t.start!="function"||typeof t.stop!="function")throw new Error("producer requires both start and stop functions");tr(t)}return new e(t)},e.createWithMemory=function(t){return t&&tr(t),new ut(t)},e.never=function(){return new e({_start:z,_stop:z})},e.empty=function(){return new e({_start:function(t){t._c()},_stop:z})},e.throw=function(t){return new e({_start:function(r){r._e(t)},_stop:z})},e.from=function(t){if(typeof t[Wt]=="function")return e.fromObservable(t);if(typeof t.then=="function")return e.fromPromise(t);if(Array.isArray(t))return e.fromArray(t);throw new TypeError("Type of input to from() must be an Array, Promise, or Observable")},e.of=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return e.fromArray(t)},e.fromArray=function(t){return new e(new ni(t))},e.fromPromise=function(t){return new e(new oi(t))},e.fromObservable=function(t){if(t.endWhen!==void 0)return t;var r=typeof t[Wt]=="function"?t[Wt]():t;return new e(new Qo(r))},e.periodic=function(t){return new e(new ii(t))},e.prototype._map=function(t){return new(this.ctor())(new di(t,this))},e.prototype.map=function(t){return this._map(t)},e.prototype.mapTo=function(t){var r=this.map(function(){return t}),n=r._prod;return n.type="mapTo",r},e.prototype.filter=function(t){var r=this._prod;return r instanceof ce?new e(new ce(Yo(r.f,t),r.ins)):new e(new ce(t,this))},e.prototype.take=function(t){return new(this.ctor())(new gi(t,this))},e.prototype.drop=function(t){return new e(new si(t,this))},e.prototype.last=function(){return new e(new hi(this))},e.prototype.startWith=function(t){return new ut(new mi(this,t))},e.prototype.endWhen=function(t){return new(this.ctor())(new fi(t,this))},e.prototype.fold=function(t,r){return new ut(new pi(t,r,this))},e.prototype.replaceError=function(t){return new(this.ctor())(new vi(t,this))},e.prototype.flatten=function(){return new e(new li(this))},e.prototype.compose=function(t){return t(this)},e.prototype.remember=function(){return new ut(new yi(this))},e.prototype.debug=function(t){return new(this.ctor())(new ai(this,t))},e.prototype.imitate=function(t){if(t instanceof ut)throw new Error("A MemoryStream was given to imitate(), but it only supports a Stream. Read more about this restriction here: https://github.com/staltz/xstream#faq");this._target=t;for(var r=this._ils,n=r.length,o=0;o<n;o++)t._add(r[o]);this._ils=[]},e.prototype.shamefullySendNext=function(t){this._n(t)},e.prototype.shamefullySendError=function(t){this._e(t)},e.prototype.shamefullySendComplete=function(){this._c()},e.prototype.setDebugListener=function(t){t?(this._d=!0,t._n=t.next||z,t._e=t.error||z,t._c=t.complete||z,this._dl=t):(this._d=!1,this._dl=A)},e.merge=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return new e(new ti(r))},e.combine=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return new e(new ri(r))},e}(),ot=H.Stream=je,ut=function(e){Vo(t,e);function t(r){var n=e.call(this,r)||this;return n._has=!1,n}return t.prototype._n=function(r){this._v=r,this._has=!0,e.prototype._n.call(this,r)},t.prototype._add=function(r){var n=this._target;if(n)return n._add(r);var o=this._ils;if(o.push(r),o.length>1){this._has&&r._n(this._v);return}if(this._stopID!==A)this._has&&r._n(this._v),clearTimeout(this._stopID),this._stopID=A;else if(this._has)r._n(this._v);else{var i=this._prod;i!==A&&i._start(this)}},t.prototype._stopNow=function(){this._has=!1,e.prototype._stopNow.call(this)},t.prototype._x=function(){this._has=!1,e.prototype._x.call(this)},t.prototype.map=function(r){return this._map(r)},t.prototype.mapTo=function(r){return e.prototype.mapTo.call(this,r)},t.prototype.take=function(r){return e.prototype.take.call(this,r)},t.prototype.endWhen=function(r){return e.prototype.endWhen.call(this,r)},t.prototype.replaceError=function(r){return e.prototype.replaceError.call(this,r)},t.prototype.remember=function(){return this},t.prototype.debug=function(r){return e.prototype.debug.call(this,r)},t}(je);H.MemoryStream=ut;var bi=je,$=H.default=bi,Me={};Object.defineProperty(Me,"__esModule",{value:!0});function zr(){var e;return typeof window!="undefined"?e=window:typeof Q!="undefined"?e=Q:e=this,e.Cyclejs=e.Cyclejs||{},e=e.Cyclejs,e.adaptStream=e.adaptStream||function(t){return t},e}function _i(e){zr().adaptStream=e}Me.setAdapt=_i;function wi(e){return zr().adaptStream(e)}var J=Me.adapt=wi;function Si(e,t){if(typeof e!="function")throw new Error("First argument given to isolate() must be a 'dataflowComponent' function");if(t===null)throw new Error("Second argument given to isolate() must not be null")}function Oi(e,t,r){var n={};return Object.keys(e).forEach(function(o){if(typeof t=="string"){n[o]=t;return}var i=t[o];if(typeof i!="undefined"){n[o]=i;return}var a=t["*"];if(typeof a!="undefined"){n[o]=a;return}n[o]=r}),n}function Ai(e,t){var r={};for(var n in e){var o=e[n];e.hasOwnProperty(n)&&o&&t[n]!==null&&typeof o.isolateSource=="function"?r[n]=o.isolateSource(o,t[n]):e.hasOwnProperty(n)&&(r[n]=e[n])}return r}function Ei(e,t,r){var n={};for(var o in t){var i=e[o],a=t[o];t.hasOwnProperty(o)&&i&&r[o]!==null&&typeof i.isolateSink=="function"?n[o]=J(i.isolateSink($.fromObservable(a),r[o])):t.hasOwnProperty(o)&&(n[o]=t[o])}return n}var Hr=0;function er(){return"cycle"+ ++Hr}function mt(e,t){t===void 0&&(t=er()),Si(e,t);var r=typeof t=="object"?er():"",n=typeof t=="string"||typeof t=="object"?t:t.toString();return function(i){for(var a=[],u=1;u<arguments.length;u++)a[u-1]=arguments[u];var p=Oi(i,n,r),h=Ai(i,p),m=e.apply(void 0,[h].concat(a)),d=Ei(i,m,p);return d}}mt.reset=function(){return Hr=0};var ne={};Object.defineProperty(ne,"__esModule",{value:!0});ne.DropRepeatsOperator=void 0;var xi=H,le={},Vr=function(){function e(t,r){this.ins=t,this.type="dropRepeats",this.out=null,this.v=le,this.isEq=r||function(n,o){return n===o}}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=null,this.v=le},e.prototype._n=function(t){var r=this.out;if(!!r){var n=this.v;n!==le&&this.isEq(t,n)||(this.v=t,r._n(t))}},e.prototype._e=function(t){var r=this.out;!r||r._e(t)},e.prototype._c=function(){var t=this.out;!t||t._c()},e}();ne.DropRepeatsOperator=Vr;function $i(e){return e===void 0&&(e=void 0),function(r){return new xi.Stream(new Vr(r,e))}}var xt=ne.default=$i,_e=globalThis&&globalThis.__assign||function(){return _e=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},_e.apply(this,arguments)};function Ni(e,t,r){if(r===e[t])return e;var n=parseInt(t);return typeof r=="undefined"?e.filter(function(o,i){return i!==n}):e.map(function(o,i){return i===n?r:o})}function Jr(e){return typeof e=="string"||typeof e=="number"?function(r){if(typeof r!="undefined")return r[e]}:e.get}function Ti(e){return typeof e=="string"||typeof e=="number"?function(r,n){var o,i;return Array.isArray(r)?Ni(r,e,n):typeof r=="undefined"?(o={},o[e]=n,o):_e({},r,(i={},i[e]=n,i))}:e.set}function Ii(e,t){return e.select(t)}function Pi(e,t){var r=Jr(t),n=Ti(t);return e.map(function(o){return function(a){var u=r(a),p=o(u);return u===p?a:n(a,p)}})}var St=function(){function e(t,r){this.isolateSource=Ii,this.isolateSink=Pi,this._stream=t.filter(function(n){return typeof n!="undefined"}).compose(xt()).remember(),this._name=r,this.stream=J(this._stream),this._stream._isCycleSource=r}return e.prototype.select=function(t){var r=Jr(t);return new e(this._stream.map(r),this._name)},e}(),Ci=function(){function e(t,r,n){this.ins=n,this.out=t,this.p=r}return e.prototype._n=function(t){this.p;var r=this.out;r!==null&&r._n(t)},e.prototype._e=function(t){var r=this.out;r!==null&&r._e(t)},e.prototype._c=function(){},e}(),Di=function(){function e(t,r){this.type="pickMerge",this.ins=r,this.out=null,this.sel=t,this.ils=new Map,this.inst=null}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this);var t=this.ils;t.forEach(function(r,n){r.ins._remove(r),r.ins=null,r.out=null,t.delete(n)}),t.clear(),this.out=null,this.ils=new Map,this.inst=null},e.prototype._n=function(t){this.inst=t;for(var r=t.arr,n=this.ils,o=this.out,i=this.sel,a=r.length,u=0;u<a;++u){var p=r[u],h=p._key,m=$.fromObservable(p[i]||$.never());n.has(h)||(n.set(h,new Ci(o,this,m)),m._add(n.get(h)))}n.forEach(function(d,O){(!t.dict.has(O)||!t.dict.get(O))&&(d.ins._remove(d),d.ins=null,d.out=null,n.delete(O))})},e.prototype._e=function(t){var r=this.out;r!==null&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==null&&t._c()},e}();function ki(e){return function(r){return new ot(new Di(e,r))}}var ji=function(){function e(t,r,n,o){this.key=t,this.out=r,this.p=n,this.val=De,this.ins=o}return e.prototype._n=function(t){this.p;var r=this.out;this.val=t,r!==null&&this.p.up()},e.prototype._e=function(t){var r=this.out;r!==null&&r._e(t)},e.prototype._c=function(){},e}(),Mi=function(){function e(t,r){this.type="combine",this.ins=r,this.sel=t,this.out=null,this.ils=new Map,this.inst=null}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this);var t=this.ils;t.forEach(function(r){r.ins._remove(r),r.ins=null,r.out=null,r.val=null}),t.clear(),this.out=null,this.ils=new Map,this.inst=null},e.prototype.up=function(){for(var t=this.inst.arr,r=t.length,n=this.ils,o=Array(r),i=0;i<r;++i){var a=t[i],u=a._key;if(!n.has(u))return;var p=n.get(u).val;if(p===De)return;o[i]=p}this.out._n(o)},e.prototype._n=function(t){this.inst=t;var r=t.arr,n=this.ils,o=this.out,i=this.sel,a=t.dict,u=r.length,p=!1;if(n.forEach(function(f,c){a.has(c)||(f.ins._remove(f),f.ins=null,f.out=null,f.val=null,n.delete(c),p=!0)}),u===0){o._n([]);return}for(var h=0;h<u;++h){var m=r[h],d=m._key;if(!m[i])throw new Error("pickCombine found an undefined child sink stream");var O=$.fromObservable(m[i]);n.has(d)||(n.set(d,new ji(d,o,this,O)),O._add(n.get(d)))}p&&this.up()},e.prototype._e=function(t){var r=this.out;r!==null&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==null&&t._c()},e}();function Li(e){return function(r){return new ot(new Mi(e,r))}}var Qt=globalThis&&globalThis.__assign||function(){return Qt=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Qt.apply(this,arguments)},Ri=function(){function e(t){this._instances$=t}return e.prototype.pickMerge=function(t){return J(this._instances$.compose(ki(t)))},e.prototype.pickCombine=function(t){return J(this._instances$.compose(Li(t)))},e}();function Fi(e){return{"*":null}}function Bi(e,t){return{get:function(r){if(typeof r!="undefined"){for(var n=0,o=r.length;n<o;++n)if(""+e(r[n],n)===t)return r[n];return}},set:function(r,n){return typeof r=="undefined"?[n]:typeof n=="undefined"?r.filter(function(o,i){return""+e(o,i)!==t}):r.map(function(o,i){return""+e(o,i)===t?n:o})}}}var Ui={get:function(e){return e},set:function(e,t){return t}};function qi(e){return function(r){var n=e.channel||"state",o=e.itemKey,i=e.itemScope||Fi,a=$.fromObservable(r[n].stream),u=a.fold(function(p,h){var m,d,O,f,c=p.dict;if(Array.isArray(h)){for(var l=Array(h.length),y=new Set,v=0,g=h.length;v<g;++v){var b=""+(o?o(h[v],v):v);if(y.add(b),c.has(b))l[v]=c.get(b);else{var w=o?Bi(o,b):""+v,_=i(b),S=typeof _=="string"?(m={"*":_},m[n]=w,m):Qt({},_,(d={},d[n]=w,d)),x=e.itemFactory?e.itemFactory(h[v],v):e.item,E=mt(x,S)(r);c.set(b,E),l[v]=E}l[v]._key=b}return c.forEach(function(N,T){y.has(T)||c.delete(T)}),y.clear(),{dict:c,arr:l}}else{c.clear();var b=""+(o?o(h,0):"this"),w=Ui,_=i(b),S=typeof _=="string"?(O={"*":_},O[n]=w,O):Qt({},_,(f={},f[n]=w,f)),x=e.itemFactory?e.itemFactory(h,0):e.item,E=mt(x,S)(r);return c.set(b,E),{dict:c,arr:[E]}}},{dict:new Map,arr:[]});return e.collectSinks(new Ri(u))}}var Kr={};Object.defineProperty(Kr,"__esModule",{value:!0});var Wi=H,Gi=function(){function e(t){this.streams=t,this.type="concat",this.out=null,this.i=0}return e.prototype._start=function(t){this.out=t,this.streams[this.i]._add(this)},e.prototype._stop=function(){var t=this.streams;this.i<t.length&&t[this.i]._remove(this),this.i=0,this.out=null},e.prototype._n=function(t){var r=this.out;!r||r._n(t)},e.prototype._e=function(t){var r=this.out;!r||r._e(t)},e.prototype._c=function(){var t=this.out;if(!!t){var r=this.streams;r[this.i]._remove(this),++this.i<r.length?r[this.i]._add(this):t._c()}},e}();function zi(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new Wi.Stream(new Gi(e))}var te=Kr.default=zi,Yr={};Object.defineProperty(Yr,"__esModule",{value:!0});function Hi(){return typeof queueMicrotask!="undefined"?queueMicrotask:typeof setImmediate!="undefined"?setImmediate:typeof process!="undefined"?process.nextTick:setTimeout}var Xr=Yr.default=Hi,pe=Xr();function Vi(e,t){return t===void 0&&(t="state"),function(n){var o=$.create(),i=o.fold(function(h,m){return m(h)},void 0).drop(1),a=n;a[t]=new St(i,t);var u=e(a);if(u[t]){var p=te($.fromObservable(u[t]),$.never());p.subscribe({next:function(h){return pe(function(){return o._n(h)})},error:function(h){return pe(function(){return o._e(h)})},complete:function(){return pe(function(){return o._c()})}})}return u}}function Ji(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ki(e,t){return Qi(e)||Zi(e,t)||Xi(e,t)||Yi()}function Yi(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Xi(e,t){if(!!e){if(typeof e=="string")return rr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return rr(e,t)}}function rr(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Zi(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n=[],o=!0,i=!1,a,u;try{for(r=r.call(e);!(o=(a=r.next()).done)&&(n.push(a.value),!(t&&n.length===t));o=!0);}catch(p){i=!0,u=p}finally{try{!o&&r.return!=null&&r.return()}finally{if(i)throw u}}return n}}function Qi(e){if(Array.isArray(e))return e}function ta(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=r.combineList,o=n===void 0?["DOM"]:n,i=r.globalList,a=i===void 0?["EVENTS"]:i,u=r.stateSourceName,p=u===void 0?"STATE":u,h=r.domSourceName,m=h===void 0?"DOM":h,d=r.container,O=d===void 0?"div":d,f=r.containerClass;return function(c){var l=Date.now(),y={item:e,itemKey:function(b,w){return typeof b.id!="undefined"?b.id:w},itemScope:function(b){return b},channel:p,collectSinks:function(b){return Object.entries(c).reduce(function(w,_){var S=Ki(_,2),x=S[0];if(S[1],o.includes(x)){var E=b.pickCombine(x);x===m&&O?w.DOM=E.map(function(N){var T=f?{props:{className:f}}:{};return{sel:O,data:T,children:N,key:l,text:void 0,elm:void 0}}):(console.warn("Collections without wrapping containers will fail in unpredictable ways when used inside JSX fragments"),w[x]=E)}else w[x]=b.pickMerge(x);return w},{})}},v=Ji({},p,t);return a.forEach(function(g){return v[g]=null}),o.forEach(function(g){return v[g]=null}),ea(y,v,c)}}function ea(e,t,r){return mt(qi(e),t)(r)}function ra(e){return ia(e)||oa(e)||Zr(e)||na()}function na(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function oa(e){if(typeof Symbol!="undefined"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function ia(e){if(Array.isArray(e))return we(e)}function nr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function or(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?nr(Object(r),!0).forEach(function(n){aa(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nr(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function aa(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bt(e,t){return fa(e)||ua(e,t)||Zr(e,t)||sa()}function sa(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Zr(e,t){if(!!e){if(typeof e=="string")return we(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return we(e,t)}}function we(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ua(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n=[],o=!0,i=!1,a,u;try{for(r=r.call(e);!(o=(a=r.next()).done)&&(n.push(a.value),!(t&&n.length===t));o=!0);}catch(p){i=!0,u=p}finally{try{!o&&r.return!=null&&r.return()}finally{if(i)throw u}}return n}}function fa(e){if(Array.isArray(e))return e}function Se(e){return Se=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Se(e)}function ir(e,t,r){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},o=n.switched,i=o===void 0?["DOM"]:o,a=n.stateSourceName,u=a===void 0?"STATE":a,p=Se(t);if(!t)throw new Error("Missing 'name$' parameter for switchable()");if(!(p==="string"||p==="function"||t instanceof ot))throw new Error("Invalid 'name$' parameter for switchable(): expects Stream, String, or Function");if(t instanceof ot){var h=t.compose(xt()).startWith(r).remember();return function(d){return ar(e,d,h,i)}}else{var m=p==="function"&&t||function(d){return d[t]};return function(d){var O=d&&(typeof u=="string"&&d[u]||d.STATE||d.state).stream;if(!O instanceof ot)throw new Error("Could not find the state source: ".concat(u));var f=O.map(m).filter(function(c){return typeof c=="string"}).compose(xt()).startWith(r).remember();return ar(e,d,f,i,u)}}}function ar(e,t,r){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:["DOM"],o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"STATE";typeof n=="string"&&(n=[n]);var i=Object.entries(e).map(function(u){var p=bt(u,2),h=p[0],m=p[1];if(t[o]){var d=t[o].stream,O=$.combine(r,d).filter(function(c){var l=bt(c,2),y=l[0];return l[1],y==h}).map(function(c){var l=bt(c,2);l[0];var y=l[1];return y}).remember(),f=new t[o].constructor(O,t[o]._name);return[h,m(or(or({},t),{},{state:f}))]}return[h,m(t)]}),a=Object.keys(t).reduce(function(u,p){if(n.includes(p))u[p]=r.map(function(m){var d=i.find(function(O){var f=bt(O,2),c=f[0];return f[1],c===m});return d&&d[1][p]||$.never()}).flatten().remember().startWith(void 0);else{var h=i.filter(function(m){var d=bt(m,2);d[0];var O=d[1];return O[p]!==void 0}).map(function(m){var d=bt(m,2);d[0];var O=d[1];return O[p]});u[p]=$.merge.apply($,ra(h))}return u},{});return a}var Qr={};Object.defineProperty(Qr,"__esModule",{value:!0});var ca=H,la=function(){function e(t,r){this.dt=t,this.ins=r,this.type="delay",this.out=null}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=null},e.prototype._n=function(t){var r=this.out;if(!!r)var n=setInterval(function(){r._n(t),clearInterval(n)},this.dt)},e.prototype._e=function(t){var r=this.out;if(!!r)var n=setInterval(function(){r._e(t),clearInterval(n)},this.dt)},e.prototype._c=function(){var t=this.out;if(!!t)var r=setInterval(function(){t._c(),clearInterval(r)},this.dt)},e}();function pa(e){return function(r){return new ca.Stream(new la(e,r))}}var sr=Qr.default=pa,tn={};Object.defineProperty(tn,"__esModule",{value:!0});var kt=H,ha=function(){function e(t,r){this.dt=t,this.ins=r,this.type="debounce",this.out=null,this.id=null,this.t=kt.NO}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=null,this.clearInterval()},e.prototype.clearInterval=function(){var t=this.id;t!==null&&clearInterval(t),this.id=null},e.prototype._n=function(t){var r=this,n=this.out;!n||(this.clearInterval(),this.t=t,this.id=setInterval(function(){r.clearInterval(),n._n(t),r.t=kt.NO},this.dt))},e.prototype._e=function(t){var r=this.out;!r||(this.clearInterval(),r._e(t))},e.prototype._c=function(){var t=this.out;!t||(this.clearInterval(),this.t!=kt.NO&&t._n(this.t),this.t=kt.NO,t._c())},e}();function da(e){return function(r){return new kt.Stream(new ha(e,r))}}var Gt=tn.default=da,ya=["state","sygnalFactory","id"];function va(e,t){if(e==null)return{};var r=ma(e,t),n,o;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)n=i[o],!(t.indexOf(n)>=0)&&(!Object.prototype.propertyIsEnumerable.call(e,n)||(r[n]=e[n]))}return r}function ma(e,t){if(e==null)return{};var r={},n=Object.keys(e),o,i;for(i=0;i<n.length;i++)o=n[i],!(t.indexOf(o)>=0)&&(r[o]=e[o]);return r}function G(e){return _a(e)||ba(e)||en(e)||ga()}function ga(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ba(e){if(typeof Symbol!="undefined"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function _a(e){if(Array.isArray(e))return Oe(e)}function W(e,t){return Oa(e)||Sa(e,t)||en(e,t)||wa()}function wa(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function en(e,t){if(!!e){if(typeof e=="string")return Oe(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Oe(e,t)}}function Oe(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Sa(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n=[],o=!0,i=!1,a,u;try{for(r=r.call(e);!(o=(a=r.next()).done)&&(n.push(a.value),!(t&&n.length===t));o=!0);}catch(p){i=!0,u=p}finally{try{!o&&r.return!=null&&r.return()}finally{if(i)throw u}}return n}}function Oa(e){if(Array.isArray(e))return e}function Aa(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ur(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ea(e,t,r){return t&&ur(e.prototype,t),r&&ur(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function fr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function D(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?fr(Object(r),!0).forEach(function(n){q(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fr(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function q(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function M(e){return M=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},M(e)}var Ae=typeof window!="undefined"&&window||process&&process.env||{},cr="request",xa="BOOTSTRAP",_t="INITIALIZE",$a="HYDRATE",lr=!0,pr="~#~#~ABORT~#~#~";function rn(e){var t=e.name,r=e.sources,n=e.isolateOpts,o=e.stateSourceName,i=o===void 0?"STATE":o;if(r&&M(r)!=="object")throw new Error("Sources must be a Cycle.js sources object:",t);var a;typeof n=="string"?a=q({},i,n):n===!0?a={}:a=n;var u=typeof r=="undefined";if(M(a)=="object"){var p=function(m){var d=D(D({},e),{},{sources:m});return new he(d).sinks};return u?mt(p,a):mt(p,a)(r)}else return u?function(h){return new he(D(D({},e),{},{sources:h})).sinks}:new he(e).sinks}var he=function(){function e(t){var r=this,n=t.name,o=n===void 0?"NO NAME":n,i=t.sources,a=t.intent,u=t.request,p=t.model,h=t.response,m=t.view,d=t.children,O=d===void 0?{}:d,f=t.components,c=f===void 0?{}:f,l=t.initialState,y=t.calculated,v=t.storeCalculatedInState,g=v===void 0?!0:v,b=t.DOMSourceName,w=b===void 0?"DOM":b,_=t.stateSourceName,S=_===void 0?"STATE":_,x=t.requestSourceName,E=x===void 0?"HTTP":x;if(Aa(this,e),!i||M(i)!="object")throw new Error("Missing or invalid sources");this.name=o,this.sources=i,this.intent=a,this.request=u,this.model=p,this.response=h,this.view=m,this.children=O,this.components=c,this.initialState=l,this.calculated=y,this.storeCalculatedInState=g,this.DOMSourceName=w,this.stateSourceName=S,this.requestSourceName=E,this.sourceNames=Object.keys(i),this.isSubComponent=this.sourceNames.includes("props$");var N=i[S]&&i[S].stream;N&&(this.currentState=l||{},this.sources[this.stateSourceName]=new St(N.map(function(T){return r.currentState=T,T}))),lr&&typeof this.intent=="undefined"&&typeof this.model=="undefined"&&(this.initialState=l||!0,this.intent=function(T){return{__NOOP_ACTION__:$.never()}},this.model={__NOOP_ACTION__:function(P){return P}}),lr=!1,this.log=Na(o),this.initIntent$(),this.initAction$(),this.initResponse$(),this.initState(),this.initModel$(),this.initSendResponse$(),this.initChildren$(),this.initSubComponentSink$(),this.initVdom$(),this.initSinks()}return Ea(e,[{key:"initIntent$",value:function(){if(!!this.intent){if(typeof this.intent!="function")throw new Error("Intent must be a function");if(this.intent$=this.intent(this.sources),!(this.intent$ instanceof ot)&&M(this.intent$)!="object")throw new Error("Intent must return either an action$ stream or map of event streams")}}},{key:"initAction$",value:function(){var r=this.sources&&this.sources[this.requestSourceName]||null;if(!this.intent$){this.action$=$.never();return}var n;if(this.intent$ instanceof ot)n=this.intent$;else{var o=Object.entries(this.intent$).map(function(h){var m=W(h,2),d=m[0],O=m[1];return O.map(function(f){return{type:d,data:f}})});n=$.merge.apply($,[$.never()].concat(G(o)))}var i=n instanceof ot?n:n.apply&&n(this.sources)||$.never(),a=te($.of({type:xa}),i).compose(sr(10)),u;r&&typeof r.select=="function"?u=r.select("initial").flatten():u=$.never();var p=u.map(function(h){return{type:$a,data:h}});this.action$=$.merge(a,p).compose(this.log(function(h){var m=h.type;return"Action triggered: <".concat(m,">")}))}},{key:"initResponse$",value:function(){var r=this;if(typeof this.request!="undefined"){if(M(this.request)!="object")throw new Error("The request parameter must be an object");var n=this.sources[this.requestSourceName],o=Object.entries(this.request),i=o.reduce(function(a,u){var p=W(u,2),h=p[0],m=p[1],d=h.toLowerCase();if(typeof n[d]!="function")throw new Error("Invalid method in request object:",h);var O=Object.entries(m),f=O.reduce(function(l,y){var v=W(y,2),g=v[0],b=v[1],w="[".concat(d.toUpperCase(),"]:").concat(g||"none"),_=M(b);if(_==="undefined")throw new Error("Action for '".concat(g,"' route in request object not specified"));if(_!=="string"&&_!=="function")throw new Error("Invalid action for '".concat(g,"' route: expecting string or function"));var S=_==="function"?"[ FUNCTION ]":"< ".concat(b," >");console.log("[".concat(r.name,"] Adding ").concat(r.requestSourceName," route:"),d.toUpperCase(),"'".concat(g,"' <").concat(S,">"));var x=n[d](g).compose(xt(function(E,N){return E.id==N.id})).map(function(E){if(!E||!E.id)throw new Error("No id found in request: ".concat(w));try{var N=E.id,T=E.params,P=E.body,k=E.cookies,I=_==="function"?"FUNCTION":b,F={params:T,body:P,cookies:k,req:E},V={type:I,data:P,req:E,_reqId:N,_action:I},Ft=new Date().toISOString(),Nt=E.get?E.get("host"):"0.0.0.0";if(console.log("".concat(Ft," ").concat(Nt," ").concat(E.method," ").concat(E.url)),Ae.DEBUG&&r.action$.setDebugListener({next:function(et){var rt=et.type;return console.log("[".concat(r.name,"] Action from ").concat(r.requestSourceName," request: <").concat(rt,">"))}}),_==="function"){var Tt=r.addCalculated(r.currentState),Z=b(Tt,E);return $.of(D(D({},V),{},{data:Z}))}else{r.action$.shamefullySendNext(V);var pt=Object.entries(r.sources),tt=pt.reduce(function(B,et){var rt=W(et,2),ht=rt[0],it=rt[1];if(!it||typeof it[cr]!="function")return B;var Bt=it[cr](N);return[].concat(G(B),[Bt])},[]);return $.merge.apply($,G(tt))}}catch(B){console.error(B)}}).flatten();return[].concat(G(l),[x])},[]),c=$.merge.apply($,G(f));return[].concat(G(a),[c])},[]);if(this.response$=$.merge.apply($,G(i)).compose(this.log(function(a){return a._action?"[".concat(r.requestSourceName,"] response data received for Action: <").concat(a._action,">"):"[".concat(r.requestSourceName,"] response data received from FUNCTION")})),typeof this.response!="undefined"&&typeof this.response$=="undefined")throw new Error("Cannot have a response parameter without a request parameter")}}},{key:"initState",value:function(){var r=this;this.model!=null&&(this.model[_t]===void 0?this.model[_t]=q({},this.stateSourceName,function(n,o){return D({},r.addCalculated(o))}):Object.keys(this.model[_t]).forEach(function(n){n!==r.stateSourceName&&(console.warn("".concat(_t," can only be used with the ").concat(r.stateSourceName," source... disregarding ").concat(n)),delete r.model[_t][n])}))}},{key:"initModel$",value:function(){var r=this;if(typeof this.model=="undefined"){this.model$=this.sourceNames.reduce(function(m,d){return m[d]=$.never(),m},{});return}var n={type:_t,data:this.initialState},o=this.initialState?te($.of(n),this.action$).compose(sr(0)):this.action$,i=this.makeOnAction(o,!0,this.action$),a=this.makeOnAction(this.action$,!1,this.action$),u=Object.entries(this.model),p={};u.forEach(function(m){var d=W(m,2),O=d[0],f=d[1];if(typeof f=="function"&&(f=q({},r.stateSourceName,f)),M(f)!=="object")throw new Error("Entry for each action must be an object: ".concat(r.name," ").concat(O));var c=Object.entries(f);c.forEach(function(l){var y=W(l,2),v=y[0],g=y[1],b=v==r.stateSourceName,w=b?i:a,_=w(O,g),S=_.compose(r.log(function(x){if(b)return"State reducer added: <".concat(O,">");var E=x&&(x.type||x.command||x.name||x.key||Array.isArray(x)&&"Array"||x);return"Data sent to [".concat(v,"]: <").concat(O,"> ").concat(E)}));Array.isArray(p[v])?p[v].push(S):p[v]=[S]})});var h=Object.entries(p).reduce(function(m,d){var O=W(d,2),f=O[0],c=O[1];return m[f]=$.merge.apply($,[$.never()].concat(G(c))),m},{});this.model$=h}},{key:"initSendResponse$",value:function(){var r=this,n=M(this.response);if(n!="function"&&n!="undefined")throw new Error("The response parameter must be a function");if(n=="undefined"){this.response$&&this.response$.subscribe({next:this.log(function(p){var h=p._reqId,m=p._action;return"Unhandled response for request: ".concat(m," ").concat(h)})}),this.sendResponse$=$.never();return}var o={select:function(h){return typeof h=="undefined"?r.response$:(Array.isArray(h)||(h=[h]),r.response$.filter(function(m){var d=m._action;return h.length>0?d==="FUNCTION"||h.includes(d):!0}))}},i=this.response(o);if(M(i)!="object")throw new Error("The response function must return an object");var a=Object.entries(i),u=a.reduce(function(p,h){var m=W(h,2),d=m[0],O=m[1],f=O.map(function(c){var l=c._reqId,y=c._action,v=c.data;if(!l)throw new Error("No request id found for response for: ".concat(d));return{_reqId:l,_action:y,command:d,data:v}});return[].concat(G(p),[f])},[]);this.sendResponse$=$.merge.apply($,G(u)).compose(this.log(function(p){p._reqId;var h=p._action;return"[".concat(r.requestSourceName,"] response sent for: <").concat(h,">")}))}},{key:"initChildren$",value:function(){var r=this,n=this.sourceNames.reduce(function(o,i){return i==r.DOMSourceName?o[i]={}:o[i]=[],o},{});this.children$=Object.entries(this.children).reduce(function(o,i){var a=W(i,2),u=a[0],p=a[1],h=p(r.sources);return r.sourceNames.forEach(function(m){m==r.DOMSourceName?o[m][u]=h[m]:o[m].push(h[m])}),o},n)}},{key:"initSubComponentSink$",value:function(){var r=this,n=$.create({start:function(i){r.newSubComponentSinks=i.next.bind(i)},stop:function(i){}});n.subscribe({next:function(i){return i}}),this.subComponentSink$=n.filter(function(o){return Object.keys(o).length>0})}},{key:"initVdom$",value:function(){var r=this;if(typeof this.view!="function"){this.vdom$=$.of(null);return}var n=this.sources[this.stateSourceName],o=D({},this.children$[this.DOMSourceName]),i=n&&n.isolateSource(n,{get:function(l){return r.addCalculated(l)}}),a=i&&i.stream||$.never();o.state=a,o[this.stateSourceName]=a,this.sources.props$&&(o.props=this.sources.props$),this.sources.children$&&(o.children=this.sources.children$);var u=Object.entries(o).reduce(function(c,l){var y=W(l,2),v=y[0],g=y[1];return c.names.push(v),c.streams.push(g),c},{names:[],streams:[]}),p=$.combine.apply($,G(u.streams)),h=p.compose(Gt(5)).map(function(c){return u.names.reduce(function(l,y,v){return l[y]=c[v],l},{})}),m=Object.keys(this.components),d=$.create(),O=h.map(function(c){return c}).map(this.view).map(function(c){return c||{sel:"div",data:{},children:[]}}),f=O.fold(function(c,l){var y=nn(l,m),v=Object.entries(y),g={"::ROOT::":l};if(v.length===0)return g;var b={},w=v.reduce(function(S,x){var E=W(x,2),N=E[0],T=E[1],P=T.sel,k=T.data,I=k.props||{},F=T.children||[],V=k.isCollection||!1,Ft=k.isSwitchable||!1;if(c[N]){var Nt=c[N];return S[N]=Nt,Nt.props$.shamefullySendNext(I),Nt.children$.shamefullySendNext(F),S}var Tt=P==="sygnal-factory"?I.sygnalFactory:r.components[P]||I.sygnalFactory;if(!Tt&&!V&&!Ft)throw P==="sygnal-factory"?new Error("Component not found on element with Capitalized selector and nameless function: JSX transpilation replaces selectors starting with upper case letters with functions in-scope with the same name, Sygnal cannot see the name of the resulting component."):new Error("Component not found: ".concat(P));var Z=$.create().startWith(I),pt=$.create().startWith(F),tt=new St(r.sources[r.stateSourceName].stream.startWith(r.currentState)),B,et=!0;if(V){var rt,ht,it,Bt=function(j){var L=j[ht];if(typeof L!="undefined"){if(!Array.isArray(L)){var st=typeof k.props.of=="string"?k.props.of:"components";return console.warn("Collection of ".concat(st," does not have a valid array in the 'for' property: expects either an array or a string of the name of an array property on the state")),[]}return L}};typeof I.for=="undefined"?(it={get:function(j){return Array.isArray(j)?j:(console.warn("Collection sub-component of ".concat(r.name," has no 'for' attribute and the parent state is not an array: Provide a 'for' attribute with either an array or the name of a state property containing an array")),[])},set:function(j,L){return L}},et=!1):typeof I.for=="string"?(ht=I.for,it={get:Bt,set:function(j,L){return r.calculated&&ht in r.calculated?(console.warn("Collection sub-component of ".concat(r.name," attempted to update state on a calculated field '").concat(ht,"': Update ignored")),j):D(D({},j),{},q({},ht,L))}},et=!1):(ht="for",tt=new St(Z.remember()),it={get:Bt,set:function(j,L){return j}});var Dn=D(D({},r.sources),{},(rt={},q(rt,r.stateSourceName,tt),q(rt,"props$",Z),q(rt,"children$",pt),rt)),kn=typeof k.props.of=="function"?k.props.of:r.components[k.props.of];if(B=ta(kn,it,{container:null})(Dn),M(B)!=="object")throw new Error("Invalid sinks returned from component factory of collection element")}else if(Ft){var It,at=k.props.state,oe=!1,ie;if(typeof at=="string")oe=!0,ie={get:function(j){return j[at]},set:function(j,L){return r.calculated&&at in r.calculated?(console.warn("Switchable sub-component of ".concat(r.name," attempted to update state on a calculated field '").concat(at,"': Update ignored")),j):D(D({},j),{},q({},at,L))}},et=!1;else if(typeof at=="undefined")oe=!0,ie={get:function(j){return j},set:function(j,L){return L}},et=!1;else if(M(at)==="object")tt=new St(Z.map(function(U){return U.state}));else throw new Error("Invalid state provided to collection sub-component of ".concat(r.name,": Expecting string, object, or none, but found ").concat(M(at)));var Ue=k.props.of,qe=D(D({},r.sources),{},(It={},q(It,r.stateSourceName,tt),q(It,"props$",Z),q(It,"children$",pt),It));if(oe?B=mt(ir(Ue,Z.map(function(U){return U.current})),q({},r.stateSourceName,ie))(qe):B=ir(Ue,Z.map(function(U){return U.current}))(qe),M(B)!=="object")throw new Error("Invalid sinks returned from component factory of switchable element")}else{var jn=I.state;I.sygnalFactory,I.id;var We=va(I,ya);if(typeof jn=="undefined"&&(M(We)!=="object"||Object.keys(We).length===0)){var Pt,Mn=D(D({},r.sources),{},(Pt={},q(Pt,r.stateSourceName,tt),q(Pt,"props$",$.never().startWith(null)),q(Pt,"children$",pt),Pt));B=Tt(Mn),et=!1}else{var Ct,Ln=function(j){var L=j.state;if(typeof L=="undefined")return j;if(M(L)!=="object")return L;var st=D({},j);return delete st.state,D(D({},st),L)};tt=new St(Z.map(Ln));var Rn=D(D({},r.sources),{},(Ct={},q(Ct,r.stateSourceName,tt),q(Ct,"props$",Z),q(Ct,"children$",pt),Ct));B=Tt(Rn)}if(M(B)!=="object"){var Fn=P==="sygnal-factory"?"custom element":P;throw new Error("Invalid sinks returned from component factory:",Fn)}}if(et){var Bn=B[r.stateSourceName];B[r.stateSourceName]=Bn.filter(function(U){return console.warn("State update attempt from component with inderect link to state: Components with state set through HTML properties/attributes cannot update application state directly"),!1})}var Un=B[r.DOMSourceName].remember(),qn=function(j,L){var st=JSON.stringify(j),Wn=JSON.stringify(L);return st===Wn};return B[r.DOMSourceName]=tt.stream.compose(xt(qn)).map(function(U){return d.shamefullySendNext(null),Un}).compose(Gt(10)).flatten().remember(),S[N]={sink$:B,props$:Z,children$:pt},Object.entries(B).map(function(U){var j=W(U,2),L=j[0],st=j[1];b[L]||(b[L]=[]),L!==r.DOMSourceName&&b[L].push(st)}),S},g),_=Object.entries(b).reduce(function(S,x){var E=W(x,2),N=E[0],T=E[1];return T.length===0||(S[N]=T.length===1?T[0]:$.merge.apply($,G(T))),S},{});return r.newSubComponentSinks(_),w},{});this.vdom$=$.combine(d.startWith(null),f).map(function(c){var l=W(c,2);l[0];var y=l[1],v=y["::ROOT::"],g=[],b=Object.entries(y).filter(function(_){var S=W(_,1),x=S[0];return x!=="::ROOT::"});if(b.length===0)return $.of(v);var w=b.map(function(_){var S=W(_,2),x=S[0],E=S[1];return g.push(x),E.sink$[r.DOMSourceName].startWith(void 0)});return w.length===0?$.of(v):$.combine.apply($,G(w)).compose(Gt(5)).map(function(_){var S=_.reduce(function(N,T,P){return N[g[P]]=T,N},{}),x=sn(v),E=on(x,S,m);return E})}).flatten().filter(function(c){return!!c}).compose(Gt(5)).remember().compose(this.log("View Rendered"))}},{key:"initSinks",value:function(){var r=this;this.sinks=this.sourceNames.reduce(function(n,o){if(o==r.DOMSourceName)return n;var i=r.subComponentSink$?r.subComponentSink$.map(function(a){return a[o]}).filter(function(a){return!!a}).flatten():$.never();return o===r.stateSourceName?n[o]=$.merge.apply($,[r.model$[o]||$.never(),i,r.sources[r.stateSourceName].stream.filter(function(a){return!1})].concat(G(r.children$[o]))):n[o]=$.merge.apply($,[r.model$[o]||$.never(),i].concat(G(r.children$[o]))),n},{}),this.sinks[this.DOMSourceName]=this.vdom$,this.sinks[this.requestSourceName]=$.merge(this.sendResponse$,this.sinks[this.requestSourceName])}},{key:"makeOnAction",value:function(r){var n=this,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,i=arguments.length>2?arguments[2]:void 0;return i=i||r,function(a,u){var p=r.filter(function(d){var O=d.type;return O==a}),h;if(typeof u=="function")h=p.map(function(d){var O=function(b,w){var _=d._reqId||d.req&&d.req.id,S=_?M(w)=="object"?D(D({},w),{},{_reqId:_,_action:a}):{data:w,_reqId:_,_action:a}:w;setTimeout(function(){i.shamefullySendNext({type:b,data:S})},10)},f=d.data;if(f&&f.data&&f._reqId&&(f=f.data),o)return function(g){var b=n.isSubComponent?n.currentState:g,w=n.addCalculated(b),_=u(w,f,O,d.req);return _==pr?b:n.cleanupCalculated(_)};var c=n.addCalculated(n.currentState),l=u(c,f,O,d.req),y=M(l),v=d._reqId||d.req&&d.req.id;if(["string","number","boolean","function"].includes(y))return l;if(y=="object")return D(D({},l),{},{_reqId:v,_action:a});if(y=="undefined")return console.warn("'undefined' value sent to ".concat(a)),l;throw new Error("Invalid reducer type for ".concat(a," ").concat(y))}).filter(function(d){return d!=pr});else if(u===void 0||u===!0)h=p.map(function(d){var O=d.data;return O});else{var m=u;h=p.mapTo(m)}return h}}},{key:"addCalculated",value:function(r){if(!this.calculated||M(r)!=="object")return r;if(M(this.calculated)!=="object")throw new Error("'calculated' parameter must be an object mapping calculated state field named to functions");var n=Object.entries(this.calculated),o=n.reduce(function(i,a){var u=W(a,2),p=u[0],h=u[1];if(typeof h!="function")throw new Error("Missing or invalid calculator function for calculated field '".concat(p));try{i[p]=h(r)}catch(m){console.warn("Calculated field '".concat(p,"' threw an error during calculation: ").concat(m.message))}return i},{});return D(D({},r),o)}},{key:"cleanupCalculated",value:function(r){var n=this;if(this.storeCalculatedInState)return this.addCalculated(r);if(!this.calculated||!r||M(r)!=="object")return r;var o=Object.keys(this.calculated),i=D({},r);return o.forEach(function(a){n.initialState&&typeof n.initialState[a]!="undefined"?i[a]=n.initialState[a]:delete i[a]}),i}}]),e}();function Na(e){return function(t){var r=typeof t=="function"?t:function(n){return t};return function(n){return n.debug(function(o){(Ae.DEBUG=="true"||Ae.DEBUG===!0)&&console.log("[".concat(e,"] ").concat(r(o)))})}}}function nn(e,t){var r,n,o,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;if(!e)return{};if((r=e.data)!==null&&r!==void 0&&r.componentsProcessed)return{};i===0&&(e.data.componentsProcessed=!0);var u=e.sel,p=u&&u.toLowerCase()==="collection",h=u&&u.toLowerCase()==="switchable",m=u&&["collection","switchable","sygnal-factory"].concat(G(t)).includes(e.sel)||typeof((n=e.data)===null||n===void 0||(o=n.props)===null||o===void 0?void 0:o.sygnalFactory)=="function",d=e.data&&e.data.props||{},O=e.data&&e.data.attrs||{},f=e.children||[],c={};if(m){var l=an(e,i,a);if(p){var y;if(!d.of)throw new Error("Collection element missing required 'component' property");if(typeof d.of!="string"&&typeof d.of!="function")throw new Error("Invalid 'component' property of collection element: found ".concat(M(d.of)," requires string or component factory function"));if(typeof d.of!="function"&&!t.includes(d.of))throw new Error("Specified component for collection not found: ".concat(d.of));typeof O.for!="undefined"&&!(typeof O.for=="string"||Array.isArray(O.for))&&console.warn("No valid array found in the 'value' property of collection ".concat(typeof d.of=="string"?d.of:"function component",": no collection components will be created")),e.data.isCollection=!0,(y=e.data).props||(y.props={}),e.data.props.for=O.for,e.data.attrs=void 0}else if(h){if(!d.of)throw new Error("Switchable element missing required 'of' property");if(M(d.of)!=="object")throw new Error("Invalid 'components' property of switchable element: found ".concat(M(d.of)," requires object mapping names to component factories"));var v=Object.values(d.of);if(!v.every(function(b){return typeof b=="function"}))throw new Error("One or more components provided to switchable element is not a valid component factory");if(!d.current||typeof d.current!="string"&&typeof d.current!="function")throw new Error("Missing or invalid 'current' property for switchable element: found '".concat(M(d.current),"' requires string or function"));var g=Object.keys(d.of);if(!g.includes(d.current))throw new Error("Component '".concat(d.current,"' not found in switchable element"));e.data.isSwitchable=!0}c[l]=e}return f.length>0&&f.map(function(b,w){return nn(b,t,i+1,w)}).forEach(function(b){Object.entries(b).forEach(function(w){var _=W(w,2),S=_[0],x=_[1];return c[S]=x})}),c}function on(e,t,r){var n,o,i,a,u,p=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,h=arguments.length>4?arguments[4]:void 0;if(!!e){if((n=e.data)!==null&&n!==void 0&&n.componentsInjected)return e;p===0&&e.data&&(e.data.componentsInjected=!0);var m=e.sel||"NO SELECTOR",d=["collection","switchable","sygnal-factory"].concat(G(r)).includes(m)||typeof((o=e.data)===null||o===void 0||(i=o.props)===null||i===void 0?void 0:i.sygnalFactory)=="function",O=e==null||(a=e.data)===null||a===void 0?void 0:a.isCollection,f=e==null||(u=e.data)===null||u===void 0?void 0:u.isSwitchable;e.data&&e.data.props;var c=e.children||[];if(d){var l=an(e,p,h),y=t[l];return O?(e.sel="div",e.children=Array.isArray(y)?y:[y],e):y}else return c.length>0&&(e.children=c.map(function(v,g){return on(v,t,r,p+1,g)}).flat()),e}}var hr=new Map;function an(e,t,r){var n=e.sel,o=typeof n=="string"?n:"functionComponent",i=hr.get(n);if(!i){var a=Date.now(),u=Math.floor(Math.random()*1e4);i="".concat(a,"-").concat(u),hr.set(n,i)}var p="".concat(i,"-").concat(t,"-").concat(r),h=e.data&&e.data.props||{},m=h.id&&JSON.stringify(h.id)||p,d="".concat(o,"::").concat(m);return d}function sn(e){return typeof e=="undefined"?e:D(D({},e),{},{children:Array.isArray(e.children)?e.children.map(sn):void 0,data:e.data&&D(D({},e.data),{},{componentsInjected:!1})})}function Ta(e,t){return Ca(e)||Pa(e,t)||Le(e,t)||Ia()}function Ia(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Pa(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n=[],o=!0,i=!1,a,u;try{for(r=r.call(e);!(o=(a=r.next()).done)&&(n.push(a.value),!(t&&n.length===t));o=!0);}catch(p){i=!0,u=p}finally{try{!o&&r.return!=null&&r.return()}finally{if(i)throw u}}return n}}function Ca(e){if(Array.isArray(e))return e}function Da(e,t){var r=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=Le(e))||t&&e&&typeof e.length=="number"){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(h){throw h},f:o}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,a=!1,u;return{s:function(){r=r.call(e)},n:function(){var h=r.next();return i=h.done,h},e:function(h){a=!0,u=h},f:function(){try{!i&&r.return!=null&&r.return()}finally{if(a)throw u}}}}function ka(e){return La(e)||Ma(e)||Le(e)||ja()}function ja(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Le(e,t){if(!!e){if(typeof e=="string")return Ee(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ee(e,t)}}function Ma(e){if(typeof Symbol!="undefined"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function La(e){if(Array.isArray(e))return Ee(e)}function Ee(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Ra(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=t.events,n=r===void 0?["input","submit"]:r,o=t.preventDefault,i=o===void 0?!0:o;typeof n=="string"&&(n=[n]);var a=n.map(function(p){return e.events(p)}),u=$.merge.apply($,ka(a));return u.map(function(p){i&&p.preventDefault();var h=p.type==="submit"?p.srcElement:p.currentTarget,m=new FormData(h),d={};d.event=p,d.eventType=p.type;var O=h.querySelector("input[type=submit]:focus");if(O){var f=O.name,c=O.value;d[f||"submit"]=c}var l=Da(m.entries()),y;try{for(l.s();!(y=l.n()).done;){var v=Ta(y.value,2),g=v[0],b=v[1];d[g]=b}}catch(w){l.e(w)}finally{l.f()}return d})}function Fa(){var e;return typeof window!="undefined"?e=window:typeof global!="undefined"?e=global:e=this,e.Cyclejs=e.Cyclejs||{},e=e.Cyclejs,e.adaptStream=e.adaptStream||function(t){return t},e}function Ba(e){return Fa().adaptStream(e)}function Ua(e){var t={};for(var r in e)e.hasOwnProperty(r)&&(t[r]=$.create());return t}function qa(e,t){var r={};for(var n in e)e.hasOwnProperty(n)&&(r[n]=e[n](t[n],n),r[n]&&typeof r[n]=="object"&&(r[n]._isCycleSource=n));return r}function Wa(e){for(var t in e)e.hasOwnProperty(t)&&e[t]&&typeof e[t].shamefullySendNext=="function"&&(e[t]=Ba(e[t]));return e}function Ga(e,t){var r=Xr(),n=Object.keys(e).filter(function(u){return!!t[u]}),o={},i={};n.forEach(function(u){o[u]={_n:[],_e:[]},i[u]={next:function(p){return o[u]._n.push(p)},error:function(p){return o[u]._e.push(p)},complete:function(){}}});var a=n.map(function(u){return $.fromObservable(e[u]).subscribe(i[u])});return n.forEach(function(u){var p=t[u],h=function(d){r(function(){return p._n(d)})},m=function(d){r(function(){(console.error||console.log)(d),p._e(d)})};o[u]._n.forEach(h),o[u]._e.forEach(m),i[u].next=h,i[u].error=m,i[u]._n=h,i[u]._e=m}),o=null,function(){a.forEach(function(p){return p.unsubscribe()})}}function za(e){Object.keys(e).forEach(function(t){return e[t]._c()})}function Ha(e){for(var t in e)e.hasOwnProperty(t)&&e[t]&&e[t].dispose&&e[t].dispose()}function un(e){return Object.keys(e).length===0}function Va(e,t){if(typeof e!="function")throw new Error("First argument given to Cycle must be the 'main' function.");if(typeof t!="object"||t===null)throw new Error("Second argument given to Cycle must be an object with driver functions as properties.");if(un(t))throw new Error("Second argument given to Cycle must be an object with at least one driver function declared as a property.");var r=Ja(t),n=e(r.sources);typeof window!="undefined"&&(window.Cyclejs=window.Cyclejs||{},window.Cyclejs.sinks=n);function o(){var i=r.run(n);return function(){i(),r.dispose()}}return{sinks:n,sources:r.sources,run:o}}function Ja(e){if(typeof e!="object"||e===null)throw new Error("Argument given to setupReusable must be an object with driver functions as properties.");if(un(e))throw new Error("Argument given to setupReusable must be an object with at least one driver function declared as a property.");var t=Ua(e),r=qa(e,t),n=Wa(r);function o(a){return Ga(a,t)}function i(){Ha(n),za(t)}return{sources:n,run:o,dispose:i}}function Ka(e,t){var r=Va(e,t);return typeof window!="undefined"&&window.CyclejsDevTool_startGraphSerializer&&window.CyclejsDevTool_startGraphSerializer(r.sinks),r.run()}function Ya(e,t){return document.createElement(e,t)}function Xa(e,t,r){return document.createElementNS(e,t,r)}function Za(){return document.createDocumentFragment()}function Qa(e){return document.createTextNode(e)}function ts(e){return document.createComment(e)}function es(e,t,r){e.insertBefore(t,r)}function rs(e,t){e.removeChild(t)}function ns(e,t){e.appendChild(t)}function os(e){return e.parentNode}function is(e){return e.nextSibling}function as(e){return e.tagName}function ss(e,t){e.textContent=t}function us(e){return e.textContent}function fs(e){return e.nodeType===1}function cs(e){return e.nodeType===3}function ls(e){return e.nodeType===8}function ps(e){return e.nodeType===11}const fn={createElement:Ya,createElementNS:Xa,createTextNode:Qa,createDocumentFragment:Za,createComment:ts,insertBefore:es,removeChild:rs,appendChild:ns,parentNode:os,nextSibling:is,tagName:as,setTextContent:ss,getTextContent:us,isElement:fs,isText:cs,isComment:ls,isDocumentFragment:ps};function nt(e,t,r,n,o){const i=t===void 0?void 0:t.key;return{sel:e,data:t,children:r,text:n,elm:o,key:i}}const xe=Array.isArray;function Jt(e){return typeof e=="string"||typeof e=="number"||e instanceof String||e instanceof Number}function de(e){return e===void 0}function K(e){return e!==void 0}const ye=nt("",{},[],void 0,void 0);function Dt(e,t){var r,n;const o=e.key===t.key,i=((r=e.data)===null||r===void 0?void 0:r.is)===((n=t.data)===null||n===void 0?void 0:n.is);return e.sel===t.sel&&o&&i}function hs(){throw new Error("The document fragment is not supported on this platform.")}function ds(e,t){return e.isElement(t)}function ys(e,t){return e.isDocumentFragment(t)}function vs(e,t,r){var n;const o={};for(let i=t;i<=r;++i){const a=(n=e[i])===null||n===void 0?void 0:n.key;a!==void 0&&(o[a]=i)}return o}const ms=["create","update","remove","destroy","pre","post"];function gs(e,t,r){const n={create:[],update:[],remove:[],destroy:[],pre:[],post:[]},o=t!==void 0?t:fn;for(const c of ms)for(const l of e){const y=l[c];y!==void 0&&n[c].push(y)}function i(c){const l=c.id?"#"+c.id:"",y=c.getAttribute("class"),v=y?"."+y.split(" ").join("."):"";return nt(o.tagName(c).toLowerCase()+l+v,{},[],void 0,c)}function a(c){return nt(void 0,{},[],void 0,c)}function u(c,l){return function(){if(--l===0){const v=o.parentNode(c);o.removeChild(v,c)}}}function p(c,l){var y,v,g,b;let w,_=c.data;if(_!==void 0){const E=(y=_.hook)===null||y===void 0?void 0:y.init;K(E)&&(E(c),_=c.data)}const S=c.children,x=c.sel;if(x==="!")de(c.text)&&(c.text=""),c.elm=o.createComment(c.text);else if(x!==void 0){const E=x.indexOf("#"),N=x.indexOf(".",E),T=E>0?E:x.length,P=N>0?N:x.length,k=E!==-1||N!==-1?x.slice(0,Math.min(T,P)):x,I=c.elm=K(_)&&K(w=_.ns)?o.createElementNS(w,k,_):o.createElement(k,_);for(T<P&&I.setAttribute("id",x.slice(T+1,P)),N>0&&I.setAttribute("class",x.slice(P+1).replace(/\./g," ")),w=0;w<n.create.length;++w)n.create[w](ye,c);if(xe(S))for(w=0;w<S.length;++w){const V=S[w];V!=null&&o.appendChild(I,p(V,l))}else Jt(c.text)&&o.appendChild(I,o.createTextNode(c.text));const F=c.data.hook;K(F)&&((v=F.create)===null||v===void 0||v.call(F,ye,c),F.insert&&l.push(c))}else if(((g=r==null?void 0:r.experimental)===null||g===void 0?void 0:g.fragments)&&c.children){const E=c.children;for(c.elm=((b=o.createDocumentFragment)!==null&&b!==void 0?b:hs)(),w=0;w<n.create.length;++w)n.create[w](ye,c);for(w=0;w<E.length;++w){const N=E[w];N!=null&&o.appendChild(c.elm,p(N,l))}}else c.elm=o.createTextNode(c.text);return c.elm}function h(c,l,y,v,g,b){for(;v<=g;++v){const w=y[v];w!=null&&o.insertBefore(c,p(w,b),l)}}function m(c){var l,y;const v=c.data;if(v!==void 0){(y=(l=v==null?void 0:v.hook)===null||l===void 0?void 0:l.destroy)===null||y===void 0||y.call(l,c);for(let g=0;g<n.destroy.length;++g)n.destroy[g](c);if(c.children!==void 0)for(let g=0;g<c.children.length;++g){const b=c.children[g];b!=null&&typeof b!="string"&&m(b)}}}function d(c,l,y,v){for(var g,b;y<=v;++y){let w,_;const S=l[y];if(S!=null)if(K(S.sel)){m(S),w=n.remove.length+1,_=u(S.elm,w);for(let E=0;E<n.remove.length;++E)n.remove[E](S,_);const x=(b=(g=S==null?void 0:S.data)===null||g===void 0?void 0:g.hook)===null||b===void 0?void 0:b.remove;K(x)?x(S,_):_()}else o.removeChild(c,S.elm)}}function O(c,l,y,v){let g=0,b=0,w=l.length-1,_=l[0],S=l[w],x=y.length-1,E=y[0],N=y[x],T,P,k,I;for(;g<=w&&b<=x;)_==null?_=l[++g]:S==null?S=l[--w]:E==null?E=y[++b]:N==null?N=y[--x]:Dt(_,E)?(f(_,E,v),_=l[++g],E=y[++b]):Dt(S,N)?(f(S,N,v),S=l[--w],N=y[--x]):Dt(_,N)?(f(_,N,v),o.insertBefore(c,_.elm,o.nextSibling(S.elm)),_=l[++g],N=y[--x]):Dt(S,E)?(f(S,E,v),o.insertBefore(c,S.elm,_.elm),S=l[--w],E=y[++b]):(T===void 0&&(T=vs(l,g,w)),P=T[E.key],de(P)?o.insertBefore(c,p(E,v),_.elm):(k=l[P],k.sel!==E.sel?o.insertBefore(c,p(E,v),_.elm):(f(k,E,v),l[P]=void 0,o.insertBefore(c,k.elm,_.elm))),E=y[++b]);b<=x&&(I=y[x+1]==null?null:y[x+1].elm,h(c,I,y,b,x,v)),g<=w&&d(c,l,g,w)}function f(c,l,y){var v,g,b,w,_,S,x,E;const N=(v=l.data)===null||v===void 0?void 0:v.hook;(g=N==null?void 0:N.prepatch)===null||g===void 0||g.call(N,c,l);const T=l.elm=c.elm,P=c.children,k=l.children;if(c!==l){if(l.data!==void 0||K(l.text)&&l.text!==c.text){(b=l.data)!==null&&b!==void 0||(l.data={}),(w=c.data)!==null&&w!==void 0||(c.data={});for(let I=0;I<n.update.length;++I)n.update[I](c,l);(x=(S=(_=l.data)===null||_===void 0?void 0:_.hook)===null||S===void 0?void 0:S.update)===null||x===void 0||x.call(S,c,l)}de(l.text)?K(P)&&K(k)?P!==k&&O(T,P,k,y):K(k)?(K(c.text)&&o.setTextContent(T,""),h(T,null,k,0,k.length-1,y)):K(P)?d(T,P,0,P.length-1):K(c.text)&&o.setTextContent(T,""):c.text!==l.text&&(K(P)&&d(T,P,0,P.length-1),o.setTextContent(T,l.text)),(E=N==null?void 0:N.postpatch)===null||E===void 0||E.call(N,c,l)}}return function(l,y){let v,g,b;const w=[];for(v=0;v<n.pre.length;++v)n.pre[v]();for(ds(o,l)?l=i(l):ys(o,l)&&(l=a(l)),Dt(l,y)?f(l,y,w):(g=l.elm,b=o.parentNode(g),p(y,w),b!==null&&(o.insertBefore(b,y.elm,o.nextSibling(g)),d(b,[l],0,0))),v=0;v<w.length;++v)w[v].data.hook.insert(w[v]);for(v=0;v<n.post.length;++v)n.post[v]();return y}}function Re(e,t,r){if(e.ns="http://www.w3.org/2000/svg",r!=="foreignObject"&&t!==void 0)for(let n=0;n<t.length;++n){const o=t[n];if(typeof o=="string")continue;const i=o.data;i!==void 0&&Re(i,o.children,o.sel)}}function ft(e,t,r){let n={},o,i,a;if(r!==void 0?(t!==null&&(n=t),xe(r)?o=r:Jt(r)?i=r.toString():r&&r.sel&&(o=[r])):t!=null&&(xe(t)?o=t:Jt(t)?i=t.toString():t&&t.sel?o=[t]:n=t),o!==void 0)for(a=0;a<o.length;++a)Jt(o[a])&&(o[a]=nt(void 0,void 0,void 0,o[a],void 0));return e[0]==="s"&&e[1]==="v"&&e[2]==="g"&&(e.length===3||e[3]==="."||e[3]==="#")&&Re(n,o,e),nt(e,n,o,i,void 0)}function $e(e,t){const r=t!==void 0?t:fn;let n;if(r.isElement(e)){const o=e.id?"#"+e.id:"",i=e.getAttribute("class"),a=i?"."+i.split(" ").join("."):"",u=r.tagName(e).toLowerCase()+o+a,p={},h={},m={},d=[];let O,f,c;const l=e.attributes,y=e.childNodes;for(f=0,c=l.length;f<c;f++)O=l[f].nodeName,O[0]==="d"&&O[1]==="a"&&O[2]==="t"&&O[3]==="a"&&O[4]==="-"?h[O.slice(5)]=l[f].nodeValue||"":O!=="id"&&O!=="class"&&(p[O]=l[f].nodeValue);for(f=0,c=y.length;f<c;f++)d.push($e(y[f],t));return Object.keys(p).length>0&&(m.attrs=p),Object.keys(h).length>0&&(m.datasets=h),u[0]==="s"&&u[1]==="v"&&u[2]==="g"&&(u.length===3||u[3]==="."||u[3]==="#")&&Re(m,d,u),nt(u,m,d,void 0,e)}else return r.isText(e)?(n=r.getTextContent(e),nt(void 0,void 0,void 0,n,e)):r.isComment(e)?(n=r.getTextContent(e),nt("!",{},[],n,e)):nt("",{},[],void 0,e)}const bs="http://www.w3.org/1999/xlink",_s="http://www.w3.org/XML/1998/namespace",dr=58,ws=120;function yr(e,t){let r;const n=t.elm;let o=e.data.attrs,i=t.data.attrs;if(!(!o&&!i)&&o!==i){o=o||{},i=i||{};for(r in i){const a=i[r];o[r]!==a&&(a===!0?n.setAttribute(r,""):a===!1?n.removeAttribute(r):r.charCodeAt(0)!==ws?n.setAttribute(r,a):r.charCodeAt(3)===dr?n.setAttributeNS(_s,r,a):r.charCodeAt(5)===dr?n.setAttributeNS(bs,r,a):n.setAttribute(r,a))}for(r in o)r in i||n.removeAttribute(r)}}const Ss={create:yr,update:yr};function vr(e,t){let r,n;const o=t.elm;let i=e.data.class,a=t.data.class;if(!(!i&&!a)&&i!==a){i=i||{},a=a||{};for(n in i)i[n]&&!Object.prototype.hasOwnProperty.call(a,n)&&o.classList.remove(n);for(n in a)r=a[n],r!==i[n]&&o.classList[r?"add":"remove"](n)}}const Os={create:vr,update:vr},mr=/[A-Z]/g;function gr(e,t){const r=t.elm;let n=e.data.dataset,o=t.data.dataset,i;if(!n&&!o||n===o)return;n=n||{},o=o||{};const a=r.dataset;for(i in n)o[i]||(a?i in a&&delete a[i]:r.removeAttribute("data-"+i.replace(mr,"-$&").toLowerCase()));for(i in o)n[i]!==o[i]&&(a?a[i]=o[i]:r.setAttribute("data-"+i.replace(mr,"-$&").toLowerCase(),o[i]))}const As={create:gr,update:gr};function br(e,t){let r,n,o;const i=t.elm;let a=e.data.props,u=t.data.props;if(!(!a&&!u)&&a!==u){a=a||{},u=u||{};for(r in u)n=u[r],o=a[r],o!==n&&(r!=="value"||i[r]!==n)&&(i[r]=n)}}const Es={create:br,update:br},_r=typeof window!="undefined"&&window.requestAnimationFrame.bind(window)||setTimeout,xs=function(e){_r(function(){_r(e)})};let Ne=!1;function $s(e,t,r){xs(function(){e[t]=r})}function wr(e,t){let r,n;const o=t.elm;let i=e.data.style,a=t.data.style;if(!i&&!a||i===a)return;i=i||{},a=a||{};const u="delayed"in i;for(n in i)a[n]||(n[0]==="-"&&n[1]==="-"?o.style.removeProperty(n):o.style[n]="");for(n in a)if(r=a[n],n==="delayed"&&a.delayed)for(const p in a.delayed)r=a.delayed[p],(!u||r!==i.delayed[p])&&$s(o.style,p,r);else n!=="remove"&&r!==i[n]&&(n[0]==="-"&&n[1]==="-"?o.style.setProperty(n,r):o.style[n]=r)}function Ns(e){let t,r;const n=e.elm,o=e.data.style;if(!(!o||!(t=o.destroy)))for(r in t)n.style[r]=t[r]}function Ts(e,t){const r=e.data.style;if(!r||!r.remove){t();return}Ne||(e.elm.offsetLeft,Ne=!0);let n;const o=e.elm;let i=0;const a=r.remove;let u=0;const p=[];for(n in a)p.push(n),o.style[n]=a[n];const m=getComputedStyle(o)["transition-property"].split(", ");for(;i<m.length;++i)p.indexOf(m[i])!==-1&&u++;o.addEventListener("transitionend",function(d){d.target===o&&--u,u===0&&t()})}function Is(){Ne=!1}const Ps={pre:Is,create:wr,update:wr,destroy:Ns,remove:Ts};function ee(e,t,r,n,o){r===void 0&&(r=!1),n===void 0&&(n=!1),o===void 0&&(o=!1);var i=null;return ot.create({start:function(u){n?i=function(h){ln(h,n),u.next(h)}:i=function(h){u.next(h)},e.addEventListener(t,i,{capture:r,passive:o})},stop:function(){e.removeEventListener(t,i,r),i=null}})}function cn(e,t){for(var r=Object.keys(e),n=r.length,o=0;o<n;o++){var i=r[o];if(typeof e[i]=="object"&&typeof t[i]=="object"){if(!cn(e[i],t[i]))return!1}else if(e[i]!==t[i])return!1}return!0}function ln(e,t){if(t)if(typeof t=="boolean")e.preventDefault();else if(Cs(t))t(e)&&e.preventDefault();else if(typeof t=="object")cn(t,e)&&e.preventDefault();else throw new Error("preventDefault has to be either a boolean, predicate function or object")}function Cs(e){return typeof e=="function"}var Ds=function(){function e(t){this._name=t}return e.prototype.select=function(t){return this},e.prototype.elements=function(){var t=J($.of([document]));return t._isCycleSource=this._name,t},e.prototype.element=function(){var t=J($.of(document));return t._isCycleSource=this._name,t},e.prototype.events=function(t,r,n){r===void 0&&(r={});var o;o=ee(document,t,r.useCapture,r.preventDefault);var i=J(o);return i._isCycleSource=this._name,i},e}(),ks=function(){function e(t){this._name=t}return e.prototype.select=function(t){return this},e.prototype.elements=function(){var t=J($.of([document.body]));return t._isCycleSource=this._name,t},e.prototype.element=function(){var t=J($.of(document.body));return t._isCycleSource=this._name,t},e.prototype.events=function(t,r,n){r===void 0&&(r={});var o;o=ee(document.body,t,r.useCapture,r.preventDefault);var i=J(o);return i._isCycleSource=this._name,i},e}();function js(e){var t=1,r=11;return typeof HTMLElement=="object"?e instanceof HTMLElement||e instanceof DocumentFragment:e&&typeof e=="object"&&e!==null&&(e.nodeType===t||e.nodeType===r)&&typeof e.nodeName=="string"}function Ms(e){return e.length>1&&(e[0]==="."||e[0]==="#")}function Ls(e){return e.nodeType===11}function Rs(e){if(typeof e!="string"&&!js(e))throw new Error("Given container is not a DOM element neither a selector string.")}function Fs(e){var t=typeof e=="string"?document.querySelector(e):e;if(typeof e=="string"&&t===null)throw new Error("Cannot render into unknown element `"+e+"`");return t}function pn(e){for(var t="",r=e.length-1;r>=0&&e[r].type==="selector";r--)t=e[r].scope+" "+t;return t.trim()}function Fe(e,t){if(!Array.isArray(e)||!Array.isArray(t)||e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==t[r].type||e[r].scope!==t[r].scope)return!1;return!0}var hn=function(){function e(t,r){this.namespace=t,this.isolateModule=r,this._namespace=t.filter(function(n){return n.type!=="selector"})}return e.prototype.isDirectlyInScope=function(t){var r=this.isolateModule.getNamespace(t);if(!r||this._namespace.length>r.length||!Fe(this._namespace,r.slice(0,this._namespace.length)))return!1;for(var n=this._namespace.length;n<r.length;n++)if(r[n].type==="total")return!1;return!0},e}();function Bs(e){return Array.prototype.slice.call(e)}var dn=function(){function e(t,r){this.namespace=t,this.isolateModule=r}return e.prototype.call=function(){var t=this.namespace,r=pn(t),n=new hn(t,this.isolateModule),o=this.isolateModule.getElement(t.filter(function(i){return i.type!=="selector"}));return o===void 0?[]:r===""?[o]:Bs(o.querySelectorAll(r)).filter(n.isDirectlyInScope,n).concat(o.matches(r)?[o]:[])},e}(),Lt=globalThis&&globalThis.__assign||function(){return Lt=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Lt.apply(this,arguments)};function Us(e){return function(t,r){return r===":root"?t:t.map(function(n){if(!n)return n;var o=yn(r),i=Lt({},n,{data:Lt({},n.data,{isolate:!n.data||!Array.isArray(n.data.isolate)?e.concat([o]):n.data.isolate})});return Lt({},i,{key:i.key!==void 0?i.key:JSON.stringify(i.data.isolate)})})}}function yn(e){return{type:Ms(e)?"sibling":"total",scope:e}}var qs=function(){function e(t,r,n,o,i,a){n===void 0&&(n=[]),this._rootElement$=t,this._sanitation$=r,this._namespace=n,this._isolateModule=o,this._eventDelegator=i,this._name=a,this.isolateSource=function(u,p){return new e(u._rootElement$,u._sanitation$,u._namespace.concat(yn(p)),u._isolateModule,u._eventDelegator,u._name)},this.isolateSink=Us(this._namespace)}return e.prototype._elements=function(){if(this._namespace.length===0)return this._rootElement$.map(function(r){return[r]});var t=new dn(this._namespace,this._isolateModule);return this._rootElement$.map(function(){return t.call()})},e.prototype.elements=function(){var t=J(this._elements().remember());return t._isCycleSource=this._name,t},e.prototype.element=function(){var t=J(this._elements().filter(function(r){return r.length>0}).map(function(r){return r[0]}).remember());return t._isCycleSource=this._name,t},Object.defineProperty(e.prototype,"namespace",{get:function(){return this._namespace},enumerable:!0,configurable:!0}),e.prototype.select=function(t){if(typeof t!="string")throw new Error("DOM driver's select() expects the argument to be a string as a CSS selector");if(t==="document")return new Ds(this._name);if(t==="body")return new ks(this._name);var r=t===":root"?[]:this._namespace.concat({type:"selector",scope:t.trim()});return new e(this._rootElement$,this._sanitation$,r,this._isolateModule,this._eventDelegator,this._name)},e.prototype.events=function(t,r,n){if(r===void 0&&(r={}),typeof t!="string")throw new Error("DOM driver's events() expects argument to be a string representing the event type to listen for.");var o=this._eventDelegator.addEventListener(t,this._namespace,r,n),i=J(o);return i._isCycleSource=this._name,i},e.prototype.dispose=function(){this._sanitation$.shamefullySendNext(null)},e}(),$t={},Ws=Q&&Q.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),o=0,t=0;t<r;t++)for(var i=arguments[t],a=0,u=i.length;a<u;a++,o++)n[o]=i[a];return n};Object.defineProperty($t,"__esModule",{value:!0});$t.SampleCombineOperator=$t.SampleCombineListener=void 0;var Gs=H,ct={},vn=function(){function e(t,r){this.i=t,this.p=r,r.ils[t]=this}return e.prototype._n=function(t){var r=this.p;r.out!==ct&&r.up(t,this.i)},e.prototype._e=function(t){this.p._e(t)},e.prototype._c=function(){this.p.down(this.i,this)},e}();$t.SampleCombineListener=vn;var mn=function(){function e(t,r){this.type="sampleCombine",this.ins=t,this.others=r,this.out=ct,this.ils=[],this.Nn=0,this.vals=[]}return e.prototype._start=function(t){this.out=t;for(var r=this.others,n=this.Nn=r.length,o=this.vals=new Array(n),i=0;i<n;i++)o[i]=ct,r[i]._add(new vn(i,this));this.ins._add(this)},e.prototype._stop=function(){var t=this.others,r=t.length,n=this.ils;this.ins._remove(this);for(var o=0;o<r;o++)t[o]._remove(n[o]);this.out=ct,this.vals=[],this.ils=[]},e.prototype._n=function(t){var r=this.out;r!==ct&&(this.Nn>0||r._n(Ws([t],this.vals)))},e.prototype._e=function(t){var r=this.out;r!==ct&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==ct&&t._c()},e.prototype.up=function(t,r){var n=this.vals[r];this.Nn>0&&n===ct&&this.Nn--,this.vals[r]=t},e.prototype.down=function(t,r){this.others[t]._remove(r)},e}();$t.SampleCombineOperator=mn;var gn;gn=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return function(o){return new Gs.Stream(new mn(o,t))}};var bn=$t.default=gn;globalThis&&globalThis.__assign;function _n(e){if(!e.sel)return{tagName:"",id:"",className:""};var t=e.sel,r=t.indexOf("#"),n=t.indexOf(".",r),o=r>0?r:t.length,i=n>0?n:t.length,a=r!==-1||n!==-1?t.slice(0,Math.min(o,i)):t,u=o<i?t.slice(o+1,i):void 0,p=n>0?t.slice(i+1).replace(/\./g," "):void 0;return{tagName:a,id:u,className:p}}function zs(e){var t=_n(e).className,r=t===void 0?"":t;if(!e.data)return r;var n=e.data,o=n.class,i=n.props;if(o){var a=Object.keys(o).filter(function(u){return o[u]});r+=" "+a.join(" ")}return i&&i.className&&(r+=" "+i.className),r&&r.trim()}var jt;typeof self!="undefined"?jt=self:typeof window!="undefined"?jt=window:typeof global!="undefined"?jt=global:jt=Function("return this")();var Sr=jt.Symbol;typeof Sr=="function"&&Sr("parent");var Hs=function(){function e(t){this.rootElement=t}return e.prototype.call=function(t){if(Ls(this.rootElement))return this.wrapDocFrag(t===null?[]:[t]);if(t===null)return this.wrap([]);var r=_n(t),n=r.tagName,o=r.id,i=zs(t),a=t.data||{},u=a.props||{},p=u.id,h=p===void 0?o:p,m=typeof h=="string"&&h.toUpperCase()===this.rootElement.id.toUpperCase()&&n.toUpperCase()===this.rootElement.tagName.toUpperCase()&&i.toUpperCase()===this.rootElement.className.toUpperCase();return m?t:this.wrap([t])},e.prototype.wrapDocFrag=function(t){return nt("",{isolate:[]},t,void 0,this.rootElement)},e.prototype.wrap=function(t){var r=this.rootElement,n=r.tagName,o=r.id,i=r.className,a=o?"#"+o:"",u=i?"."+i.split(" ").join("."):"",p=ft(""+n.toLowerCase()+a+u,{},t);return p.data=p.data||{},p.data.isolate=p.data.isolate||[],p},e}(),Vs=[Ps,Os,Es,Ss,As],wn=function(){function e(t){this.mapper=t,this.tree=[void 0,{}]}return e.prototype.set=function(t,r,n){for(var o=this.tree,i=n!==void 0?n:t.length,a=0;a<i;a++){var u=this.mapper(t[a]),p=o[1][u];p||(p=[void 0,{}],o[1][u]=p),o=p}o[0]=r},e.prototype.getDefault=function(t,r,n){return this.get(t,r,n)},e.prototype.get=function(t,r,n){for(var o=this.tree,i=n!==void 0?n:t.length,a=0;a<i;a++){var u=this.mapper(t[a]),p=o[1][u];if(!p)if(r)p=[void 0,{}],o[1][u]=p;else return;o=p}return r&&!o[0]&&(o[0]=r()),o[0]},e.prototype.delete=function(t){for(var r=this.tree,n=0;n<t.length-1;n++){var o=r[1][this.mapper(t[n])];if(!o)return;r=o}delete r[1][this.mapper(t[t.length-1])]},e}(),Js=function(){function e(){this.namespaceTree=new wn(function(t){return t.scope}),this.namespaceByElement=new Map,this.vnodesBeingRemoved=[]}return e.prototype.setEventDelegator=function(t){this.eventDelegator=t},e.prototype.insertElement=function(t,r){this.namespaceByElement.set(r,t),this.namespaceTree.set(t,r)},e.prototype.removeElement=function(t){this.namespaceByElement.delete(t);var r=this.getNamespace(t);r&&this.namespaceTree.delete(r)},e.prototype.getElement=function(t,r){return this.namespaceTree.get(t,void 0,r)},e.prototype.getRootElement=function(t){if(this.namespaceByElement.has(t))return t;for(var r=t;!this.namespaceByElement.has(r);)if(r=r.parentNode,r){if(r.tagName==="HTML")throw new Error("No root element found, this should not happen at all")}else return;return r},e.prototype.getNamespace=function(t){var r=this.getRootElement(t);if(!!r)return this.namespaceByElement.get(r)},e.prototype.createModule=function(){var t=this;return{create:function(r,n){var o=n.elm,i=n.data,a=i===void 0?{}:i,u=a.isolate;Array.isArray(u)&&t.insertElement(u,o)},update:function(r,n){var o=r.elm,i=r.data,a=i===void 0?{}:i,u=n.elm,p=n.data,h=p===void 0?{}:p,m=a.isolate,d=h.isolate;Fe(m,d)||Array.isArray(m)&&t.removeElement(o),Array.isArray(d)&&t.insertElement(d,u)},destroy:function(r){t.vnodesBeingRemoved.push(r)},remove:function(r,n){t.vnodesBeingRemoved.push(r),n()},post:function(){for(var r=t.vnodesBeingRemoved,n=r.length-1;n>=0;n--){var o=r[n],i=o.data!==void 0?o.data.isolation:void 0;i!==void 0&&t.removeElement(i),t.eventDelegator.removeElement(o.elm,i)}t.vnodesBeingRemoved=[]}}},e}(),Ks=function(){function e(){this.arr=[],this.prios=[]}return e.prototype.add=function(t,r){for(var n=0;n<this.arr.length;n++)if(this.prios[n]<r){this.arr.splice(n,0,t),this.prios.splice(n,0,r);return}this.arr.push(t),this.prios.push(r)},e.prototype.forEach=function(t){for(var r=0;r<this.arr.length;r++)t(this.arr[r],r,this.arr)},e.prototype.delete=function(t){for(var r=0;r<this.arr.length;r++)if(this.arr[r]===t){this.arr.splice(r,1),this.prios.splice(r,1);return}},e}(),re=globalThis&&globalThis.__assign||function(){return re=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},re.apply(this,arguments)},Ys=["blur","canplay","canplaythrough","durationchange","emptied","ended","focus","load","loadeddata","loadedmetadata","mouseenter","mouseleave","pause","play","playing","ratechange","reset","scroll","seeked","seeking","stalled","submit","suspend","timeupdate","unload","volumechange","waiting"],Xs=function(){function e(t,r){var n=this;this.rootElement$=t,this.isolateModule=r,this.virtualListeners=new wn(function(o){return o.scope}),this.nonBubblingListenersToAdd=new Set,this.virtualNonBubblingListener=[],this.isolateModule.setEventDelegator(this),this.domListeners=new Map,this.domListenersToAdd=new Map,this.nonBubblingListeners=new Map,t.addListener({next:function(o){n.origin!==o&&(n.origin=o,n.resetEventListeners(),n.domListenersToAdd.forEach(function(i,a){return n.setupDOMListener(a,i)}),n.domListenersToAdd.clear()),n.nonBubblingListenersToAdd.forEach(function(i){n.setupNonBubblingListener(i)})}})}return e.prototype.addEventListener=function(t,r,n,o){var i=$.never(),a,u=new hn(r,this.isolateModule),p=o===void 0?Ys.indexOf(t)===-1:o;if(p)return this.domListeners.has(t)||this.setupDOMListener(t,!!n.passive),a=this.insertListener(i,u,t,n),i;var h=[];this.nonBubblingListenersToAdd.forEach(function(_){return h.push(_)});for(var m=void 0,d=0,O=h.length,f=function(_){_[0];var S=_[1],x=_[2];return _[3],t===S&&Fe(x.namespace,r)};!m&&d<O;){var c=h[d];m=f(c)?c:m,d++}var l=m,y;if(l){var g=l[0];y=g}else{var v=new dn(r,this.isolateModule);a=this.insertListener(i,u,t,n),l=[i,t,v,a],y=i,this.nonBubblingListenersToAdd.add(l),this.setupNonBubblingListener(l)}var b=this,w=null;return $.create({start:function(_){w=y.subscribe(_)},stop:function(){l[0];var _=l[1],S=l[2];l[3];var x=S.call();x.forEach(function(E){var N=E.subs;N&&N[_]&&(N[_].unsubscribe(),delete N[_])}),b.nonBubblingListenersToAdd.delete(l),w.unsubscribe()}})},e.prototype.removeElement=function(t,r){r!==void 0&&this.virtualListeners.delete(r);var n=[];this.nonBubblingListeners.forEach(function(a,u){if(a.has(t)){n.push([u,t]);var p=t.subs;p&&Object.keys(p).forEach(function(h){p[h].unsubscribe()})}});for(var o=0;o<n.length;o++){var i=this.nonBubblingListeners.get(n[o][0]);!i||(i.delete(n[o][1]),i.size===0?this.nonBubblingListeners.delete(n[o][0]):this.nonBubblingListeners.set(n[o][0],i))}},e.prototype.insertListener=function(t,r,n,o){var i=[],a=r._namespace,u=a.length;do i.push(this.getVirtualListeners(n,a,!0,u)),u--;while(u>=0&&a[u].type!=="total");for(var p=re({},o,{scopeChecker:r,subject:t,bubbles:!!o.bubbles,useCapture:!!o.useCapture,passive:!!o.passive}),h=0;h<i.length;h++)i[h].add(p,a.length);return p},e.prototype.getVirtualListeners=function(t,r,n,o){n===void 0&&(n=!1);var i=o!==void 0?o:r.length;if(!n)for(var a=i-1;a>=0;a--){if(r[a].type==="total"){i=a+1;break}i=a}var u=this.virtualListeners.getDefault(r,function(){return new Map},i);return u.has(t)||u.set(t,new Ks),u.get(t)},e.prototype.setupDOMListener=function(t,r){var n=this;if(this.origin){var o=ee(this.origin,t,!1,!1,r).subscribe({next:function(i){return n.onEvent(t,i,r)},error:function(){},complete:function(){}});this.domListeners.set(t,{sub:o,passive:r})}else this.domListenersToAdd.set(t,r)},e.prototype.setupNonBubblingListener=function(t){t[0];var r=t[1],n=t[2],o=t[3];if(!!this.origin){var i=n.call();if(i.length){var a=this;i.forEach(function(u){var p,h=u.subs;if(!h||!h[r]){var m=ee(u,r,!1,!1,o.passive).subscribe({next:function(O){return a.onEvent(r,O,!!o.passive,!1)},error:function(){},complete:function(){}});a.nonBubblingListeners.has(r)||a.nonBubblingListeners.set(r,new Map);var d=a.nonBubblingListeners.get(r);if(!d)return;d.set(u,{sub:m,destination:o}),u.subs=re({},h,(p={},p[r]=m,p))}})}}},e.prototype.resetEventListeners=function(){for(var t=this.domListeners.entries(),r=t.next();!r.done;){var n=r.value,o=n[0],i=n[1],a=i.sub,u=i.passive;a.unsubscribe(),this.setupDOMListener(o,u),r=t.next()}},e.prototype.putNonBubblingListener=function(t,r,n,o){var i=this.nonBubblingListeners.get(t);if(!!i){var a=i.get(r);a&&a.destination.passive===o&&a.destination.useCapture===n&&(this.virtualNonBubblingListener[0]=a.destination)}},e.prototype.onEvent=function(t,r,n,o){o===void 0&&(o=!0);var i=this.patchEvent(r),a=this.isolateModule.getRootElement(r.target);if(o){var u=this.isolateModule.getNamespace(r.target);if(!u)return;var p=this.getVirtualListeners(t,u);this.bubble(t,r.target,a,i,p,u,u.length-1,!0,n),this.bubble(t,r.target,a,i,p,u,u.length-1,!1,n)}else this.putNonBubblingListener(t,r.target,!0,n),this.doBubbleStep(t,r.target,a,i,this.virtualNonBubblingListener,!0,n),this.putNonBubblingListener(t,r.target,!1,n),this.doBubbleStep(t,r.target,a,i,this.virtualNonBubblingListener,!1,n),r.stopPropagation()},e.prototype.bubble=function(t,r,n,o,i,a,u,p,h){!p&&!o.propagationHasBeenStopped&&this.doBubbleStep(t,r,n,o,i,p,h);var m=n,d=u;if(r===n)if(u>=0&&a[u].type==="sibling")m=this.isolateModule.getElement(a,u),d--;else return;r.parentNode&&m&&this.bubble(t,r.parentNode,m,o,i,a,d,p,h),p&&!o.propagationHasBeenStopped&&this.doBubbleStep(t,r,n,o,i,p,h)},e.prototype.doBubbleStep=function(t,r,n,o,i,a,u){!n||(this.mutateEventCurrentTarget(o,r),i.forEach(function(p){if(p.passive===u&&p.useCapture===a){var h=pn(p.scopeChecker.namespace);!o.propagationHasBeenStopped&&p.scopeChecker.isDirectlyInScope(r)&&(h!==""&&r.matches(h)||h===""&&r===n)&&(ln(o,p.preventDefault),p.subject.shamefullySendNext(o))}}))},e.prototype.patchEvent=function(t){var r=t;r.propagationHasBeenStopped=!1;var n=r.stopPropagation;return r.stopPropagation=function(){n.call(this),this.propagationHasBeenStopped=!0},r},e.prototype.mutateEventCurrentTarget=function(t,r){try{Object.defineProperty(t,"currentTarget",{value:r,configurable:!0})}catch{console.log("please use event.ownerTarget")}t.ownerTarget=r},e}();function Zs(e){if(!Array.isArray(e))throw new Error("Optional modules option must be an array for snabbdom modules")}function Qs(e){if(!e||typeof e.addListener!="function"||typeof e.fold!="function")throw new Error("The DOM driver function expects as input a Stream of virtual DOM elements")}function tu(e){return $.merge(e,$.never())}function eu(e){return e.elm}function ru(e){(console.error||console.log)(e)}function nu(){return $.create({start:function(e){document.readyState==="loading"?document.addEventListener("readystatechange",function(){var t=document.readyState;(t==="interactive"||t==="complete")&&(e.next(null),e.complete())}):(e.next(null),e.complete())},stop:function(){}})}function ou(e){return e.data=e.data||{},e.data.isolate=[],e}function iu(e,t){t===void 0&&(t={}),Rs(e);var r=t.modules||Vs;Zs(r);var n=new Js,o=t&&t.snabbdomOptions||void 0,i=gs([n.createModule()].concat(r),void 0,o),a=nu(),u,p,h=$.create({start:function(d){p=new MutationObserver(function(){return d.next(null)})},stop:function(){p.disconnect()}});function m(d,O){O===void 0&&(O="DOM"),Qs(d);var f=$.create(),c=a.map(function(){var b=Fs(e)||document.body;return u=new Hs(b),b}),l=d.remember();l.addListener({}),h.addListener({});var y=c.map(function(b){return $.merge(l.endWhen(f),f).map(function(w){return u.call(w)}).startWith(ou($e(b))).fold(i,$e(b)).drop(1).map(eu).startWith(b).map(function(w){return p.observe(w,{childList:!0,attributes:!0,characterData:!0,subtree:!0,attributeOldValue:!0,characterDataOldValue:!0}),w}).compose(tu)}).flatten(),v=te(a,h).endWhen(f).compose(bn(y)).map(function(b){return b[1]}).remember();v.addListener({error:t.reportSnabbdomError||ru});var g=new Xs(v,n);return new qs(v,f,[],n,g,O)}return m}function au(e){return typeof e=="string"&&e.length>0}function su(e){return au(e)&&(e[0]==="."||e[0]==="#")}function Sn(e){return function(r,n,o){var i=typeof r!="undefined",a=typeof n!="undefined",u=typeof o!="undefined";return su(r)?a&&u?ft(e+r,n,o):a?ft(e+r,n):ft(e+r,{}):u?ft(e+r,n,o):a?ft(e,r,n):i?ft(e,r):ft(e,{})}}var uu=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","colorProfile","cursor","defs","desc","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotlight","feTile","feTurbulence","filter","font","fontFace","fontFaceFormat","fontFaceName","fontFaceSrc","fontFaceUri","foreignObject","g","glyph","glyphRef","hkern","image","line","linearGradient","marker","mask","metadata","missingGlyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],fu=Sn("svg");uu.forEach(function(e){fu[e]=Sn(e)});var cu=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","dd","del","details","dfn","dir","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","meta","nav","noscript","object","ol","optgroup","option","p","param","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","u","ul","video"];cu.forEach(function(e){});function lu(e){var t=new EventTarget;return e.subscribe({next:function(n){return t.dispatchEvent(new CustomEvent("data",{detail:n}))}}),{select:function(n){var o=!n,i=Array.isArray(n)?n:[n],a,u=$.create({start:function(h){a=function(d){var O=d.detail,f=O&&O.data||null;(o||i.includes(O.type))&&h.next(f)},t.addEventListener("data",a)},stop:function(h){return t.removeEventListener("data",a)}});return J(u)}}}function pu(e){e.addListener({next:function(r){console.log(r)}})}function Or(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function Ar(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Or(Object(r),!0).forEach(function(n){hu(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Or(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function hu(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function du(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=r.mountPoint,o=n===void 0?"#root":n,i=r.fragments,a=i===void 0?!0:i,u=Vi(e,"STATE"),p={EVENTS:lu,DOM:iu(o,{snabbdomOptions:{experimental:{fragments:a}}}),LOG:pu},h=Ar(Ar({},p),t);return Ka(u,h)}function Er(e,t){return mu(e)||vu(e,t)||On(e,t)||yu()}function yu(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vu(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n=[],o=!0,i=!1,a,u;try{for(r=r.call(e);!(o=(a=r.next()).done)&&(n.push(a.value),!(t&&n.length===t));o=!0);}catch(p){i=!0,u=p}finally{try{!o&&r.return!=null&&r.return()}finally{if(i)throw u}}return n}}function mu(e){if(Array.isArray(e))return e}function Te(e){return Te=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Te(e)}function ve(e){return _u(e)||bu(e)||On(e)||gu()}function gu(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function On(e,t){if(!!e){if(typeof e=="string")return Ie(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ie(e,t)}}function bu(e){if(typeof Symbol!="undefined"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function _u(e){if(Array.isArray(e))return Ie(e)}function Ie(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function An(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.reduce(function(n,o){return typeof o=="string"&&!n.includes(o)?n.push.apply(n,ve(xn(o))):Array.isArray(o)?n.push.apply(n,ve(wu(o))):Te(o)==="object"&&n.push.apply(n,ve(Su(o))),n},[]).join(" ")}function En(e){return/^[a-zA-Z0-9-_]+$/.test(e)}function xn(e){if(typeof e!="string")throw new Error("Class name must be a string");return e.trim().split(" ").reduce(function(t,r){if(r.trim().length===0)return t;if(!En(r))throw new Error("".concat(r," is not a valid CSS class name"));return t.push(r),t},[])}function wu(e){return e.map(xn).flat()}function Su(e){var t=Object.entries(e).filter(function(r){var n=Er(r,2);n[0];var o=n[1];return typeof o=="function"?o():!!o}).map(function(r){var n=Er(r,2),o=n[0];n[1];var i=o.trim();if(!En(i))throw new Error("".concat(i," is not a valid CSS class name"));return i});return t}var $n={};Object.defineProperty($n,"__esModule",{value:!0});var Ou=H,Au=function(){function e(t,r){this.dt=t,this.ins=r,this.type="throttle",this.out=null,this.id=null}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=null,this.id=null},e.prototype.clearInterval=function(){var t=this.id;t!==null&&clearInterval(t),this.id=null},e.prototype._n=function(t){var r=this,n=this.out;!n||this.id||(n._n(t),this.id=setInterval(function(){r.clearInterval()},this.dt))},e.prototype._e=function(t){var r=this.out;!r||(this.clearInterval(),r._e(t))},e.prototype._c=function(){var t=this.out;!t||(this.clearInterval(),t._c())},e}();function Eu(e){return function(r){return new Ou.Stream(new Au(e,r))}}$n.default=Eu;function xu(e){e.subscribe({next:t=>{const{selector:r,value:n}=t.data;if(t.type==="SET_VALUE")for(let o of document.querySelectorAll(r))o.value=n||"",o.dispatchEvent(new Event("change"));t.type==="FOCUS"&&document.querySelector(r).focus()}})}function $u(e){return e.addListener({next:({key:t,value:r})=>{try{localStorage.setItem(t,JSON.stringify(r))}catch(n){console.log(n)}}}),{get:(t,r,n=!1)=>{const o=window.localStorage.getItem(t);let i;try{i=o&&o!="null"?JSON.parse(o):r}catch{console.log("Error reading from local storage"),i=r}return n?e.filter(({key:a,value:u})=>t==a).map(({value:a})=>a).compose(xt()).startWith(i):$.of(i)}}}var Nn={};(function(e){(function(t){var r=document.location;function n(){return r.hash===""||r.hash==="#"}var o={mode:"modern",hash:r.hash,history:!1,check:function(){var f=r.hash;f!=this.hash&&(this.hash=f,this.onHashChanged())},fire:function(){this.mode==="modern"?this.history===!0?window.onpopstate():window.onhashchange():this.onHashChanged()},init:function(f,c){var l=this;this.history=c,i.listeners||(i.listeners=[]);function y(g){for(var b=0,w=i.listeners.length;b<w;b++)i.listeners[b](g)}if("onhashchange"in window&&(document.documentMode===void 0||document.documentMode>7))this.history===!0?setTimeout(function(){window.onpopstate=y},500):window.onhashchange=y,this.mode="modern";else{var v=document.createElement("iframe");v.id="state-frame",v.style.display="none",document.body.appendChild(v),this.writeFrame(""),"onpropertychange"in document&&"attachEvent"in document&&document.attachEvent("onpropertychange",function(){event.propertyName==="location"&&l.check()}),window.setInterval(function(){l.check()},50),this.onHashChanged=y,this.mode="legacy"}return i.listeners.push(f),this.mode},destroy:function(f){if(!(!i||!i.listeners))for(var c=i.listeners,l=c.length-1;l>=0;l--)c[l]===f&&c.splice(l,1)},setHash:function(f){return this.mode==="legacy"&&this.writeFrame(f),this.history===!0?(window.history.pushState({},document.title,f),this.fire()):r.hash=f[0]==="/"?f:"/"+f,this},writeFrame:function(f){var c=document.getElementById("state-frame"),l=c.contentDocument||c.contentWindow.document;l.open(),l.write("<script>_hash = '"+f+"'; onload = parent.listener.syncHash;<script>"),l.close()},syncHash:function(){var f=this._hash;return f!=r.hash&&(r.hash=f),this},onHashChanged:function(){}},i=t.Router=function(f){if(!(this instanceof i))return new i(f);this.params={},this.routes={},this.methods=["on","once","after","before"],this.scope=[],this._methods={},this._insert=this.insert,this.insert=this.insertEx,this.historySupport=(window.history!=null?window.history.pushState:null)!=null,this.configure(),this.mount(f||{})};i.prototype.init=function(f){var c=this,l;return this.handler=function(y){var v=y&&y.newURL||window.location.hash,g=c.history===!0?c.getPath():v.replace(/.*#/,"");c.dispatch("on",g.charAt(0)==="/"?g:"/"+g)},o.init(this.handler,this.history),this.history===!1?n()&&f?r.hash=f:n()||c.dispatch("on","/"+r.hash.replace(/^(#\/|#|\/)/,"")):(this.convert_hash_in_init?(l=n()&&f?f:n()?null:r.hash.replace(/^#/,""),l&&window.history.replaceState({},document.title,l)):l=this.getPath(),(l||this.run_in_init===!0)&&this.handler()),this},i.prototype.explode=function(){var f=this.history===!0?this.getPath():r.hash;return f.charAt(1)==="/"&&(f=f.slice(1)),f.slice(1,f.length).split("/")},i.prototype.setRoute=function(f,c,l){var y=this.explode();return typeof f=="number"&&typeof c=="string"?y[f]=c:typeof l=="string"?y.splice(f,c,s):y=[f],o.setHash(y.join("/")),y},i.prototype.insertEx=function(f,c,l,y){return f==="once"&&(f="on",l=function(v){var g=!1;return function(){if(!g)return g=!0,v.apply(this,arguments)}}(l)),this._insert(f,c,l,y)},i.prototype.getRoute=function(f){var c=f;if(typeof f=="number")c=this.explode()[f];else if(typeof f=="string"){var l=this.explode();c=l.indexOf(f)}else c=this.explode();return c},i.prototype.destroy=function(){return o.destroy(this.handler),this},i.prototype.getPath=function(){var f=window.location.pathname;return f.substr(0,1)!=="/"&&(f="/"+f),f};function a(f,c){for(var l=0;l<f.length;l+=1)if(c(f[l],l,f)===!1)return}function u(f){for(var c=[],l=0,y=f.length;l<y;l++)c=c.concat(f[l]);return c}function p(f,c,l){if(!f.length)return l();var y=0;(function v(){c(f[y],function(g){g||g===!1?(l(g),l=function(){}):(y+=1,y===f.length?l():v())})})()}function h(f,c,l){l=f;for(var y in c)if(c.hasOwnProperty(y)&&(l=c[y](f),l!==f))break;return l===f?"([._a-zA-Z0-9-%()]+)":l}function m(f,c){for(var l,y=0,v="";l=f.substr(y).match(/[^\w\d\- %@&]*\*[^\w\d\- %@&]*/);)y=l.index+l[0].length,l[0]=l[0].replace(/^\*/,"([_.()!\\ %@&a-zA-Z0-9-]+)"),v+=f.substr(0,l.index)+l[0];f=v+=f.substr(y);var g=f.match(/:([^\/]+)/ig),b,w;if(g){w=g.length;for(var _=0;_<w;_++)b=g[_],b.slice(0,2)==="::"?f=b.slice(1):f=f.replace(b,h(b,c))}return f}function d(f,c,w,_){var v=0,g=0,b=0,w=(w||"(").toString(),_=(_||")").toString(),S;for(S=0;S<f.length;S++){var x=f[S];if(x.indexOf(w,v)>x.indexOf(_,v)||~x.indexOf(w,v)&&!~x.indexOf(_,v)||!~x.indexOf(w,v)&&~x.indexOf(_,v)){if(g=x.indexOf(w,v),b=x.indexOf(_,v),~g&&!~b||!~g&&~b){var E=f.slice(0,(S||1)+1).join(c);f=[E].concat(f.slice((S||1)+1))}v=(b>g?b:g)+1,S=0}else v=0}return f}var O=/\?.*/;i.prototype.configure=function(f){f=f||{};for(var c=0;c<this.methods.length;c++)this._methods[this.methods[c]]=!0;return this.recurse=f.recurse||this.recurse||!1,this.async=f.async||!1,this.delimiter=f.delimiter||"/",this.strict=typeof f.strict=="undefined"?!0:f.strict,this.notfound=f.notfound,this.resource=f.resource,this.history=f.html5history&&this.historySupport||!1,this.run_in_init=this.history===!0&&f.run_handler_in_init!==!1,this.convert_hash_in_init=this.history===!0&&f.convert_hash_in_init!==!1,this.every={after:f.after||null,before:f.before||null,on:f.on||null},this},i.prototype.param=function(f,c){f[0]!==":"&&(f=":"+f);var l=new RegExp(f,"g");return this.params[f]=function(y){return y.replace(l,c.source||c)},this},i.prototype.on=i.prototype.route=function(f,c,l){var y=this;if(!l&&typeof c=="function"&&(l=c,c=f,f="on"),Array.isArray(c))return c.forEach(function(v){y.on(f,v,l)});if(c.source&&(c=c.source.replace(/\\\//ig,"/")),Array.isArray(f))return f.forEach(function(v){y.on(v.toLowerCase(),c,l)});c=c.split(new RegExp(this.delimiter)),c=d(c,this.delimiter),this.insert(f,this.scope.concat(c),l)},i.prototype.path=function(f,c){var l=this.scope.length;f.source&&(f=f.source.replace(/\\\//ig,"/")),f=f.split(new RegExp(this.delimiter)),f=d(f,this.delimiter),this.scope=this.scope.concat(f),c.call(this,this),this.scope.splice(l,f.length)},i.prototype.dispatch=function(f,c,l){var y=this,v=this.traverse(f,c.replace(O,""),this.routes,""),g=this._invoked,b;if(this._invoked=!0,!v||v.length===0)return this.last=[],typeof this.notfound=="function"&&this.invoke([this.notfound],{method:f,path:c},l),!1;this.recurse==="forward"&&(v=v.reverse());function w(){y.last=v.after,y.invoke(y.runlist(v),y,l)}return b=this.every&&this.every.after?[this.every.after].concat(this.last):[this.last],b&&b.length>0&&g?(this.async?this.invoke(b,this,w):(this.invoke(b,this),w()),!0):(w(),!0)},i.prototype.invoke=function(f,c,l){var y=this,v;this.async?(v=function(g,b){if(Array.isArray(g))return p(g,v,b);typeof g=="function"&&g.apply(c,(f.captures||[]).concat(b))},p(f,v,function(){l&&l.apply(c,arguments)})):(v=function(g){if(Array.isArray(g))return a(g,v);if(typeof g=="function")return g.apply(c,f.captures||[]);typeof g=="string"&&y.resource&&y.resource[g].apply(c,f.captures||[])},a(f,v))},i.prototype.traverse=function(f,c,l,y,v){var g=[],b,w,_,S;function x(N){if(!v)return N;function T(I){for(var F=[],V=0;V<I.length;V++)F[V]=Array.isArray(I[V])?T(I[V]):I[V];return F}function P(I){for(var F=I.length-1;F>=0;F--)Array.isArray(I[F])?(P(I[F]),I[F].length===0&&I.splice(F,1)):v(I[F])||I.splice(F,1)}var k=T(N);return k.matched=N.matched,k.captures=N.captures,k.after=N.after.filter(v),P(k),k}if(c===this.delimiter&&l[f])return S=[[l.before,l[f]].filter(Boolean)],S.after=[l.after].filter(Boolean),S.matched=!0,S.captures=[],x(S);for(var E in l)if(l.hasOwnProperty(E)&&(!this._methods[E]||this._methods[E]&&typeof l[E]=="object"&&!Array.isArray(l[E]))){if(b=w=y+this.delimiter+E,this.strict||(w+="["+this.delimiter+"]?"),_=c.match(new RegExp("^"+w)),!_)continue;if(_[0]&&_[0]==c&&l[E][f])return S=[[l[E].before,l[E][f]].filter(Boolean)],S.after=[l[E].after].filter(Boolean),S.matched=!0,S.captures=_.slice(1),this.recurse&&l===this.routes&&(S.push([l.before,l.on].filter(Boolean)),S.after=S.after.concat([l.after].filter(Boolean))),x(S);if(S=this.traverse(f,c,l[E],b),S.matched)return S.length>0&&(g=g.concat(S)),this.recurse&&(g.push([l[E].before,l[E].on].filter(Boolean)),S.after=S.after.concat([l[E].after].filter(Boolean)),l===this.routes&&(g.push([l.before,l.on].filter(Boolean)),S.after=S.after.concat([l.after].filter(Boolean)))),g.matched=!0,g.captures=S.captures,g.after=S.after,x(g)}return!1},i.prototype.insert=function(f,c,l,y){var v,g,b,w,_;if(c=c.filter(function(S){return S&&S.length>0}),y=y||this.routes,_=c.shift(),/\:|\*/.test(_)&&!/\\d|\\w/.test(_)&&(_=m(_,this.params)),c.length>0)return y[_]=y[_]||{},this.insert(f,c,l,y[_]);if(!_&&!c.length&&y===this.routes){switch(v=typeof y[f],v){case"function":y[f]=[y[f],l];return;case"object":y[f].push(l);return;case"undefined":y[f]=l;return}return}if(g=typeof y[_],b=Array.isArray(y[_]),y[_]&&!b&&g=="object")switch(v=typeof y[_][f],v){case"function":y[_][f]=[y[_][f],l];return;case"object":y[_][f].push(l);return;case"undefined":y[_][f]=l;return}else if(g=="undefined"){w={},w[f]=l,y[_]=w;return}throw new Error("Invalid route context: "+g)},i.prototype.extend=function(f){var c=this,l=f.length,y;function v(g){c._methods[g]=!0,c[g]=function(){var b=arguments.length===1?[g,""]:[g];c.on.apply(c,b.concat(Array.prototype.slice.call(arguments)))}}for(y=0;y<l;y++)v(f[y])},i.prototype.runlist=function(f){var c=this.every&&this.every.before?[this.every.before].concat(u(f)):u(f);return this.every&&this.every.on&&c.push(this.every.on),c.captures=f.captures,c.source=f.source,c},i.prototype.mount=function(f,c){if(!f||typeof f!="object"||Array.isArray(f))return;var l=this;c=c||[],Array.isArray(c)||(c=c.split(l.delimiter));function y(g,b){var w=g,_=g.split(l.delimiter),S=typeof f[g],x=_[0]===""||!l._methods[_[0]],E=x?"on":w;if(x&&(w=w.slice((w.match(new RegExp("^"+l.delimiter))||[""])[0].length),_.shift()),x&&S==="object"&&!Array.isArray(f[g])){b=b.concat(_),l.mount(f[g],b);return}x&&(b=b.concat(w.split(l.delimiter)),b=d(b,l.delimiter)),l.insert(E,b,f[g])}for(var v in f)f.hasOwnProperty(v)&&y(v,c.slice(0))}})(e)})(Nn);function Nu(e){const t=new Nn.Router;t.configure({notfound:n=>{window.location.hash=""}}),t.init();const r=$.create({start:n=>{e.subscribe({next:o=>{o=Array.isArray(o)?o:[o];for(let i of o)t.on(i,a=>{n.next(i)})}})},stop:n=>{}});return J(r)}function Pe(e){return Pe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pe(e)}var Tu=function(t){return t===void 0},Iu=function(t){return typeof t=="number"},Pu=function(t){return typeof t=="string"},Tn=function(t){return Pu(t)||Iu(t)},Cu=function(t){return Array.isArray(t)},Du=function(t){return Pe(t)==="object"&&t!==null},ku=function(t){return typeof t=="function"},ju=function(t){return Du(t)&&"sel"in t&&"data"in t&&"children"in t&&"text"in t},Mu={svg:1,circle:1,ellipse:1,line:1,polygon:1,polyline:1,rect:1,g:1,path:1,text:1},Lu=function(t){return t.sel in Mu},Kt=Object.prototype.hasOwnProperty,In=Object.prototype.toString,xr=Object.defineProperty,$r=Object.getOwnPropertyDescriptor,Nr=function(t){return typeof Array.isArray=="function"?Array.isArray(t):In.call(t)==="[object Array]"},Tr=function(t){if(!t||In.call(t)!=="[object Object]")return!1;var r=Kt.call(t,"constructor"),n=t.constructor&&t.constructor.prototype&&Kt.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!r&&!n)return!1;var o;for(o in t);return typeof o=="undefined"||Kt.call(t,o)},Ir=function(t,r){xr&&r.name==="__proto__"?xr(t,r.name,{enumerable:!0,configurable:!0,value:r.newValue,writable:!0}):t[r.name]=r.newValue},Pr=function(t,r){if(r==="__proto__")if(Kt.call(t,r)){if($r)return $r(t,r).value}else return;return t[r]},Pn=function e(){var t,r,n,o,i,a,u=arguments[0],p=1,h=arguments.length,m=!1;for(typeof u=="boolean"&&(m=u,u=arguments[1]||{},p=2),(u==null||typeof u!="object"&&typeof u!="function")&&(u={});p<h;++p)if(t=arguments[p],t!=null)for(r in t)n=Pr(u,r),o=Pr(t,r),u!==o&&(m&&o&&(Tr(o)||(i=Nr(o)))?(i?(i=!1,a=n&&Nr(n)?n:[]):a=n&&Tr(n)?n:{},Ir(u,{name:r,newValue:e(m,a,o)})):typeof o!="undefined"&&Ir(u,{name:r,newValue:o}));return u};function Yt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Ce=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Pn.apply(void 0,[!0].concat(r))},Ru=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Pn.apply(void 0,[!1].concat(r))},Fu=function e(t,r,n){for(var o=n,i=0;i<t.length;i++){var a=t[i];Cu(a)?o=e(a,r,o):o=r(o,a)}return o},Be=function(t,r){return Object.keys(t).map(function(n){return r(n,t[n])}).reduce(function(n,o){return Ce(n,o)},{})},Bu=function(t,r){return Be(t,function(n,o){var i=n.indexOf("-");if(i>-1&&r[n.slice(0,i)]!==void 0){var a=Yt({},n.slice(i+1),o);return Yt({},n.slice(0,i),a)}return Yt({},n,o)})},Cr=function(t,r){return Be(r,function(n,o){return n!==t?Yt({},n,o):{}})};function zt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Uu=function(t){return Tn(t)?{text:t,sel:void 0,data:void 0,children:void 0,elm:void 0,key:void 0}:void 0},Cn=function e(t){return Lu(t)?Ru(t,{data:Cr("props",Ce(t.data,{ns:"http://www.w3.org/2000/svg",attrs:Cr("className",Ce(t.data.props,{class:t.data.props?t.data.props.className:void 0}))}))},{children:Tu(t.children)?void 0:t.children.map(function(r){return e(r)})}):t},dt={for:"attrs",role:"attrs",tabindex:"attrs","aria-*":"attrs",key:null},qu=function(t,r){return Be(t,function(n,o){var i=zt({},n,o);if(dt[n]&&r[dt[n]]!==void 0)return zt({},dt[n],i);if(dt[n]===null)return{};for(var a=Object.keys(dt),u=0;u<a.length;u++){var p=a[u];if(p.charAt(p.length-1)==="*"&&n.indexOf(p.slice(0,-1))===0&&r[dt[p]]!==void 0)return zt({},dt[p],i)}return r[n]!==void 0?zt({},r[n]?r[n]:n,o):r.props!==void 0?{props:i}:i})},Wu=function(t,r){return Cn(qu(Bu(t,r),r))},Gu=function(t){return t.length>1||!Tn(t[0])?void 0:t[0].toString()},zu=function(t){return Fu(t,function(r,n){var o=ju(n)?n:Uu(n);return r.push(o),r},[])},Hu={attrs:"",props:"",class:"",data:"dataset",style:"",hook:"",on:""},Vu=function(t){return function(r,n){typeof r=="undefined"&&(r="UNDEFINED",cnosole.error("JSX Error: Capitalized HTML element without corresponding Sygnal factory.  Components with names where the first letter is capital MUST be defined or included at the parent component's file scope."));for(var o=arguments.length,i=new Array(o>2?o-2:0),a=2;a<o;a++)i[a-2]=arguments[a];if(ku(r)){if(r.name==="Fragment")return r(n||{},i);var u=r;r=r.name||"sygnal-factory",n||(n={}),n.sygnalFactory=u}var p=Gu(i);return Cn({sel:r,data:n?Wu(n,t):{},children:typeof p!="undefined"?void 0:zu(i),text:p,elm:void 0,key:n?n.key:void 0})}},R=Vu(Hu);function Ju(e,t=""){const r=e.events("input"),n=e.events("keydown"),o=e.events("keyup");e.events("change");const i=e.events("focus"),a=e.events("blur"),u=$.merge(i,r).map(m=>m.target.value).startWith(t).remember(),p=n.filter(m=>m.keyCode===13).mapTo("enter"),h=n.filter(m=>m.keyCode===27).mapTo("escape");return{value$:u,input$:r,enter$:p,escape$:h,focus$:i,blur$:a,keydown$:n,keyup$:o}}var Ku=rn({name:"TODO",model:{TOGGLE:e=>X(Y({},e),{completed:!e.completed}),DESTROY:e=>{},EDIT_START:(e,t,r)=>{const n=".todo-"+e.id+" .edit";return r("SET_EDIT_VALUE",{selector:n,value:e.title}),r("FOCUS_EDIT_FIELD",{selector:n}),X(Y({},e),{editing:!0,cachedTitle:e.title})},EDIT_DONE:(e,t)=>e.editing===!1?e:X(Y({},e),{title:t,editing:!1,cachedTitle:""}),EDIT_CANCEL:(e,t,r)=>{const n=".todo-"+e.id+" .edit";return r("SET_EDIT_VALUE",{selector:n,value:e.cachedTitle}),X(Y({},e),{title:e.cachedTitle,editing:!1,cachedTitle:""})},SET_EDIT_VALUE:{DOMFX:(e,t)=>({type:"SET_VALUE",data:t})},FOCUS_EDIT_FIELD:{DOMFX:(e,t)=>({type:"FOCUS",data:t})}},intent:({DOM:e})=>{const t=e.select(".toggle").events("click"),r=e.select(".todo label").events("dblclick"),n=e.select(".destroy").events("click"),o=e.select(".edit"),{value$:i,enter$:a,escape$:u,blur$:p}=Ju(o),h=$.merge(a,p).compose(bn(i)).map(([m,d])=>d);return{TOGGLE:t,DESTROY:n,EDIT_START:r,EDIT_DONE:h,EDIT_CANCEL:u}},view:({state:e})=>{const{id:t,hidden:r,completed:n,editing:o,title:i}=e;if(r)return;const a=An("todo","todo-"+t,{completed:n,editing:o});return R("li",{className:a},R("div",{className:"view"},R("input",{className:"toggle",type:"checkbox",checked:!!n}),R("label",null,i),R("button",{className:"destroy"})),R("input",{className:"edit",type:"text",value:i}))}});const me={all:e=>!0,active:e=>!e.completed,completed:e=>e.completed};var Yu=rn({name:"APP",initialState:{visibility:"all",todos:[]},calculated:{total:e=>e.todos.length,remaining:e=>e.todos.filter(t=>!t.completed).length,completed:e=>e.todos.filter(t=>t.completed).length,allDone:e=>e.todos.every(t=>t.completed)},model:{VISIBILITY:(e,t)=>X(Y({},e),{visibility:t,todos:e.todos.map(r=>X(Y({},r),{hidden:!me[t](r)}))}),FROM_STORE:(e,t)=>X(Y({},e),{todos:t}),NEW_TODO:(e,t,r)=>{const o={id:Date.now(),title:t,completed:!1};return r("CLEAR_FORM"),X(Y({},e),{todos:[...e.todos,o]})},TOGGLE_ALL:e=>{const t=e.todos.every(n=>n.completed),r=e.todos.map(n=>X(Y({},n),{completed:!t}));return X(Y({},e),{todos:r})},CLEAR_COMPLETED:e=>{const t=e.todos.filter(r=>!r.completed);return X(Y({},e),{todos:t})},CLEAR_FORM:{DOMFX:{type:"SET_VALUE",data:{selector:".new-todo"}}},ADD_ROUTE:{ROUTER:!0},TO_STORE:{STORE:(e,t)=>{const r=e.todos.map(({id:n,title:o,completed:i})=>({id:n,title:o,completed:i}));return{key:"todos",value:r}}}},intent:({STATE:e,DOM:t,ROUTER:r,STORE:n})=>{const o=n.get("todos",[]),i=t.select(".toggle-all").events("click"),a=t.select(".clear-completed").events("click"),u=t.select(".new-todo-form"),p=Ra(u,{events:"submit"}).map(d=>d["new-todo"].trim()).filter(d=>d!==""),h=$.fromArray(Object.keys(me)),m=e.stream.drop(1);return{VISIBILITY:r,FROM_STORE:o,NEW_TODO:p,TOGGLE_ALL:i,CLEAR_COMPLETED:a,ADD_ROUTE:h,TO_STORE:m}},view:({state:e})=>{const{visibility:t,total:r,remaining:n,completed:o,allDone:i}=e,a=Object.keys(me),u=h=>h.charAt(0).toUpperCase()+h.slice(1),p=h=>R("li",null,R("a",{href:`#/${h}`,className:An({selected:t==h})},u(h)));return R("section",{className:"todoapp"},R("header",{className:"header"},R("h1",null,"todos"),R("form",{className:"new-todo-form"},R("input",{className:"new-todo",name:"new-todo",autofocus:!0,autocomplete:"off",placeholder:"What needs to be done?"}))),r>0&&R("section",{className:"main"},R("input",{id:"toggle-all",className:"toggle-all",type:"checkbox",checked:i}),R("label",{for:"toggle-all"},"Mark all as complete"),R("ul",{className:"todo-list"},R("collection",{of:Ku,for:"todos"}))),r>0&&R("footer",{className:"footer"},R("span",{className:"todo-count"},R("strong",null,n)," ",n===1?"item":"items"," left"),R("ul",{className:"filters"},a.map(p)),o>0&&R("button",{className:"clear-completed"},"Clear completed")))}});const Xu={DOMFX:xu,STORE:$u,ROUTER:Nu};du(Yu,Xu);
