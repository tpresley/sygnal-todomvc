var Vn=Object.defineProperty,Jn=Object.defineProperties;var Yn=Object.getOwnPropertyDescriptors;var Tt=Object.getOwnPropertySymbols;var Be=Object.prototype.hasOwnProperty,Ue=Object.prototype.propertyIsEnumerable;var Re=(r,t,e)=>t in r?Vn(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e,C=(r,t)=>{for(var e in t||(t={}))Be.call(t,e)&&Re(r,e,t[e]);if(Tt)for(var e of Tt(t))Ue.call(t,e)&&Re(r,e,t[e]);return r},T=(r,t)=>Jn(r,Yn(t));var lt=(r,t)=>{var e={};for(var n in r)Be.call(r,n)&&t.indexOf(n)<0&&(e[n]=r[n]);if(r!=null&&Tt)for(var n of Tt(r))t.indexOf(n)<0&&Ue.call(r,n)&&(e[n]=r[n]);return e};const Kn=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function e(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerpolicy&&(i.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?i.credentials="include":o.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(o){if(o.ep)return;o.ep=!0;const i=e(o);fetch(o.href,i)}};Kn();var J=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},H={},Cr={};(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=t;function t(e){var n,o=e.Symbol;if(typeof o=="function")if(o.observable)n=o.observable;else{n=o.for("https://github.com/benlesh/symbol-observable");try{o.observable=n}catch{}}else n="@@observable";return n}})(Cr);var Xn=Cr,We=Object.prototype.toString,Ir=function(t){var e=We.call(t),n=e==="[object Arguments]";return n||(n=e!=="[object Array]"&&t!==null&&typeof t=="object"&&typeof t.length=="number"&&t.length>=0&&We.call(t.callee)==="[object Function]"),n},Dr;if(!Object.keys){var kt=Object.prototype.hasOwnProperty,Ge=Object.prototype.toString,Zn=Ir,ze=Object.prototype.propertyIsEnumerable,Qn=!ze.call({toString:null},"toString"),to=ze.call(function(){},"prototype"),jt=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],te=function(r){var t=r.constructor;return t&&t.prototype===r},eo={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},ro=function(){if(typeof window=="undefined")return!1;for(var r in window)try{if(!eo["$"+r]&&kt.call(window,r)&&window[r]!==null&&typeof window[r]=="object")try{te(window[r])}catch{return!0}}catch{return!0}return!1}(),no=function(r){if(typeof window=="undefined"||!ro)return te(r);try{return te(r)}catch{return!1}};Dr=function(t){var e=t!==null&&typeof t=="object",n=Ge.call(t)==="[object Function]",o=Zn(t),i=e&&Ge.call(t)==="[object String]",a=[];if(!e&&!n&&!o)throw new TypeError("Object.keys called on a non-object");var c=to&&n;if(i&&t.length>0&&!kt.call(t,0))for(var f=0;f<t.length;++f)a.push(String(f));if(o&&t.length>0)for(var h=0;h<t.length;++h)a.push(String(h));else for(var m in t)!(c&&m==="prototype")&&kt.call(t,m)&&a.push(String(m));if(Qn)for(var g=no(t),_=0;_<jt.length;++_)!(g&&jt[_]==="constructor")&&kt.call(t,jt[_])&&a.push(jt[_]);return a}}var oo=Dr,io=Array.prototype.slice,so=Ir,qe=Object.keys,Lt=qe?function(t){return qe(t)}:oo,He=Object.keys;Lt.shim=function(){if(Object.keys){var t=function(){var e=Object.keys(arguments);return e&&e.length===arguments.length}(1,2);t||(Object.keys=function(n){return so(n)?He(io.call(n)):He(n)})}else Object.keys=Lt;return Object.keys||Lt};var ao=Lt,uo=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var t={},e=Symbol("test"),n=Object(e);if(typeof e=="string"||Object.prototype.toString.call(e)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var o=42;t[e]=o;for(e in t)return!1;if(typeof Object.keys=="function"&&Object.keys(t).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(t).length!==0)return!1;var i=Object.getOwnPropertySymbols(t);if(i.length!==1||i[0]!==e||!Object.prototype.propertyIsEnumerable.call(t,e))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var a=Object.getOwnPropertyDescriptor(t,e);if(a.value!==o||a.enumerable!==!0)return!1}return!0},Ve=typeof Symbol!="undefined"&&Symbol,co=uo,fo=function(){return typeof Ve!="function"||typeof Symbol!="function"||typeof Ve("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:co()},lo="Function.prototype.bind called on incompatible ",ee=Array.prototype.slice,po=Object.prototype.toString,ho="[object Function]",yo=function(t){var e=this;if(typeof e!="function"||po.call(e)!==ho)throw new TypeError(lo+e);for(var n=ee.call(arguments,1),o,i=function(){if(this instanceof o){var m=e.apply(this,n.concat(ee.call(arguments)));return Object(m)===m?m:this}else return e.apply(t,n.concat(ee.call(arguments)))},a=Math.max(0,e.length-n.length),c=[],f=0;f<a;f++)c.push("$"+f);if(o=Function("binder","return function ("+c.join(",")+"){ return binder.apply(this,arguments); }")(i),e.prototype){var h=function(){};h.prototype=e.prototype,o.prototype=new h,h.prototype=null}return o},mo=yo,Tr=Function.prototype.bind||mo,vo=Tr,go=vo.call(Function.call,Object.prototype.hasOwnProperty),D,bt=SyntaxError,kr=Function,vt=TypeError,re=function(r){try{return kr('"use strict"; return ('+r+").constructor;")()}catch{}},ut=Object.getOwnPropertyDescriptor;if(ut)try{ut({},"")}catch{ut=null}var ne=function(){throw new vt},_o=ut?function(){try{return arguments.callee,ne}catch{try{return ut(arguments,"callee").get}catch{return ne}}}():ne,pt=fo(),nt=Object.getPrototypeOf||function(r){return r.__proto__},yt={},bo=typeof Uint8Array=="undefined"?D:nt(Uint8Array),gt={"%AggregateError%":typeof AggregateError=="undefined"?D:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer=="undefined"?D:ArrayBuffer,"%ArrayIteratorPrototype%":pt?nt([][Symbol.iterator]()):D,"%AsyncFromSyncIteratorPrototype%":D,"%AsyncFunction%":yt,"%AsyncGenerator%":yt,"%AsyncGeneratorFunction%":yt,"%AsyncIteratorPrototype%":yt,"%Atomics%":typeof Atomics=="undefined"?D:Atomics,"%BigInt%":typeof BigInt=="undefined"?D:BigInt,"%Boolean%":Boolean,"%DataView%":typeof DataView=="undefined"?D:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array=="undefined"?D:Float32Array,"%Float64Array%":typeof Float64Array=="undefined"?D:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry=="undefined"?D:FinalizationRegistry,"%Function%":kr,"%GeneratorFunction%":yt,"%Int8Array%":typeof Int8Array=="undefined"?D:Int8Array,"%Int16Array%":typeof Int16Array=="undefined"?D:Int16Array,"%Int32Array%":typeof Int32Array=="undefined"?D:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":pt?nt(nt([][Symbol.iterator]())):D,"%JSON%":typeof JSON=="object"?JSON:D,"%Map%":typeof Map=="undefined"?D:Map,"%MapIteratorPrototype%":typeof Map=="undefined"||!pt?D:nt(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise=="undefined"?D:Promise,"%Proxy%":typeof Proxy=="undefined"?D:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect=="undefined"?D:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set=="undefined"?D:Set,"%SetIteratorPrototype%":typeof Set=="undefined"||!pt?D:nt(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer=="undefined"?D:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":pt?nt(""[Symbol.iterator]()):D,"%Symbol%":pt?Symbol:D,"%SyntaxError%":bt,"%ThrowTypeError%":_o,"%TypedArray%":bo,"%TypeError%":vt,"%Uint8Array%":typeof Uint8Array=="undefined"?D:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray=="undefined"?D:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array=="undefined"?D:Uint16Array,"%Uint32Array%":typeof Uint32Array=="undefined"?D:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap=="undefined"?D:WeakMap,"%WeakRef%":typeof WeakRef=="undefined"?D:WeakRef,"%WeakSet%":typeof WeakSet=="undefined"?D:WeakSet},wo=function r(t){var e;if(t==="%AsyncFunction%")e=re("async function () {}");else if(t==="%GeneratorFunction%")e=re("function* () {}");else if(t==="%AsyncGeneratorFunction%")e=re("async function* () {}");else if(t==="%AsyncGenerator%"){var n=r("%AsyncGeneratorFunction%");n&&(e=n.prototype)}else if(t==="%AsyncIteratorPrototype%"){var o=r("%AsyncGenerator%");o&&(e=nt(o.prototype))}return gt[t]=e,e},Je={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},It=Tr,zt=go,So=It.call(Function.call,Array.prototype.concat),Oo=It.call(Function.apply,Array.prototype.splice),Ye=It.call(Function.call,String.prototype.replace),qt=It.call(Function.call,String.prototype.slice),Ao=It.call(Function.call,RegExp.prototype.exec),$o=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Eo=/\\(\\)?/g,xo=function(t){var e=qt(t,0,1),n=qt(t,-1);if(e==="%"&&n!=="%")throw new bt("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&e!=="%")throw new bt("invalid intrinsic syntax, expected opening `%`");var o=[];return Ye(t,$o,function(i,a,c,f){o[o.length]=c?Ye(f,Eo,"$1"):a||i}),o},Po=function(t,e){var n=t,o;if(zt(Je,n)&&(o=Je[n],n="%"+o[0]+"%"),zt(gt,n)){var i=gt[n];if(i===yt&&(i=wo(n)),typeof i=="undefined"&&!e)throw new vt("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:o,name:n,value:i}}throw new bt("intrinsic "+t+" does not exist!")},No=function(t,e){if(typeof t!="string"||t.length===0)throw new vt("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof e!="boolean")throw new vt('"allowMissing" argument must be a boolean');if(Ao(/^%?[^%]*%?$/g,t)===null)throw new bt("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=xo(t),o=n.length>0?n[0]:"",i=Po("%"+o+"%",e),a=i.name,c=i.value,f=!1,h=i.alias;h&&(o=h[0],Oo(n,So([0,1],h)));for(var m=1,g=!0;m<n.length;m+=1){var _=n[m],u=qt(_,0,1),p=qt(_,-1);if((u==='"'||u==="'"||u==="`"||p==='"'||p==="'"||p==="`")&&u!==p)throw new bt("property names with quotes must have matching quotes");if((_==="constructor"||!g)&&(f=!0),o+="."+_,a="%"+o+"%",zt(gt,a))c=gt[a];else if(c!=null){if(!(_ in c)){if(!e)throw new vt("base intrinsic for "+t+" exists, but the property is not available.");return}if(ut&&m+1>=n.length){var l=ut(c,_);g=!!l,g&&"get"in l&&!("originalValue"in l.get)?c=l.get:c=c[_]}else g=zt(c,_),c=c[_];g&&!f&&(gt[a]=c)}}return c},Co=No,ge=Co("%Object.defineProperty%",!0),_e=function(){if(ge)try{return ge({},"a",{value:1}),!0}catch{return!1}return!1};_e.hasArrayLengthDefineBug=function(){if(!_e())return null;try{return ge([],"length",{value:1}).length!==1}catch{return!0}};var Io=_e,Do=ao,To=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",ko=Object.prototype.toString,jo=Array.prototype.concat,jr=Object.defineProperty,Fo=function(r){return typeof r=="function"&&ko.call(r)==="[object Function]"},Mo=Io(),Fr=jr&&Mo,Lo=function(r,t,e,n){t in r&&(!Fo(n)||!n())||(Fr?jr(r,t,{configurable:!0,enumerable:!1,value:e,writable:!0}):r[t]=e)},Mr=function(r,t){var e=arguments.length>2?arguments[2]:{},n=Do(t);To&&(n=jo.call(n,Object.getOwnPropertySymbols(t)));for(var o=0;o<n.length;o+=1)Lo(r,n[o],t[n[o]],e[n[o]])};Mr.supportsDescriptors=!!Fr;var Lr=Mr,Pt={exports:{}};typeof self!="undefined"?Pt.exports=self:typeof window!="undefined"?Pt.exports=window:Pt.exports=Function("return this")();var Ro=Pt.exports,Rr=function(){return typeof J!="object"||!J||J.Math!==Math||J.Array!==Array?Ro:J},Bo=Lr,Uo=Rr,Wo=function(){var t=Uo();if(Bo.supportsDescriptors){var e=Object.getOwnPropertyDescriptor(t,"globalThis");(!e||e.configurable&&(e.enumerable||!e.writable||globalThis!==t))&&Object.defineProperty(t,"globalThis",{configurable:!0,enumerable:!1,value:t,writable:!0})}else(typeof globalThis!="object"||globalThis!==t)&&(t.globalThis=t);return t},Go=Lr,zo=Pt.exports,Br=Rr,qo=Wo,Ho=Br(),Ur=function(){return Ho};Go(Ur,{getPolyfill:Br,implementation:zo,shim:qo});var Vo=Ur,Jo=J&&J.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)o.hasOwnProperty(i)&&(n[i]=o[i])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(H,"__esModule",{value:!0});H.NO_IL=Pe=H.NO=H.MemoryStream=X=H.Stream=void 0;var Yo=Xn,Ko=Vo,Ft=Yo.default(Ko.getPolyfill()),O={},Pe=H.NO=O;function U(){}function Rt(r){for(var t=r.length,e=Array(t),n=0;n<t;++n)e[n]=r[n];return e}function Xo(r,t){return function(n){return r(n)&&t(n)}}function Ne(r,t,e){try{return r.f(t)}catch(n){return e._e(n),O}}var st={_n:U,_e:U,_c:U};H.NO_IL=st;function Ke(r){r._start=function(e){e.next=e._n,e.error=e._e,e.complete=e._c,this.start(e)},r._stop=r.stop}var Zo=function(){function r(t,e){this._stream=t,this._listener=e}return r.prototype.unsubscribe=function(){this._stream._remove(this._listener)},r}(),Qo=function(){function r(t){this._listener=t}return r.prototype.next=function(t){this._listener._n(t)},r.prototype.error=function(t){this._listener._e(t)},r.prototype.complete=function(){this._listener._c()},r}(),ti=function(){function r(t){this.type="fromObservable",this.ins=t,this.active=!1}return r.prototype._start=function(t){this.out=t,this.active=!0,this._sub=this.ins.subscribe(new Qo(t)),this.active||this._sub.unsubscribe()},r.prototype._stop=function(){this._sub&&this._sub.unsubscribe(),this.active=!1},r}(),ei=function(){function r(t){this.type="merge",this.insArr=t,this.out=O,this.ac=0}return r.prototype._start=function(t){this.out=t;var e=this.insArr,n=e.length;this.ac=n;for(var o=0;o<n;o++)e[o]._add(this)},r.prototype._stop=function(){for(var t=this.insArr,e=t.length,n=0;n<e;n++)t[n]._remove(this);this.out=O},r.prototype._n=function(t){var e=this.out;e!==O&&e._n(t)},r.prototype._e=function(t){var e=this.out;e!==O&&e._e(t)},r.prototype._c=function(){if(--this.ac<=0){var t=this.out;if(t===O)return;t._c()}},r}(),ri=function(){function r(t,e,n){this.i=t,this.out=e,this.p=n,n.ils.push(this)}return r.prototype._n=function(t){var e=this.p,n=this.out;if(n!==O&&e.up(t,this.i)){var o=Rt(e.vals);n._n(o)}},r.prototype._e=function(t){var e=this.out;e!==O&&e._e(t)},r.prototype._c=function(){var t=this.p;t.out!==O&&--t.Nc===0&&t.out._c()},r}(),ni=function(){function r(t){this.type="combine",this.insArr=t,this.out=O,this.ils=[],this.Nc=this.Nn=0,this.vals=[]}return r.prototype.up=function(t,e){var n=this.vals[e],o=this.Nn?n===O?--this.Nn:this.Nn:0;return this.vals[e]=t,o===0},r.prototype._start=function(t){this.out=t;var e=this.insArr,n=this.Nc=this.Nn=e.length,o=this.vals=new Array(n);if(n===0)t._n([]),t._c();else for(var i=0;i<n;i++)o[i]=O,e[i]._add(new ri(i,t,this))},r.prototype._stop=function(){for(var t=this.insArr,e=t.length,n=this.ils,o=0;o<e;o++)t[o]._remove(n[o]);this.out=O,this.ils=[],this.vals=[]},r}(),oi=function(){function r(t){this.type="fromArray",this.a=t}return r.prototype._start=function(t){for(var e=this.a,n=0,o=e.length;n<o;n++)t._n(e[n]);t._c()},r.prototype._stop=function(){},r}(),ii=function(){function r(t){this.type="fromPromise",this.on=!1,this.p=t}return r.prototype._start=function(t){var e=this;this.on=!0,this.p.then(function(n){e.on&&(t._n(n),t._c())},function(n){t._e(n)}).then(U,function(n){setTimeout(function(){throw n})})},r.prototype._stop=function(){this.on=!1},r}(),si=function(){function r(t){this.type="periodic",this.period=t,this.intervalID=-1,this.i=0}return r.prototype._start=function(t){var e=this;function n(){t._n(e.i++)}this.intervalID=setInterval(n,this.period)},r.prototype._stop=function(){this.intervalID!==-1&&clearInterval(this.intervalID),this.intervalID=-1,this.i=0},r}(),ai=function(){function r(t,e){this.type="debug",this.ins=t,this.out=O,this.s=U,this.l="",typeof e=="string"?this.l=e:typeof e=="function"&&(this.s=e)}return r.prototype._start=function(t){this.out=t,this.ins._add(this)},r.prototype._stop=function(){this.ins._remove(this),this.out=O},r.prototype._n=function(t){var e=this.out;if(e!==O){var n=this.s,o=this.l;if(n!==U)try{n(t)}catch(i){e._e(i)}else o?console.log(o+":",t):console.log(t);e._n(t)}},r.prototype._e=function(t){var e=this.out;e!==O&&e._e(t)},r.prototype._c=function(){var t=this.out;t!==O&&t._c()},r}(),ui=function(){function r(t,e){this.type="drop",this.ins=e,this.out=O,this.max=t,this.dropped=0}return r.prototype._start=function(t){this.out=t,this.dropped=0,this.ins._add(this)},r.prototype._stop=function(){this.ins._remove(this),this.out=O},r.prototype._n=function(t){var e=this.out;e!==O&&this.dropped++>=this.max&&e._n(t)},r.prototype._e=function(t){var e=this.out;e!==O&&e._e(t)},r.prototype._c=function(){var t=this.out;t!==O&&t._c()},r}(),ci=function(){function r(t,e){this.out=t,this.op=e}return r.prototype._n=function(){this.op.end()},r.prototype._e=function(t){this.out._e(t)},r.prototype._c=function(){this.op.end()},r}(),fi=function(){function r(t,e){this.type="endWhen",this.ins=e,this.out=O,this.o=t,this.oil=st}return r.prototype._start=function(t){this.out=t,this.o._add(this.oil=new ci(t,this)),this.ins._add(this)},r.prototype._stop=function(){this.ins._remove(this),this.o._remove(this.oil),this.out=O,this.oil=st},r.prototype.end=function(){var t=this.out;t!==O&&t._c()},r.prototype._n=function(t){var e=this.out;e!==O&&e._n(t)},r.prototype._e=function(t){var e=this.out;e!==O&&e._e(t)},r.prototype._c=function(){this.end()},r}(),oe=function(){function r(t,e){this.type="filter",this.ins=e,this.out=O,this.f=t}return r.prototype._start=function(t){this.out=t,this.ins._add(this)},r.prototype._stop=function(){this.ins._remove(this),this.out=O},r.prototype._n=function(t){var e=this.out;if(e!==O){var n=Ne(this,t,e);n===O||!n||e._n(t)}},r.prototype._e=function(t){var e=this.out;e!==O&&e._e(t)},r.prototype._c=function(){var t=this.out;t!==O&&t._c()},r}(),li=function(){function r(t,e){this.out=t,this.op=e}return r.prototype._n=function(t){this.out._n(t)},r.prototype._e=function(t){this.out._e(t)},r.prototype._c=function(){this.op.inner=O,this.op.less()},r}(),pi=function(){function r(t){this.type="flatten",this.ins=t,this.out=O,this.open=!0,this.inner=O,this.il=st}return r.prototype._start=function(t){this.out=t,this.open=!0,this.inner=O,this.il=st,this.ins._add(this)},r.prototype._stop=function(){this.ins._remove(this),this.inner!==O&&this.inner._remove(this.il),this.out=O,this.open=!0,this.inner=O,this.il=st},r.prototype.less=function(){var t=this.out;t!==O&&!this.open&&this.inner===O&&t._c()},r.prototype._n=function(t){var e=this.out;if(e!==O){var n=this,o=n.inner,i=n.il;o!==O&&i!==st&&o._remove(i),(this.inner=t)._add(this.il=new li(e,this))}},r.prototype._e=function(t){var e=this.out;e!==O&&e._e(t)},r.prototype._c=function(){this.open=!1,this.less()},r}(),hi=function(){function r(t,e,n){var o=this;this.type="fold",this.ins=n,this.out=O,this.f=function(i){return t(o.acc,i)},this.acc=this.seed=e}return r.prototype._start=function(t){this.out=t,this.acc=this.seed,t._n(this.acc),this.ins._add(this)},r.prototype._stop=function(){this.ins._remove(this),this.out=O,this.acc=this.seed},r.prototype._n=function(t){var e=this.out;if(e!==O){var n=Ne(this,t,e);n!==O&&e._n(this.acc=n)}},r.prototype._e=function(t){var e=this.out;e!==O&&e._e(t)},r.prototype._c=function(){var t=this.out;t!==O&&t._c()},r}(),di=function(){function r(t){this.type="last",this.ins=t,this.out=O,this.has=!1,this.val=O}return r.prototype._start=function(t){this.out=t,this.has=!1,this.ins._add(this)},r.prototype._stop=function(){this.ins._remove(this),this.out=O,this.val=O},r.prototype._n=function(t){this.has=!0,this.val=t},r.prototype._e=function(t){var e=this.out;e!==O&&e._e(t)},r.prototype._c=function(){var t=this.out;t!==O&&(this.has?(t._n(this.val),t._c()):t._e(new Error("last() failed because input stream completed")))},r}(),yi=function(){function r(t,e){this.type="map",this.ins=e,this.out=O,this.f=t}return r.prototype._start=function(t){this.out=t,this.ins._add(this)},r.prototype._stop=function(){this.ins._remove(this),this.out=O},r.prototype._n=function(t){var e=this.out;if(e!==O){var n=Ne(this,t,e);n!==O&&e._n(n)}},r.prototype._e=function(t){var e=this.out;e!==O&&e._e(t)},r.prototype._c=function(){var t=this.out;t!==O&&t._c()},r}(),mi=function(){function r(t){this.type="remember",this.ins=t,this.out=O}return r.prototype._start=function(t){this.out=t,this.ins._add(t)},r.prototype._stop=function(){this.ins._remove(this.out),this.out=O},r}(),vi=function(){function r(t,e){this.type="replaceError",this.ins=e,this.out=O,this.f=t}return r.prototype._start=function(t){this.out=t,this.ins._add(this)},r.prototype._stop=function(){this.ins._remove(this),this.out=O},r.prototype._n=function(t){var e=this.out;e!==O&&e._n(t)},r.prototype._e=function(t){var e=this.out;if(e!==O)try{this.ins._remove(this),(this.ins=this.f(t))._add(this)}catch(n){e._e(n)}},r.prototype._c=function(){var t=this.out;t!==O&&t._c()},r}(),gi=function(){function r(t,e){this.type="startWith",this.ins=t,this.out=O,this.val=e}return r.prototype._start=function(t){this.out=t,this.out._n(this.val),this.ins._add(t)},r.prototype._stop=function(){this.ins._remove(this.out),this.out=O},r}(),_i=function(){function r(t,e){this.type="take",this.ins=e,this.out=O,this.max=t,this.taken=0}return r.prototype._start=function(t){this.out=t,this.taken=0,this.max<=0?t._c():this.ins._add(this)},r.prototype._stop=function(){this.ins._remove(this),this.out=O},r.prototype._n=function(t){var e=this.out;if(e!==O){var n=++this.taken;n<this.max?e._n(t):n===this.max&&(e._n(t),e._c())}},r.prototype._e=function(t){var e=this.out;e!==O&&e._e(t)},r.prototype._c=function(){var t=this.out;t!==O&&t._c()},r}(),Ce=function(){function r(t){this._prod=t||O,this._ils=[],this._stopID=O,this._dl=O,this._d=!1,this._target=null,this._err=O}return r.prototype._n=function(t){var e=this._ils,n=e.length;if(this._d&&this._dl._n(t),n==1)e[0]._n(t);else{if(n==0)return;for(var o=Rt(e),i=0;i<n;i++)o[i]._n(t)}},r.prototype._e=function(t){if(this._err===O){this._err=t;var e=this._ils,n=e.length;if(this._x(),this._d&&this._dl._e(t),n==1)e[0]._e(t);else{if(n==0)return;for(var o=Rt(e),i=0;i<n;i++)o[i]._e(t)}if(!this._d&&n==0)throw this._err}},r.prototype._c=function(){var t=this._ils,e=t.length;if(this._x(),this._d&&this._dl._c(),e==1)t[0]._c();else{if(e==0)return;for(var n=Rt(t),o=0;o<e;o++)n[o]._c()}},r.prototype._x=function(){this._ils.length!==0&&(this._prod!==O&&this._prod._stop(),this._err=O,this._ils=[])},r.prototype._stopNow=function(){this._prod._stop(),this._err=O,this._stopID=O},r.prototype._add=function(t){var e=this._target;if(e)return e._add(t);var n=this._ils;if(n.push(t),!(n.length>1))if(this._stopID!==O)clearTimeout(this._stopID),this._stopID=O;else{var o=this._prod;o!==O&&o._start(this)}},r.prototype._remove=function(t){var e=this,n=this._target;if(n)return n._remove(t);var o=this._ils,i=o.indexOf(t);i>-1&&(o.splice(i,1),this._prod!==O&&o.length<=0?(this._err=O,this._stopID=setTimeout(function(){return e._stopNow()})):o.length===1&&this._pruneCycles())},r.prototype._pruneCycles=function(){this._hasNoSinks(this,[])&&this._remove(this._ils[0])},r.prototype._hasNoSinks=function(t,e){if(e.indexOf(t)!==-1)return!0;if(t.out===this)return!0;if(t.out&&t.out!==O)return this._hasNoSinks(t.out,e.concat(t));if(t._ils){for(var n=0,o=t._ils.length;n<o;n++)if(!this._hasNoSinks(t._ils[n],e.concat(t)))return!1;return!0}else return!1},r.prototype.ctor=function(){return this instanceof Z?Z:r},r.prototype.addListener=function(t){t._n=t.next||U,t._e=t.error||U,t._c=t.complete||U,this._add(t)},r.prototype.removeListener=function(t){this._remove(t)},r.prototype.subscribe=function(t){return this.addListener(t),new Zo(this,t)},r.prototype[Ft]=function(){return this},r.create=function(t){if(t){if(typeof t.start!="function"||typeof t.stop!="function")throw new Error("producer requires both start and stop functions");Ke(t)}return new r(t)},r.createWithMemory=function(t){return t&&Ke(t),new Z(t)},r.never=function(){return new r({_start:U,_stop:U})},r.empty=function(){return new r({_start:function(t){t._c()},_stop:U})},r.throw=function(t){return new r({_start:function(e){e._e(t)},_stop:U})},r.from=function(t){if(typeof t[Ft]=="function")return r.fromObservable(t);if(typeof t.then=="function")return r.fromPromise(t);if(Array.isArray(t))return r.fromArray(t);throw new TypeError("Type of input to from() must be an Array, Promise, or Observable")},r.of=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return r.fromArray(t)},r.fromArray=function(t){return new r(new oi(t))},r.fromPromise=function(t){return new r(new ii(t))},r.fromObservable=function(t){if(t.endWhen!==void 0)return t;var e=typeof t[Ft]=="function"?t[Ft]():t;return new r(new ti(e))},r.periodic=function(t){return new r(new si(t))},r.prototype._map=function(t){return new(this.ctor())(new yi(t,this))},r.prototype.map=function(t){return this._map(t)},r.prototype.mapTo=function(t){var e=this.map(function(){return t}),n=e._prod;return n.type="mapTo",e},r.prototype.filter=function(t){var e=this._prod;return e instanceof oe?new r(new oe(Xo(e.f,t),e.ins)):new r(new oe(t,this))},r.prototype.take=function(t){return new(this.ctor())(new _i(t,this))},r.prototype.drop=function(t){return new r(new ui(t,this))},r.prototype.last=function(){return new r(new di(this))},r.prototype.startWith=function(t){return new Z(new gi(this,t))},r.prototype.endWhen=function(t){return new(this.ctor())(new fi(t,this))},r.prototype.fold=function(t,e){return new Z(new hi(t,e,this))},r.prototype.replaceError=function(t){return new(this.ctor())(new vi(t,this))},r.prototype.flatten=function(){return new r(new pi(this))},r.prototype.compose=function(t){return t(this)},r.prototype.remember=function(){return new Z(new mi(this))},r.prototype.debug=function(t){return new(this.ctor())(new ai(this,t))},r.prototype.imitate=function(t){if(t instanceof Z)throw new Error("A MemoryStream was given to imitate(), but it only supports a Stream. Read more about this restriction here: https://github.com/staltz/xstream#faq");this._target=t;for(var e=this._ils,n=e.length,o=0;o<n;o++)t._add(e[o]);this._ils=[]},r.prototype.shamefullySendNext=function(t){this._n(t)},r.prototype.shamefullySendError=function(t){this._e(t)},r.prototype.shamefullySendComplete=function(){this._c()},r.prototype.setDebugListener=function(t){t?(this._d=!0,t._n=t.next||U,t._e=t.error||U,t._c=t.complete||U,this._dl=t):(this._d=!1,this._dl=O)},r.merge=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return new r(new ei(e))},r.combine=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return new r(new ni(e))},r}(),X=H.Stream=Ce,Z=function(r){Jo(t,r);function t(e){var n=r.call(this,e)||this;return n._has=!1,n}return t.prototype._n=function(e){this._v=e,this._has=!0,r.prototype._n.call(this,e)},t.prototype._add=function(e){var n=this._target;if(n)return n._add(e);var o=this._ils;if(o.push(e),o.length>1){this._has&&e._n(this._v);return}if(this._stopID!==O)this._has&&e._n(this._v),clearTimeout(this._stopID),this._stopID=O;else if(this._has)e._n(this._v);else{var i=this._prod;i!==O&&i._start(this)}},t.prototype._stopNow=function(){this._has=!1,r.prototype._stopNow.call(this)},t.prototype._x=function(){this._has=!1,r.prototype._x.call(this)},t.prototype.map=function(e){return this._map(e)},t.prototype.mapTo=function(e){return r.prototype.mapTo.call(this,e)},t.prototype.take=function(e){return r.prototype.take.call(this,e)},t.prototype.endWhen=function(e){return r.prototype.endWhen.call(this,e)},t.prototype.replaceError=function(e){return r.prototype.replaceError.call(this,e)},t.prototype.remember=function(){return this},t.prototype.debug=function(e){return r.prototype.debug.call(this,e)},t}(Ce);H.MemoryStream=Z;var bi=Ce,E=H.default=bi,Ie={};Object.defineProperty(Ie,"__esModule",{value:!0});function Wr(){var r;return typeof window!="undefined"?r=window:typeof J!="undefined"?r=J:r=this,r.Cyclejs=r.Cyclejs||{},r=r.Cyclejs,r.adaptStream=r.adaptStream||function(t){return t},r}function wi(r){Wr().adaptStream=r}Ie.setAdapt=wi;function Si(r){return Wr().adaptStream(r)}var q=Ie.adapt=Si;function Oi(r,t){if(typeof r!="function")throw new Error("First argument given to isolate() must be a 'dataflowComponent' function");if(t===null)throw new Error("Second argument given to isolate() must not be null")}function Ai(r,t,e){var n={};return Object.keys(r).forEach(function(o){if(typeof t=="string"){n[o]=t;return}var i=t[o];if(typeof i!="undefined"){n[o]=i;return}var a=t["*"];if(typeof a!="undefined"){n[o]=a;return}n[o]=e}),n}function $i(r,t){var e={};for(var n in r){var o=r[n];r.hasOwnProperty(n)&&o&&t[n]!==null&&typeof o.isolateSource=="function"?e[n]=o.isolateSource(o,t[n]):r.hasOwnProperty(n)&&(e[n]=r[n])}return e}function Ei(r,t,e){var n={};for(var o in t){var i=r[o],a=t[o];t.hasOwnProperty(o)&&i&&e[o]!==null&&typeof i.isolateSink=="function"?n[o]=q(i.isolateSink(E.fromObservable(a),e[o])):t.hasOwnProperty(o)&&(n[o]=t[o])}return n}var Gr=0;function Xe(){return"cycle"+ ++Gr}function ot(r,t){t===void 0&&(t=Xe()),Oi(r,t);var e=typeof t=="object"?Xe():"",n=typeof t=="string"||typeof t=="object"?t:t.toString();return function(i){for(var a=[],c=1;c<arguments.length;c++)a[c-1]=arguments[c];var f=Ai(i,n,e),h=$i(i,f),m=r.apply(void 0,[h].concat(a)),g=Ei(i,m,f);return g}}ot.reset=function(){return Gr=0};var Xt={};Object.defineProperty(Xt,"__esModule",{value:!0});Xt.DropRepeatsOperator=void 0;var xi=H,ie={},zr=function(){function r(t,e){this.ins=t,this.type="dropRepeats",this.out=null,this.v=ie,this.isEq=e||function(n,o){return n===o}}return r.prototype._start=function(t){this.out=t,this.ins._add(this)},r.prototype._stop=function(){this.ins._remove(this),this.out=null,this.v=ie},r.prototype._n=function(t){var e=this.out;if(!!e){var n=this.v;n!==ie&&this.isEq(t,n)||(this.v=t,e._n(t))}},r.prototype._e=function(t){var e=this.out;!e||e._e(t)},r.prototype._c=function(){var t=this.out;!t||t._c()},r}();Xt.DropRepeatsOperator=zr;function Pi(r){return r===void 0&&(r=void 0),function(e){return new xi.Stream(new zr(e,r))}}var Ni=Xt.default=Pi,be=globalThis&&globalThis.__assign||function(){return be=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(r[o]=t[o])}return r},be.apply(this,arguments)};function Ci(r,t,e){if(e===r[t])return r;var n=parseInt(t);return typeof e=="undefined"?r.filter(function(o,i){return i!==n}):r.map(function(o,i){return i===n?e:o})}function qr(r){return typeof r=="string"||typeof r=="number"?function(e){if(typeof e!="undefined")return e[r]}:r.get}function Ii(r){return typeof r=="string"||typeof r=="number"?function(e,n){var o,i;return Array.isArray(e)?Ci(e,r,n):typeof e=="undefined"?(o={},o[r]=n,o):be({},e,(i={},i[r]=n,i))}:r.set}function Di(r,t){return r.select(t)}function Ti(r,t){var e=qr(t),n=Ii(t);return r.map(function(o){return function(a){var c=e(a),f=o(c);return c===f?a:n(a,f)}})}var $t=function(){function r(t,e){this.isolateSource=Di,this.isolateSink=Ti,this._stream=t.filter(function(n){return typeof n!="undefined"}).compose(Ni()).remember(),this._name=e,this.stream=q(this._stream),this._stream._isCycleSource=e}return r.prototype.select=function(t){var e=qr(t);return new r(this._stream.map(e),this._name)},r}(),ki=function(){function r(t,e,n){this.ins=n,this.out=t,this.p=e}return r.prototype._n=function(t){this.p;var e=this.out;e!==null&&e._n(t)},r.prototype._e=function(t){var e=this.out;e!==null&&e._e(t)},r.prototype._c=function(){},r}(),ji=function(){function r(t,e){this.type="pickMerge",this.ins=e,this.out=null,this.sel=t,this.ils=new Map,this.inst=null}return r.prototype._start=function(t){this.out=t,this.ins._add(this)},r.prototype._stop=function(){this.ins._remove(this);var t=this.ils;t.forEach(function(e,n){e.ins._remove(e),e.ins=null,e.out=null,t.delete(n)}),t.clear(),this.out=null,this.ils=new Map,this.inst=null},r.prototype._n=function(t){this.inst=t;for(var e=t.arr,n=this.ils,o=this.out,i=this.sel,a=e.length,c=0;c<a;++c){var f=e[c],h=f._key,m=E.fromObservable(f[i]||E.never());n.has(h)||(n.set(h,new ki(o,this,m)),m._add(n.get(h)))}n.forEach(function(g,_){(!t.dict.has(_)||!t.dict.get(_))&&(g.ins._remove(g),g.ins=null,g.out=null,n.delete(_))})},r.prototype._e=function(t){var e=this.out;e!==null&&e._e(t)},r.prototype._c=function(){var t=this.out;t!==null&&t._c()},r}();function Fi(r){return function(e){return new X(new ji(r,e))}}var Mi=function(){function r(t,e,n,o){this.key=t,this.out=e,this.p=n,this.val=Pe,this.ins=o}return r.prototype._n=function(t){this.p;var e=this.out;this.val=t,e!==null&&this.p.up()},r.prototype._e=function(t){var e=this.out;e!==null&&e._e(t)},r.prototype._c=function(){},r}(),Li=function(){function r(t,e){this.type="combine",this.ins=e,this.sel=t,this.out=null,this.ils=new Map,this.inst=null}return r.prototype._start=function(t){this.out=t,this.ins._add(this)},r.prototype._stop=function(){this.ins._remove(this);var t=this.ils;t.forEach(function(e){e.ins._remove(e),e.ins=null,e.out=null,e.val=null}),t.clear(),this.out=null,this.ils=new Map,this.inst=null},r.prototype.up=function(){for(var t=this.inst.arr,e=t.length,n=this.ils,o=Array(e),i=0;i<e;++i){var a=t[i],c=a._key;if(!n.has(c))return;var f=n.get(c).val;if(f===Pe)return;o[i]=f}this.out._n(o)},r.prototype._n=function(t){this.inst=t;var e=t.arr,n=this.ils,o=this.out,i=this.sel,a=t.dict,c=e.length,f=!1;if(n.forEach(function(u,p){a.has(p)||(u.ins._remove(u),u.ins=null,u.out=null,u.val=null,n.delete(p),f=!0)}),c===0){o._n([]);return}for(var h=0;h<c;++h){var m=e[h],g=m._key;if(!m[i])throw new Error("pickCombine found an undefined child sink stream");var _=E.fromObservable(m[i]);n.has(g)||(n.set(g,new Mi(g,o,this,_)),_._add(n.get(g)))}f&&this.up()},r.prototype._e=function(t){var e=this.out;e!==null&&e._e(t)},r.prototype._c=function(){var t=this.out;t!==null&&t._c()},r}();function Ri(r){return function(e){return new X(new Li(r,e))}}var Ht=globalThis&&globalThis.__assign||function(){return Ht=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(r[o]=t[o])}return r},Ht.apply(this,arguments)},Bi=function(){function r(t){this._instances$=t}return r.prototype.pickMerge=function(t){return q(this._instances$.compose(Fi(t)))},r.prototype.pickCombine=function(t){return q(this._instances$.compose(Ri(t)))},r}();function Ui(r){return{"*":null}}function Wi(r,t){return{get:function(e){if(typeof e!="undefined"){for(var n=0,o=e.length;n<o;++n)if(""+r(e[n],n)===t)return e[n];return}},set:function(e,n){return typeof e=="undefined"?[n]:typeof n=="undefined"?e.filter(function(o,i){return""+r(o,i)!==t}):e.map(function(o,i){return""+r(o,i)===t?n:o})}}}var Gi={get:function(r){return r},set:function(r,t){return t}};function zi(r){return function(e){var n=r.channel||"state",o=r.itemKey,i=r.itemScope||Ui,a=E.fromObservable(e[n].stream),c=a.fold(function(f,h){var m,g,_,u,p=f.dict;if(Array.isArray(h)){for(var l=Array(h.length),d=new Set,y=0,v=h.length;y<v;++y){var b=""+(o?o(h[y],y):y);if(d.add(b),p.has(b))l[y]=p.get(b);else{var S=o?Wi(o,b):""+y,w=i(b),$=typeof w=="string"?(m={"*":w},m[n]=S,m):Ht({},w,(g={},g[n]=S,g)),P=r.itemFactory?r.itemFactory(h[y],y):r.item,x=ot(P,$)(e);p.set(b,x),l[y]=x}l[y]._key=b}return p.forEach(function(N,M){d.has(M)||p.delete(M)}),d.clear(),{dict:p,arr:l}}else{p.clear();var b=""+(o?o(h,0):"this"),S=Gi,w=i(b),$=typeof w=="string"?(_={"*":w},_[n]=S,_):Ht({},w,(u={},u[n]=S,u)),P=r.itemFactory?r.itemFactory(h,0):r.item,x=ot(P,$)(e);return p.set(b,x),{dict:p,arr:[x]}}},{dict:new Map,arr:[]});return r.collectSinks(new Bi(c))}}var Hr={};Object.defineProperty(Hr,"__esModule",{value:!0});var qi=H,Hi=function(){function r(t){this.streams=t,this.type="concat",this.out=null,this.i=0}return r.prototype._start=function(t){this.out=t,this.streams[this.i]._add(this)},r.prototype._stop=function(){var t=this.streams;this.i<t.length&&t[this.i]._remove(this),this.i=0,this.out=null},r.prototype._n=function(t){var e=this.out;!e||e._n(t)},r.prototype._e=function(t){var e=this.out;!e||e._e(t)},r.prototype._c=function(){var t=this.out;if(!!t){var e=this.streams;e[this.i]._remove(this),++this.i<e.length?e[this.i]._add(this):t._c()}},r}();function Vi(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];return new qi.Stream(new Hi(r))}var Vr=Hr.default=Vi,Jr={};Object.defineProperty(Jr,"__esModule",{value:!0});function Ji(){return typeof queueMicrotask!="undefined"?queueMicrotask:typeof setImmediate!="undefined"?setImmediate:typeof process!="undefined"?process.nextTick:setTimeout}var Yr=Jr.default=Ji,se=Yr();function Yi(r,t){return t===void 0&&(t="state"),function(n){var o=E.create(),i=o.fold(function(h,m){return m(h)},void 0).drop(1),a=n;a[t]=new $t(i,t);var c=r(a);if(c[t]){var f=Vr(E.fromObservable(c[t]),E.never());f.subscribe({next:function(h){return se(function(){return o._n(h)})},error:function(h){return se(function(){return o._e(h)})},complete:function(){return se(function(){return o._c()})}})}return c}}function Ki(){var r;return typeof window!="undefined"?r=window:typeof global!="undefined"?r=global:r=this,r.Cyclejs=r.Cyclejs||{},r=r.Cyclejs,r.adaptStream=r.adaptStream||function(t){return t},r}function Xi(r){return Ki().adaptStream(r)}function Zi(r){var t={};for(var e in r)r.hasOwnProperty(e)&&(t[e]=E.create());return t}function Qi(r,t){var e={};for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n](t[n],n),e[n]&&typeof e[n]=="object"&&(e[n]._isCycleSource=n));return e}function ts(r){for(var t in r)r.hasOwnProperty(t)&&r[t]&&typeof r[t].shamefullySendNext=="function"&&(r[t]=Xi(r[t]));return r}function es(r,t){var e=Yr(),n=Object.keys(r).filter(function(c){return!!t[c]}),o={},i={};n.forEach(function(c){o[c]={_n:[],_e:[]},i[c]={next:function(f){return o[c]._n.push(f)},error:function(f){return o[c]._e.push(f)},complete:function(){}}});var a=n.map(function(c){return E.fromObservable(r[c]).subscribe(i[c])});return n.forEach(function(c){var f=t[c],h=function(g){e(function(){return f._n(g)})},m=function(g){e(function(){(console.error||console.log)(g),f._e(g)})};o[c]._n.forEach(h),o[c]._e.forEach(m),i[c].next=h,i[c].error=m,i[c]._n=h,i[c]._e=m}),o=null,function(){a.forEach(function(f){return f.unsubscribe()})}}function rs(r){Object.keys(r).forEach(function(t){return r[t]._c()})}function ns(r){for(var t in r)r.hasOwnProperty(t)&&r[t]&&r[t].dispose&&r[t].dispose()}function Kr(r){return Object.keys(r).length===0}function os(r,t){if(typeof r!="function")throw new Error("First argument given to Cycle must be the 'main' function.");if(typeof t!="object"||t===null)throw new Error("Second argument given to Cycle must be an object with driver functions as properties.");if(Kr(t))throw new Error("Second argument given to Cycle must be an object with at least one driver function declared as a property.");var e=is(t),n=r(e.sources);typeof window!="undefined"&&(window.Cyclejs=window.Cyclejs||{},window.Cyclejs.sinks=n);function o(){var i=e.run(n);return function(){i(),e.dispose()}}return{sinks:n,sources:e.sources,run:o}}function is(r){if(typeof r!="object"||r===null)throw new Error("Argument given to setupReusable must be an object with driver functions as properties.");if(Kr(r))throw new Error("Argument given to setupReusable must be an object with at least one driver function declared as a property.");var t=Zi(r),e=Qi(r,t),n=ts(e);function o(a){return es(a,t)}function i(){ns(n),rs(t)}return{sources:n,run:o,dispose:i}}function ss(r,t){var e=os(r,t);return typeof window!="undefined"&&window.CyclejsDevTool_startGraphSerializer&&window.CyclejsDevTool_startGraphSerializer(e.sinks),e.run()}function as(r,t){return document.createElement(r,t)}function us(r,t,e){return document.createElementNS(r,t,e)}function cs(){return document.createDocumentFragment()}function fs(r){return document.createTextNode(r)}function ls(r){return document.createComment(r)}function ps(r,t,e){r.insertBefore(t,e)}function hs(r,t){r.removeChild(t)}function ds(r,t){r.appendChild(t)}function ys(r){return r.parentNode}function ms(r){return r.nextSibling}function vs(r){return r.tagName}function gs(r,t){r.textContent=t}function _s(r){return r.textContent}function bs(r){return r.nodeType===1}function ws(r){return r.nodeType===3}function Ss(r){return r.nodeType===8}function Os(r){return r.nodeType===11}const Xr={createElement:as,createElementNS:us,createTextNode:fs,createDocumentFragment:cs,createComment:ls,insertBefore:ps,removeChild:hs,appendChild:ds,parentNode:ys,nextSibling:ms,tagName:vs,setTextContent:gs,getTextContent:_s,isElement:bs,isText:ws,isComment:Ss,isDocumentFragment:Os};function K(r,t,e,n,o){const i=t===void 0?void 0:t.key;return{sel:r,data:t,children:e,text:n,elm:o,key:i}}const we=Array.isArray;function Bt(r){return typeof r=="string"||typeof r=="number"||r instanceof String||r instanceof Number}function ae(r){return r===void 0}function z(r){return r!==void 0}const ue=K("",{},[],void 0,void 0);function At(r,t){var e,n;const o=r.key===t.key,i=((e=r.data)===null||e===void 0?void 0:e.is)===((n=t.data)===null||n===void 0?void 0:n.is);return r.sel===t.sel&&o&&i}function As(){throw new Error("The document fragment is not supported on this platform.")}function $s(r,t){return r.isElement(t)}function Es(r,t){return r.isDocumentFragment(t)}function xs(r,t,e){var n;const o={};for(let i=t;i<=e;++i){const a=(n=r[i])===null||n===void 0?void 0:n.key;a!==void 0&&(o[a]=i)}return o}const Ps=["create","update","remove","destroy","pre","post"];function Ns(r,t,e){const n={create:[],update:[],remove:[],destroy:[],pre:[],post:[]},o=t!==void 0?t:Xr;for(const p of Ps)for(const l of r){const d=l[p];d!==void 0&&n[p].push(d)}function i(p){const l=p.id?"#"+p.id:"",d=p.getAttribute("class"),y=d?"."+d.split(" ").join("."):"";return K(o.tagName(p).toLowerCase()+l+y,{},[],void 0,p)}function a(p){return K(void 0,{},[],void 0,p)}function c(p,l){return function(){if(--l===0){const y=o.parentNode(p);o.removeChild(y,p)}}}function f(p,l){var d,y,v,b;let S,w=p.data;if(w!==void 0){const x=(d=w.hook)===null||d===void 0?void 0:d.init;z(x)&&(x(p),w=p.data)}const $=p.children,P=p.sel;if(P==="!")ae(p.text)&&(p.text=""),p.elm=o.createComment(p.text);else if(P!==void 0){const x=P.indexOf("#"),N=P.indexOf(".",x),M=x>0?x:P.length,F=N>0?N:P.length,j=x!==-1||N!==-1?P.slice(0,Math.min(M,F)):P,k=p.elm=z(w)&&z(S=w.ns)?o.createElementNS(S,j,w):o.createElement(j,w);for(M<F&&k.setAttribute("id",P.slice(M+1,F)),N>0&&k.setAttribute("class",P.slice(F+1).replace(/\./g," ")),S=0;S<n.create.length;++S)n.create[S](ue,p);if(we($))for(S=0;S<$.length;++S){const Y=$[S];Y!=null&&o.appendChild(k,f(Y,l))}else Bt(p.text)&&o.appendChild(k,o.createTextNode(p.text));const R=p.data.hook;z(R)&&((y=R.create)===null||y===void 0||y.call(R,ue,p),R.insert&&l.push(p))}else if(((v=e==null?void 0:e.experimental)===null||v===void 0?void 0:v.fragments)&&p.children){const x=p.children;for(p.elm=((b=o.createDocumentFragment)!==null&&b!==void 0?b:As)(),S=0;S<n.create.length;++S)n.create[S](ue,p);for(S=0;S<x.length;++S){const N=x[S];N!=null&&o.appendChild(p.elm,f(N,l))}}else p.elm=o.createTextNode(p.text);return p.elm}function h(p,l,d,y,v,b){for(;y<=v;++y){const S=d[y];S!=null&&o.insertBefore(p,f(S,b),l)}}function m(p){var l,d;const y=p.data;if(y!==void 0){(d=(l=y==null?void 0:y.hook)===null||l===void 0?void 0:l.destroy)===null||d===void 0||d.call(l,p);for(let v=0;v<n.destroy.length;++v)n.destroy[v](p);if(p.children!==void 0)for(let v=0;v<p.children.length;++v){const b=p.children[v];b!=null&&typeof b!="string"&&m(b)}}}function g(p,l,d,y){for(var v,b;d<=y;++d){let S,w;const $=l[d];if($!=null)if(z($.sel)){m($),S=n.remove.length+1,w=c($.elm,S);for(let x=0;x<n.remove.length;++x)n.remove[x]($,w);const P=(b=(v=$==null?void 0:$.data)===null||v===void 0?void 0:v.hook)===null||b===void 0?void 0:b.remove;z(P)?P($,w):w()}else o.removeChild(p,$.elm)}}function _(p,l,d,y){let v=0,b=0,S=l.length-1,w=l[0],$=l[S],P=d.length-1,x=d[0],N=d[P],M,F,j,k;for(;v<=S&&b<=P;)w==null?w=l[++v]:$==null?$=l[--S]:x==null?x=d[++b]:N==null?N=d[--P]:At(w,x)?(u(w,x,y),w=l[++v],x=d[++b]):At($,N)?(u($,N,y),$=l[--S],N=d[--P]):At(w,N)?(u(w,N,y),o.insertBefore(p,w.elm,o.nextSibling($.elm)),w=l[++v],N=d[--P]):At($,x)?(u($,x,y),o.insertBefore(p,$.elm,w.elm),$=l[--S],x=d[++b]):(M===void 0&&(M=xs(l,v,S)),F=M[x.key],ae(F)?o.insertBefore(p,f(x,y),w.elm):(j=l[F],j.sel!==x.sel?o.insertBefore(p,f(x,y),w.elm):(u(j,x,y),l[F]=void 0,o.insertBefore(p,j.elm,w.elm))),x=d[++b]);b<=P&&(k=d[P+1]==null?null:d[P+1].elm,h(p,k,d,b,P,y)),v<=S&&g(p,l,v,S)}function u(p,l,d){var y,v,b,S,w,$,P,x;const N=(y=l.data)===null||y===void 0?void 0:y.hook;(v=N==null?void 0:N.prepatch)===null||v===void 0||v.call(N,p,l);const M=l.elm=p.elm,F=p.children,j=l.children;if(p!==l){if(l.data!==void 0||z(l.text)&&l.text!==p.text){(b=l.data)!==null&&b!==void 0||(l.data={}),(S=p.data)!==null&&S!==void 0||(p.data={});for(let k=0;k<n.update.length;++k)n.update[k](p,l);(P=($=(w=l.data)===null||w===void 0?void 0:w.hook)===null||$===void 0?void 0:$.update)===null||P===void 0||P.call($,p,l)}ae(l.text)?z(F)&&z(j)?F!==j&&_(M,F,j,d):z(j)?(z(p.text)&&o.setTextContent(M,""),h(M,null,j,0,j.length-1,d)):z(F)?g(M,F,0,F.length-1):z(p.text)&&o.setTextContent(M,""):p.text!==l.text&&(z(F)&&g(M,F,0,F.length-1),o.setTextContent(M,l.text)),(x=N==null?void 0:N.postpatch)===null||x===void 0||x.call(N,p,l)}}return function(l,d){let y,v,b;const S=[];for(y=0;y<n.pre.length;++y)n.pre[y]();for($s(o,l)?l=i(l):Es(o,l)&&(l=a(l)),At(l,d)?u(l,d,S):(v=l.elm,b=o.parentNode(v),f(d,S),b!==null&&(o.insertBefore(b,d.elm,o.nextSibling(v)),g(b,[l],0,0))),y=0;y<S.length;++y)S[y].data.hook.insert(S[y]);for(y=0;y<n.post.length;++y)n.post[y]();return d}}function De(r,t,e){if(r.ns="http://www.w3.org/2000/svg",e!=="foreignObject"&&t!==void 0)for(let n=0;n<t.length;++n){const o=t[n];if(typeof o=="string")continue;const i=o.data;i!==void 0&&De(i,o.children,o.sel)}}function Q(r,t,e){let n={},o,i,a;if(e!==void 0?(t!==null&&(n=t),we(e)?o=e:Bt(e)?i=e.toString():e&&e.sel&&(o=[e])):t!=null&&(we(t)?o=t:Bt(t)?i=t.toString():t&&t.sel?o=[t]:n=t),o!==void 0)for(a=0;a<o.length;++a)Bt(o[a])&&(o[a]=K(void 0,void 0,void 0,o[a],void 0));return r[0]==="s"&&r[1]==="v"&&r[2]==="g"&&(r.length===3||r[3]==="."||r[3]==="#")&&De(n,o,r),K(r,n,o,i,void 0)}function Se(r,t){const e=t!==void 0?t:Xr;let n;if(e.isElement(r)){const o=r.id?"#"+r.id:"",i=r.getAttribute("class"),a=i?"."+i.split(" ").join("."):"",c=e.tagName(r).toLowerCase()+o+a,f={},h={},m={},g=[];let _,u,p;const l=r.attributes,d=r.childNodes;for(u=0,p=l.length;u<p;u++)_=l[u].nodeName,_[0]==="d"&&_[1]==="a"&&_[2]==="t"&&_[3]==="a"&&_[4]==="-"?h[_.slice(5)]=l[u].nodeValue||"":_!=="id"&&_!=="class"&&(f[_]=l[u].nodeValue);for(u=0,p=d.length;u<p;u++)g.push(Se(d[u],t));return Object.keys(f).length>0&&(m.attrs=f),Object.keys(h).length>0&&(m.datasets=h),c[0]==="s"&&c[1]==="v"&&c[2]==="g"&&(c.length===3||c[3]==="."||c[3]==="#")&&De(m,g,c),K(c,m,g,void 0,r)}else return e.isText(r)?(n=e.getTextContent(r),K(void 0,void 0,void 0,n,r)):e.isComment(r)?(n=e.getTextContent(r),K("!",{},[],n,r)):K("",{},[],void 0,r)}const Cs="http://www.w3.org/1999/xlink",Is="http://www.w3.org/XML/1998/namespace",Ze=58,Ds=120;function Qe(r,t){let e;const n=t.elm;let o=r.data.attrs,i=t.data.attrs;if(!(!o&&!i)&&o!==i){o=o||{},i=i||{};for(e in i){const a=i[e];o[e]!==a&&(a===!0?n.setAttribute(e,""):a===!1?n.removeAttribute(e):e.charCodeAt(0)!==Ds?n.setAttribute(e,a):e.charCodeAt(3)===Ze?n.setAttributeNS(Is,e,a):e.charCodeAt(5)===Ze?n.setAttributeNS(Cs,e,a):n.setAttribute(e,a))}for(e in o)e in i||n.removeAttribute(e)}}const Ts={create:Qe,update:Qe};function tr(r,t){let e,n;const o=t.elm;let i=r.data.class,a=t.data.class;if(!(!i&&!a)&&i!==a){i=i||{},a=a||{};for(n in i)i[n]&&!Object.prototype.hasOwnProperty.call(a,n)&&o.classList.remove(n);for(n in a)e=a[n],e!==i[n]&&o.classList[e?"add":"remove"](n)}}const ks={create:tr,update:tr},er=/[A-Z]/g;function rr(r,t){const e=t.elm;let n=r.data.dataset,o=t.data.dataset,i;if(!n&&!o||n===o)return;n=n||{},o=o||{};const a=e.dataset;for(i in n)o[i]||(a?i in a&&delete a[i]:e.removeAttribute("data-"+i.replace(er,"-$&").toLowerCase()));for(i in o)n[i]!==o[i]&&(a?a[i]=o[i]:e.setAttribute("data-"+i.replace(er,"-$&").toLowerCase(),o[i]))}const js={create:rr,update:rr};function nr(r,t){let e,n,o;const i=t.elm;let a=r.data.props,c=t.data.props;if(!(!a&&!c)&&a!==c){a=a||{},c=c||{};for(e in c)n=c[e],o=a[e],o!==n&&(e!=="value"||i[e]!==n)&&(i[e]=n)}}const Fs={create:nr,update:nr},or=typeof window!="undefined"&&window.requestAnimationFrame.bind(window)||setTimeout,Ms=function(r){or(function(){or(r)})};let Oe=!1;function Ls(r,t,e){Ms(function(){r[t]=e})}function ir(r,t){let e,n;const o=t.elm;let i=r.data.style,a=t.data.style;if(!i&&!a||i===a)return;i=i||{},a=a||{};const c="delayed"in i;for(n in i)a[n]||(n[0]==="-"&&n[1]==="-"?o.style.removeProperty(n):o.style[n]="");for(n in a)if(e=a[n],n==="delayed"&&a.delayed)for(const f in a.delayed)e=a.delayed[f],(!c||e!==i.delayed[f])&&Ls(o.style,f,e);else n!=="remove"&&e!==i[n]&&(n[0]==="-"&&n[1]==="-"?o.style.setProperty(n,e):o.style[n]=e)}function Rs(r){let t,e;const n=r.elm,o=r.data.style;if(!(!o||!(t=o.destroy)))for(e in t)n.style[e]=t[e]}function Bs(r,t){const e=r.data.style;if(!e||!e.remove){t();return}Oe||(r.elm.offsetLeft,Oe=!0);let n;const o=r.elm;let i=0;const a=e.remove;let c=0;const f=[];for(n in a)f.push(n),o.style[n]=a[n];const m=getComputedStyle(o)["transition-property"].split(", ");for(;i<m.length;++i)f.indexOf(m[i])!==-1&&c++;o.addEventListener("transitionend",function(g){g.target===o&&--c,c===0&&t()})}function Us(){Oe=!1}const Ws={pre:Us,create:ir,update:ir,destroy:Rs,remove:Bs};function Vt(r,t,e,n,o){e===void 0&&(e=!1),n===void 0&&(n=!1),o===void 0&&(o=!1);var i=null;return X.create({start:function(c){n?i=function(h){Qr(h,n),c.next(h)}:i=function(h){c.next(h)},r.addEventListener(t,i,{capture:e,passive:o})},stop:function(){r.removeEventListener(t,i,e),i=null}})}function Zr(r,t){for(var e=Object.keys(r),n=e.length,o=0;o<n;o++){var i=e[o];if(typeof r[i]=="object"&&typeof t[i]=="object"){if(!Zr(r[i],t[i]))return!1}else if(r[i]!==t[i])return!1}return!0}function Qr(r,t){if(t)if(typeof t=="boolean")r.preventDefault();else if(Gs(t))t(r)&&r.preventDefault();else if(typeof t=="object")Zr(t,r)&&r.preventDefault();else throw new Error("preventDefault has to be either a boolean, predicate function or object")}function Gs(r){return typeof r=="function"}var zs=function(){function r(t){this._name=t}return r.prototype.select=function(t){return this},r.prototype.elements=function(){var t=q(E.of([document]));return t._isCycleSource=this._name,t},r.prototype.element=function(){var t=q(E.of(document));return t._isCycleSource=this._name,t},r.prototype.events=function(t,e,n){e===void 0&&(e={});var o;o=Vt(document,t,e.useCapture,e.preventDefault);var i=q(o);return i._isCycleSource=this._name,i},r}(),qs=function(){function r(t){this._name=t}return r.prototype.select=function(t){return this},r.prototype.elements=function(){var t=q(E.of([document.body]));return t._isCycleSource=this._name,t},r.prototype.element=function(){var t=q(E.of(document.body));return t._isCycleSource=this._name,t},r.prototype.events=function(t,e,n){e===void 0&&(e={});var o;o=Vt(document.body,t,e.useCapture,e.preventDefault);var i=q(o);return i._isCycleSource=this._name,i},r}();function Hs(r){var t=1,e=11;return typeof HTMLElement=="object"?r instanceof HTMLElement||r instanceof DocumentFragment:r&&typeof r=="object"&&r!==null&&(r.nodeType===t||r.nodeType===e)&&typeof r.nodeName=="string"}function Vs(r){return r.length>1&&(r[0]==="."||r[0]==="#")}function Js(r){return r.nodeType===11}function Ys(r){if(typeof r!="string"&&!Hs(r))throw new Error("Given container is not a DOM element neither a selector string.")}function Ks(r){var t=typeof r=="string"?document.querySelector(r):r;if(typeof r=="string"&&t===null)throw new Error("Cannot render into unknown element `"+r+"`");return t}function tn(r){for(var t="",e=r.length-1;e>=0&&r[e].type==="selector";e--)t=r[e].scope+" "+t;return t.trim()}function Te(r,t){if(!Array.isArray(r)||!Array.isArray(t)||r.length!==t.length)return!1;for(var e=0;e<r.length;e++)if(r[e].type!==t[e].type||r[e].scope!==t[e].scope)return!1;return!0}var en=function(){function r(t,e){this.namespace=t,this.isolateModule=e,this._namespace=t.filter(function(n){return n.type!=="selector"})}return r.prototype.isDirectlyInScope=function(t){var e=this.isolateModule.getNamespace(t);if(!e||this._namespace.length>e.length||!Te(this._namespace,e.slice(0,this._namespace.length)))return!1;for(var n=this._namespace.length;n<e.length;n++)if(e[n].type==="total")return!1;return!0},r}();function Xs(r){return Array.prototype.slice.call(r)}var rn=function(){function r(t,e){this.namespace=t,this.isolateModule=e}return r.prototype.call=function(){var t=this.namespace,e=tn(t),n=new en(t,this.isolateModule),o=this.isolateModule.getElement(t.filter(function(i){return i.type!=="selector"}));return o===void 0?[]:e===""?[o]:Xs(o.querySelectorAll(e)).filter(n.isDirectlyInScope,n).concat(o.matches(e)?[o]:[])},r}(),Nt=globalThis&&globalThis.__assign||function(){return Nt=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(r[o]=t[o])}return r},Nt.apply(this,arguments)};function Zs(r){return function(t,e){return e===":root"?t:t.map(function(n){if(!n)return n;var o=nn(e),i=Nt({},n,{data:Nt({},n.data,{isolate:!n.data||!Array.isArray(n.data.isolate)?r.concat([o]):n.data.isolate})});return Nt({},i,{key:i.key!==void 0?i.key:JSON.stringify(i.data.isolate)})})}}function nn(r){return{type:Vs(r)?"sibling":"total",scope:r}}var Qs=function(){function r(t,e,n,o,i,a){n===void 0&&(n=[]),this._rootElement$=t,this._sanitation$=e,this._namespace=n,this._isolateModule=o,this._eventDelegator=i,this._name=a,this.isolateSource=function(c,f){return new r(c._rootElement$,c._sanitation$,c._namespace.concat(nn(f)),c._isolateModule,c._eventDelegator,c._name)},this.isolateSink=Zs(this._namespace)}return r.prototype._elements=function(){if(this._namespace.length===0)return this._rootElement$.map(function(e){return[e]});var t=new rn(this._namespace,this._isolateModule);return this._rootElement$.map(function(){return t.call()})},r.prototype.elements=function(){var t=q(this._elements().remember());return t._isCycleSource=this._name,t},r.prototype.element=function(){var t=q(this._elements().filter(function(e){return e.length>0}).map(function(e){return e[0]}).remember());return t._isCycleSource=this._name,t},Object.defineProperty(r.prototype,"namespace",{get:function(){return this._namespace},enumerable:!0,configurable:!0}),r.prototype.select=function(t){if(typeof t!="string")throw new Error("DOM driver's select() expects the argument to be a string as a CSS selector");if(t==="document")return new zs(this._name);if(t==="body")return new qs(this._name);var e=t===":root"?[]:this._namespace.concat({type:"selector",scope:t.trim()});return new r(this._rootElement$,this._sanitation$,e,this._isolateModule,this._eventDelegator,this._name)},r.prototype.events=function(t,e,n){if(e===void 0&&(e={}),typeof t!="string")throw new Error("DOM driver's events() expects argument to be a string representing the event type to listen for.");var o=this._eventDelegator.addEventListener(t,this._namespace,e,n),i=q(o);return i._isCycleSource=this._name,i},r.prototype.dispose=function(){this._sanitation$.shamefullySendNext(null)},r}(),wt={},ta=J&&J.__spreadArrays||function(){for(var r=0,t=0,e=arguments.length;t<e;t++)r+=arguments[t].length;for(var n=Array(r),o=0,t=0;t<e;t++)for(var i=arguments[t],a=0,c=i.length;a<c;a++,o++)n[o]=i[a];return n};Object.defineProperty(wt,"__esModule",{value:!0});wt.SampleCombineOperator=wt.SampleCombineListener=void 0;var ea=H,tt={},on=function(){function r(t,e){this.i=t,this.p=e,e.ils[t]=this}return r.prototype._n=function(t){var e=this.p;e.out!==tt&&e.up(t,this.i)},r.prototype._e=function(t){this.p._e(t)},r.prototype._c=function(){this.p.down(this.i,this)},r}();wt.SampleCombineListener=on;var sn=function(){function r(t,e){this.type="sampleCombine",this.ins=t,this.others=e,this.out=tt,this.ils=[],this.Nn=0,this.vals=[]}return r.prototype._start=function(t){this.out=t;for(var e=this.others,n=this.Nn=e.length,o=this.vals=new Array(n),i=0;i<n;i++)o[i]=tt,e[i]._add(new on(i,this));this.ins._add(this)},r.prototype._stop=function(){var t=this.others,e=t.length,n=this.ils;this.ins._remove(this);for(var o=0;o<e;o++)t[o]._remove(n[o]);this.out=tt,this.vals=[],this.ils=[]},r.prototype._n=function(t){var e=this.out;e!==tt&&(this.Nn>0||e._n(ta([t],this.vals)))},r.prototype._e=function(t){var e=this.out;e!==tt&&e._e(t)},r.prototype._c=function(){var t=this.out;t!==tt&&t._c()},r.prototype.up=function(t,e){var n=this.vals[e];this.Nn>0&&n===tt&&this.Nn--,this.vals[e]=t},r.prototype.down=function(t,e){this.others[t]._remove(e)},r}();wt.SampleCombineOperator=sn;var an;an=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(o){return new ea.Stream(new sn(o,t))}};var ra=wt.default=an;globalThis&&globalThis.__assign;function un(r){if(!r.sel)return{tagName:"",id:"",className:""};var t=r.sel,e=t.indexOf("#"),n=t.indexOf(".",e),o=e>0?e:t.length,i=n>0?n:t.length,a=e!==-1||n!==-1?t.slice(0,Math.min(o,i)):t,c=o<i?t.slice(o+1,i):void 0,f=n>0?t.slice(i+1).replace(/\./g," "):void 0;return{tagName:a,id:c,className:f}}function na(r){var t=un(r).className,e=t===void 0?"":t;if(!r.data)return e;var n=r.data,o=n.class,i=n.props;if(o){var a=Object.keys(o).filter(function(c){return o[c]});e+=" "+a.join(" ")}return i&&i.className&&(e+=" "+i.className),e&&e.trim()}var Et;typeof self!="undefined"?Et=self:typeof window!="undefined"?Et=window:typeof global!="undefined"?Et=global:Et=Function("return this")();var sr=Et.Symbol;typeof sr=="function"&&sr("parent");var oa=function(){function r(t){this.rootElement=t}return r.prototype.call=function(t){if(Js(this.rootElement))return this.wrapDocFrag(t===null?[]:[t]);if(t===null)return this.wrap([]);var e=un(t),n=e.tagName,o=e.id,i=na(t),a=t.data||{},c=a.props||{},f=c.id,h=f===void 0?o:f,m=typeof h=="string"&&h.toUpperCase()===this.rootElement.id.toUpperCase()&&n.toUpperCase()===this.rootElement.tagName.toUpperCase()&&i.toUpperCase()===this.rootElement.className.toUpperCase();return m?t:this.wrap([t])},r.prototype.wrapDocFrag=function(t){return K("",{isolate:[]},t,void 0,this.rootElement)},r.prototype.wrap=function(t){var e=this.rootElement,n=e.tagName,o=e.id,i=e.className,a=o?"#"+o:"",c=i?"."+i.split(" ").join("."):"",f=Q(""+n.toLowerCase()+a+c,{},t);return f.data=f.data||{},f.data.isolate=f.data.isolate||[],f},r}(),ia=[Ws,ks,Fs,Ts,js],cn=function(){function r(t){this.mapper=t,this.tree=[void 0,{}]}return r.prototype.set=function(t,e,n){for(var o=this.tree,i=n!==void 0?n:t.length,a=0;a<i;a++){var c=this.mapper(t[a]),f=o[1][c];f||(f=[void 0,{}],o[1][c]=f),o=f}o[0]=e},r.prototype.getDefault=function(t,e,n){return this.get(t,e,n)},r.prototype.get=function(t,e,n){for(var o=this.tree,i=n!==void 0?n:t.length,a=0;a<i;a++){var c=this.mapper(t[a]),f=o[1][c];if(!f)if(e)f=[void 0,{}],o[1][c]=f;else return;o=f}return e&&!o[0]&&(o[0]=e()),o[0]},r.prototype.delete=function(t){for(var e=this.tree,n=0;n<t.length-1;n++){var o=e[1][this.mapper(t[n])];if(!o)return;e=o}delete e[1][this.mapper(t[t.length-1])]},r}(),sa=function(){function r(){this.namespaceTree=new cn(function(t){return t.scope}),this.namespaceByElement=new Map,this.vnodesBeingRemoved=[]}return r.prototype.setEventDelegator=function(t){this.eventDelegator=t},r.prototype.insertElement=function(t,e){this.namespaceByElement.set(e,t),this.namespaceTree.set(t,e)},r.prototype.removeElement=function(t){this.namespaceByElement.delete(t);var e=this.getNamespace(t);e&&this.namespaceTree.delete(e)},r.prototype.getElement=function(t,e){return this.namespaceTree.get(t,void 0,e)},r.prototype.getRootElement=function(t){if(this.namespaceByElement.has(t))return t;for(var e=t;!this.namespaceByElement.has(e);)if(e=e.parentNode,e){if(e.tagName==="HTML")throw new Error("No root element found, this should not happen at all")}else return;return e},r.prototype.getNamespace=function(t){var e=this.getRootElement(t);if(!!e)return this.namespaceByElement.get(e)},r.prototype.createModule=function(){var t=this;return{create:function(e,n){var o=n.elm,i=n.data,a=i===void 0?{}:i,c=a.isolate;Array.isArray(c)&&t.insertElement(c,o)},update:function(e,n){var o=e.elm,i=e.data,a=i===void 0?{}:i,c=n.elm,f=n.data,h=f===void 0?{}:f,m=a.isolate,g=h.isolate;Te(m,g)||Array.isArray(m)&&t.removeElement(o),Array.isArray(g)&&t.insertElement(g,c)},destroy:function(e){t.vnodesBeingRemoved.push(e)},remove:function(e,n){t.vnodesBeingRemoved.push(e),n()},post:function(){for(var e=t.vnodesBeingRemoved,n=e.length-1;n>=0;n--){var o=e[n],i=o.data!==void 0?o.data.isolation:void 0;i!==void 0&&t.removeElement(i),t.eventDelegator.removeElement(o.elm,i)}t.vnodesBeingRemoved=[]}}},r}(),aa=function(){function r(){this.arr=[],this.prios=[]}return r.prototype.add=function(t,e){for(var n=0;n<this.arr.length;n++)if(this.prios[n]<e){this.arr.splice(n,0,t),this.prios.splice(n,0,e);return}this.arr.push(t),this.prios.push(e)},r.prototype.forEach=function(t){for(var e=0;e<this.arr.length;e++)t(this.arr[e],e,this.arr)},r.prototype.delete=function(t){for(var e=0;e<this.arr.length;e++)if(this.arr[e]===t){this.arr.splice(e,1),this.prios.splice(e,1);return}},r}(),Jt=globalThis&&globalThis.__assign||function(){return Jt=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(r[o]=t[o])}return r},Jt.apply(this,arguments)},ua=["blur","canplay","canplaythrough","durationchange","emptied","ended","focus","load","loadeddata","loadedmetadata","mouseenter","mouseleave","pause","play","playing","ratechange","reset","scroll","seeked","seeking","stalled","submit","suspend","timeupdate","unload","volumechange","waiting"],ca=function(){function r(t,e){var n=this;this.rootElement$=t,this.isolateModule=e,this.virtualListeners=new cn(function(o){return o.scope}),this.nonBubblingListenersToAdd=new Set,this.virtualNonBubblingListener=[],this.isolateModule.setEventDelegator(this),this.domListeners=new Map,this.domListenersToAdd=new Map,this.nonBubblingListeners=new Map,t.addListener({next:function(o){n.origin!==o&&(n.origin=o,n.resetEventListeners(),n.domListenersToAdd.forEach(function(i,a){return n.setupDOMListener(a,i)}),n.domListenersToAdd.clear()),n.nonBubblingListenersToAdd.forEach(function(i){n.setupNonBubblingListener(i)})}})}return r.prototype.addEventListener=function(t,e,n,o){var i=E.never(),a,c=new en(e,this.isolateModule),f=o===void 0?ua.indexOf(t)===-1:o;if(f)return this.domListeners.has(t)||this.setupDOMListener(t,!!n.passive),a=this.insertListener(i,c,t,n),i;var h=[];this.nonBubblingListenersToAdd.forEach(function(w){return h.push(w)});for(var m=void 0,g=0,_=h.length,u=function(w){w[0];var $=w[1],P=w[2];return w[3],t===$&&Te(P.namespace,e)};!m&&g<_;){var p=h[g];m=u(p)?p:m,g++}var l=m,d;if(l){var v=l[0];d=v}else{var y=new rn(e,this.isolateModule);a=this.insertListener(i,c,t,n),l=[i,t,y,a],d=i,this.nonBubblingListenersToAdd.add(l),this.setupNonBubblingListener(l)}var b=this,S=null;return E.create({start:function(w){S=d.subscribe(w)},stop:function(){l[0];var w=l[1],$=l[2];l[3];var P=$.call();P.forEach(function(x){var N=x.subs;N&&N[w]&&(N[w].unsubscribe(),delete N[w])}),b.nonBubblingListenersToAdd.delete(l),S.unsubscribe()}})},r.prototype.removeElement=function(t,e){e!==void 0&&this.virtualListeners.delete(e);var n=[];this.nonBubblingListeners.forEach(function(a,c){if(a.has(t)){n.push([c,t]);var f=t.subs;f&&Object.keys(f).forEach(function(h){f[h].unsubscribe()})}});for(var o=0;o<n.length;o++){var i=this.nonBubblingListeners.get(n[o][0]);!i||(i.delete(n[o][1]),i.size===0?this.nonBubblingListeners.delete(n[o][0]):this.nonBubblingListeners.set(n[o][0],i))}},r.prototype.insertListener=function(t,e,n,o){var i=[],a=e._namespace,c=a.length;do i.push(this.getVirtualListeners(n,a,!0,c)),c--;while(c>=0&&a[c].type!=="total");for(var f=Jt({},o,{scopeChecker:e,subject:t,bubbles:!!o.bubbles,useCapture:!!o.useCapture,passive:!!o.passive}),h=0;h<i.length;h++)i[h].add(f,a.length);return f},r.prototype.getVirtualListeners=function(t,e,n,o){n===void 0&&(n=!1);var i=o!==void 0?o:e.length;if(!n)for(var a=i-1;a>=0;a--){if(e[a].type==="total"){i=a+1;break}i=a}var c=this.virtualListeners.getDefault(e,function(){return new Map},i);return c.has(t)||c.set(t,new aa),c.get(t)},r.prototype.setupDOMListener=function(t,e){var n=this;if(this.origin){var o=Vt(this.origin,t,!1,!1,e).subscribe({next:function(i){return n.onEvent(t,i,e)},error:function(){},complete:function(){}});this.domListeners.set(t,{sub:o,passive:e})}else this.domListenersToAdd.set(t,e)},r.prototype.setupNonBubblingListener=function(t){t[0];var e=t[1],n=t[2],o=t[3];if(!!this.origin){var i=n.call();if(i.length){var a=this;i.forEach(function(c){var f,h=c.subs;if(!h||!h[e]){var m=Vt(c,e,!1,!1,o.passive).subscribe({next:function(_){return a.onEvent(e,_,!!o.passive,!1)},error:function(){},complete:function(){}});a.nonBubblingListeners.has(e)||a.nonBubblingListeners.set(e,new Map);var g=a.nonBubblingListeners.get(e);if(!g)return;g.set(c,{sub:m,destination:o}),c.subs=Jt({},h,(f={},f[e]=m,f))}})}}},r.prototype.resetEventListeners=function(){for(var t=this.domListeners.entries(),e=t.next();!e.done;){var n=e.value,o=n[0],i=n[1],a=i.sub,c=i.passive;a.unsubscribe(),this.setupDOMListener(o,c),e=t.next()}},r.prototype.putNonBubblingListener=function(t,e,n,o){var i=this.nonBubblingListeners.get(t);if(!!i){var a=i.get(e);a&&a.destination.passive===o&&a.destination.useCapture===n&&(this.virtualNonBubblingListener[0]=a.destination)}},r.prototype.onEvent=function(t,e,n,o){o===void 0&&(o=!0);var i=this.patchEvent(e),a=this.isolateModule.getRootElement(e.target);if(o){var c=this.isolateModule.getNamespace(e.target);if(!c)return;var f=this.getVirtualListeners(t,c);this.bubble(t,e.target,a,i,f,c,c.length-1,!0,n),this.bubble(t,e.target,a,i,f,c,c.length-1,!1,n)}else this.putNonBubblingListener(t,e.target,!0,n),this.doBubbleStep(t,e.target,a,i,this.virtualNonBubblingListener,!0,n),this.putNonBubblingListener(t,e.target,!1,n),this.doBubbleStep(t,e.target,a,i,this.virtualNonBubblingListener,!1,n),e.stopPropagation()},r.prototype.bubble=function(t,e,n,o,i,a,c,f,h){!f&&!o.propagationHasBeenStopped&&this.doBubbleStep(t,e,n,o,i,f,h);var m=n,g=c;if(e===n)if(c>=0&&a[c].type==="sibling")m=this.isolateModule.getElement(a,c),g--;else return;e.parentNode&&m&&this.bubble(t,e.parentNode,m,o,i,a,g,f,h),f&&!o.propagationHasBeenStopped&&this.doBubbleStep(t,e,n,o,i,f,h)},r.prototype.doBubbleStep=function(t,e,n,o,i,a,c){!n||(this.mutateEventCurrentTarget(o,e),i.forEach(function(f){if(f.passive===c&&f.useCapture===a){var h=tn(f.scopeChecker.namespace);!o.propagationHasBeenStopped&&f.scopeChecker.isDirectlyInScope(e)&&(h!==""&&e.matches(h)||h===""&&e===n)&&(Qr(o,f.preventDefault),f.subject.shamefullySendNext(o))}}))},r.prototype.patchEvent=function(t){var e=t;e.propagationHasBeenStopped=!1;var n=e.stopPropagation;return e.stopPropagation=function(){n.call(this),this.propagationHasBeenStopped=!0},e},r.prototype.mutateEventCurrentTarget=function(t,e){try{Object.defineProperty(t,"currentTarget",{value:e,configurable:!0})}catch{console.log("please use event.ownerTarget")}t.ownerTarget=e},r}();function fa(r){if(!Array.isArray(r))throw new Error("Optional modules option must be an array for snabbdom modules")}function la(r){if(!r||typeof r.addListener!="function"||typeof r.fold!="function")throw new Error("The DOM driver function expects as input a Stream of virtual DOM elements")}function pa(r){return E.merge(r,E.never())}function ha(r){return r.elm}function da(r){(console.error||console.log)(r)}function ya(){return E.create({start:function(r){document.readyState==="loading"?document.addEventListener("readystatechange",function(){var t=document.readyState;(t==="interactive"||t==="complete")&&(r.next(null),r.complete())}):(r.next(null),r.complete())},stop:function(){}})}function ma(r){return r.data=r.data||{},r.data.isolate=[],r}function va(r,t){t===void 0&&(t={}),Ys(r);var e=t.modules||ia;fa(e);var n=new sa,o=t&&t.snabbdomOptions||void 0,i=Ns([n.createModule()].concat(e),void 0,o),a=ya(),c,f,h=E.create({start:function(g){f=new MutationObserver(function(){return g.next(null)})},stop:function(){f.disconnect()}});function m(g,_){_===void 0&&(_="DOM"),la(g);var u=E.create(),p=a.map(function(){var b=Ks(r)||document.body;return c=new oa(b),b}),l=g.remember();l.addListener({}),h.addListener({});var d=p.map(function(b){return E.merge(l.endWhen(u),u).map(function(S){return c.call(S)}).startWith(ma(Se(b))).fold(i,Se(b)).drop(1).map(ha).startWith(b).map(function(S){return f.observe(S,{childList:!0,attributes:!0,characterData:!0,subtree:!0,attributeOldValue:!0,characterDataOldValue:!0}),S}).compose(pa)}).flatten(),y=Vr(a,h).endWhen(u).compose(ra(d)).map(function(b){return b[1]}).remember();y.addListener({error:t.reportSnabbdomError||da});var v=new ca(y,n);return new Qs(y,u,[],n,v,_)}return m}function ga(r){return typeof r=="string"&&r.length>0}function _a(r){return ga(r)&&(r[0]==="."||r[0]==="#")}function fn(r){return function(e,n,o){var i=typeof e!="undefined",a=typeof n!="undefined",c=typeof o!="undefined";return _a(e)?a&&c?Q(r+e,n,o):a?Q(r+e,n):Q(r+e,{}):c?Q(r+e,n,o):a?Q(r,e,n):i?Q(r,e):Q(r,{})}}var ba=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","colorProfile","cursor","defs","desc","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotlight","feTile","feTurbulence","filter","font","fontFace","fontFaceFormat","fontFaceName","fontFaceSrc","fontFaceUri","foreignObject","g","glyph","glyphRef","hkern","image","line","linearGradient","marker","mask","metadata","missingGlyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],wa=fn("svg");ba.forEach(function(r){wa[r]=fn(r)});var Sa=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","dd","del","details","dfn","dir","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","meta","nav","noscript","object","ol","optgroup","option","p","param","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","u","ul","video"];Sa.forEach(function(r){});function Oa(r,t,e={}){const{combineList:n=["DOM"],globalList:o=["EVENTS"],stateSourceName:i="STATE",domSourceName:a="DOM",container:c="div",containerClass:f}=e;return h=>{const m=Date.now(),g={item:r,itemKey:(u,p)=>typeof u.id!="undefined"?u.id:p,itemScope:u=>u,channel:i,collectSinks:u=>Object.entries(h).reduce((p,[l,d])=>{if(n.includes(l)){const y=u.pickCombine(l);l===a&&c?p[a]=y.map(v=>({sel:c,data:f?{props:{className:f}}:{},children:v,key:m,text:void 0,elm:void 0})):p[l]=y}else p[l]=u.pickMerge(l);return p},{})},_={[i]:t};return o.forEach(u=>_[u]=null),n.forEach(u=>_[u]=null),Aa(g,_,h)}}function Aa(r,t,e){return ot(zi(r),t)(e)}var V=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},Zt={},G={},ln={exports:{}},pn={};(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=t;function t(e){var n,o=e.Symbol;if(typeof o=="function")if(o.observable)n=o.observable;else{n=o.for("https://github.com/benlesh/symbol-observable");try{o.observable=n}catch{}}else n="@@observable";return n}})(pn);(function(r){r.exports=pn})(ln);var ar=Object.prototype.toString,hn=function(t){var e=ar.call(t),n=e==="[object Arguments]";return n||(n=e!=="[object Array]"&&t!==null&&typeof t=="object"&&typeof t.length=="number"&&t.length>=0&&ar.call(t.callee)==="[object Function]"),n},ce,ur;function $a(){if(ur)return ce;ur=1;var r;if(!Object.keys){var t=Object.prototype.hasOwnProperty,e=Object.prototype.toString,n=hn,o=Object.prototype.propertyIsEnumerable,i=!o.call({toString:null},"toString"),a=o.call(function(){},"prototype"),c=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],f=function(_){var u=_.constructor;return u&&u.prototype===_},h={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},m=function(){if(typeof window=="undefined")return!1;for(var _ in window)try{if(!h["$"+_]&&t.call(window,_)&&window[_]!==null&&typeof window[_]=="object")try{f(window[_])}catch{return!0}}catch{return!0}return!1}(),g=function(_){if(typeof window=="undefined"||!m)return f(_);try{return f(_)}catch{return!1}};r=function(u){var p=u!==null&&typeof u=="object",l=e.call(u)==="[object Function]",d=n(u),y=p&&e.call(u)==="[object String]",v=[];if(!p&&!l&&!d)throw new TypeError("Object.keys called on a non-object");var b=a&&l;if(y&&u.length>0&&!t.call(u,0))for(var S=0;S<u.length;++S)v.push(String(S));if(d&&u.length>0)for(var w=0;w<u.length;++w)v.push(String(w));else for(var $ in u)!(b&&$==="prototype")&&t.call(u,$)&&v.push(String($));if(i)for(var P=g(u),x=0;x<c.length;++x)!(P&&c[x]==="constructor")&&t.call(u,c[x])&&v.push(c[x]);return v}}return ce=r,ce}var Ea=Array.prototype.slice,xa=hn,cr=Object.keys,Ut=cr?function(t){return cr(t)}:$a(),fr=Object.keys;Ut.shim=function(){if(Object.keys){var t=function(){var e=Object.keys(arguments);return e&&e.length===arguments.length}(1,2);t||(Object.keys=function(n){return xa(n)?fr(Ea.call(n)):fr(n)})}else Object.keys=Ut;return Object.keys||Ut};var Pa=Ut,Na=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var t={},e=Symbol("test"),n=Object(e);if(typeof e=="string"||Object.prototype.toString.call(e)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var o=42;t[e]=o;for(e in t)return!1;if(typeof Object.keys=="function"&&Object.keys(t).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(t).length!==0)return!1;var i=Object.getOwnPropertySymbols(t);if(i.length!==1||i[0]!==e||!Object.prototype.propertyIsEnumerable.call(t,e))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var a=Object.getOwnPropertyDescriptor(t,e);if(a.value!==o||a.enumerable!==!0)return!1}return!0},lr=typeof Symbol!="undefined"&&Symbol,Ca=Na,Ia=function(){return typeof lr!="function"||typeof Symbol!="function"||typeof lr("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:Ca()},pr={foo:{}},Da=Object,Ta=function(){return{__proto__:pr}.foo===pr.foo&&!({__proto__:null}instanceof Da)},ka="Function.prototype.bind called on incompatible ",fe=Array.prototype.slice,ja=Object.prototype.toString,Fa="[object Function]",Ma=function(t){var e=this;if(typeof e!="function"||ja.call(e)!==Fa)throw new TypeError(ka+e);for(var n=fe.call(arguments,1),o,i=function(){if(this instanceof o){var m=e.apply(this,n.concat(fe.call(arguments)));return Object(m)===m?m:this}else return e.apply(t,n.concat(fe.call(arguments)))},a=Math.max(0,e.length-n.length),c=[],f=0;f<a;f++)c.push("$"+f);if(o=Function("binder","return function ("+c.join(",")+"){ return binder.apply(this,arguments); }")(i),e.prototype){var h=function(){};h.prototype=e.prototype,o.prototype=new h,h.prototype=null}return o},La=Ma,dn=Function.prototype.bind||La,Ra=dn,Ba=Ra.call(Function.call,Object.prototype.hasOwnProperty),I,St=SyntaxError,yn=Function,_t=TypeError,le=function(r){try{return yn('"use strict"; return ('+r+").constructor;")()}catch{}},ct=Object.getOwnPropertyDescriptor;if(ct)try{ct({},"")}catch{ct=null}var pe=function(){throw new _t},Ua=ct?function(){try{return arguments.callee,pe}catch{try{return ct(arguments,"callee").get}catch{return pe}}}():pe,ht=Ia(),Wa=Ta(),B=Object.getPrototypeOf||(Wa?function(r){return r.__proto__}:null),mt={},Ga=typeof Uint8Array=="undefined"||!B?I:B(Uint8Array),ft={"%AggregateError%":typeof AggregateError=="undefined"?I:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer=="undefined"?I:ArrayBuffer,"%ArrayIteratorPrototype%":ht&&B?B([][Symbol.iterator]()):I,"%AsyncFromSyncIteratorPrototype%":I,"%AsyncFunction%":mt,"%AsyncGenerator%":mt,"%AsyncGeneratorFunction%":mt,"%AsyncIteratorPrototype%":mt,"%Atomics%":typeof Atomics=="undefined"?I:Atomics,"%BigInt%":typeof BigInt=="undefined"?I:BigInt,"%BigInt64Array%":typeof BigInt64Array=="undefined"?I:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array=="undefined"?I:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView=="undefined"?I:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array=="undefined"?I:Float32Array,"%Float64Array%":typeof Float64Array=="undefined"?I:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry=="undefined"?I:FinalizationRegistry,"%Function%":yn,"%GeneratorFunction%":mt,"%Int8Array%":typeof Int8Array=="undefined"?I:Int8Array,"%Int16Array%":typeof Int16Array=="undefined"?I:Int16Array,"%Int32Array%":typeof Int32Array=="undefined"?I:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":ht&&B?B(B([][Symbol.iterator]())):I,"%JSON%":typeof JSON=="object"?JSON:I,"%Map%":typeof Map=="undefined"?I:Map,"%MapIteratorPrototype%":typeof Map=="undefined"||!ht||!B?I:B(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise=="undefined"?I:Promise,"%Proxy%":typeof Proxy=="undefined"?I:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect=="undefined"?I:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set=="undefined"?I:Set,"%SetIteratorPrototype%":typeof Set=="undefined"||!ht||!B?I:B(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer=="undefined"?I:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":ht&&B?B(""[Symbol.iterator]()):I,"%Symbol%":ht?Symbol:I,"%SyntaxError%":St,"%ThrowTypeError%":Ua,"%TypedArray%":Ga,"%TypeError%":_t,"%Uint8Array%":typeof Uint8Array=="undefined"?I:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray=="undefined"?I:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array=="undefined"?I:Uint16Array,"%Uint32Array%":typeof Uint32Array=="undefined"?I:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap=="undefined"?I:WeakMap,"%WeakRef%":typeof WeakRef=="undefined"?I:WeakRef,"%WeakSet%":typeof WeakSet=="undefined"?I:WeakSet};if(B)try{null.error}catch(r){var za=B(B(r));ft["%Error.prototype%"]=za}var qa=function r(t){var e;if(t==="%AsyncFunction%")e=le("async function () {}");else if(t==="%GeneratorFunction%")e=le("function* () {}");else if(t==="%AsyncGeneratorFunction%")e=le("async function* () {}");else if(t==="%AsyncGenerator%"){var n=r("%AsyncGeneratorFunction%");n&&(e=n.prototype)}else if(t==="%AsyncIteratorPrototype%"){var o=r("%AsyncGenerator%");o&&B&&(e=B(o.prototype))}return ft[t]=e,e},hr={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Dt=dn,Yt=Ba,Ha=Dt.call(Function.call,Array.prototype.concat),Va=Dt.call(Function.apply,Array.prototype.splice),dr=Dt.call(Function.call,String.prototype.replace),Kt=Dt.call(Function.call,String.prototype.slice),Ja=Dt.call(Function.call,RegExp.prototype.exec),Ya=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Ka=/\\(\\)?/g,Xa=function(t){var e=Kt(t,0,1),n=Kt(t,-1);if(e==="%"&&n!=="%")throw new St("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&e!=="%")throw new St("invalid intrinsic syntax, expected opening `%`");var o=[];return dr(t,Ya,function(i,a,c,f){o[o.length]=c?dr(f,Ka,"$1"):a||i}),o},Za=function(t,e){var n=t,o;if(Yt(hr,n)&&(o=hr[n],n="%"+o[0]+"%"),Yt(ft,n)){var i=ft[n];if(i===mt&&(i=qa(n)),typeof i=="undefined"&&!e)throw new _t("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:o,name:n,value:i}}throw new St("intrinsic "+t+" does not exist!")},Qa=function(t,e){if(typeof t!="string"||t.length===0)throw new _t("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof e!="boolean")throw new _t('"allowMissing" argument must be a boolean');if(Ja(/^%?[^%]*%?$/,t)===null)throw new St("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=Xa(t),o=n.length>0?n[0]:"",i=Za("%"+o+"%",e),a=i.name,c=i.value,f=!1,h=i.alias;h&&(o=h[0],Va(n,Ha([0,1],h)));for(var m=1,g=!0;m<n.length;m+=1){var _=n[m],u=Kt(_,0,1),p=Kt(_,-1);if((u==='"'||u==="'"||u==="`"||p==='"'||p==="'"||p==="`")&&u!==p)throw new St("property names with quotes must have matching quotes");if((_==="constructor"||!g)&&(f=!0),o+="."+_,a="%"+o+"%",Yt(ft,a))c=ft[a];else if(c!=null){if(!(_ in c)){if(!e)throw new _t("base intrinsic for "+t+" exists, but the property is not available.");return}if(ct&&m+1>=n.length){var l=ct(c,_);g=!!l,g&&"get"in l&&!("originalValue"in l.get)?c=l.get:c=c[_]}else g=Yt(c,_),c=c[_];g&&!f&&(ft[a]=c)}}return c},tu=Qa,Ae=tu("%Object.defineProperty%",!0),$e=function(){if(Ae)try{return Ae({},"a",{value:1}),!0}catch{return!1}return!1};$e.hasArrayLengthDefineBug=function(){if(!$e())return null;try{return Ae([],"length",{value:1}).length!==1}catch{return!0}};var eu=$e,ru=Pa,nu=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",ou=Object.prototype.toString,iu=Array.prototype.concat,mn=Object.defineProperty,su=function(r){return typeof r=="function"&&ou.call(r)==="[object Function]"},au=eu(),vn=mn&&au,uu=function(r,t,e,n){if(t in r){if(n===!0){if(r[t]===e)return}else if(!su(n)||!n())return}vn?mn(r,t,{configurable:!0,enumerable:!1,value:e,writable:!0}):r[t]=e},gn=function(r,t){var e=arguments.length>2?arguments[2]:{},n=ru(t);nu&&(n=iu.call(n,Object.getOwnPropertySymbols(t)));for(var o=0;o<n.length;o+=1)uu(r,n[o],t[n[o]],e[n[o]])};gn.supportsDescriptors=!!vn;var _n=gn,bn=V,cu=bn,wn=function(){return typeof V!="object"||!V||V.Math!==Math||V.Array!==Array?cu:V},fu=_n,lu=wn,pu=function(){var t=lu();if(fu.supportsDescriptors){var e=Object.getOwnPropertyDescriptor(t,"globalThis");(!e||e.configurable&&(e.enumerable||!e.writable||globalThis!==t))&&Object.defineProperty(t,"globalThis",{configurable:!0,enumerable:!1,value:t,writable:!0})}else(typeof globalThis!="object"||globalThis!==t)&&(t.globalThis=t);return t},hu=_n,du=bn,Sn=wn,yu=pu,mu=Sn(),On=function(){return mu};hu(On,{getPolyfill:Sn,implementation:du,shim:yu});var vu=On,gu=V&&V.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)o.hasOwnProperty(i)&&(n[i]=o[i])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(G,"__esModule",{value:!0});G.NO_IL=G.NO=G.MemoryStream=G.Stream=void 0;var _u=ln.exports,bu=vu,Mt=_u.default(bu.getPolyfill()),A={};G.NO=A;function W(){}function Wt(r){for(var t=r.length,e=Array(t),n=0;n<t;++n)e[n]=r[n];return e}function wu(r,t){return function(n){return r(n)&&t(n)}}function ke(r,t,e){try{return r.f(t)}catch(n){return e._e(n),A}}var at={_n:W,_e:W,_c:W};G.NO_IL=at;function yr(r){r._start=function(e){e.next=e._n,e.error=e._e,e.complete=e._c,this.start(e)},r._stop=r.stop}var Su=function(){function r(t,e){this._stream=t,this._listener=e}return r.prototype.unsubscribe=function(){this._stream._remove(this._listener)},r}(),Ou=function(){function r(t){this._listener=t}return r.prototype.next=function(t){this._listener._n(t)},r.prototype.error=function(t){this._listener._e(t)},r.prototype.complete=function(){this._listener._c()},r}(),Au=function(){function r(t){this.type="fromObservable",this.ins=t,this.active=!1}return r.prototype._start=function(t){this.out=t,this.active=!0,this._sub=this.ins.subscribe(new Ou(t)),this.active||this._sub.unsubscribe()},r.prototype._stop=function(){this._sub&&this._sub.unsubscribe(),this.active=!1},r}(),$u=function(){function r(t){this.type="merge",this.insArr=t,this.out=A,this.ac=0}return r.prototype._start=function(t){this.out=t;var e=this.insArr,n=e.length;this.ac=n;for(var o=0;o<n;o++)e[o]._add(this)},r.prototype._stop=function(){for(var t=this.insArr,e=t.length,n=0;n<e;n++)t[n]._remove(this);this.out=A},r.prototype._n=function(t){var e=this.out;e!==A&&e._n(t)},r.prototype._e=function(t){var e=this.out;e!==A&&e._e(t)},r.prototype._c=function(){if(--this.ac<=0){var t=this.out;if(t===A)return;t._c()}},r}(),Eu=function(){function r(t,e,n){this.i=t,this.out=e,this.p=n,n.ils.push(this)}return r.prototype._n=function(t){var e=this.p,n=this.out;if(n!==A&&e.up(t,this.i)){var o=Wt(e.vals);n._n(o)}},r.prototype._e=function(t){var e=this.out;e!==A&&e._e(t)},r.prototype._c=function(){var t=this.p;t.out!==A&&--t.Nc===0&&t.out._c()},r}(),xu=function(){function r(t){this.type="combine",this.insArr=t,this.out=A,this.ils=[],this.Nc=this.Nn=0,this.vals=[]}return r.prototype.up=function(t,e){var n=this.vals[e],o=this.Nn?n===A?--this.Nn:this.Nn:0;return this.vals[e]=t,o===0},r.prototype._start=function(t){this.out=t;var e=this.insArr,n=this.Nc=this.Nn=e.length,o=this.vals=new Array(n);if(n===0)t._n([]),t._c();else for(var i=0;i<n;i++)o[i]=A,e[i]._add(new Eu(i,t,this))},r.prototype._stop=function(){for(var t=this.insArr,e=t.length,n=this.ils,o=0;o<e;o++)t[o]._remove(n[o]);this.out=A,this.ils=[],this.vals=[]},r}(),Pu=function(){function r(t){this.type="fromArray",this.a=t}return r.prototype._start=function(t){for(var e=this.a,n=0,o=e.length;n<o;n++)t._n(e[n]);t._c()},r.prototype._stop=function(){},r}(),Nu=function(){function r(t){this.type="fromPromise",this.on=!1,this.p=t}return r.prototype._start=function(t){var e=this;this.on=!0,this.p.then(function(n){e.on&&(t._n(n),t._c())},function(n){t._e(n)}).then(W,function(n){setTimeout(function(){throw n})})},r.prototype._stop=function(){this.on=!1},r}(),Cu=function(){function r(t){this.type="periodic",this.period=t,this.intervalID=-1,this.i=0}return r.prototype._start=function(t){var e=this;function n(){t._n(e.i++)}this.intervalID=setInterval(n,this.period)},r.prototype._stop=function(){this.intervalID!==-1&&clearInterval(this.intervalID),this.intervalID=-1,this.i=0},r}(),Iu=function(){function r(t,e){this.type="debug",this.ins=t,this.out=A,this.s=W,this.l="",typeof e=="string"?this.l=e:typeof e=="function"&&(this.s=e)}return r.prototype._start=function(t){this.out=t,this.ins._add(this)},r.prototype._stop=function(){this.ins._remove(this),this.out=A},r.prototype._n=function(t){var e=this.out;if(e!==A){var n=this.s,o=this.l;if(n!==W)try{n(t)}catch(i){e._e(i)}else o?console.log(o+":",t):console.log(t);e._n(t)}},r.prototype._e=function(t){var e=this.out;e!==A&&e._e(t)},r.prototype._c=function(){var t=this.out;t!==A&&t._c()},r}(),Du=function(){function r(t,e){this.type="drop",this.ins=e,this.out=A,this.max=t,this.dropped=0}return r.prototype._start=function(t){this.out=t,this.dropped=0,this.ins._add(this)},r.prototype._stop=function(){this.ins._remove(this),this.out=A},r.prototype._n=function(t){var e=this.out;e!==A&&this.dropped++>=this.max&&e._n(t)},r.prototype._e=function(t){var e=this.out;e!==A&&e._e(t)},r.prototype._c=function(){var t=this.out;t!==A&&t._c()},r}(),Tu=function(){function r(t,e){this.out=t,this.op=e}return r.prototype._n=function(){this.op.end()},r.prototype._e=function(t){this.out._e(t)},r.prototype._c=function(){this.op.end()},r}(),ku=function(){function r(t,e){this.type="endWhen",this.ins=e,this.out=A,this.o=t,this.oil=at}return r.prototype._start=function(t){this.out=t,this.o._add(this.oil=new Tu(t,this)),this.ins._add(this)},r.prototype._stop=function(){this.ins._remove(this),this.o._remove(this.oil),this.out=A,this.oil=at},r.prototype.end=function(){var t=this.out;t!==A&&t._c()},r.prototype._n=function(t){var e=this.out;e!==A&&e._n(t)},r.prototype._e=function(t){var e=this.out;e!==A&&e._e(t)},r.prototype._c=function(){this.end()},r}(),he=function(){function r(t,e){this.type="filter",this.ins=e,this.out=A,this.f=t}return r.prototype._start=function(t){this.out=t,this.ins._add(this)},r.prototype._stop=function(){this.ins._remove(this),this.out=A},r.prototype._n=function(t){var e=this.out;if(e!==A){var n=ke(this,t,e);n===A||!n||e._n(t)}},r.prototype._e=function(t){var e=this.out;e!==A&&e._e(t)},r.prototype._c=function(){var t=this.out;t!==A&&t._c()},r}(),ju=function(){function r(t,e){this.out=t,this.op=e}return r.prototype._n=function(t){this.out._n(t)},r.prototype._e=function(t){this.out._e(t)},r.prototype._c=function(){this.op.inner=A,this.op.less()},r}(),Fu=function(){function r(t){this.type="flatten",this.ins=t,this.out=A,this.open=!0,this.inner=A,this.il=at}return r.prototype._start=function(t){this.out=t,this.open=!0,this.inner=A,this.il=at,this.ins._add(this)},r.prototype._stop=function(){this.ins._remove(this),this.inner!==A&&this.inner._remove(this.il),this.out=A,this.open=!0,this.inner=A,this.il=at},r.prototype.less=function(){var t=this.out;t!==A&&!this.open&&this.inner===A&&t._c()},r.prototype._n=function(t){var e=this.out;if(e!==A){var n=this,o=n.inner,i=n.il;o!==A&&i!==at&&o._remove(i),(this.inner=t)._add(this.il=new ju(e,this))}},r.prototype._e=function(t){var e=this.out;e!==A&&e._e(t)},r.prototype._c=function(){this.open=!1,this.less()},r}(),Mu=function(){function r(t,e,n){var o=this;this.type="fold",this.ins=n,this.out=A,this.f=function(i){return t(o.acc,i)},this.acc=this.seed=e}return r.prototype._start=function(t){this.out=t,this.acc=this.seed,t._n(this.acc),this.ins._add(this)},r.prototype._stop=function(){this.ins._remove(this),this.out=A,this.acc=this.seed},r.prototype._n=function(t){var e=this.out;if(e!==A){var n=ke(this,t,e);n!==A&&e._n(this.acc=n)}},r.prototype._e=function(t){var e=this.out;e!==A&&e._e(t)},r.prototype._c=function(){var t=this.out;t!==A&&t._c()},r}(),Lu=function(){function r(t){this.type="last",this.ins=t,this.out=A,this.has=!1,this.val=A}return r.prototype._start=function(t){this.out=t,this.has=!1,this.ins._add(this)},r.prototype._stop=function(){this.ins._remove(this),this.out=A,this.val=A},r.prototype._n=function(t){this.has=!0,this.val=t},r.prototype._e=function(t){var e=this.out;e!==A&&e._e(t)},r.prototype._c=function(){var t=this.out;t!==A&&(this.has?(t._n(this.val),t._c()):t._e(new Error("last() failed because input stream completed")))},r}(),Ru=function(){function r(t,e){this.type="map",this.ins=e,this.out=A,this.f=t}return r.prototype._start=function(t){this.out=t,this.ins._add(this)},r.prototype._stop=function(){this.ins._remove(this),this.out=A},r.prototype._n=function(t){var e=this.out;if(e!==A){var n=ke(this,t,e);n!==A&&e._n(n)}},r.prototype._e=function(t){var e=this.out;e!==A&&e._e(t)},r.prototype._c=function(){var t=this.out;t!==A&&t._c()},r}(),Bu=function(){function r(t){this.type="remember",this.ins=t,this.out=A}return r.prototype._start=function(t){this.out=t,this.ins._add(t)},r.prototype._stop=function(){this.ins._remove(this.out),this.out=A},r}(),Uu=function(){function r(t,e){this.type="replaceError",this.ins=e,this.out=A,this.f=t}return r.prototype._start=function(t){this.out=t,this.ins._add(this)},r.prototype._stop=function(){this.ins._remove(this),this.out=A},r.prototype._n=function(t){var e=this.out;e!==A&&e._n(t)},r.prototype._e=function(t){var e=this.out;if(e!==A)try{this.ins._remove(this),(this.ins=this.f(t))._add(this)}catch(n){e._e(n)}},r.prototype._c=function(){var t=this.out;t!==A&&t._c()},r}(),Wu=function(){function r(t,e){this.type="startWith",this.ins=t,this.out=A,this.val=e}return r.prototype._start=function(t){this.out=t,this.out._n(this.val),this.ins._add(t)},r.prototype._stop=function(){this.ins._remove(this.out),this.out=A},r}(),Gu=function(){function r(t,e){this.type="take",this.ins=e,this.out=A,this.max=t,this.taken=0}return r.prototype._start=function(t){this.out=t,this.taken=0,this.max<=0?t._c():this.ins._add(this)},r.prototype._stop=function(){this.ins._remove(this),this.out=A},r.prototype._n=function(t){var e=this.out;if(e!==A){var n=++this.taken;n<this.max?e._n(t):n===this.max&&(e._n(t),e._c())}},r.prototype._e=function(t){var e=this.out;e!==A&&e._e(t)},r.prototype._c=function(){var t=this.out;t!==A&&t._c()},r}(),je=function(){function r(t){this._prod=t||A,this._ils=[],this._stopID=A,this._dl=A,this._d=!1,this._target=null,this._err=A}return r.prototype._n=function(t){var e=this._ils,n=e.length;if(this._d&&this._dl._n(t),n==1)e[0]._n(t);else{if(n==0)return;for(var o=Wt(e),i=0;i<n;i++)o[i]._n(t)}},r.prototype._e=function(t){if(this._err===A){this._err=t;var e=this._ils,n=e.length;if(this._x(),this._d&&this._dl._e(t),n==1)e[0]._e(t);else{if(n==0)return;for(var o=Wt(e),i=0;i<n;i++)o[i]._e(t)}if(!this._d&&n==0)throw this._err}},r.prototype._c=function(){var t=this._ils,e=t.length;if(this._x(),this._d&&this._dl._c(),e==1)t[0]._c();else{if(e==0)return;for(var n=Wt(t),o=0;o<e;o++)n[o]._c()}},r.prototype._x=function(){this._ils.length!==0&&(this._prod!==A&&this._prod._stop(),this._err=A,this._ils=[])},r.prototype._stopNow=function(){this._prod._stop(),this._err=A,this._stopID=A},r.prototype._add=function(t){var e=this._target;if(e)return e._add(t);var n=this._ils;if(n.push(t),!(n.length>1))if(this._stopID!==A)clearTimeout(this._stopID),this._stopID=A;else{var o=this._prod;o!==A&&o._start(this)}},r.prototype._remove=function(t){var e=this,n=this._target;if(n)return n._remove(t);var o=this._ils,i=o.indexOf(t);i>-1&&(o.splice(i,1),this._prod!==A&&o.length<=0?(this._err=A,this._stopID=setTimeout(function(){return e._stopNow()})):o.length===1&&this._pruneCycles())},r.prototype._pruneCycles=function(){this._hasNoSinks(this,[])&&this._remove(this._ils[0])},r.prototype._hasNoSinks=function(t,e){if(e.indexOf(t)!==-1)return!0;if(t.out===this)return!0;if(t.out&&t.out!==A)return this._hasNoSinks(t.out,e.concat(t));if(t._ils){for(var n=0,o=t._ils.length;n<o;n++)if(!this._hasNoSinks(t._ils[n],e.concat(t)))return!1;return!0}else return!1},r.prototype.ctor=function(){return this instanceof et?et:r},r.prototype.addListener=function(t){t._n=t.next||W,t._e=t.error||W,t._c=t.complete||W,this._add(t)},r.prototype.removeListener=function(t){this._remove(t)},r.prototype.subscribe=function(t){return this.addListener(t),new Su(this,t)},r.prototype[Mt]=function(){return this},r.create=function(t){if(t){if(typeof t.start!="function"||typeof t.stop!="function")throw new Error("producer requires both start and stop functions");yr(t)}return new r(t)},r.createWithMemory=function(t){return t&&yr(t),new et(t)},r.never=function(){return new r({_start:W,_stop:W})},r.empty=function(){return new r({_start:function(t){t._c()},_stop:W})},r.throw=function(t){return new r({_start:function(e){e._e(t)},_stop:W})},r.from=function(t){if(typeof t[Mt]=="function")return r.fromObservable(t);if(typeof t.then=="function")return r.fromPromise(t);if(Array.isArray(t))return r.fromArray(t);throw new TypeError("Type of input to from() must be an Array, Promise, or Observable")},r.of=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return r.fromArray(t)},r.fromArray=function(t){return new r(new Pu(t))},r.fromPromise=function(t){return new r(new Nu(t))},r.fromObservable=function(t){if(t.endWhen!==void 0)return t;var e=typeof t[Mt]=="function"?t[Mt]():t;return new r(new Au(e))},r.periodic=function(t){return new r(new Cu(t))},r.prototype._map=function(t){return new(this.ctor())(new Ru(t,this))},r.prototype.map=function(t){return this._map(t)},r.prototype.mapTo=function(t){var e=this.map(function(){return t}),n=e._prod;return n.type="mapTo",e},r.prototype.filter=function(t){var e=this._prod;return e instanceof he?new r(new he(wu(e.f,t),e.ins)):new r(new he(t,this))},r.prototype.take=function(t){return new(this.ctor())(new Gu(t,this))},r.prototype.drop=function(t){return new r(new Du(t,this))},r.prototype.last=function(){return new r(new Lu(this))},r.prototype.startWith=function(t){return new et(new Wu(this,t))},r.prototype.endWhen=function(t){return new(this.ctor())(new ku(t,this))},r.prototype.fold=function(t,e){return new et(new Mu(t,e,this))},r.prototype.replaceError=function(t){return new(this.ctor())(new Uu(t,this))},r.prototype.flatten=function(){return new r(new Fu(this))},r.prototype.compose=function(t){return t(this)},r.prototype.remember=function(){return new et(new Bu(this))},r.prototype.debug=function(t){return new(this.ctor())(new Iu(this,t))},r.prototype.imitate=function(t){if(t instanceof et)throw new Error("A MemoryStream was given to imitate(), but it only supports a Stream. Read more about this restriction here: https://github.com/staltz/xstream#faq");this._target=t;for(var e=this._ils,n=e.length,o=0;o<n;o++)t._add(e[o]);this._ils=[]},r.prototype.shamefullySendNext=function(t){this._n(t)},r.prototype.shamefullySendError=function(t){this._e(t)},r.prototype.shamefullySendComplete=function(){this._c()},r.prototype.setDebugListener=function(t){t?(this._d=!0,t._n=t.next||W,t._e=t.error||W,t._c=t.complete||W,this._dl=t):(this._d=!1,this._dl=A)},r.merge=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return new r(new $u(e))},r.combine=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return new r(new xu(e))},r}();G.Stream=je;var et=function(r){gu(t,r);function t(e){var n=r.call(this,e)||this;return n._has=!1,n}return t.prototype._n=function(e){this._v=e,this._has=!0,r.prototype._n.call(this,e)},t.prototype._add=function(e){var n=this._target;if(n)return n._add(e);var o=this._ils;if(o.push(e),o.length>1){this._has&&e._n(this._v);return}if(this._stopID!==A)this._has&&e._n(this._v),clearTimeout(this._stopID),this._stopID=A;else if(this._has)e._n(this._v);else{var i=this._prod;i!==A&&i._start(this)}},t.prototype._stopNow=function(){this._has=!1,r.prototype._stopNow.call(this)},t.prototype._x=function(){this._has=!1,r.prototype._x.call(this)},t.prototype.map=function(e){return this._map(e)},t.prototype.mapTo=function(e){return r.prototype.mapTo.call(this,e)},t.prototype.take=function(e){return r.prototype.take.call(this,e)},t.prototype.endWhen=function(e){return r.prototype.endWhen.call(this,e)},t.prototype.replaceError=function(e){return r.prototype.replaceError.call(this,e)},t.prototype.remember=function(){return this},t.prototype.debug=function(e){return r.prototype.debug.call(this,e)},t}(je);G.MemoryStream=et;var zu=je;G.default=zu;Object.defineProperty(Zt,"__esModule",{value:!0});Zt.DropRepeatsOperator=void 0;var qu=G,de={},An=function(){function r(t,e){this.ins=t,this.type="dropRepeats",this.out=null,this.v=de,this.isEq=e||function(n,o){return n===o}}return r.prototype._start=function(t){this.out=t,this.ins._add(this)},r.prototype._stop=function(){this.ins._remove(this),this.out=null,this.v=de},r.prototype._n=function(t){var e=this.out;if(!!e){var n=this.v;n!==de&&this.isEq(t,n)||(this.v=t,e._n(t))}},r.prototype._e=function(t){var e=this.out;!e||e._e(t)},r.prototype._c=function(){var t=this.out;!t||t._c()},r}();Zt.DropRepeatsOperator=An;function Hu(r){return r===void 0&&(r=void 0),function(e){return new qu.Stream(new An(e,r))}}var Ct=Zt.default=Hu;function Vu(r,t,e,n={}){const{switched:o=["DOM"],stateSourceName:i="STATE"}=n,a=typeof t;if(!t)throw new Error("Missing 'name$' parameter for switchable()");if(!(a==="string"||a==="function"||t instanceof X))throw new Error("Invalid 'name$' parameter for switchable(): expects Stream, String, or Function");if(t instanceof X){const c=t.compose(Ct()).startWith(e).remember();return f=>mr(r,f,c,o)}else{const c=a==="function"&&t||(f=>f[t]);return f=>{const h=f&&(typeof i=="string"&&f[i]||f.STATE||f.state).stream;if(!h instanceof X)throw new Error(`Could not find the state source: ${i}`);const m=h.map(c).filter(g=>typeof g=="string").compose(Ct()).startWith(e).remember();return mr(r,f,m,o,i)}}}function mr(r,t,e,n=["DOM"],o="STATE"){typeof n=="string"&&(n=[n]);const i=Object.entries(r).map(([c,f])=>{if(t[o]){const h=t[o].stream,m=E.combine(e,h).filter(([_,u])=>_==c).map(([_,u])=>u).remember(),g=new t[o].constructor(m,t[o]._name);return[c,f(T(C({},t),{state:g}))]}return[c,f(t)]});return Object.keys(t).reduce((c,f)=>{if(n.includes(f))c[f]=e.map(h=>{const m=i.find(([g,_])=>g===h);return m&&m[1][f]||E.never()}).flatten().remember().startWith(void 0);else{const h=i.filter(([m,g])=>g[f]!==void 0).map(([m,g])=>g[f]);c[f]=E.merge(...h)}return c},{})}var $n={};Object.defineProperty($n,"__esModule",{value:!0});var Ju=G,Yu=function(){function r(t,e){this.dt=t,this.ins=e,this.type="delay",this.out=null}return r.prototype._start=function(t){this.out=t,this.ins._add(this)},r.prototype._stop=function(){this.ins._remove(this),this.out=null},r.prototype._n=function(t){var e=this.out;if(!!e)var n=setInterval(function(){e._n(t),clearInterval(n)},this.dt)},r.prototype._e=function(t){var e=this.out;if(!!e)var n=setInterval(function(){e._e(t),clearInterval(n)},this.dt)},r.prototype._c=function(){var t=this.out;if(!!t)var e=setInterval(function(){t._c(),clearInterval(e)},this.dt)},r}();function Ku(r){return function(e){return new Ju.Stream(new Yu(r,e))}}var vr=$n.default=Ku,En={};Object.defineProperty(En,"__esModule",{value:!0});var Xu=G,Zu=function(){function r(t){this.streams=t,this.type="concat",this.out=null,this.i=0}return r.prototype._start=function(t){this.out=t,this.streams[this.i]._add(this)},r.prototype._stop=function(){var t=this.streams;this.i<t.length&&t[this.i]._remove(this),this.i=0,this.out=null},r.prototype._n=function(t){var e=this.out;!e||e._n(t)},r.prototype._e=function(t){var e=this.out;!e||e._e(t)},r.prototype._c=function(){var t=this.out;if(!!t){var e=this.streams;e[this.i]._remove(this),++this.i<e.length?e[this.i]._add(this):t._c()}},r}();function Qu(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];return new Xu.Stream(new Zu(r))}var gr=En.default=Qu,xn={};Object.defineProperty(xn,"__esModule",{value:!0});var xt=G,tc=function(){function r(t,e){this.dt=t,this.ins=e,this.type="debounce",this.out=null,this.id=null,this.t=xt.NO}return r.prototype._start=function(t){this.out=t,this.ins._add(this)},r.prototype._stop=function(){this.ins._remove(this),this.out=null,this.clearInterval()},r.prototype.clearInterval=function(){var t=this.id;t!==null&&clearInterval(t),this.id=null},r.prototype._n=function(t){var e=this,n=this.out;!n||(this.clearInterval(),this.t=t,this.id=setInterval(function(){e.clearInterval(),n._n(t),e.t=xt.NO},this.dt))},r.prototype._e=function(t){var e=this.out;!e||(this.clearInterval(),e._e(t))},r.prototype._c=function(){var t=this.out;!t||(this.clearInterval(),this.t!=xt.NO&&t._n(this.t),this.t=xt.NO,t._c())},r}();function ec(r){return function(e){return new xt.Stream(new tc(r,e))}}var ye=xn.default=ec;const Ee=typeof window!="undefined"&&window||process&&process.env||{},_r="request",rc="BOOTSTRAP",dt="INITIALIZE",nc="HYDRATE";let br=!0;const wr="~#~#~ABORT~#~#~";function Pn(r){const{name:t,sources:e,isolateOpts:n,stateSourceName:o="STATE"}=r;if(e&&typeof e!="object")throw new Error("Sources must be a Cycle.js sources object:",t);let i;typeof n=="string"?i={[o]:n}:n===!0?i={}:i=n;const a=typeof e=="undefined";if(typeof i=="object"){const c=f=>{const h=T(C({},r),{sources:f});return new me(h).sinks};return a?ot(c,i):ot(c,i)(e)}else return a?c=>new me(T(C({},r),{sources:c})).sinks:new me(r).sinks}class me{constructor({name:t="NO NAME",sources:e,intent:n,request:o,model:i,response:a,view:c,children:f={},components:h={},initialState:m,calculated:g,storeCalculatedInState:_=!0,DOMSourceName:u="DOM",stateSourceName:p="STATE",requestSourceName:l="HTTP"}){if(!e||typeof e!="object")throw new Error("Missing or invalid sources");this.name=t,this.sources=e,this.intent=n,this.request=o,this.model=i,this.response=a,this.view=c,this.children=f,this.components=h,this.initialState=m,this.calculated=g,this.storeCalculatedInState=_,this.DOMSourceName=u,this.stateSourceName=p,this.requestSourceName=l,this.sourceNames=Object.keys(e),this.isSubComponent=this.sourceNames.includes("props$");const d=e[p]&&e[p].stream;d&&(this.currentState=m||{},this.sources[this.stateSourceName]=new $t(d.map(y=>(this.currentState=y,y)))),br&&typeof this.intent=="undefined"&&typeof this.model=="undefined"&&(this.initialState=m||!0,this.intent=y=>({__NOOP_ACTION__:E.never()}),this.model={__NOOP_ACTION__:y=>y}),br=!1,this.log=oc(t),this.initIntent$(),this.initAction$(),this.initResponse$(),this.initState(),this.initModel$(),this.initSendResponse$(),this.initChildren$(),this.initSubComponentSink$(),this.initSubComponentsRendered$(),this.initVdom$(),this.initSinks()}initIntent$(){if(!!this.intent){if(typeof this.intent!="function")throw new Error("Intent must be a function");if(this.intent$=this.intent(this.sources),!(this.intent$ instanceof X)&&typeof this.intent$!="object")throw new Error("Intent must return either an action$ stream or map of event streams")}}initAction$(){const t=this.sources&&this.sources[this.requestSourceName]||null;if(!this.intent$){this.action$=E.never();return}let e;if(this.intent$ instanceof X)e=this.intent$;else{const c=Object.entries(this.intent$).map(([f,h])=>h.map(m=>({type:f,data:m})));e=E.merge(E.never(),...c)}const n=e instanceof X?e:e.apply&&e(this.sources)||E.never(),o=gr(E.of({type:rc}),n).compose(vr(10));let i;t&&typeof t.select=="function"?i=t.select("initial").flatten():i=E.never();const a=i.map(c=>({type:nc,data:c}));this.action$=E.merge(o,a).compose(this.log(({type:c})=>`Action triggered: <${c}>`))}initResponse$(){if(typeof this.request=="undefined")return;if(typeof this.request!="object")throw new Error("The request parameter must be an object");const t=this.sources[this.requestSourceName],n=Object.entries(this.request).reduce((o,[i,a])=>{const c=i.toLowerCase();if(typeof t[c]!="function")throw new Error("Invalid method in request object:",i);const h=Object.entries(a).reduce((g,[_,u])=>{const p=`[${c.toUpperCase()}]:${_||"none"}`,l=typeof u;if(l==="undefined")throw new Error(`Action for '${_}' route in request object not specified`);if(l!=="string"&&l!=="function")throw new Error(`Invalid action for '${_}' route: expecting string or function`);const d=l==="function"?"[ FUNCTION ]":`< ${u} >`;console.log(`[${this.name}] Adding ${this.requestSourceName} route:`,c.toUpperCase(),`'${_}' <${d}>`);const y=t[c](_).compose(Ct((v,b)=>v.id==b.id)).map(v=>{if(!v||!v.id)throw new Error(`No id found in request: ${p}`);try{const b=v.id,S=v.params,w=v.body,$=v.cookies,P=l==="function"?"FUNCTION":u,x={params:S,body:w,cookies:$,req:v},N={type:P,data:w,req:v,_reqId:b,_action:P},M=new Date().toISOString(),F=v.get?v.get("host"):"0.0.0.0";if(console.log(`${M} ${F} ${v.method} ${v.url}`),Ee.DEBUG&&this.action$.setDebugListener({next:({type:j})=>console.log(`[${this.name}] Action from ${this.requestSourceName} request: <${j}>`)}),l==="function"){const j=this.addCalculated(this.currentState),k=u(j,v);return E.of(T(C({},N),{data:k}))}else{this.action$.shamefullySendNext(N);const k=Object.entries(this.sources).reduce((R,[Y,Qt])=>{if(!Qt||typeof Qt[_r]!="function")return R;const Hn=Qt[_r](b);return[...R,Hn]},[]);return E.merge(...k)}}catch(b){console.error(b)}}).flatten();return[...g,y]},[]),m=E.merge(...h);return[...o,m]},[]);if(this.response$=E.merge(...n).compose(this.log(o=>o._action?`[${this.requestSourceName}] response data received for Action: <${o._action}>`:`[${this.requestSourceName}] response data received from FUNCTION`)),typeof this.response!="undefined"&&typeof this.response$=="undefined")throw new Error("Cannot have a response parameter without a request parameter")}initState(){this.model!=null&&(this.model[dt]===void 0?this.model[dt]={[this.stateSourceName]:(t,e)=>C({},this.addCalculated(e))}:Object.keys(this.model[dt]).forEach(t=>{t!==this.stateSourceName&&(console.warn(`${dt} can only be used with the ${this.stateSourceName} source... disregarding ${t}`),delete this.model[dt][t])}))}initModel$(){if(typeof this.model=="undefined"){this.model$=this.sourceNames.reduce((f,h)=>(f[h]=E.never(),f),{});return}const t={type:dt,data:this.initialState},e=this.initialState?gr(E.of(t),this.action$).compose(vr(0)):this.action$,n=this.makeOnAction(e,!0,this.action$),o=this.makeOnAction(this.action$,!1,this.action$),i=Object.entries(this.model),a={};i.forEach(f=>{let[h,m]=f;if(typeof m=="function"&&(m={[this.stateSourceName]:m}),typeof m!="object")throw new Error(`Entry for each action must be an object: ${this.name} ${h}`);Object.entries(m).forEach(_=>{const[u,p]=_,l=u==this.stateSourceName,v=(l?n:o)(h,p).compose(this.log(b=>{if(l)return`State reducer added: <${h}>`;{const S=b&&(b.type||b.command||b.name||b.key||Array.isArray(b)&&"Array"||b);return`Data sent to [${u}]: <${h}> ${S}`}}));Array.isArray(a[u])?a[u].push(v):a[u]=[v]})});const c=Object.entries(a).reduce((f,h)=>{const[m,g]=h;return f[m]=E.merge(E.never(),...g),f},{});this.model$=c}initSendResponse$(){const t=typeof this.response;if(t!="function"&&t!="undefined")throw new Error("The response parameter must be a function");if(t=="undefined"){this.response$&&this.response$.subscribe({next:this.log(({_reqId:a,_action:c})=>`Unhandled response for request: ${c} ${a}`)}),this.sendResponse$=E.never();return}const e={select:a=>typeof a=="undefined"?this.response$:(Array.isArray(a)||(a=[a]),this.response$.filter(({_action:c})=>a.length>0?c==="FUNCTION"||a.includes(c):!0))},n=this.response(e);if(typeof n!="object")throw new Error("The response function must return an object");const i=Object.entries(n).reduce((a,[c,f])=>{const h=f.map(({_reqId:m,_action:g,data:_})=>{if(!m)throw new Error(`No request id found for response for: ${c}`);return{_reqId:m,_action:g,command:c,data:_}});return[...a,h]},[]);this.sendResponse$=E.merge(...i).compose(this.log(({_reqId:a,_action:c})=>`[${this.requestSourceName}] response sent for: <${c}>`))}initChildren$(){const t=this.sourceNames.reduce((e,n)=>(n==this.DOMSourceName?e[n]={}:e[n]=[],e),{});this.children$=Object.entries(this.children).reduce((e,[n,o])=>{const i=o(this.sources);return this.sourceNames.forEach(a=>{a==this.DOMSourceName?e[a][n]=i[a]:e[a].push(i[a])}),e},t)}initSubComponentSink$(){const t=E.create({start:e=>{this.newSubComponentSinks=e.next.bind(e)},stop:e=>{}});t.subscribe({next:e=>e}),this.subComponentSink$=t.filter(e=>Object.keys(e).length>0)}initSubComponentsRendered$(){const t=E.create({start:e=>{this.subComponentsRendered=e.next.bind(e)},stop:e=>{}});this.subComponentsRendered$=t.startWith(null)}initVdom$(){if(typeof this.view!="function"){this.vdom$=E.of(null);return}const t=this.collectRenderParameters();this.vdom$=t.map(this.view).map(e=>e||{sel:"div",data:{},children:[]}).compose(this.instantiateSubComponents.bind(this)).filter(e=>e!==void 0).compose(this.renderVdom.bind(this))}initSinks(){this.sinks=this.sourceNames.reduce((t,e)=>{if(e==this.DOMSourceName)return t;const n=this.subComponentSink$?this.subComponentSink$.map(o=>o[e]).filter(o=>!!o).flatten():E.never();return e===this.stateSourceName?t[e]=E.merge(this.model$[e]||E.never(),n,this.sources[this.stateSourceName].stream.filter(o=>!1),...this.children$[e]):t[e]=E.merge(this.model$[e]||E.never(),n,...this.children$[e]),t},{}),this.sinks[this.DOMSourceName]=this.vdom$,this.sinks[this.requestSourceName]=E.merge(this.sendResponse$,this.sinks[this.requestSourceName])}makeOnAction(t,e=!0,n){return n=n||t,(o,i)=>{const a=t.filter(({type:f})=>f==o);let c;if(typeof i=="function")c=a.map(f=>{const h=(g,_)=>{const u=f._reqId||f.req&&f.req.id,p=u?typeof _=="object"?T(C({},_),{_reqId:u,_action:o}):{data:_,_reqId:u,_action:o}:_;setTimeout(()=>{n.shamefullySendNext({type:g,data:p})},10)};let m=f.data;if(m&&m.data&&m._reqId&&(m=m.data),e)return g=>{const _=this.isSubComponent?this.currentState:g,u=this.addCalculated(_),p=i(u,m,h,f.req);return p==wr?_:this.cleanupCalculated(p)};{const g=this.addCalculated(this.currentState),_=i(g,m,h,f.req),u=typeof _,p=f._reqId||f.req&&f.req.id;if(["string","number","boolean","function"].includes(u))return _;if(u=="object")return T(C({},_),{_reqId:p,_action:o});if(u=="undefined")return console.warn(`'undefined' value sent to ${o}`),_;throw new Error(`Invalid reducer type for ${o} ${u}`)}}).filter(f=>f!=wr);else if(i===void 0||i===!0)c=a.map(({data:f})=>f);else{const f=i;c=a.mapTo(f)}return c}}addCalculated(t){if(!this.calculated||typeof t!="object"||t instanceof Array)return t;if(typeof this.calculated!="object")throw new Error("'calculated' parameter must be an object mapping calculated state field named to functions");const n=Object.entries(this.calculated).reduce((o,[i,a])=>{if(typeof a!="function")throw new Error(`Missing or invalid calculator function for calculated field '${i}`);try{o[i]=a(t)}catch(c){console.warn(`Calculated field '${i}' threw an error during calculation: ${c.message}`)}return o},{});return C(C({},t),n)}cleanupCalculated(t){if(!t||typeof t!="object"||t instanceof Array)return t;const f=this.storeCalculatedInState?this.addCalculated(t):t,{__props:n,__children:o}=f,i=lt(f,["__props","__children"]),a=C({},i);return this.calculated&&Object.keys(this.calculated).forEach(h=>{this.initialState&&typeof this.initialState[h]!="undefined"?a[h]=this.initialState[h]:delete a[h]}),a}collectRenderParameters(){const t=this.sources[this.stateSourceName],e=C({},this.children$[this.DOMSourceName]),n=t&&t.isolateSource(t,{get:f=>this.addCalculated(f)}),o=n&&n.stream||E.never();e.state=o,e[this.stateSourceName]=o,this.sources.props$&&(e.__props=this.sources.props$),this.sources.children$&&(e.__children=this.sources.children$);const i=[],a=[];return Object.entries(e).forEach(([f,h])=>{i.push(f),a.push(h)}),E.combine(...a).map(f=>i.reduce((h,m,g)=>(h[m]=f[g],h),{}))}instantiateSubComponents(t){return t.fold((e,n)=>{const o=Object.keys(this.components),i=Nn(n,o),a=Object.entries(i),c={"::ROOT::":n};if(a.length===0)return c;const f={},h=a.reduce((g,[_,u])=>{const p=u.data,l=p.props||{},d=u.children||[],y=p.isCollection||!1,v=p.isSwitchable||!1;if(e[_]){const P=e[_];return g[_]=P,P.props$.shamefullySendNext(l),P.children$.shamefullySendNext(d),g}const b=E.create().startWith(l),S=E.create().startWith(d);let w;y?w=this.instantiateCollection.bind(this):v?w=this.instantiateSwitchable.bind(this):w=this.instantiateCustomComponent.bind(this);const $=w(u,b,S);return $[this.DOMSourceName]=$[this.DOMSourceName]?this.makeCoordinatedSubComponentDomSink($[this.DOMSourceName]):E.never(),g[_]={sink$:$,props$:b,children$:S},Object.entries($).map(([P,x])=>{f[P]||(f[P]=[]),P!==this.DOMSourceName&&f[P].push(x)}),g},c),m=Object.entries(f).reduce((g,[_,u])=>(u.length===0||(g[_]=u.length===1?u[0]:E.merge(...u)),g),{});return this.newSubComponentSinks(m),h},{})}makeCoordinatedSubComponentDomSink(t){const e=t.remember(),n=(i,a)=>JSON.stringify(i)===JSON.stringify(a);return this.sources[this.stateSourceName].stream.compose(Ct(n)).map(i=>e).compose(ye(10)).flatten().debug(i=>this.subComponentsRendered()).remember()}instantiateCollection(t,e,n){const i=t.data.props||{};t.children;const a=E.combine(this.sources[this.stateSourceName].stream.startWith(this.currentState),e,n).map(([l,d,y])=>typeof l=="object"?T(C({},this.addCalculated(l)),{__props:d,__children:y}):{value:l,__props:d,__children:y}),c=new $t(a),f=i.from;let h;const m=typeof i.of=="function"?i.of:this.components[i.of],g=l=>{if(typeof l=="object"){const d=l,{__props:y,__children:v}=d;return lt(d,["__props","__children"])}else return l},_={get:l=>{const{__props:d,__children:y}=l;return Array.isArray(l[f])?l[f].map(v=>typeof v=="object"?T(C({},v),{__props:d,__children:y}):{value:v,__props:d,__children:y}):[]},set:(l,d)=>this.calculated&&f in this.calculated?(console.warn(`Collection sub-component of ${this.name} attempted to update state on a calculated field '${f}': Update ignored`),l):T(C({},l),{[f]:d.map(g)})};f===void 0?h={get:l=>!(l instanceof Array)&&l.value&&l.value instanceof Array?l.value:l,set:(l,d)=>(console.log("COLL SET",d),d)}:typeof f=="string"?typeof this.currentState=="object"?!(f in this.currentState)&&!(f in this.calculated)?(console.error(`Collection component in ${this.name} is attempting to use non-existent state property '${f}': To fix this error, specify a valid array property on the state.  Attempting to use parent component state.`),h=void 0):(Array.isArray(this.currentState[f])||console.warn(`State property '${f}' in collection comopnent of ${this.name} is not an array: No components will be instantiated in the collection.`),h=_):(Array.isArray(this.currentState[f])||console.warn(`State property '${f}' in collection component of ${this.name} is not an array: No components will be instantiated in the collection.`),h=_):typeof f=="object"?typeof f.get!="function"?(console.error(`Collection component in ${this.name} has an invalid 'from' field: Expecting 'undefined', a string indicating an array property in the state, or an object with 'get' and 'set' functions for retrieving and setting child state from the current state. Attempting to use parent component state.`),h=void 0):h={get:f.get,set:f.set}:(console.error(`Collection component in ${this.name} has an invalid 'from' field: Expecting 'undefined', a string indicating an array property in the state, or an object with 'get' and 'set' functions for retrieving and setting child state from the current state. Attempting to use parent component state.`),h=void 0);const u=T(C({},this.sources),{[this.stateSourceName]:c,props$:e,children$:n}),p=Oa(m,h,{container:null})(u);if(typeof p!="object")throw new Error("Invalid sinks returned from component factory of collection element");return p}instantiateSwitchable(t,e,n){const i=t.data.props||{};t.children;const a=E.combine(this.sources[this.stateSourceName].stream.startWith(this.currentState),e,n).map(([l,d,y])=>typeof l=="object"?T(C({},this.addCalculated(l)),{__props:d,__children:y}):{value:l,__props:d,__children:y}),c=new $t(a),f=i.state;let h;const m={get:l=>{const{__props:d,__children:y}=l;return typeof l[f]=="object"&&!(l[f]instanceof Array)?T(C({},l[f]),{__props:d,__children:y}):{value:l[f],__props:d,__children:y}},set:(l,d)=>{if(this.calculated&&f in this.calculated)return console.warn(`Switchable sub-component of ${this.name} attempted to update state on a calculated field '${f}': Update ignored`),l;if(console.log("SWITCH SET",d),typeof d!="object"||d instanceof Array)return T(C({},l),{[f]:d});const S=d,{__props:y,__children:v}=S,b=lt(S,["__props","__children"]);return T(C({},l),{[f]:b})}},g={get:l=>l,set:(l,d)=>{if(typeof d!="object"||d instanceof Array)return d;const S=d,{__props:y,__children:v}=S;return lt(S,["__props","__children"])}};typeof f=="undefined"?h=g:typeof f=="string"?h=m:typeof f=="object"?typeof f.get!="function"?(console.error(`Switchable component in ${this.name} has an invalid 'state' field: Expecting 'undefined', a string indicating an array property in the state, or an object with 'get' and 'set' functions for retrieving and setting sub-component state from the current state. Attempting to use parent component state.`),h=g):h={get:f.get,set:f.set}:(console.error(`Invalid state provided to switchable sub-component of ${this.name}: Expecting string, object, or undefined, but found ${typeof f}. Attempting to use parent component state.`),h=g);const _=i.of,u=T(C({},this.sources),{[this.stateSourceName]:c,props$:e,children$:n}),p=ot(Vu(_,e.map(l=>l.current)),{[this.stateSourceName]:h})(u);if(typeof p!="object")throw new Error("Invalid sinks returned from component factory of switchable element");return p}instantiateCustomComponent(t,e,n){const o=t.sel,a=t.data.props||{};t.children;const c=E.combine(this.sources[this.stateSourceName].stream.startWith(this.currentState),e,n).map(([d,y,v])=>typeof d=="object"?T(C({},this.addCalculated(d)),{__props:y,__children:v}):{value:d,__props:y,__children:v}),f=new $t(c),h=a.state,m=o==="sygnal-factory"?a.sygnalFactory:this.components[o]||a.sygnalFactory;if(!m)throw o==="sygnal-factory"?new Error("Component not found on element with Capitalized selector and nameless function: JSX transpilation replaces selectors starting with upper case letters with functions in-scope with the same name, Sygnal cannot see the name of the resulting component."):new Error(`Component not found: ${o}`);let g;const _={get:d=>{const{__props:y,__children:v}=d;return typeof d[h]=="object"?T(C({},d[h]),{__props:y,__children:v}):{value:d[h],__props:y,__children:v}},set:(d,y)=>this.calculated&&h in this.calculated?(console.warn(`Sub-component of ${this.name} attempted to update state on a calculated field '${h}': Update ignored`),d):T(C({},d),{[h]:y})},u={get:d=>d,set:(d,y)=>{if(typeof y!="object"||y instanceof Array)return y;const w=y,{__props:v,__children:b}=w;return lt(w,["__props","__children"])}};typeof h=="undefined"?g=u:typeof h=="string"?g=_:typeof h=="object"?typeof h.get!="function"?(console.error(`Sub-component in ${this.name} has an invalid 'state' field: Expecting 'undefined', a string indicating an array property in the state, or an object with 'get' and 'set' functions for retrieving and setting sub-component state from the current state. Attempting to use parent component state.`),g=u):g={get:h.get,set:h.set}:(console.error(`Invalid state provided to sub-component of ${this.name}: Expecting string, object, or undefined, but found ${typeof h}. Attempting to use parent component state.`),g=u);const p=T(C({},this.sources),{[this.stateSourceName]:f,props$:e,children$:n}),l=ot(m,{[this.stateSourceName]:g})(p);if(typeof l!="object"){const d=o==="sygnal-factory"?"custom element":o;throw new Error("Invalid sinks returned from component factory:",d)}return l}renderVdom(t){return E.combine(this.subComponentsRendered$,t).compose(ye(5)).map(([e,n])=>{const o=Object.keys(this.components),i=n["::ROOT::"],a=Object.entries(n).filter(([h])=>h!=="::ROOT::");if(a.length===0)return E.of(i);const c=[],f=a.map(([h,m])=>(c.push(h),m.sink$[this.DOMSourceName].startWith(void 0)));return f.length===0?E.of(i):E.combine(...f).compose(ye(10)).map(h=>{const m=h.reduce((u,p,l)=>(u[c[l]]=p,u),{}),g=Dn(i);return Cn(g,m,o)})}).flatten().filter(e=>!!e).remember().compose(this.log("View Rendered"))}}function oc(r){return function(t){const e=typeof t=="function"?t:n=>t;return n=>n.debug(o=>{(Ee.DEBUG=="true"||Ee.DEBUG===!0)&&console.log(`[${r}] ${e(o)}`)})}}function Nn(r,t,e=0,n=0){var g,_,u,p;if(!r)return{};if((g=r.data)!=null&&g.componentsProcessed)return{};e===0&&(r.data.componentsProcessed=!0);const o=r.sel,i=o&&o.toLowerCase()==="collection",a=o&&o.toLowerCase()==="switchable",c=o&&["collection","switchable","sygnal-factory",...t].includes(r.sel)||typeof((u=(_=r.data)==null?void 0:_.props)==null?void 0:u.sygnalFactory)=="function",f=r.data&&r.data.props||{};r.data&&r.data.attrs;const h=r.children||[];let m={};if(c){const l=In(r,e,n);if(i){if(!f.of)throw new Error("Collection element missing required 'component' property");if(typeof f.of!="string"&&typeof f.of!="function")throw new Error(`Invalid 'component' property of collection element: found ${typeof f.of} requires string or component factory function`);if(typeof f.of!="function"&&!t.includes(f.of))throw new Error(`Specified component for collection not found: ${f.of}`);typeof f.from!="undefined"&&!(typeof f.from=="string"||Array.isArray(f.from))&&console.warn(`No valid array found in the 'value' property of collection ${typeof f.of=="string"?f.of:"function component"}: no collection components will be created`),r.data.isCollection=!0,(p=r.data).props||(p.props={})}else if(a){if(!f.of)throw new Error("Switchable element missing required 'of' property");if(typeof f.of!="object")throw new Error(`Invalid 'components' property of switchable element: found ${typeof f.of} requires object mapping names to component factories`);if(!Object.values(f.of).every(v=>typeof v=="function"))throw new Error("One or more components provided to switchable element is not a valid component factory");if(!f.current||typeof f.current!="string"&&typeof f.current!="function")throw new Error(`Missing or invalid 'current' property for switchable element: found '${typeof f.current}' requires string or function`);if(!Object.keys(f.of).includes(f.current))throw new Error(`Component '${f.current}' not found in switchable element`);r.data.isSwitchable=!0}m[l]=r}return h.length>0&&h.map((l,d)=>Nn(l,t,e+1,d)).forEach(l=>{Object.entries(l).forEach(([d,y])=>m[d]=y)}),m}function Cn(r,t,e,n=0,o){var m,g,_,u,p;if(!r)return;if((m=r.data)!=null&&m.componentsInjected)return r;n===0&&r.data&&(r.data.componentsInjected=!0);const i=r.sel||"NO SELECTOR",a=["collection","switchable","sygnal-factory",...e].includes(i)||typeof((_=(g=r.data)==null?void 0:g.props)==null?void 0:_.sygnalFactory)=="function",c=(u=r==null?void 0:r.data)==null?void 0:u.isCollection,f=(p=r==null?void 0:r.data)==null?void 0:p.isSwitchable;r.data&&r.data.props;const h=r.children||[];if(a){const l=In(r,n,o),d=t[l];return c?(r.sel="div",r.children=Array.isArray(d)?d:[d],r):d}else return h.length>0&&(r.children=h.map((l,d)=>Cn(l,t,e,n+1,d)).flat()),r}const Sr=new Map;function In(r,t,e){const n=r.sel,o=typeof n=="string"?n:"functionComponent";let i=Sr.get(n);if(!i){const m=Date.now(),g=Math.floor(Math.random()*1e4);i=`${m}-${g}`,Sr.set(n,i)}const a=`${i}-${t}-${e}`,c=r.data&&r.data.props||{},f=c.id&&JSON.stringify(c.id)||a;return`${o}::${f}`}function Dn(r){return typeof r=="undefined"?r:T(C({},r),{children:Array.isArray(r.children)?r.children.map(Dn):void 0,data:r.data&&T(C({},r.data),{componentsInjected:!1})})}function ic(r,t={}){let{events:e=["input","submit"],preventDefault:n=!0}=t;typeof e=="string"&&(e=[e]);const o=e.map(a=>r.events(a));return E.merge(...o).map(a=>{n&&a.preventDefault();const c=a.type==="submit"?a.srcElement:a.currentTarget,f=new FormData(c);let h={};h.event=a,h.eventType=a.type;const m=c.querySelector("input[type=submit]:focus");if(m){const{name:g,value:_}=m;h[g||"submit"]=_}for(let[g,_]of f.entries())h[g]=_;return h})}var Fe={};Object.defineProperty(Fe,"__esModule",{value:!0});function Tn(){var r;return typeof window!="undefined"?r=window:typeof V!="undefined"?r=V:r=this,r.Cyclejs=r.Cyclejs||{},r=r.Cyclejs,r.adaptStream=r.adaptStream||function(t){return t},r}function sc(r){Tn().adaptStream=r}Fe.setAdapt=sc;function ac(r){return Tn().adaptStream(r)}var uc=Fe.adapt=ac;function cc(r){const t=new EventTarget;return r.subscribe({next:e=>t.dispatchEvent(new CustomEvent("data",{detail:e}))}),{select:e=>{const n=!e,o=Array.isArray(e)?e:[e];let i;const a=E.create({start:c=>{i=({detail:f})=>{const h=f&&f.data||null;(n||o.includes(f.type))&&c.next(h)},t.addEventListener("data",i)},stop:c=>t.removeEventListener("data",i)});return uc(a)}}}function fc(r){r.addListener({next:t=>{console.log(t)}})}function lc(r,t={},e={}){const{mountPoint:n="#root",fragments:o=!0}=e,i=Yi(r,"STATE"),a={EVENTS:cc,DOM:va(n,{snabbdomOptions:{experimental:{fragments:o}}}),LOG:fc},c=C(C({},a),t);return ss(i,c)}function kn(...r){return r.reduce((t,e)=>(typeof e=="string"&&!t.includes(e)?t.push(...Fn(e)):Array.isArray(e)?t.push(...pc(e)):typeof e=="object"&&t.push(...hc(e)),t),[]).join(" ")}function jn(r){return/^[a-zA-Z0-9-_]+$/.test(r)}function Fn(r){if(typeof r!="string")throw new Error("Class name must be a string");return r.trim().split(" ").reduce((t,e)=>{if(e.trim().length===0)return t;if(!jn(e))throw new Error(`${e} is not a valid CSS class name`);return t.push(e),t},[])}function pc(r){return r.map(Fn).flat()}function hc(r){return Object.entries(r).filter(([e,n])=>typeof n=="function"?n():!!n).map(([e,n])=>{const o=e.trim();if(!jn(o))throw new Error(`${o} is not a valid CSS class name`);return o})}var Mn={};Object.defineProperty(Mn,"__esModule",{value:!0});var dc=G,yc=function(){function r(t,e){this.dt=t,this.ins=e,this.type="throttle",this.out=null,this.id=null}return r.prototype._start=function(t){this.out=t,this.ins._add(this)},r.prototype._stop=function(){this.ins._remove(this),this.out=null,this.id=null},r.prototype.clearInterval=function(){var t=this.id;t!==null&&clearInterval(t),this.id=null},r.prototype._n=function(t){var e=this,n=this.out;!n||this.id||(n._n(t),this.id=setInterval(function(){e.clearInterval()},this.dt))},r.prototype._e=function(t){var e=this.out;!e||(this.clearInterval(),e._e(t))},r.prototype._c=function(){var t=this.out;!t||(this.clearInterval(),t._c())},r}();function mc(r){return function(e){return new dc.Stream(new yc(r,e))}}Mn.default=mc;var Ot={},vc=V&&V.__spreadArrays||function(){for(var r=0,t=0,e=arguments.length;t<e;t++)r+=arguments[t].length;for(var n=Array(r),o=0,t=0;t<e;t++)for(var i=arguments[t],a=0,c=i.length;a<c;a++,o++)n[o]=i[a];return n};Object.defineProperty(Ot,"__esModule",{value:!0});Ot.SampleCombineOperator=Ot.SampleCombineListener=void 0;var gc=G,rt={},Ln=function(){function r(t,e){this.i=t,this.p=e,e.ils[t]=this}return r.prototype._n=function(t){var e=this.p;e.out!==rt&&e.up(t,this.i)},r.prototype._e=function(t){this.p._e(t)},r.prototype._c=function(){this.p.down(this.i,this)},r}();Ot.SampleCombineListener=Ln;var Rn=function(){function r(t,e){this.type="sampleCombine",this.ins=t,this.others=e,this.out=rt,this.ils=[],this.Nn=0,this.vals=[]}return r.prototype._start=function(t){this.out=t;for(var e=this.others,n=this.Nn=e.length,o=this.vals=new Array(n),i=0;i<n;i++)o[i]=rt,e[i]._add(new Ln(i,this));this.ins._add(this)},r.prototype._stop=function(){var t=this.others,e=t.length,n=this.ils;this.ins._remove(this);for(var o=0;o<e;o++)t[o]._remove(n[o]);this.out=rt,this.vals=[],this.ils=[]},r.prototype._n=function(t){var e=this.out;e!==rt&&(this.Nn>0||e._n(vc([t],this.vals)))},r.prototype._e=function(t){var e=this.out;e!==rt&&e._e(t)},r.prototype._c=function(){var t=this.out;t!==rt&&t._c()},r.prototype.up=function(t,e){var n=this.vals[e];this.Nn>0&&n===rt&&this.Nn--,this.vals[e]=t},r.prototype.down=function(t,e){this.others[t]._remove(e)},r}();Ot.SampleCombineOperator=Rn;var Bn;Bn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(o){return new gc.Stream(new Rn(o,t))}};var _c=Ot.default=Bn;function bc(r){r.subscribe({next:t=>{const{selector:e,value:n}=t.data;if(t.type==="SET_VALUE")for(let o of document.querySelectorAll(e))o.value=n||"",o.dispatchEvent(new Event("change"));t.type==="FOCUS"&&document.querySelector(e).focus()}})}function wc(r){return r.addListener({next:({key:t,value:e})=>{try{localStorage.setItem(t,JSON.stringify(e))}catch(n){console.log(n)}}}),{get:(t,e,n=!1)=>{const o=window.localStorage.getItem(t);let i;try{i=o&&o!="null"?JSON.parse(o):e}catch{console.log("Error reading from local storage"),i=e}return n?r.filter(({key:a,value:c})=>t==a).map(({value:a})=>a).compose(Ct()).startWith(i):E.of(i)}}}var Un={};(function(r){(function(t){var e=document.location;function n(){return e.hash===""||e.hash==="#"}var o={mode:"modern",hash:e.hash,history:!1,check:function(){var u=e.hash;u!=this.hash&&(this.hash=u,this.onHashChanged())},fire:function(){this.mode==="modern"?this.history===!0?window.onpopstate():window.onhashchange():this.onHashChanged()},init:function(u,p){var l=this;this.history=p,i.listeners||(i.listeners=[]);function d(v){for(var b=0,S=i.listeners.length;b<S;b++)i.listeners[b](v)}if("onhashchange"in window&&(document.documentMode===void 0||document.documentMode>7))this.history===!0?setTimeout(function(){window.onpopstate=d},500):window.onhashchange=d,this.mode="modern";else{var y=document.createElement("iframe");y.id="state-frame",y.style.display="none",document.body.appendChild(y),this.writeFrame(""),"onpropertychange"in document&&"attachEvent"in document&&document.attachEvent("onpropertychange",function(){event.propertyName==="location"&&l.check()}),window.setInterval(function(){l.check()},50),this.onHashChanged=d,this.mode="legacy"}return i.listeners.push(u),this.mode},destroy:function(u){if(!(!i||!i.listeners))for(var p=i.listeners,l=p.length-1;l>=0;l--)p[l]===u&&p.splice(l,1)},setHash:function(u){return this.mode==="legacy"&&this.writeFrame(u),this.history===!0?(window.history.pushState({},document.title,u),this.fire()):e.hash=u[0]==="/"?u:"/"+u,this},writeFrame:function(u){var p=document.getElementById("state-frame"),l=p.contentDocument||p.contentWindow.document;l.open(),l.write("<script>_hash = '"+u+"'; onload = parent.listener.syncHash;<script>"),l.close()},syncHash:function(){var u=this._hash;return u!=e.hash&&(e.hash=u),this},onHashChanged:function(){}},i=t.Router=function(u){if(!(this instanceof i))return new i(u);this.params={},this.routes={},this.methods=["on","once","after","before"],this.scope=[],this._methods={},this._insert=this.insert,this.insert=this.insertEx,this.historySupport=(window.history!=null?window.history.pushState:null)!=null,this.configure(),this.mount(u||{})};i.prototype.init=function(u){var p=this,l;return this.handler=function(d){var y=d&&d.newURL||window.location.hash,v=p.history===!0?p.getPath():y.replace(/.*#/,"");p.dispatch("on",v.charAt(0)==="/"?v:"/"+v)},o.init(this.handler,this.history),this.history===!1?n()&&u?e.hash=u:n()||p.dispatch("on","/"+e.hash.replace(/^(#\/|#|\/)/,"")):(this.convert_hash_in_init?(l=n()&&u?u:n()?null:e.hash.replace(/^#/,""),l&&window.history.replaceState({},document.title,l)):l=this.getPath(),(l||this.run_in_init===!0)&&this.handler()),this},i.prototype.explode=function(){var u=this.history===!0?this.getPath():e.hash;return u.charAt(1)==="/"&&(u=u.slice(1)),u.slice(1,u.length).split("/")},i.prototype.setRoute=function(u,p,l){var d=this.explode();return typeof u=="number"&&typeof p=="string"?d[u]=p:typeof l=="string"?d.splice(u,p,s):d=[u],o.setHash(d.join("/")),d},i.prototype.insertEx=function(u,p,l,d){return u==="once"&&(u="on",l=function(y){var v=!1;return function(){if(!v)return v=!0,y.apply(this,arguments)}}(l)),this._insert(u,p,l,d)},i.prototype.getRoute=function(u){var p=u;if(typeof u=="number")p=this.explode()[u];else if(typeof u=="string"){var l=this.explode();p=l.indexOf(u)}else p=this.explode();return p},i.prototype.destroy=function(){return o.destroy(this.handler),this},i.prototype.getPath=function(){var u=window.location.pathname;return u.substr(0,1)!=="/"&&(u="/"+u),u};function a(u,p){for(var l=0;l<u.length;l+=1)if(p(u[l],l,u)===!1)return}function c(u){for(var p=[],l=0,d=u.length;l<d;l++)p=p.concat(u[l]);return p}function f(u,p,l){if(!u.length)return l();var d=0;(function y(){p(u[d],function(v){v||v===!1?(l(v),l=function(){}):(d+=1,d===u.length?l():y())})})()}function h(u,p,l){l=u;for(var d in p)if(p.hasOwnProperty(d)&&(l=p[d](u),l!==u))break;return l===u?"([._a-zA-Z0-9-%()]+)":l}function m(u,p){for(var l,d=0,y="";l=u.substr(d).match(/[^\w\d\- %@&]*\*[^\w\d\- %@&]*/);)d=l.index+l[0].length,l[0]=l[0].replace(/^\*/,"([_.()!\\ %@&a-zA-Z0-9-]+)"),y+=u.substr(0,l.index)+l[0];u=y+=u.substr(d);var v=u.match(/:([^\/]+)/ig),b,S;if(v){S=v.length;for(var w=0;w<S;w++)b=v[w],b.slice(0,2)==="::"?u=b.slice(1):u=u.replace(b,h(b,p))}return u}function g(u,p,S,w){var y=0,v=0,b=0,S=(S||"(").toString(),w=(w||")").toString(),$;for($=0;$<u.length;$++){var P=u[$];if(P.indexOf(S,y)>P.indexOf(w,y)||~P.indexOf(S,y)&&!~P.indexOf(w,y)||!~P.indexOf(S,y)&&~P.indexOf(w,y)){if(v=P.indexOf(S,y),b=P.indexOf(w,y),~v&&!~b||!~v&&~b){var x=u.slice(0,($||1)+1).join(p);u=[x].concat(u.slice(($||1)+1))}y=(b>v?b:v)+1,$=0}else y=0}return u}var _=/\?.*/;i.prototype.configure=function(u){u=u||{};for(var p=0;p<this.methods.length;p++)this._methods[this.methods[p]]=!0;return this.recurse=u.recurse||this.recurse||!1,this.async=u.async||!1,this.delimiter=u.delimiter||"/",this.strict=typeof u.strict=="undefined"?!0:u.strict,this.notfound=u.notfound,this.resource=u.resource,this.history=u.html5history&&this.historySupport||!1,this.run_in_init=this.history===!0&&u.run_handler_in_init!==!1,this.convert_hash_in_init=this.history===!0&&u.convert_hash_in_init!==!1,this.every={after:u.after||null,before:u.before||null,on:u.on||null},this},i.prototype.param=function(u,p){u[0]!==":"&&(u=":"+u);var l=new RegExp(u,"g");return this.params[u]=function(d){return d.replace(l,p.source||p)},this},i.prototype.on=i.prototype.route=function(u,p,l){var d=this;if(!l&&typeof p=="function"&&(l=p,p=u,u="on"),Array.isArray(p))return p.forEach(function(y){d.on(u,y,l)});if(p.source&&(p=p.source.replace(/\\\//ig,"/")),Array.isArray(u))return u.forEach(function(y){d.on(y.toLowerCase(),p,l)});p=p.split(new RegExp(this.delimiter)),p=g(p,this.delimiter),this.insert(u,this.scope.concat(p),l)},i.prototype.path=function(u,p){var l=this.scope.length;u.source&&(u=u.source.replace(/\\\//ig,"/")),u=u.split(new RegExp(this.delimiter)),u=g(u,this.delimiter),this.scope=this.scope.concat(u),p.call(this,this),this.scope.splice(l,u.length)},i.prototype.dispatch=function(u,p,l){var d=this,y=this.traverse(u,p.replace(_,""),this.routes,""),v=this._invoked,b;if(this._invoked=!0,!y||y.length===0)return this.last=[],typeof this.notfound=="function"&&this.invoke([this.notfound],{method:u,path:p},l),!1;this.recurse==="forward"&&(y=y.reverse());function S(){d.last=y.after,d.invoke(d.runlist(y),d,l)}return b=this.every&&this.every.after?[this.every.after].concat(this.last):[this.last],b&&b.length>0&&v?(this.async?this.invoke(b,this,S):(this.invoke(b,this),S()),!0):(S(),!0)},i.prototype.invoke=function(u,p,l){var d=this,y;this.async?(y=function(v,b){if(Array.isArray(v))return f(v,y,b);typeof v=="function"&&v.apply(p,(u.captures||[]).concat(b))},f(u,y,function(){l&&l.apply(p,arguments)})):(y=function(v){if(Array.isArray(v))return a(v,y);if(typeof v=="function")return v.apply(p,u.captures||[]);typeof v=="string"&&d.resource&&d.resource[v].apply(p,u.captures||[])},a(u,y))},i.prototype.traverse=function(u,p,l,d,y){var v=[],b,S,w,$;function P(N){if(!y)return N;function M(k){for(var R=[],Y=0;Y<k.length;Y++)R[Y]=Array.isArray(k[Y])?M(k[Y]):k[Y];return R}function F(k){for(var R=k.length-1;R>=0;R--)Array.isArray(k[R])?(F(k[R]),k[R].length===0&&k.splice(R,1)):y(k[R])||k.splice(R,1)}var j=M(N);return j.matched=N.matched,j.captures=N.captures,j.after=N.after.filter(y),F(j),j}if(p===this.delimiter&&l[u])return $=[[l.before,l[u]].filter(Boolean)],$.after=[l.after].filter(Boolean),$.matched=!0,$.captures=[],P($);for(var x in l)if(l.hasOwnProperty(x)&&(!this._methods[x]||this._methods[x]&&typeof l[x]=="object"&&!Array.isArray(l[x]))){if(b=S=d+this.delimiter+x,this.strict||(S+="["+this.delimiter+"]?"),w=p.match(new RegExp("^"+S)),!w)continue;if(w[0]&&w[0]==p&&l[x][u])return $=[[l[x].before,l[x][u]].filter(Boolean)],$.after=[l[x].after].filter(Boolean),$.matched=!0,$.captures=w.slice(1),this.recurse&&l===this.routes&&($.push([l.before,l.on].filter(Boolean)),$.after=$.after.concat([l.after].filter(Boolean))),P($);if($=this.traverse(u,p,l[x],b),$.matched)return $.length>0&&(v=v.concat($)),this.recurse&&(v.push([l[x].before,l[x].on].filter(Boolean)),$.after=$.after.concat([l[x].after].filter(Boolean)),l===this.routes&&(v.push([l.before,l.on].filter(Boolean)),$.after=$.after.concat([l.after].filter(Boolean)))),v.matched=!0,v.captures=$.captures,v.after=$.after,P(v)}return!1},i.prototype.insert=function(u,p,l,d){var y,v,b,S,w;if(p=p.filter(function($){return $&&$.length>0}),d=d||this.routes,w=p.shift(),/\:|\*/.test(w)&&!/\\d|\\w/.test(w)&&(w=m(w,this.params)),p.length>0)return d[w]=d[w]||{},this.insert(u,p,l,d[w]);if(!w&&!p.length&&d===this.routes){switch(y=typeof d[u],y){case"function":d[u]=[d[u],l];return;case"object":d[u].push(l);return;case"undefined":d[u]=l;return}return}if(v=typeof d[w],b=Array.isArray(d[w]),d[w]&&!b&&v=="object")switch(y=typeof d[w][u],y){case"function":d[w][u]=[d[w][u],l];return;case"object":d[w][u].push(l);return;case"undefined":d[w][u]=l;return}else if(v=="undefined"){S={},S[u]=l,d[w]=S;return}throw new Error("Invalid route context: "+v)},i.prototype.extend=function(u){var p=this,l=u.length,d;function y(v){p._methods[v]=!0,p[v]=function(){var b=arguments.length===1?[v,""]:[v];p.on.apply(p,b.concat(Array.prototype.slice.call(arguments)))}}for(d=0;d<l;d++)y(u[d])},i.prototype.runlist=function(u){var p=this.every&&this.every.before?[this.every.before].concat(c(u)):c(u);return this.every&&this.every.on&&p.push(this.every.on),p.captures=u.captures,p.source=u.source,p},i.prototype.mount=function(u,p){if(!u||typeof u!="object"||Array.isArray(u))return;var l=this;p=p||[],Array.isArray(p)||(p=p.split(l.delimiter));function d(v,b){var S=v,w=v.split(l.delimiter),$=typeof u[v],P=w[0]===""||!l._methods[w[0]],x=P?"on":S;if(P&&(S=S.slice((S.match(new RegExp("^"+l.delimiter))||[""])[0].length),w.shift()),P&&$==="object"&&!Array.isArray(u[v])){b=b.concat(w),l.mount(u[v],b);return}P&&(b=b.concat(S.split(l.delimiter)),b=g(b,l.delimiter)),l.insert(x,b,u[v])}for(var y in u)u.hasOwnProperty(y)&&d(y,p.slice(0))}})(r)})(Un);function Sc(r){const t=new Un.Router;t.configure({notfound:n=>{window.location.hash=""}}),t.init();const e=E.create({start:n=>{r.subscribe({next:o=>{o=Array.isArray(o)?o:[o];for(let i of o)t.on(i,a=>{n.next(i)})}})},stop:n=>{}});return q(e)}var Gt=Object.prototype.hasOwnProperty,Wn=Object.prototype.toString,Or=Object.defineProperty,Ar=Object.getOwnPropertyDescriptor,$r=function(t){return typeof Array.isArray=="function"?Array.isArray(t):Wn.call(t)==="[object Array]"},Er=function(t){if(!t||Wn.call(t)!=="[object Object]")return!1;var e=Gt.call(t,"constructor"),n=t.constructor&&t.constructor.prototype&&Gt.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!e&&!n)return!1;var o;for(o in t);return typeof o=="undefined"||Gt.call(t,o)},xr=function(t,e){Or&&e.name==="__proto__"?Or(t,e.name,{enumerable:!0,configurable:!0,value:e.newValue,writable:!0}):t[e.name]=e.newValue},Pr=function(t,e){if(e==="__proto__")if(Gt.call(t,e)){if(Ar)return Ar(t,e).value}else return;return t[e]},Gn=function r(){var t,e,n,o,i,a,c=arguments[0],f=1,h=arguments.length,m=!1;for(typeof c=="boolean"&&(m=c,c=arguments[1]||{},f=2),(c==null||typeof c!="object"&&typeof c!="function")&&(c={});f<h;++f)if(t=arguments[f],t!=null)for(e in t)n=Pr(c,e),o=Pr(t,e),c!==o&&(m&&o&&(Er(o)||(i=$r(o)))?(i?(i=!1,a=n&&$r(n)?n:[]):a=n&&Er(n)?n:{},xr(c,{name:e,newValue:r(m,a,o)})):typeof o!="undefined"&&xr(c,{name:e,newValue:o}));return c};const Oc=r=>r===void 0,Ac=r=>typeof r=="number",$c=r=>typeof r=="string",zn=r=>$c(r)||Ac(r),Ec=r=>Array.isArray(r),xc=r=>typeof r=="object"&&r!==null,Pc=r=>typeof r=="function",Nc=r=>xc(r)&&"sel"in r&&"data"in r&&"children"in r&&"text"in r,Cc={svg:1,circle:1,ellipse:1,line:1,polygon:1,polyline:1,rect:1,g:1,path:1,text:1},Ic=r=>r.sel in Cc,xe=(...r)=>Gn(!0,...r),Dc=(...r)=>Gn(!1,...r),qn=(r,t,e)=>{let n=e;for(let o=0;o<r.length;o++){const i=r[o];Ec(i)?n=qn(i,t,n):n=t(n,i)}return n},Me=(r,t)=>Object.keys(r).map(e=>t(e,r[e])).reduce((e,n)=>xe(e,n),{}),Tc=(r,t)=>Me(r,(e,n)=>{const o=e.indexOf("-");if(o>-1&&t[e.slice(0,o)]!==void 0){const i={[e.slice(o+1)]:n};return{[e.slice(0,o)]:i}}return{[e]:n}}),Nr=(r,t)=>Me(t,(e,n)=>e!==r?{[e]:n}:{}),kc=r=>zn(r)?{text:r,sel:void 0,data:void 0,children:void 0,elm:void 0,key:void 0}:void 0,Le=r=>Ic(r)?Dc(r,{data:Nr("props",xe(r.data,{ns:"http://www.w3.org/2000/svg",attrs:Nr("className",xe(r.data.props,{class:r.data.props?r.data.props.className:void 0}))}))},{children:Oc(r.children)?void 0:r.children.map(t=>Le(t))}):r,it={for:"attrs",role:"attrs",tabindex:"attrs","aria-*":"attrs",key:null},jc=(r,t)=>Me(r,(e,n)=>{const o={[e]:n};if(it[e]&&t[it[e]]!==void 0)return{[it[e]]:o};if(it[e]===null)return{};const i=Object.keys(it);for(let a=0;a<i.length;a++){const c=i[a];if(c.charAt(c.length-1)==="*"&&e.indexOf(c.slice(0,-1))===0&&t[it[c]]!==void 0)return{[it[c]]:o}}return t[e]!==void 0?{[t[e]?t[e]:e]:n}:t.props!==void 0?{props:o}:o}),Fc=(r,t)=>Le(jc(Tc(r,t),t)),Mc=r=>r.length>1||!zn(r[0])?void 0:r[0].toString(),Lc=r=>qn(r,(t,e)=>{const n=Nc(e)?e:kc(e);return t.push(n),t},[]),Rc={attrs:"",props:"",class:"",data:"dataset",style:"",hook:"",on:""},Bc=r=>(t,e,...n)=>{if(typeof t=="undefined"&&(t="UNDEFINED",cnosole.error("JSX Error: Capitalized HTML element without corresponding Sygnal factory.  Components with names where the first letter is capital MUST be defined or included at the parent component's file scope.")),Pc(t)){if(t.name==="Fragment")return t(e||{},n);const i=t;t=t.name||"sygnal-factory",e||(e={}),e.sygnalFactory=i}const o=Mc(n);return Le({sel:t,data:e?Fc(e,r):{},children:typeof o!="undefined"?void 0:Lc(n),text:o,elm:void 0,key:e?e.key:void 0})},L=Bc(Rc);function Uc(r,t,e,n,o){const i=t===void 0?void 0:t.key;return{sel:r,data:t,children:e,text:n,elm:o,key:i}}Uc("",{},[],void 0,void 0);typeof window!="undefined"&&window.requestAnimationFrame.bind(window);function Wc(r,t=""){const e=r.events("input"),n=r.events("keydown"),o=r.events("keyup");r.events("change");const i=r.events("focus"),a=r.events("blur"),c=E.merge(i,e).map(m=>m.target.value).startWith(t).remember(),f=n.filter(m=>m.keyCode===13).mapTo("enter"),h=n.filter(m=>m.keyCode===27).mapTo("escape");return{value$:c,input$:e,enter$:f,escape$:h,focus$:i,blur$:a,keydown$:n,keyup$:o}}var Gc=Pn({name:"TODO",model:{TOGGLE:r=>T(C({},r),{completed:!r.completed}),DESTROY:r=>{},EDIT_START:(r,t,e)=>{const n=".todo-"+r.id+" .edit";return e("SET_EDIT_VALUE",{selector:n,value:r.title}),e("FOCUS_EDIT_FIELD",{selector:n}),T(C({},r),{editing:!0,cachedTitle:r.title})},EDIT_DONE:(r,t)=>r.editing===!1?r:T(C({},r),{title:t,editing:!1,cachedTitle:""}),EDIT_CANCEL:(r,t,e)=>{const n=".todo-"+r.id+" .edit";return e("SET_EDIT_VALUE",{selector:n,value:r.cachedTitle}),T(C({},r),{title:r.cachedTitle,editing:!1,cachedTitle:""})},SET_EDIT_VALUE:{DOMFX:(r,t)=>({type:"SET_VALUE",data:t})},FOCUS_EDIT_FIELD:{DOMFX:(r,t)=>({type:"FOCUS",data:t})}},intent:({DOM:r})=>{const t=r.select(".toggle").events("click"),e=r.select(".todo label").events("dblclick"),n=r.select(".destroy").events("click"),o=r.select(".edit"),{value$:i,enter$:a,escape$:c,blur$:f}=Wc(o),h=E.merge(a,f).compose(_c(i)).map(([m,g])=>g);return{TOGGLE:t,DESTROY:n,EDIT_START:e,EDIT_DONE:h,EDIT_CANCEL:c}},view:({state:r})=>{const{id:t,hidden:e,completed:n,editing:o,title:i}=r;if(e)return;const a=kn("todo","todo-"+t,{completed:n,editing:o});return L("li",{className:a},L("div",{className:"view"},L("input",{className:"toggle",type:"checkbox",checked:!!n}),L("label",null,i),L("button",{className:"destroy"})),L("input",{className:"edit",type:"text",value:i}))}});const ve={all:r=>!0,active:r=>!r.completed,completed:r=>r.completed};var zc=Pn({name:"APP",initialState:{visibility:"all",todos:[]},calculated:{total:r=>r.todos.length,remaining:r=>r.todos.filter(t=>!t.completed).length,completed:r=>r.todos.filter(t=>t.completed).length,allDone:r=>r.todos.every(t=>t.completed)},model:{VISIBILITY:(r,t)=>T(C({},r),{visibility:t,todos:r.todos.map(e=>T(C({},e),{hidden:!ve[t](e)}))}),FROM_STORE:(r,t)=>T(C({},r),{todos:t}),NEW_TODO:(r,t,e)=>{const o={id:Date.now(),title:t,completed:!1};return e("CLEAR_FORM"),T(C({},r),{todos:[...r.todos,o]})},TOGGLE_ALL:r=>{const t=r.todos.every(n=>n.completed),e=r.todos.map(n=>T(C({},n),{completed:!t}));return T(C({},r),{todos:e})},CLEAR_COMPLETED:r=>{const t=r.todos.filter(e=>!e.completed);return T(C({},r),{todos:t})},CLEAR_FORM:{DOMFX:{type:"SET_VALUE",data:{selector:".new-todo"}}},ADD_ROUTE:{ROUTER:!0},TO_STORE:{STORE:(r,t)=>{const e=r.todos.map(({id:n,title:o,completed:i})=>({id:n,title:o,completed:i}));return{key:"todos",value:e}}}},intent:({STATE:r,DOM:t,ROUTER:e,STORE:n})=>{const o=n.get("todos",[]),i=t.select(".toggle-all").events("click"),a=t.select(".clear-completed").events("click"),c=t.select(".new-todo-form"),f=ic(c,{events:"submit"}).map(g=>g["new-todo"].trim()).filter(g=>g!==""),h=E.fromArray(Object.keys(ve)),m=r.stream.drop(1);return{VISIBILITY:e,FROM_STORE:o,NEW_TODO:f,TOGGLE_ALL:i,CLEAR_COMPLETED:a,ADD_ROUTE:h,TO_STORE:m}},view:({state:r})=>{const{visibility:t,total:e,remaining:n,completed:o,allDone:i}=r,a=Object.keys(ve),c=h=>h.charAt(0).toUpperCase()+h.slice(1),f=h=>L("li",null,L("a",{href:`#/${h}`,className:kn({selected:t==h})},c(h)));return L("section",{className:"todoapp"},L("header",{className:"header"},L("h1",null,"todos"),L("form",{className:"new-todo-form"},L("input",{className:"new-todo",name:"new-todo",autofocus:!0,autocomplete:"off",placeholder:"What needs to be done?"}))),e>0&&L("section",{className:"main"},L("input",{id:"toggle-all",className:"toggle-all",type:"checkbox",checked:i}),L("label",{for:"toggle-all"},"Mark all as complete"),L("ul",{className:"todo-list"},L("collection",{of:Gc,from:"todos"}))),e>0&&L("footer",{className:"footer"},L("span",{className:"todo-count"},L("strong",null,n)," ",n===1?"item":"items"," left"),L("ul",{className:"filters"},a.map(f)),o>0&&L("button",{className:"clear-completed"},"Clear completed")))}});const qc={DOMFX:bc,STORE:wc,ROUTER:Sc};lc(zc,qc);
