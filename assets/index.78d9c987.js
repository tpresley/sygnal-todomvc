var Zn=Object.defineProperty,Qn=Object.defineProperties;var to=Object.getOwnPropertyDescriptors;var dr=Object.getOwnPropertySymbols;var eo=Object.prototype.hasOwnProperty,ro=Object.prototype.propertyIsEnumerable;var hr=(e,t,r)=>t in e?Zn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,bt=(e,t)=>{for(var r in t||(t={}))eo.call(t,r)&&hr(e,r,t[r]);if(dr)for(var r of dr(t))ro.call(t,r)&&hr(e,r,t[r]);return e},_t=(e,t)=>Qn(e,to(t));const no=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const f of i.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&n(f)}).observe(document,{childList:!0,subtree:!0});function r(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerpolicy&&(i.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?i.credentials="include":o.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(o){if(o.ep)return;o.ep=!0;const i=r(o);fetch(o.href,i)}};no();var wt=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function Oe(e){if(e.__esModule)return e;var t=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(e).forEach(function(r){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})}),t}var St={},Br={},ft={},qr={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t;function t(r){var n,o=r.Symbol;if(typeof o=="function")if(o.observable)n=o.observable;else{n=o.for("https://github.com/benlesh/symbol-observable");try{o.observable=n}catch{}}else n="@@observable";return n}})(qr);var oo=qr,vr=Object.prototype.toString,Wr=function(t){var r=vr.call(t),n=r==="[object Arguments]";return n||(n=r!=="[object Array]"&&t!==null&&typeof t=="object"&&typeof t.length=="number"&&t.length>=0&&vr.call(t.callee)==="[object Function]"),n},Ur;if(!Object.keys){var fe=Object.prototype.hasOwnProperty,yr=Object.prototype.toString,io=Wr,mr=Object.prototype.propertyIsEnumerable,ao=!mr.call({toString:null},"toString"),so=mr.call(function(){},"prototype"),ce=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],Ce=function(e){var t=e.constructor;return t&&t.prototype===e},uo={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},lo=function(){if(typeof window=="undefined")return!1;for(var e in window)try{if(!uo["$"+e]&&fe.call(window,e)&&window[e]!==null&&typeof window[e]=="object")try{Ce(window[e])}catch{return!0}}catch{return!0}return!1}(),fo=function(e){if(typeof window=="undefined"||!lo)return Ce(e);try{return Ce(e)}catch{return!1}};Ur=function(t){var r=t!==null&&typeof t=="object",n=yr.call(t)==="[object Function]",o=io(t),i=r&&yr.call(t)==="[object String]",f=[];if(!r&&!n&&!o)throw new TypeError("Object.keys called on a non-object");var p=so&&n;if(i&&t.length>0&&!fe.call(t,0))for(var g=0;g<t.length;++g)f.push(String(g));if(o&&t.length>0)for(var A=0;A<t.length;++A)f.push(String(A));else for(var E in t)!(p&&E==="prototype")&&fe.call(t,E)&&f.push(String(E));if(ao)for(var x=fo(t),T=0;T<ce.length;++T)!(x&&ce[T]==="constructor")&&fe.call(t,ce[T])&&f.push(ce[T]);return f}}var co=Ur,po=Array.prototype.slice,ho=Wr,gr=Object.keys,de=gr?function(t){return gr(t)}:co,br=Object.keys;de.shim=function(){if(Object.keys){var t=function(){var r=Object.keys(arguments);return r&&r.length===arguments.length}(1,2);t||(Object.keys=function(n){return ho(n)?br(po.call(n)):br(n)})}else Object.keys=de;return Object.keys||de};var vo=de,yo=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var t={},r=Symbol("test"),n=Object(r);if(typeof r=="string"||Object.prototype.toString.call(r)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var o=42;t[r]=o;for(r in t)return!1;if(typeof Object.keys=="function"&&Object.keys(t).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(t).length!==0)return!1;var i=Object.getOwnPropertySymbols(t);if(i.length!==1||i[0]!==r||!Object.prototype.propertyIsEnumerable.call(t,r))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var f=Object.getOwnPropertyDescriptor(t,r);if(f.value!==o||f.enumerable!==!0)return!1}return!0},_r=typeof Symbol!="undefined"&&Symbol,mo=yo,go=function(){return typeof _r!="function"||typeof Symbol!="function"||typeof _r("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:mo()},bo="Function.prototype.bind called on incompatible ",Ne=Array.prototype.slice,_o=Object.prototype.toString,wo="[object Function]",So=function(t){var r=this;if(typeof r!="function"||_o.call(r)!==wo)throw new TypeError(bo+r);for(var n=Ne.call(arguments,1),o,i=function(){if(this instanceof o){var E=r.apply(this,n.concat(Ne.call(arguments)));return Object(E)===E?E:this}else return r.apply(t,n.concat(Ne.call(arguments)))},f=Math.max(0,r.length-n.length),p=[],g=0;g<f;g++)p.push("$"+g);if(o=Function("binder","return function ("+p.join(",")+"){ return binder.apply(this,arguments); }")(i),r.prototype){var A=function(){};A.prototype=r.prototype,o.prototype=new A,A.prototype=null}return o},Oo=So,Gr=Function.prototype.bind||Oo,Ao=Gr,xo=Ao.call(Function.call,Object.prototype.hasOwnProperty),J,ae=SyntaxError,zr=Function,Kt=TypeError,Ie=function(e){try{return zr('"use strict"; return ('+e+").constructor;")()}catch{}},qt=Object.getOwnPropertyDescriptor;if(qt)try{qt({},"")}catch{qt=null}var Me=function(){throw new Kt},Eo=qt?function(){try{return arguments.callee,Me}catch{try{return qt(arguments,"callee").get}catch{return Me}}}():Me,zt=go(),Nt=Object.getPrototypeOf||function(e){return e.__proto__},Ht={},Po=typeof Uint8Array=="undefined"?J:Nt(Uint8Array),Jt={"%AggregateError%":typeof AggregateError=="undefined"?J:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer=="undefined"?J:ArrayBuffer,"%ArrayIteratorPrototype%":zt?Nt([][Symbol.iterator]()):J,"%AsyncFromSyncIteratorPrototype%":J,"%AsyncFunction%":Ht,"%AsyncGenerator%":Ht,"%AsyncGeneratorFunction%":Ht,"%AsyncIteratorPrototype%":Ht,"%Atomics%":typeof Atomics=="undefined"?J:Atomics,"%BigInt%":typeof BigInt=="undefined"?J:BigInt,"%Boolean%":Boolean,"%DataView%":typeof DataView=="undefined"?J:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array=="undefined"?J:Float32Array,"%Float64Array%":typeof Float64Array=="undefined"?J:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry=="undefined"?J:FinalizationRegistry,"%Function%":zr,"%GeneratorFunction%":Ht,"%Int8Array%":typeof Int8Array=="undefined"?J:Int8Array,"%Int16Array%":typeof Int16Array=="undefined"?J:Int16Array,"%Int32Array%":typeof Int32Array=="undefined"?J:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":zt?Nt(Nt([][Symbol.iterator]())):J,"%JSON%":typeof JSON=="object"?JSON:J,"%Map%":typeof Map=="undefined"?J:Map,"%MapIteratorPrototype%":typeof Map=="undefined"||!zt?J:Nt(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise=="undefined"?J:Promise,"%Proxy%":typeof Proxy=="undefined"?J:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect=="undefined"?J:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set=="undefined"?J:Set,"%SetIteratorPrototype%":typeof Set=="undefined"||!zt?J:Nt(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer=="undefined"?J:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":zt?Nt(""[Symbol.iterator]()):J,"%Symbol%":zt?Symbol:J,"%SyntaxError%":ae,"%ThrowTypeError%":Eo,"%TypedArray%":Po,"%TypeError%":Kt,"%Uint8Array%":typeof Uint8Array=="undefined"?J:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray=="undefined"?J:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array=="undefined"?J:Uint16Array,"%Uint32Array%":typeof Uint32Array=="undefined"?J:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap=="undefined"?J:WeakMap,"%WeakRef%":typeof WeakRef=="undefined"?J:WeakRef,"%WeakSet%":typeof WeakSet=="undefined"?J:WeakSet},Do=function e(t){var r;if(t==="%AsyncFunction%")r=Ie("async function () {}");else if(t==="%GeneratorFunction%")r=Ie("function* () {}");else if(t==="%AsyncGeneratorFunction%")r=Ie("async function* () {}");else if(t==="%AsyncGenerator%"){var n=e("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if(t==="%AsyncIteratorPrototype%"){var o=e("%AsyncGenerator%");o&&(r=Nt(o.prototype))}return Jt[t]=r,r},wr={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Ae=Gr,ge=xo,$o=Ae.call(Function.call,Array.prototype.concat),To=Ae.call(Function.apply,Array.prototype.splice),Sr=Ae.call(Function.call,String.prototype.replace),be=Ae.call(Function.call,String.prototype.slice),Co=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,No=/\\(\\)?/g,Io=function(t){var r=be(t,0,1),n=be(t,-1);if(r==="%"&&n!=="%")throw new ae("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&r!=="%")throw new ae("invalid intrinsic syntax, expected opening `%`");var o=[];return Sr(t,Co,function(i,f,p,g){o[o.length]=p?Sr(g,No,"$1"):f||i}),o},Mo=function(t,r){var n=t,o;if(ge(wr,n)&&(o=wr[n],n="%"+o[0]+"%"),ge(Jt,n)){var i=Jt[n];if(i===Ht&&(i=Do(n)),typeof i=="undefined"&&!r)throw new Kt("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:o,name:n,value:i}}throw new ae("intrinsic "+t+" does not exist!")},ko=function(t,r){if(typeof t!="string"||t.length===0)throw new Kt("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new Kt('"allowMissing" argument must be a boolean');var n=Io(t),o=n.length>0?n[0]:"",i=Mo("%"+o+"%",r),f=i.name,p=i.value,g=!1,A=i.alias;A&&(o=A[0],To(n,$o([0,1],A)));for(var E=1,x=!0;E<n.length;E+=1){var T=n[E],l=be(T,0,1),u=be(T,-1);if((l==='"'||l==="'"||l==="`"||u==='"'||u==="'"||u==="`")&&l!==u)throw new ae("property names with quotes must have matching quotes");if((T==="constructor"||!x)&&(g=!0),o+="."+T,f="%"+o+"%",ge(Jt,f))p=Jt[f];else if(p!=null){if(!(T in p)){if(!r)throw new Kt("base intrinsic for "+t+" exists, but the property is not available.");return}if(qt&&E+1>=n.length){var a=qt(p,T);x=!!a,x&&"get"in a&&!("originalValue"in a.get)?p=a.get:p=p[T]}else x=ge(p,T),p=p[T];x&&!g&&(Jt[f]=p)}}return p},jo=ko,We=jo("%Object.defineProperty%",!0),Ue=function(){if(We)try{return We({},"a",{value:1}),!0}catch{return!1}return!1};Ue.hasArrayLengthDefineBug=function(){if(!Ue())return null;try{return We([],"length",{value:1}).length!==1}catch{return!0}};var Ro=Ue,Lo=vo,Fo=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",Bo=Object.prototype.toString,qo=Array.prototype.concat,Hr=Object.defineProperty,Wo=function(e){return typeof e=="function"&&Bo.call(e)==="[object Function]"},Uo=Ro(),Kr=Hr&&Uo,Go=function(e,t,r,n){t in e&&(!Wo(n)||!n())||(Kr?Hr(e,t,{configurable:!0,enumerable:!1,value:r,writable:!0}):e[t]=r)},Jr=function(e,t){var r=arguments.length>2?arguments[2]:{},n=Lo(t);Fo&&(n=qo.call(n,Object.getOwnPropertySymbols(t)));for(var o=0;o<n.length;o+=1)Go(e,n[o],t[n[o]],r[n[o]])};Jr.supportsDescriptors=!!Kr;var Yr=Jr,oe={exports:{}};typeof self!="undefined"?oe.exports=self:typeof window!="undefined"?oe.exports=window:oe.exports=Function("return this")();var zo=oe.exports,Vr=function(){return typeof wt!="object"||!wt||wt.Math!==Math||wt.Array!==Array?zo:wt},Ho=Yr,Ko=Vr,Jo=function(){var t=Ko();if(Ho.supportsDescriptors){var r=Object.getOwnPropertyDescriptor(t,"globalThis");(!r||r.configurable&&(r.enumerable||!r.writable||globalThis!==t))&&Object.defineProperty(t,"globalThis",{configurable:!0,enumerable:!1,value:t,writable:!0})}else(typeof globalThis!="object"||globalThis!==t)&&(t.globalThis=t);return t},Yo=Yr,Vo=oe.exports,Xr=Vr,Xo=Jo,Zo=Xr(),Zr=function(){return Zo};Yo(Zr,{getPolyfill:Xr,implementation:Vo,shim:Xo});var Qo=Zr,ti=wt&&wt.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)o.hasOwnProperty(i)&&(n[i]=o[i])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(ft,"__esModule",{value:!0});ft.NO_IL=Xe=ft.NO=ft.MemoryStream=xe=ft.Stream=void 0;var ei=oo,ri=Qo,pe=ei.default(ri.getPolyfill()),$={},Xe=ft.NO=$;function ht(){}function he(e){for(var t=e.length,r=Array(t),n=0;n<t;++n)r[n]=e[n];return r}function ni(e,t){return function(n){return e(n)&&t(n)}}function Ze(e,t,r){try{return e.f(t)}catch(n){return r._e(n),$}}var Bt={_n:ht,_e:ht,_c:ht};ft.NO_IL=Bt;function Or(e){e._start=function(r){r.next=r._n,r.error=r._e,r.complete=r._c,this.start(r)},e._stop=e.stop}var oi=function(){function e(t,r){this._stream=t,this._listener=r}return e.prototype.unsubscribe=function(){this._stream._remove(this._listener)},e}(),ii=function(){function e(t){this._listener=t}return e.prototype.next=function(t){this._listener._n(t)},e.prototype.error=function(t){this._listener._e(t)},e.prototype.complete=function(){this._listener._c()},e}(),ai=function(){function e(t){this.type="fromObservable",this.ins=t,this.active=!1}return e.prototype._start=function(t){this.out=t,this.active=!0,this._sub=this.ins.subscribe(new ii(t)),this.active||this._sub.unsubscribe()},e.prototype._stop=function(){this._sub&&this._sub.unsubscribe(),this.active=!1},e}(),si=function(){function e(t){this.type="merge",this.insArr=t,this.out=$,this.ac=0}return e.prototype._start=function(t){this.out=t;var r=this.insArr,n=r.length;this.ac=n;for(var o=0;o<n;o++)r[o]._add(this)},e.prototype._stop=function(){for(var t=this.insArr,r=t.length,n=0;n<r;n++)t[n]._remove(this);this.out=$},e.prototype._n=function(t){var r=this.out;r!==$&&r._n(t)},e.prototype._e=function(t){var r=this.out;r!==$&&r._e(t)},e.prototype._c=function(){if(--this.ac<=0){var t=this.out;if(t===$)return;t._c()}},e}(),ui=function(){function e(t,r,n){this.i=t,this.out=r,this.p=n,n.ils.push(this)}return e.prototype._n=function(t){var r=this.p,n=this.out;if(n!==$&&r.up(t,this.i)){var o=he(r.vals);n._n(o)}},e.prototype._e=function(t){var r=this.out;r!==$&&r._e(t)},e.prototype._c=function(){var t=this.p;t.out!==$&&--t.Nc===0&&t.out._c()},e}(),li=function(){function e(t){this.type="combine",this.insArr=t,this.out=$,this.ils=[],this.Nc=this.Nn=0,this.vals=[]}return e.prototype.up=function(t,r){var n=this.vals[r],o=this.Nn?n===$?--this.Nn:this.Nn:0;return this.vals[r]=t,o===0},e.prototype._start=function(t){this.out=t;var r=this.insArr,n=this.Nc=this.Nn=r.length,o=this.vals=new Array(n);if(n===0)t._n([]),t._c();else for(var i=0;i<n;i++)o[i]=$,r[i]._add(new ui(i,t,this))},e.prototype._stop=function(){for(var t=this.insArr,r=t.length,n=this.ils,o=0;o<r;o++)t[o]._remove(n[o]);this.out=$,this.ils=[],this.vals=[]},e}(),fi=function(){function e(t){this.type="fromArray",this.a=t}return e.prototype._start=function(t){for(var r=this.a,n=0,o=r.length;n<o;n++)t._n(r[n]);t._c()},e.prototype._stop=function(){},e}(),ci=function(){function e(t){this.type="fromPromise",this.on=!1,this.p=t}return e.prototype._start=function(t){var r=this;this.on=!0,this.p.then(function(n){r.on&&(t._n(n),t._c())},function(n){t._e(n)}).then(ht,function(n){setTimeout(function(){throw n})})},e.prototype._stop=function(){this.on=!1},e}(),pi=function(){function e(t){this.type="periodic",this.period=t,this.intervalID=-1,this.i=0}return e.prototype._start=function(t){var r=this;function n(){t._n(r.i++)}this.intervalID=setInterval(n,this.period)},e.prototype._stop=function(){this.intervalID!==-1&&clearInterval(this.intervalID),this.intervalID=-1,this.i=0},e}(),di=function(){function e(t,r){this.type="debug",this.ins=t,this.out=$,this.s=ht,this.l="",typeof r=="string"?this.l=r:typeof r=="function"&&(this.s=r)}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=$},e.prototype._n=function(t){var r=this.out;if(r!==$){var n=this.s,o=this.l;if(n!==ht)try{n(t)}catch(i){r._e(i)}else o?console.log(o+":",t):console.log(t);r._n(t)}},e.prototype._e=function(t){var r=this.out;r!==$&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==$&&t._c()},e}(),hi=function(){function e(t,r){this.type="drop",this.ins=r,this.out=$,this.max=t,this.dropped=0}return e.prototype._start=function(t){this.out=t,this.dropped=0,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=$},e.prototype._n=function(t){var r=this.out;r!==$&&this.dropped++>=this.max&&r._n(t)},e.prototype._e=function(t){var r=this.out;r!==$&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==$&&t._c()},e}(),vi=function(){function e(t,r){this.out=t,this.op=r}return e.prototype._n=function(){this.op.end()},e.prototype._e=function(t){this.out._e(t)},e.prototype._c=function(){this.op.end()},e}(),yi=function(){function e(t,r){this.type="endWhen",this.ins=r,this.out=$,this.o=t,this.oil=Bt}return e.prototype._start=function(t){this.out=t,this.o._add(this.oil=new vi(t,this)),this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.o._remove(this.oil),this.out=$,this.oil=Bt},e.prototype.end=function(){var t=this.out;t!==$&&t._c()},e.prototype._n=function(t){var r=this.out;r!==$&&r._n(t)},e.prototype._e=function(t){var r=this.out;r!==$&&r._e(t)},e.prototype._c=function(){this.end()},e}(),ke=function(){function e(t,r){this.type="filter",this.ins=r,this.out=$,this.f=t}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=$},e.prototype._n=function(t){var r=this.out;if(r!==$){var n=Ze(this,t,r);n===$||!n||r._n(t)}},e.prototype._e=function(t){var r=this.out;r!==$&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==$&&t._c()},e}(),mi=function(){function e(t,r){this.out=t,this.op=r}return e.prototype._n=function(t){this.out._n(t)},e.prototype._e=function(t){this.out._e(t)},e.prototype._c=function(){this.op.inner=$,this.op.less()},e}(),gi=function(){function e(t){this.type="flatten",this.ins=t,this.out=$,this.open=!0,this.inner=$,this.il=Bt}return e.prototype._start=function(t){this.out=t,this.open=!0,this.inner=$,this.il=Bt,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.inner!==$&&this.inner._remove(this.il),this.out=$,this.open=!0,this.inner=$,this.il=Bt},e.prototype.less=function(){var t=this.out;t!==$&&!this.open&&this.inner===$&&t._c()},e.prototype._n=function(t){var r=this.out;if(r!==$){var n=this,o=n.inner,i=n.il;o!==$&&i!==Bt&&o._remove(i),(this.inner=t)._add(this.il=new mi(r,this))}},e.prototype._e=function(t){var r=this.out;r!==$&&r._e(t)},e.prototype._c=function(){this.open=!1,this.less()},e}(),bi=function(){function e(t,r,n){var o=this;this.type="fold",this.ins=n,this.out=$,this.f=function(i){return t(o.acc,i)},this.acc=this.seed=r}return e.prototype._start=function(t){this.out=t,this.acc=this.seed,t._n(this.acc),this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=$,this.acc=this.seed},e.prototype._n=function(t){var r=this.out;if(r!==$){var n=Ze(this,t,r);n!==$&&r._n(this.acc=n)}},e.prototype._e=function(t){var r=this.out;r!==$&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==$&&t._c()},e}(),_i=function(){function e(t){this.type="last",this.ins=t,this.out=$,this.has=!1,this.val=$}return e.prototype._start=function(t){this.out=t,this.has=!1,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=$,this.val=$},e.prototype._n=function(t){this.has=!0,this.val=t},e.prototype._e=function(t){var r=this.out;r!==$&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==$&&(this.has?(t._n(this.val),t._c()):t._e(new Error("last() failed because input stream completed")))},e}(),wi=function(){function e(t,r){this.type="map",this.ins=r,this.out=$,this.f=t}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=$},e.prototype._n=function(t){var r=this.out;if(r!==$){var n=Ze(this,t,r);n!==$&&r._n(n)}},e.prototype._e=function(t){var r=this.out;r!==$&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==$&&t._c()},e}(),Si=function(){function e(t){this.type="remember",this.ins=t,this.out=$}return e.prototype._start=function(t){this.out=t,this.ins._add(t)},e.prototype._stop=function(){this.ins._remove(this.out),this.out=$},e}(),Oi=function(){function e(t,r){this.type="replaceError",this.ins=r,this.out=$,this.f=t}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=$},e.prototype._n=function(t){var r=this.out;r!==$&&r._n(t)},e.prototype._e=function(t){var r=this.out;if(r!==$)try{this.ins._remove(this),(this.ins=this.f(t))._add(this)}catch(n){r._e(n)}},e.prototype._c=function(){var t=this.out;t!==$&&t._c()},e}(),Ai=function(){function e(t,r){this.type="startWith",this.ins=t,this.out=$,this.val=r}return e.prototype._start=function(t){this.out=t,this.out._n(this.val),this.ins._add(t)},e.prototype._stop=function(){this.ins._remove(this.out),this.out=$},e}(),xi=function(){function e(t,r){this.type="take",this.ins=r,this.out=$,this.max=t,this.taken=0}return e.prototype._start=function(t){this.out=t,this.taken=0,this.max<=0?t._c():this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=$},e.prototype._n=function(t){var r=this.out;if(r!==$){var n=++this.taken;n<this.max?r._n(t):n===this.max&&(r._n(t),r._c())}},e.prototype._e=function(t){var r=this.out;r!==$&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==$&&t._c()},e}(),Qe=function(){function e(t){this._prod=t||$,this._ils=[],this._stopID=$,this._dl=$,this._d=!1,this._target=null,this._err=$}return e.prototype._n=function(t){var r=this._ils,n=r.length;if(this._d&&this._dl._n(t),n==1)r[0]._n(t);else{if(n==0)return;for(var o=he(r),i=0;i<n;i++)o[i]._n(t)}},e.prototype._e=function(t){if(this._err===$){this._err=t;var r=this._ils,n=r.length;if(this._x(),this._d&&this._dl._e(t),n==1)r[0]._e(t);else{if(n==0)return;for(var o=he(r),i=0;i<n;i++)o[i]._e(t)}if(!this._d&&n==0)throw this._err}},e.prototype._c=function(){var t=this._ils,r=t.length;if(this._x(),this._d&&this._dl._c(),r==1)t[0]._c();else{if(r==0)return;for(var n=he(t),o=0;o<r;o++)n[o]._c()}},e.prototype._x=function(){this._ils.length!==0&&(this._prod!==$&&this._prod._stop(),this._err=$,this._ils=[])},e.prototype._stopNow=function(){this._prod._stop(),this._err=$,this._stopID=$},e.prototype._add=function(t){var r=this._target;if(r)return r._add(t);var n=this._ils;if(n.push(t),!(n.length>1))if(this._stopID!==$)clearTimeout(this._stopID),this._stopID=$;else{var o=this._prod;o!==$&&o._start(this)}},e.prototype._remove=function(t){var r=this,n=this._target;if(n)return n._remove(t);var o=this._ils,i=o.indexOf(t);i>-1&&(o.splice(i,1),this._prod!==$&&o.length<=0?(this._err=$,this._stopID=setTimeout(function(){return r._stopNow()})):o.length===1&&this._pruneCycles())},e.prototype._pruneCycles=function(){this._hasNoSinks(this,[])&&this._remove(this._ils[0])},e.prototype._hasNoSinks=function(t,r){if(r.indexOf(t)!==-1)return!0;if(t.out===this)return!0;if(t.out&&t.out!==$)return this._hasNoSinks(t.out,r.concat(t));if(t._ils){for(var n=0,o=t._ils.length;n<o;n++)if(!this._hasNoSinks(t._ils[n],r.concat(t)))return!1;return!0}else return!1},e.prototype.ctor=function(){return this instanceof Tt?Tt:e},e.prototype.addListener=function(t){t._n=t.next||ht,t._e=t.error||ht,t._c=t.complete||ht,this._add(t)},e.prototype.removeListener=function(t){this._remove(t)},e.prototype.subscribe=function(t){return this.addListener(t),new oi(this,t)},e.prototype[pe]=function(){return this},e.create=function(t){if(t){if(typeof t.start!="function"||typeof t.stop!="function")throw new Error("producer requires both start and stop functions");Or(t)}return new e(t)},e.createWithMemory=function(t){return t&&Or(t),new Tt(t)},e.never=function(){return new e({_start:ht,_stop:ht})},e.empty=function(){return new e({_start:function(t){t._c()},_stop:ht})},e.throw=function(t){return new e({_start:function(r){r._e(t)},_stop:ht})},e.from=function(t){if(typeof t[pe]=="function")return e.fromObservable(t);if(typeof t.then=="function")return e.fromPromise(t);if(Array.isArray(t))return e.fromArray(t);throw new TypeError("Type of input to from() must be an Array, Promise, or Observable")},e.of=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return e.fromArray(t)},e.fromArray=function(t){return new e(new fi(t))},e.fromPromise=function(t){return new e(new ci(t))},e.fromObservable=function(t){if(t.endWhen!==void 0)return t;var r=typeof t[pe]=="function"?t[pe]():t;return new e(new ai(r))},e.periodic=function(t){return new e(new pi(t))},e.prototype._map=function(t){return new(this.ctor())(new wi(t,this))},e.prototype.map=function(t){return this._map(t)},e.prototype.mapTo=function(t){var r=this.map(function(){return t}),n=r._prod;return n.type="mapTo",r},e.prototype.filter=function(t){var r=this._prod;return r instanceof ke?new e(new ke(ni(r.f,t),r.ins)):new e(new ke(t,this))},e.prototype.take=function(t){return new(this.ctor())(new xi(t,this))},e.prototype.drop=function(t){return new e(new hi(t,this))},e.prototype.last=function(){return new e(new _i(this))},e.prototype.startWith=function(t){return new Tt(new Ai(this,t))},e.prototype.endWhen=function(t){return new(this.ctor())(new yi(t,this))},e.prototype.fold=function(t,r){return new Tt(new bi(t,r,this))},e.prototype.replaceError=function(t){return new(this.ctor())(new Oi(t,this))},e.prototype.flatten=function(){return new e(new gi(this))},e.prototype.compose=function(t){return t(this)},e.prototype.remember=function(){return new Tt(new Si(this))},e.prototype.debug=function(t){return new(this.ctor())(new di(this,t))},e.prototype.imitate=function(t){if(t instanceof Tt)throw new Error("A MemoryStream was given to imitate(), but it only supports a Stream. Read more about this restriction here: https://github.com/staltz/xstream#faq");this._target=t;for(var r=this._ils,n=r.length,o=0;o<n;o++)t._add(r[o]);this._ils=[]},e.prototype.shamefullySendNext=function(t){this._n(t)},e.prototype.shamefullySendError=function(t){this._e(t)},e.prototype.shamefullySendComplete=function(){this._c()},e.prototype.setDebugListener=function(t){t?(this._d=!0,t._n=t.next||ht,t._e=t.error||ht,t._c=t.complete||ht,this._dl=t):(this._d=!1,this._dl=$)},e.merge=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return new e(new si(r))},e.combine=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return new e(new li(r))},e}(),xe=ft.Stream=Qe,Tt=function(e){ti(t,e);function t(r){var n=e.call(this,r)||this;return n._has=!1,n}return t.prototype._n=function(r){this._v=r,this._has=!0,e.prototype._n.call(this,r)},t.prototype._add=function(r){var n=this._target;if(n)return n._add(r);var o=this._ils;if(o.push(r),o.length>1){this._has&&r._n(this._v);return}if(this._stopID!==$)this._has&&r._n(this._v),clearTimeout(this._stopID),this._stopID=$;else if(this._has)r._n(this._v);else{var i=this._prod;i!==$&&i._start(this)}},t.prototype._stopNow=function(){this._has=!1,e.prototype._stopNow.call(this)},t.prototype._x=function(){this._has=!1,e.prototype._x.call(this)},t.prototype.map=function(r){return this._map(r)},t.prototype.mapTo=function(r){return e.prototype.mapTo.call(this,r)},t.prototype.take=function(r){return e.prototype.take.call(this,r)},t.prototype.endWhen=function(r){return e.prototype.endWhen.call(this,r)},t.prototype.replaceError=function(r){return e.prototype.replaceError.call(this,r)},t.prototype.remember=function(){return this},t.prototype.debug=function(r){return e.prototype.debug.call(this,r)},t}(Qe);ft.MemoryStream=Tt;var Ei=Qe,et=ft.default=Ei,Ee={};Object.defineProperty(Ee,"__esModule",{value:!0});function Qr(){var e;return typeof window!="undefined"?e=window:typeof wt!="undefined"?e=wt:e=this,e.Cyclejs=e.Cyclejs||{},e=e.Cyclejs,e.adaptStream=e.adaptStream||function(t){return t},e}function Pi(e){Qr().adaptStream=e}Ee.setAdapt=Pi;function Di(e){return Qr().adaptStream(e)}var pt=Ee.adapt=Di;function $i(e,t){if(typeof e!="function")throw new Error("First argument given to isolate() must be a 'dataflowComponent' function");if(t===null)throw new Error("Second argument given to isolate() must not be null")}function Ti(e,t,r){var n={};return Object.keys(e).forEach(function(o){if(typeof t=="string"){n[o]=t;return}var i=t[o];if(typeof i!="undefined"){n[o]=i;return}var f=t["*"];if(typeof f!="undefined"){n[o]=f;return}n[o]=r}),n}function Ci(e,t){var r={};for(var n in e){var o=e[n];e.hasOwnProperty(n)&&o&&t[n]!==null&&typeof o.isolateSource=="function"?r[n]=o.isolateSource(o,t[n]):e.hasOwnProperty(n)&&(r[n]=e[n])}return r}function Ni(e,t,r){var n={};for(var o in t){var i=e[o],f=t[o];t.hasOwnProperty(o)&&i&&r[o]!==null&&typeof i.isolateSink=="function"?n[o]=pt(i.isolateSink(et.fromObservable(f),r[o])):t.hasOwnProperty(o)&&(n[o]=t[o])}return n}var tn=0;function Ge(){return"cycle"+ ++tn}function se(e,t){t===void 0&&(t=Ge()),$i(e,t);var r=typeof t=="object"?Ge():"",n=typeof t=="string"||typeof t=="object"?t:t.toString();return function(i){for(var f=[],p=1;p<arguments.length;p++)f[p-1]=arguments[p];var g=Ti(i,n,r),A=Ci(i,g),E=e.apply(void 0,[A].concat(f)),x=Ni(i,E,g);return x}}se.reset=function(){return tn=0};function Ii(e){return e===void 0&&(e=Ge()),function(t){return se(t,e)}}var Mi=Object.freeze(Object.defineProperty({__proto__:null,default:se,toIsolated:Ii},Symbol.toStringTag,{value:"Module"})),en=Oe(Mi),tr={},Xt={};Object.defineProperty(Xt,"__esModule",{value:!0});Xt.DropRepeatsOperator=void 0;var ki=ft,je={},rn=function(){function e(t,r){this.ins=t,this.type="dropRepeats",this.out=null,this.v=je,this.isEq=r||function(n,o){return n===o}}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=null,this.v=je},e.prototype._n=function(t){var r=this.out;if(!!r){var n=this.v;n!==je&&this.isEq(t,n)||(this.v=t,r._n(t))}},e.prototype._e=function(t){var r=this.out;!r||r._e(t)},e.prototype._c=function(){var t=this.out;!t||t._c()},e}();Xt.DropRepeatsOperator=rn;function ji(e){return e===void 0&&(e=void 0),function(r){return new ki.Stream(new rn(r,e))}}var nn=Xt.default=ji,ze=globalThis&&globalThis.__assign||function(){return ze=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},ze.apply(this,arguments)};function Ri(e,t,r){if(r===e[t])return e;var n=parseInt(t);return typeof r=="undefined"?e.filter(function(o,i){return i!==n}):e.map(function(o,i){return i===n?r:o})}function on(e){return typeof e=="string"||typeof e=="number"?function(r){if(typeof r!="undefined")return r[e]}:e.get}function Li(e){return typeof e=="string"||typeof e=="number"?function(r,n){var o,i;return Array.isArray(r)?Ri(r,e,n):typeof r=="undefined"?(o={},o[e]=n,o):ze({},r,(i={},i[e]=n,i))}:e.set}function an(e,t){return e.select(t)}function sn(e,t){var r=on(t),n=Li(t);return e.map(function(o){return function(f){var p=r(f),g=o(p);return p===g?f:n(f,g)}})}var un=function(){function e(t,r){this.isolateSource=an,this.isolateSink=sn,this._stream=t.filter(function(n){return typeof n!="undefined"}).compose(nn()).remember(),this._name=r,this.stream=pt(this._stream),this._stream._isCycleSource=r}return e.prototype.select=function(t){var r=on(t);return new e(this._stream.map(r),this._name)},e}(),Fi=function(){function e(t,r,n){this.ins=n,this.out=t,this.p=r}return e.prototype._n=function(t){this.p;var r=this.out;r!==null&&r._n(t)},e.prototype._e=function(t){var r=this.out;r!==null&&r._e(t)},e.prototype._c=function(){},e}(),Bi=function(){function e(t,r){this.type="pickMerge",this.ins=r,this.out=null,this.sel=t,this.ils=new Map,this.inst=null}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this);var t=this.ils;t.forEach(function(r,n){r.ins._remove(r),r.ins=null,r.out=null,t.delete(n)}),t.clear(),this.out=null,this.ils=new Map,this.inst=null},e.prototype._n=function(t){this.inst=t;for(var r=t.arr,n=this.ils,o=this.out,i=this.sel,f=r.length,p=0;p<f;++p){var g=r[p],A=g._key,E=et.fromObservable(g[i]||et.never());n.has(A)||(n.set(A,new Fi(o,this,E)),E._add(n.get(A)))}n.forEach(function(x,T){(!t.dict.has(T)||!t.dict.get(T))&&(x.ins._remove(x),x.ins=null,x.out=null,n.delete(T))})},e.prototype._e=function(t){var r=this.out;r!==null&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==null&&t._c()},e}();function qi(e){return function(r){return new xe(new Bi(e,r))}}var Wi=function(){function e(t,r,n,o){this.key=t,this.out=r,this.p=n,this.val=Xe,this.ins=o}return e.prototype._n=function(t){this.p;var r=this.out;this.val=t,r!==null&&this.p.up()},e.prototype._e=function(t){var r=this.out;r!==null&&r._e(t)},e.prototype._c=function(){},e}(),Ui=function(){function e(t,r){this.type="combine",this.ins=r,this.sel=t,this.out=null,this.ils=new Map,this.inst=null}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this);var t=this.ils;t.forEach(function(r){r.ins._remove(r),r.ins=null,r.out=null,r.val=null}),t.clear(),this.out=null,this.ils=new Map,this.inst=null},e.prototype.up=function(){for(var t=this.inst.arr,r=t.length,n=this.ils,o=Array(r),i=0;i<r;++i){var f=t[i],p=f._key;if(!n.has(p))return;var g=n.get(p).val;if(g===Xe)return;o[i]=g}this.out._n(o)},e.prototype._n=function(t){this.inst=t;var r=t.arr,n=this.ils,o=this.out,i=this.sel,f=t.dict,p=r.length,g=!1;if(n.forEach(function(l,u){f.has(u)||(l.ins._remove(l),l.ins=null,l.out=null,l.val=null,n.delete(u),g=!0)}),p===0){o._n([]);return}for(var A=0;A<p;++A){var E=r[A],x=E._key;if(!E[i])throw new Error("pickCombine found an undefined child sink stream");var T=et.fromObservable(E[i]);n.has(x)||(n.set(x,new Wi(x,o,this,T)),T._add(n.get(x)))}g&&this.up()},e.prototype._e=function(t){var r=this.out;r!==null&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==null&&t._c()},e}();function Gi(e){return function(r){return new xe(new Ui(e,r))}}var _e=globalThis&&globalThis.__assign||function(){return _e=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},_e.apply(this,arguments)},ln=function(){function e(t){this._instances$=t}return e.prototype.pickMerge=function(t){return pt(this._instances$.compose(qi(t)))},e.prototype.pickCombine=function(t){return pt(this._instances$.compose(Gi(t)))},e}();function zi(e){return{"*":null}}function Hi(e,t){return{get:function(r){if(typeof r!="undefined"){for(var n=0,o=r.length;n<o;++n)if(""+e(r[n],n)===t)return r[n];return}},set:function(r,n){return typeof r=="undefined"?[n]:typeof n=="undefined"?r.filter(function(o,i){return""+e(o,i)!==t}):r.map(function(o,i){return""+e(o,i)===t?n:o})}}}var Ki={get:function(e){return e},set:function(e,t){return t}};function Ji(e){return function(r){var n=e.channel||"state",o=e.itemKey,i=e.itemScope||zi,f=et.fromObservable(r[n].stream),p=f.fold(function(g,A){var E,x,T,l,u=g.dict;if(Array.isArray(A)){for(var a=Array(A.length),v=new Set,c=0,h=A.length;c<h;++c){var d=""+(o?o(A[c],c):c);if(v.add(d),u.has(d))a[c]=u.get(d);else{var m=o?Hi(o,d):""+c,b=i(d),y=typeof b=="string"?(E={"*":b},E[n]=m,E):_e({},b,(x={},x[n]=m,x)),_=e.itemFactory?e.itemFactory(A[c],c):e.item,O=se(_,y)(r);u.set(d,O),a[c]=O}a[c]._key=d}return u.forEach(function(N,I){v.has(I)||u.delete(I)}),v.clear(),{dict:u,arr:a}}else{u.clear();var d=""+(o?o(A,0):"this"),m=Ki,b=i(d),y=typeof b=="string"?(T={"*":b},T[n]=m,T):_e({},b,(l={},l[n]=m,l)),_=e.itemFactory?e.itemFactory(A,0):e.item,O=se(_,y)(r);return u.set(d,O),{dict:u,arr:[O]}}},{dict:new Map,arr:[]});return e.collectSinks(new ln(p))}}var er={};Object.defineProperty(er,"__esModule",{value:!0});var Yi=ft,Vi=function(){function e(t){this.streams=t,this.type="concat",this.out=null,this.i=0}return e.prototype._start=function(t){this.out=t,this.streams[this.i]._add(this)},e.prototype._stop=function(){var t=this.streams;this.i<t.length&&t[this.i]._remove(this),this.i=0,this.out=null},e.prototype._n=function(t){var r=this.out;!r||r._n(t)},e.prototype._e=function(t){var r=this.out;!r||r._e(t)},e.prototype._c=function(){var t=this.out;if(!!t){var r=this.streams;r[this.i]._remove(this),++this.i<r.length?r[this.i]._add(this):t._c()}},e}();function Xi(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new Yi.Stream(new Vi(e))}var fn=er.default=Xi,cn={};Object.defineProperty(cn,"__esModule",{value:!0});function Zi(){return typeof queueMicrotask!="undefined"?queueMicrotask:typeof setImmediate!="undefined"?setImmediate:typeof process!="undefined"?process.nextTick:setTimeout}var pn=cn.default=Zi,Re=pn();function Qi(e,t){return t===void 0&&(t="state"),function(n){var o=et.create(),i=o.fold(function(A,E){return E(A)},void 0).drop(1),f=n;f[t]=new un(i,t);var p=e(f);if(p[t]){var g=fn(et.fromObservable(p[t]),et.never());g.subscribe({next:function(A){return Re(function(){return o._n(A)})},error:function(A){return Re(function(){return o._e(A)})},complete:function(){return Re(function(){return o._c()})}})}return p}}var ta=Object.freeze(Object.defineProperty({__proto__:null,StateSource:un,isolateSource:an,isolateSink:sn,Instances:ln,withState:Qi,makeCollection:Ji},Symbol.toStringTag,{value:"Module"})),rr=Oe(ta);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=x;var t=n(en),r=rr;function n(l){return l&&l.__esModule?l:{default:l}}function o(l,u,a){return u in l?Object.defineProperty(l,u,{value:a,enumerable:!0,configurable:!0,writable:!0}):l[u]=a,l}function i(l,u){return E(l)||A(l,u)||p(l,u)||f()}function f(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function p(l,u){if(!!l){if(typeof l=="string")return g(l,u);var a=Object.prototype.toString.call(l).slice(8,-1);if(a==="Object"&&l.constructor&&(a=l.constructor.name),a==="Map"||a==="Set")return Array.from(l);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return g(l,u)}}function g(l,u){(u==null||u>l.length)&&(u=l.length);for(var a=0,v=new Array(u);a<u;a++)v[a]=l[a];return v}function A(l,u){var a=l==null?null:typeof Symbol!="undefined"&&l[Symbol.iterator]||l["@@iterator"];if(a!=null){var v=[],c=!0,h=!1,d,m;try{for(a=a.call(l);!(c=(d=a.next()).done)&&(v.push(d.value),!(u&&v.length===u));c=!0);}catch(b){h=!0,m=b}finally{try{!c&&a.return!=null&&a.return()}finally{if(h)throw m}}return v}}function E(l){if(Array.isArray(l))return l}function x(l,u){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:["DOM"],v=arguments.length>3&&arguments[3]!==void 0?arguments[3]:["EVENTS"],c=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"STATE";return function(h){var d={item:l,itemKey:function(y){return y.id},itemScope:function(y){return y},channel:c,collectSinks:function(y){return Object.entries(h).reduce(function(_,O){var N=i(O,2),I=N[0];return N[1],a.includes(I)?_[I]=y.pickCombine(I):_[I]=y.pickMerge(I),_},{})}},m=o({},c,u);return v.forEach(function(b){return m[b]=null}),a.forEach(function(b){return m[b]=null}),T(d,m,h)}}function T(l,u,a){return(0,t.default)((0,r.makeCollection)(l),u)(a)}})(tr);var nr={};Object.defineProperty(nr,"__esModule",{value:!0});var ea=ft,ra=function(){function e(t,r){this.dt=t,this.ins=r,this.type="delay",this.out=null}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=null},e.prototype._n=function(t){var r=this.out;if(!!r)var n=setInterval(function(){r._n(t),clearInterval(n)},this.dt)},e.prototype._e=function(t){var r=this.out;if(!!r)var n=setInterval(function(){r._e(t),clearInterval(n)},this.dt)},e.prototype._c=function(){var t=this.out;if(!!t)var r=setInterval(function(){t._c(),clearInterval(r)},this.dt)},e}();function na(e){return function(r){return new ea.Stream(new ra(e,r))}}nr.default=na;var or={};Object.defineProperty(or,"__esModule",{value:!0});var re=ft,oa=function(){function e(t,r){this.dt=t,this.ins=r,this.type="debounce",this.out=null,this.id=null,this.t=re.NO}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=null,this.clearInterval()},e.prototype.clearInterval=function(){var t=this.id;t!==null&&clearInterval(t),this.id=null},e.prototype._n=function(t){var r=this,n=this.out;!n||(this.clearInterval(),this.t=t,this.id=setInterval(function(){r.clearInterval(),n._n(t),r.t=re.NO},this.dt))},e.prototype._e=function(t){var r=this.out;!r||(this.clearInterval(),r._e(t))},e.prototype._c=function(){var t=this.out;!t||(this.clearInterval(),this.t!=re.NO&&t._n(this.t),this.t=re.NO,t._c())},e}();function ia(e){return function(r){return new re.Stream(new oa(e,r))}}or.default=ia;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ABORT=void 0,e.default=It;var t=x(en),r=x(tr),n=rr,o=E(ft),i=x(nr),f=x(er),p=x(or),g=x(Xt);function A(S){if(typeof WeakMap!="function")return null;var C=new WeakMap,w=new WeakMap;return(A=function(M){return M?w:C})(S)}function E(S,C){if(!C&&S&&S.__esModule)return S;if(S===null||L(S)!=="object"&&typeof S!="function")return{default:S};var w=A(C);if(w&&w.has(S))return w.get(S);var D={},M=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var k in S)if(k!=="default"&&Object.prototype.hasOwnProperty.call(S,k)){var F=M?Object.getOwnPropertyDescriptor(S,k):null;F&&(F.get||F.set)?Object.defineProperty(D,k,F):D[k]=S[k]}return D.default=S,w&&w.set(S,D),D}function x(S){return S&&S.__esModule?S:{default:S}}function T(S){return a(S)||u(S)||h(S)||l()}function l(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function u(S){if(typeof Symbol!="undefined"&&S[Symbol.iterator]!=null||S["@@iterator"]!=null)return Array.from(S)}function a(S){if(Array.isArray(S))return d(S)}function v(S,C){return b(S)||m(S,C)||h(S,C)||c()}function c(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function h(S,C){if(!!S){if(typeof S=="string")return d(S,C);var w=Object.prototype.toString.call(S).slice(8,-1);if(w==="Object"&&S.constructor&&(w=S.constructor.name),w==="Map"||w==="Set")return Array.from(S);if(w==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(w))return d(S,C)}}function d(S,C){(C==null||C>S.length)&&(C=S.length);for(var w=0,D=new Array(C);w<C;w++)D[w]=S[w];return D}function m(S,C){var w=S==null?null:typeof Symbol!="undefined"&&S[Symbol.iterator]||S["@@iterator"];if(w!=null){var D=[],M=!0,k=!1,F,K;try{for(w=w.call(S);!(M=(F=w.next()).done)&&(D.push(F.value),!(C&&D.length===C));M=!0);}catch(j){k=!0,K=j}finally{try{!M&&w.return!=null&&w.return()}finally{if(k)throw K}}return D}}function b(S){if(Array.isArray(S))return S}function y(S,C){if(!(S instanceof C))throw new TypeError("Cannot call a class as a function")}function _(S,C){for(var w=0;w<C.length;w++){var D=C[w];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(S,D.key,D)}}function O(S,C,w){return C&&_(S.prototype,C),w&&_(S,w),Object.defineProperty(S,"prototype",{writable:!1}),S}function N(S,C){var w=Object.keys(S);if(Object.getOwnPropertySymbols){var D=Object.getOwnPropertySymbols(S);C&&(D=D.filter(function(M){return Object.getOwnPropertyDescriptor(S,M).enumerable})),w.push.apply(w,D)}return w}function I(S){for(var C=1;C<arguments.length;C++){var w=arguments[C]!=null?arguments[C]:{};C%2?N(Object(w),!0).forEach(function(D){B(S,D,w[D])}):Object.getOwnPropertyDescriptors?Object.defineProperties(S,Object.getOwnPropertyDescriptors(w)):N(Object(w)).forEach(function(D){Object.defineProperty(S,D,Object.getOwnPropertyDescriptor(w,D))})}return S}function B(S,C,w){return C in S?Object.defineProperty(S,C,{value:w,enumerable:!0,configurable:!0,writable:!0}):S[C]=w,S}function L(S){return L=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(C){return typeof C}:function(C){return C&&typeof Symbol=="function"&&C.constructor===Symbol&&C!==Symbol.prototype?"symbol":typeof C},L(S)}var G=typeof window!="undefined"&&window||process&&process.env||{},q="request",nt="BOOTSTRAP",ut="INITIALIZE",dt="HYDRATE",mt=!0,Ot="~#~#~ABORT~#~#~";e.ABORT=Ot;function It(S){var C=S.name,w=S.sources,D=S.isolateOpts,M=S.stateSourceName,k=M===void 0?"STATE":M;if(w&&L(w)!=="object")throw new Error("Sources must be a Cycle.js sources object:",C);var F;typeof D=="string"?F=B({},k,D):D===!0?F={}:F=D;var K=typeof w=="undefined";if(L(F)=="object"){var j=function(U){var R=I(I({},S),{},{sources:U});return new Et(R).sinks};return K?(0,t.default)(j,F):(0,t.default)(j,F)(w)}else return K?function(W){return new Et(I(I({},S),{},{sources:W})).sinks}:new Et(S).sinks}var Et=function(){function S(C){var w=this,D=C.name,M=D===void 0?"NO NAME":D,k=C.sources,F=C.intent,K=C.request,j=C.model,W=C.response,U=C.view,R=C.children,z=R===void 0?{}:R,H=C.components,X=H===void 0?{}:H,rt=C.initialState,st=C.calculated,at=C.storeCalculatedInState,Y=at===void 0?!0:at,Q=C.DOMSourceName,tt=Q===void 0?"DOM":Q,V=C.stateSourceName,lt=V===void 0?"STATE":V,ct=C.requestSourceName,Z=ct===void 0?"HTTP":ct;if(y(this,S),!k||L(k)!="object")throw new Error("Missing or invalid sources");this.name=M,this.sources=k,this.intent=F,this.request=K,this.model=j,this.response=W,this.view=U,this.children=z,this.components=X,this.initialState=rt,this.calculated=st,this.storeCalculatedInState=Y,this.DOMSourceName=tt,this.stateSourceName=lt,this.requestSourceName=Z,this.sourceNames=Object.keys(k),this.isSubComponent=this.sourceNames.includes("props$");var gt=k[lt]&&k[lt].stream;gt&&(this.currentState=rt||{},this.sources[this.stateSourceName]=new n.StateSource(gt.map(function(Pt){return w.currentState=Pt,Pt}))),mt&&typeof this.intent=="undefined"&&typeof this.model=="undefined"&&(this.initialState=rt||!0,this.intent=function(Pt){return{__NOOP_ACTION__:o.default.never()}},this.model={__NOOP_ACTION__:function(Wt){return Wt}}),mt=!1,this.log=Zt(M),this.initIntent$(),this.initAction$(),this.initResponse$(),this.initState(),this.initModel$(),this.initSendResponse$(),this.initChildren$(),this.initSubComponentSink$(),this.initVdom$(),this.initSinks()}return O(S,[{key:"initIntent$",value:function(){if(!!this.intent){if(typeof this.intent!="function")throw new Error("Intent must be a function");if(this.intent$=this.intent(this.sources),!(this.intent$ instanceof o.Stream)&&L(this.intent$)!="object")throw new Error("Intent must return either an action$ stream or map of event streams")}}},{key:"initAction$",value:function(){var w=this.sources&&this.sources[this.requestSourceName]||null;if(!this.intent$){this.action$=o.default.never();return}var D;if(this.intent$ instanceof o.Stream)D=this.intent$;else{var M=Object.entries(this.intent$).map(function(W){var U=v(W,2),R=U[0],z=U[1];return z.map(function(H){return{type:R,data:H}})});D=o.default.merge.apply(o.default,[o.default.never()].concat(T(M)))}var k=D instanceof o.Stream?D:D.apply&&D(this.sources)||o.default.never(),F=(0,f.default)(o.default.of({type:nt}),k).compose((0,i.default)(10)),K;w&&typeof w.select=="function"?K=w.select("initial").flatten():K=o.default.never();var j=K.map(function(W){return{type:dt,data:W}});this.action$=o.default.merge(F,j).compose(this.log(function(W){var U=W.type;return"Action triggered: <".concat(U,">")}))}},{key:"initResponse$",value:function(){var w=this;if(typeof this.request!="undefined"){if(L(this.request)!="object")throw new Error("The request parameter must be an object");var D=this.sources[this.requestSourceName],M=Object.entries(this.request),k=M.reduce(function(F,K){var j=v(K,2),W=j[0],U=j[1],R=W.toLowerCase();if(typeof D[R]!="function")throw new Error("Invalid method in request object:",W);var z=Object.entries(U),H=z.reduce(function(rt,st){var at=v(st,2),Y=at[0],Q=at[1],tt="[".concat(R.toUpperCase(),"]:").concat(Y||"none"),V=L(Q);if(V==="undefined")throw new Error("Action for '".concat(Y,"' route in request object not specified"));if(V!=="string"&&V!=="function")throw new Error("Invalid action for '".concat(Y,"' route: expecting string or function"));var lt=V==="function"?"[ FUNCTION ]":"< ".concat(Q," >");console.log("[".concat(w.name,"] Adding ").concat(w.requestSourceName," route:"),R.toUpperCase(),"'".concat(Y,"' <").concat(lt,">"));var ct=D[R](Y).compose((0,g.default)(function(Z,gt){return Z.id==gt.id})).map(function(Z){if(!Z||!Z.id)throw new Error("No id found in request: ".concat(tt));try{var gt=Z.id,Pt=Z.params,Wt=Z.body,De=Z.cookies,Ut=V==="function"?"FUNCTION":Q,fr={params:Pt,body:Wt,cookies:De,req:Z},$t={type:Ut,data:Wt,req:Z,_reqId:gt,_action:Ut},Qt=new Date().toISOString(),Mt=Z.get?Z.get("host"):"0.0.0.0";if(console.log("".concat(Qt," ").concat(Mt," ").concat(Z.method," ").concat(Z.url)),G.DEBUG&&w.action$.setDebugListener({next:function(Dt){var Gt=Dt.type;return console.log("[".concat(w.name,"] Action from ").concat(w.requestSourceName," request: <").concat(Gt,">"))}}),V==="function"){var kt=w.addCalculated(w.currentState),jt=Q(kt,Z);return o.default.of(I(I({},$t),{},{data:jt}))}else{w.action$.shamefullySendNext($t);var $e=Object.entries(w.sources),Te=$e.reduce(function(Rt,Dt){var Gt=v(Dt,2),cr=Gt[0],te=Gt[1];if(!te||typeof te[q]!="function")return Rt;var Lt=te[q](gt);return[].concat(T(Rt),[Lt])},[]);return o.default.merge.apply(o.default,T(Te))}}catch(Rt){console.error(Rt)}}).flatten();return[].concat(T(rt),[ct])},[]),X=o.default.merge.apply(o.default,T(H));return[].concat(T(F),[X])},[]);if(this.response$=o.default.merge.apply(o.default,T(k)).compose(this.log(function(F){return F._action?"[".concat(w.requestSourceName,"] response data received for Action: <").concat(F._action,">"):"[".concat(w.requestSourceName,"] response data received from FUNCTION")})),typeof this.response!="undefined"&&typeof this.response$=="undefined")throw new Error("Cannot have a response parameter without a request parameter")}}},{key:"initState",value:function(){var w=this;this.model!=null&&(this.model[ut]===void 0?this.model[ut]=B({},this.stateSourceName,function(D,M){return I({},w.addCalculated(M))}):Object.keys(this.model[ut]).forEach(function(D){D!==w.stateSourceName&&(console.warn("".concat(ut," can only be used with the ").concat(w.stateSourceName," source... disregarding ").concat(D)),delete w.model[ut][D])}))}},{key:"initModel$",value:function(){var w=this;if(typeof this.model=="undefined"){this.model$=this.sourceNames.reduce(function(U,R){return U[R]=o.default.never(),U},{});return}var D={type:ut,data:this.initialState},M=this.initialState?(0,f.default)(o.default.of(D),this.action$).compose((0,i.default)(0)):this.action$,k=this.makeOnAction(M,!0,this.action$),F=this.makeOnAction(this.action$,!1,this.action$),K=Object.entries(this.model),j={};K.forEach(function(U){var R=v(U,2),z=R[0],H=R[1];if(typeof H=="function"&&(H=B({},w.stateSourceName,H)),L(H)!=="object")throw new Error("Entry for each action must be an object: ".concat(w.name," ").concat(z));var X=Object.entries(H);X.forEach(function(rt){var st=v(rt,2),at=st[0],Y=st[1],Q=at==w.stateSourceName,tt=Q?k:F,V=tt(z,Y),lt=V.compose(w.log(function(ct){if(Q)return"State reducer added: <".concat(z,">");var Z=ct&&(ct.type||ct.command||ct.name||ct.key||Array.isArray(ct)&&"Array"||ct);return"Data sent to [".concat(at,"]: <").concat(z,"> ").concat(Z)}));Array.isArray(j[at])?j[at].push(lt):j[at]=[lt]})});var W=Object.entries(j).reduce(function(U,R){var z=v(R,2),H=z[0],X=z[1];return U[H]=o.default.merge.apply(o.default,[o.default.never()].concat(T(X))),U},{});this.model$=W}},{key:"initSendResponse$",value:function(){var w=this,D=L(this.response);if(D!="function"&&D!="undefined")throw new Error("The response parameter must be a function");if(D=="undefined"){this.response$&&this.response$.subscribe({next:this.log(function(j){var W=j._reqId,U=j._action;return"Unhandled response for request: ".concat(U," ").concat(W)})}),this.sendResponse$=o.default.never();return}var M={select:function(W){return typeof W=="undefined"?w.response$:(Array.isArray(W)||(W=[W]),w.response$.filter(function(U){var R=U._action;return W.length>0?R==="FUNCTION"||W.includes(R):!0}))}},k=this.response(M);if(L(k)!="object")throw new Error("The response function must return an object");var F=Object.entries(k),K=F.reduce(function(j,W){var U=v(W,2),R=U[0],z=U[1],H=z.map(function(X){var rt=X._reqId,st=X._action,at=X.data;if(!rt)throw new Error("No request id found for response for: ".concat(R));return{_reqId:rt,_action:st,command:R,data:at}});return[].concat(T(j),[H])},[]);this.sendResponse$=o.default.merge.apply(o.default,T(K)).compose(this.log(function(j){j._reqId;var W=j._action;return"[".concat(w.requestSourceName,"] response sent for: <").concat(W,">")}))}},{key:"initChildren$",value:function(){var w=this,D=this.sourceNames.reduce(function(M,k){return k==w.DOMSourceName?M[k]={}:M[k]=[],M},{});this.children$=Object.entries(this.children).reduce(function(M,k){var F=v(k,2),K=F[0],j=F[1],W=j(w.sources);return w.sourceNames.forEach(function(U){U==w.DOMSourceName?M[U][K]=W[U]:M[U].push(W[U])}),M},D)}},{key:"initSubComponentSink$",value:function(){var w=this,D=o.default.create({start:function(k){w.newSubComponentSinks=k.next.bind(k)},stop:function(k){}});D.subscribe({next:function(k){return k}}),this.subComponentSink$=D.filter(function(M){return Object.keys(M).length>0})}},{key:"initVdom$",value:function(){var w=this;if(typeof this.view!="function"){this.vdom$=o.default.of(null);return}var D=this.sources[this.stateSourceName],M=I({},this.children$[this.DOMSourceName]),k=D&&D.isolateSource(D,{get:function(z){return w.addCalculated(z)}}),F=k&&k.stream||o.default.never();M.state=F,M[this.stateSourceName]=F,this.sources.props$&&(M.props=this.sources.props$),this.sources.children$&&(M.children=this.sources.children$);var K=Object.entries(M).reduce(function(R,z){var H=v(z,2),X=H[0],rt=H[1];return R.names.push(X),R.streams.push(rt),R},{names:[],streams:[]}),j=o.default.combine.apply(o.default,T(K.streams)),W=j.compose((0,p.default)(1)).map(function(R){return K.names.reduce(function(z,H,X){return z[H]=R[X],z},{})}),U=Object.keys(this.components);this.vdom$=W.fold(function(R,z){var H=w.view(z)||{sel:"div",data:{},children:[]},X=sr(H,U),rt=Object.entries(X),st={"::ROOT::":H};if(rt.length===0)return st;var at=rt.reduce(function(Y,Q){var tt=v(Q,2),V=tt[0],lt=tt[1],ct=lt.sel,Z=lt.data,gt=Z.props||{},Pt=lt.children||[],Wt=Z.isCollection||!1,De=Z.isSwitchable||!1;if(R[V]){var Ut=R[V];return Y[V]=Ut,Ut.props$.shamefullySendNext(gt),Ut.children$.shamefullySendNext(Pt),Y}var fr=w.components[ct],$t=o.default.create().startWith(gt),Qt=o.default.create().startWith(Pt),Mt,kt;if(Wt){var jt;Mt=new n.StateSource($t.map(function(Lt){return Lt.value}).remember());var $e=I(I({},w.sources),{},(jt={},B(jt,w.stateSourceName,Mt),B(jt,"props$",$t),B(jt,"children$",Qt),jt)),Te=w.components[Z.component],Rt={get:function(Ft){return Ft},set:function(Ft){return Ft}};kt=(0,r.default)(Te,Rt)($e)}else if(!De){var Dt,Gt=function(Ft){var le=Ft.state;if(typeof le=="undefined")return Ft;if(L(le)!=="object")return le;var pr=I({},Ft);return delete pr.state,I(I({},pr),le)};Mt=new n.StateSource($t.map(Gt));var cr=I(I({},w.sources),{},(Dt={},B(Dt,w.stateSourceName,Mt),B(Dt,"props$",$t),B(Dt,"children$",Qt),Dt));kt=fr(cr)}var te=kt[w.DOMSourceName];return kt[w.DOMSourceName]=Mt.stream.map(function(Lt){return te.compose((0,p.default)(10))}).flatten(),Y[V]={sink$:kt,props$:$t,children$:Qt},Y},st);return at},{}).map(function(R){var z=R["::ROOT::"],H=[],X=Object.entries(R).filter(function(Y){var Q=v(Y,1),tt=Q[0];return tt!=="::ROOT::"});if(X.length===0)return o.default.of(z);var rt=X.reduce(function(Y,Q){var tt=v(Q,2);tt[0];var V=tt[1];return Object.entries(V.sink$).forEach(function(lt){var ct=v(lt,2),Z=ct[0],gt=ct[1];Y[Z]||(Y[Z]=[]),Z!==w.DOMSourceName&&Y[Z].push(gt)}),Y},{}),st=Object.entries(rt).reduce(function(Y,Q){var tt=v(Q,2),V=tt[0],lt=tt[1];return Y[V]=o.default.merge.apply(o.default,T(lt)),Y},{});w.newSubComponentSinks(st);var at=X.map(function(Y){var Q=v(Y,2),tt=Q[0],V=Q[1];return H.push(tt),V.sink$[w.DOMSourceName]});return at.length===0?o.default.of(z):o.default.combine.apply(o.default,T(at)).map(function(Y){var Q=Y.reduce(function(V,lt,ct){return V[H[ct]]=lt,V},{}),tt=ur(z,Q,U);return tt})}).flatten().filter(function(R){return!!R}).remember().compose(this.log("View Rendered"))}},{key:"initSinks",value:function(){var w=this;this.sinks=this.sourceNames.reduce(function(D,M){if(M==w.DOMSourceName)return D;var k=w.subComponentSink$?w.subComponentSink$.map(function(F){return F[M]}).filter(function(F){return!!F}).flatten():o.default.never();return M===w.stateSourceName?D[M]=o.default.merge.apply(o.default,[w.model$[M]||o.default.never(),w.sources[w.stateSourceName].stream.filter(function(F){return!1})].concat(T(w.children$[M]))):D[M]=o.default.merge.apply(o.default,[w.model$[M]||o.default.never(),k].concat(T(w.children$[M]))),D},{}),this.sinks[this.DOMSourceName]=this.vdom$,this.sinks[this.requestSourceName]=o.default.merge(this.sendResponse$,this.sinks[this.requestSourceName])}},{key:"makeOnAction",value:function(w){var D=this,M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,k=arguments.length>2?arguments[2]:void 0;return k=k||w,function(F,K){var j=w.filter(function(R){var z=R.type;return z==F}),W;if(typeof K=="function")W=j.map(function(R){var z=function(Q,tt){var V=R._reqId||R.req&&R.req.id,lt=V?L(tt)=="object"?I(I({},tt),{},{_reqId:V,_action:F}):{data:tt,_reqId:V,_action:F}:tt;setTimeout(function(){k.shamefullySendNext({type:Q,data:lt})},10)},H=R.data;if(H&&H.data&&H._reqId&&(H=H.data),M)return function(Y){var Q=D.isSubComponent?D.currentState:Y,tt=D.addCalculated(Q),V=K(tt,H,z,R.req);return V==Ot?Q:D.cleanupCalculated(V)};var X=D.addCalculated(D.currentState),rt=K(X,H,z,R.req),st=L(rt),at=R._reqId||R.req&&R.req.id;if(["string","number","boolean","function"].includes(st))return rt;if(st=="object")return I(I({},rt),{},{_reqId:at,_action:F});if(st=="undefined")return console.warn("'undefined' value sent to ".concat(F)),rt;throw new Error("Invalid reducer type for ".concat(F," ").concat(st))}).filter(function(R){return R!=Ot});else if(K===void 0||K===!0)W=j.map(function(R){var z=R.data;return z});else{var U=K;W=j.mapTo(U)}return W}}},{key:"addCalculated",value:function(w){if(!this.calculated||L(w)!=="object")return w;if(L(this.calculated)!=="object")throw new Error("'calculated' parameter must be an object mapping calculated state field named to functions");var D=Object.entries(this.calculated),M=D.reduce(function(k,F){var K=v(F,2),j=K[0],W=K[1];if(typeof W!="function")throw new Error("Missing or invalid calculator function for calculated field '".concat(j));try{k[j]=W(w)}catch(U){console.warn("Calculated field '".concat(j,"' threw an error during calculation: ").concat(U.message))}return k},{});return I(I({},w),M)}},{key:"cleanupCalculated",value:function(w){var D=this;if(this.storeCalculatedInState)return this.addCalculated(w);if(!this.calculated||!w||L(w)!=="object")return w;var M=Object.keys(this.calculated),k=I({},w);return M.forEach(function(F){D.initialState&&typeof D.initialState[F]!="undefined"?k[F]=D.initialState[F]:delete k[F]}),k}}]),S}();function Zt(S){return function(C){var w=typeof C=="function"?C:function(D){return C};return function(D){return D.debug(function(M){(G.DEBUG=="true"||G.DEBUG===!0)&&console.log("[".concat(S,"] ").concat(w(M)))})}}}function sr(S,C){var w,D=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(!S)return{};if((w=S.data)!==null&&w!==void 0&&w.componentsProcessed)return{};D||(S.data.componentsProcessed=!0);var M=S.sel,k=M&&M.toLowerCase()==="collection",F=M&&M.toLowerCase()==="switchable",K=M&&["collection","swtichable"].concat(T(C)).includes(S.sel),j=S.data&&S.data.props||{},W=S.children||[],U={};if(K){var R=lr(S);if(k){if(!j.component)throw new Error("Collection element missing required 'component' property");if(typeof j.component!="string")throw new Error("Invalid 'component' property of collection element: found ".concat(L(j.component)," requires string"));if(!C.includes(j.component))throw new Error("Specified component for collection not found: ".concat(j.component));(!j.value||!Array.isArray(j.value))&&console.warn("No valid array found in the 'value' property of collection ".concat(j.component,": no collection components will be created")),S.data.isCollection=!0,S.data.component=j.component}else if(F){if(!j.components)throw new Error("Switchable element missing required 'components' property");if(L(j.components)!=="object")throw new Error("Invalid 'components' property of switchable element: found ".concat(L(j.components)," requires object mapping names to component factories"));var z=Object.values(j.components);if(!z.every(function(X){return typeof X=="function"}))throw new Error("One or more invalid component factories for switchable element is not a valid component factory");if(!j.current||typeof j.current!="string")throw new Error("Missing or invalid 'current' property for switchable element: found ".concat(L(j.current)," requires string"));var H=Object.keys(j.components);if(!H.includes(j.current))throw new Error("Component '".concat(j.current,"' not found in switchable element"));S.data.isSwitchable=!0,S.data.components=j.components,S.data.currentComponent=j.current}U[R]=S}return W.length>0&&W.map(function(X){return sr(X,C,!0)}).forEach(function(X){Object.entries(X).forEach(function(rt){var st=v(rt,2),at=st[0],Y=st[1];return U[at]=Y})}),U}function ur(S,C,w){var D,M,k,F=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!!S){if((D=S.data)!==null&&D!==void 0&&D.componentsInjected)return S;!F&&S.data&&(S.data.componentsInjected=!0);var K=S.sel||"NO SELECTOR",j=["collection","swtichable"].concat(T(w)).includes(K),W=S==null||(M=S.data)===null||M===void 0?void 0:M.isCollection;S==null||(k=S.data)===null||k===void 0||k.isSwitchable,S.data&&S.data.props;var U=S.children||[];if(j){var R=lr(S),z=C[R];return W?(S.sel="div",delete S.elm,S.children=z,S):z}else return U.length>0&&(S.children=U.map(function(H){return ur(H,C,w)}).flat()),S}}function lr(S){var C=S.sel,w=S.data&&S.data.props||{},D=w.id&&JSON.stringify(w.id)||JSON.stringify(w);return"".concat(C,"::").concat(D)}})(Br);var dn={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=m;var t=i(ft),r=n(Xt);function n(y){return y&&y.__esModule?y:{default:y}}function o(y){if(typeof WeakMap!="function")return null;var _=new WeakMap,O=new WeakMap;return(o=function(I){return I?O:_})(y)}function i(y,_){if(!_&&y&&y.__esModule)return y;if(y===null||d(y)!=="object"&&typeof y!="function")return{default:y};var O=o(_);if(O&&O.has(y))return O.get(y);var N={},I=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var B in y)if(B!=="default"&&Object.prototype.hasOwnProperty.call(y,B)){var L=I?Object.getOwnPropertyDescriptor(y,B):null;L&&(L.get||L.set)?Object.defineProperty(N,B,L):N[B]=y[B]}return N.default=y,O&&O.set(y,N),N}function f(y){return A(y)||g(y)||a(y)||p()}function p(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function g(y){if(typeof Symbol!="undefined"&&y[Symbol.iterator]!=null||y["@@iterator"]!=null)return Array.from(y)}function A(y){if(Array.isArray(y))return v(y)}function E(y,_){var O=Object.keys(y);if(Object.getOwnPropertySymbols){var N=Object.getOwnPropertySymbols(y);_&&(N=N.filter(function(I){return Object.getOwnPropertyDescriptor(y,I).enumerable})),O.push.apply(O,N)}return O}function x(y){for(var _=1;_<arguments.length;_++){var O=arguments[_]!=null?arguments[_]:{};_%2?E(Object(O),!0).forEach(function(N){T(y,N,O[N])}):Object.getOwnPropertyDescriptors?Object.defineProperties(y,Object.getOwnPropertyDescriptors(O)):E(Object(O)).forEach(function(N){Object.defineProperty(y,N,Object.getOwnPropertyDescriptor(O,N))})}return y}function T(y,_,O){return _ in y?Object.defineProperty(y,_,{value:O,enumerable:!0,configurable:!0,writable:!0}):y[_]=O,y}function l(y,_){return h(y)||c(y,_)||a(y,_)||u()}function u(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function a(y,_){if(!!y){if(typeof y=="string")return v(y,_);var O=Object.prototype.toString.call(y).slice(8,-1);if(O==="Object"&&y.constructor&&(O=y.constructor.name),O==="Map"||O==="Set")return Array.from(y);if(O==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(O))return v(y,_)}}function v(y,_){(_==null||_>y.length)&&(_=y.length);for(var O=0,N=new Array(_);O<_;O++)N[O]=y[O];return N}function c(y,_){var O=y==null?null:typeof Symbol!="undefined"&&y[Symbol.iterator]||y["@@iterator"];if(O!=null){var N=[],I=!0,B=!1,L,G;try{for(O=O.call(y);!(I=(L=O.next()).done)&&(N.push(L.value),!(_&&N.length===_));I=!0);}catch(q){B=!0,G=q}finally{try{!I&&O.return!=null&&O.return()}finally{if(B)throw G}}return N}}function h(y){if(Array.isArray(y))return y}function d(y){return d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},d(y)}function m(y,_,O){var N=arguments.length>3&&arguments[3]!==void 0?arguments[3]:["DOM"],I=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"STATE",B=d(_);if(!_)throw new Error("Missing 'name$' parameter for switchable()");if(!(B==="string"||B==="function"||_ instanceof t.Stream))throw new Error("Invalid 'name$' parameter for switchable(): expects Stream, String, or Function");if(_ instanceof t.Stream){var L=_.compose((0,r.default)()).startWith(O).remember();return function(q){return b(y,q,L,N)}}else{var G=B==="function"&&_||function(q){return q[_]};return function(q){var nt=q&&(typeof I=="string"&&q[I]||q.STATE||q.state).stream;if(!nt instanceof t.Stream)throw new Error("Could not find the state source: ".concat(I));var ut=nt.map(G).filter(function(dt){return typeof dt=="string"}).compose((0,r.default)()).startWith(O).remember();return b(y,q,ut,N,I)}}}function b(y,_,O){var N=arguments.length>3&&arguments[3]!==void 0?arguments[3]:["DOM"],I=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"STATE";typeof N=="string"&&(N=[N]);var B=Object.entries(y).map(function(G){var q=l(G,2),nt=q[0],ut=q[1];if(_[I]){var dt=_[I].stream,mt=t.default.combine(O,dt).filter(function(It){var Et=l(It,2),Zt=Et[0];return Et[1],Zt==nt}).map(function(It){var Et=l(It,2);Et[0];var Zt=Et[1];return Zt}).remember(),Ot=new _[I].constructor(mt,_[I]._name);return[nt,ut(x(x({},_),{},{state:Ot}))]}return[nt,ut(_)]}),L=Object.keys(_).reduce(function(G,q){if(N.includes(q))G[q]=O.map(function(ut){var dt=B.find(function(mt){var Ot=l(mt,2),It=Ot[0];return Ot[1],It===ut});return dt&&dt[1][q]||t.default.never()}).flatten().remember().startWith("");else{var nt=B.filter(function(ut){var dt=l(ut,2);dt[0];var mt=dt[1];return mt[q]!==void 0}).map(function(ut){var dt=l(ut,2);dt[0];var mt=dt[1];return mt[q]});G[q]=t.default.merge.apply(t.default,f(nt))}return G},{});return L}})(dn);var hn={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=u;var t=r(ft);function r(a){return a&&a.__esModule?a:{default:a}}function n(a,v){return f(a)||i(a,v)||E(a,v)||o()}function o(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function i(a,v){var c=a==null?null:typeof Symbol!="undefined"&&a[Symbol.iterator]||a["@@iterator"];if(c!=null){var h=[],d=!0,m=!1,b,y;try{for(c=c.call(a);!(d=(b=c.next()).done)&&(h.push(b.value),!(v&&h.length===v));d=!0);}catch(_){m=!0,y=_}finally{try{!d&&c.return!=null&&c.return()}finally{if(m)throw y}}return h}}function f(a){if(Array.isArray(a))return a}function p(a,v){var c=typeof Symbol!="undefined"&&a[Symbol.iterator]||a["@@iterator"];if(!c){if(Array.isArray(a)||(c=E(a))||v&&a&&typeof a.length=="number"){c&&(a=c);var h=0,d=function(){};return{s:d,n:function(){return h>=a.length?{done:!0}:{done:!1,value:a[h++]}},e:function(O){throw O},f:d}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var m=!0,b=!1,y;return{s:function(){c=c.call(a)},n:function(){var O=c.next();return m=O.done,O},e:function(O){b=!0,y=O},f:function(){try{!m&&c.return!=null&&c.return()}finally{if(b)throw y}}}}function g(a){return T(a)||x(a)||E(a)||A()}function A(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function E(a,v){if(!!a){if(typeof a=="string")return l(a,v);var c=Object.prototype.toString.call(a).slice(8,-1);if(c==="Object"&&a.constructor&&(c=a.constructor.name),c==="Map"||c==="Set")return Array.from(a);if(c==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return l(a,v)}}function x(a){if(typeof Symbol!="undefined"&&a[Symbol.iterator]!=null||a["@@iterator"]!=null)return Array.from(a)}function T(a){if(Array.isArray(a))return l(a)}function l(a,v){(v==null||v>a.length)&&(v=a.length);for(var c=0,h=new Array(v);c<v;c++)h[c]=a[c];return h}function u(a){var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},c=v.events,h=c===void 0?["input","submit"]:c,d=v.preventDefault,m=d===void 0?!0:d;typeof h=="string"&&(h=[h]);var b=h.map(function(_){return a.events(_)}),y=t.default.merge.apply(t.default,g(b));return y.map(function(_){m&&_.preventDefault();var O=_.type==="submit"?_.srcElement:_.currentTarget,N=new FormData(O),I={};I.event=_,I.eventType=_.type;var B=O.querySelector("input[type=submit]:focus");if(B){var L=B.name,G=B.value;I[L||"submit"]=G}var q=p(N.entries()),nt;try{for(q.s();!(nt=q.n()).done;){var ut=n(nt.value,2),dt=ut[0],mt=ut[1];I[dt]=mt}}catch(Ot){q.e(Ot)}finally{q.f()}return I})}})(hn);var vn={};function aa(){var e;return typeof window!="undefined"?e=window:typeof global!="undefined"?e=global:e=this,e.Cyclejs=e.Cyclejs||{},e=e.Cyclejs,e.adaptStream=e.adaptStream||function(t){return t},e}function sa(e){return aa().adaptStream(e)}function ua(e){var t={};for(var r in e)e.hasOwnProperty(r)&&(t[r]=et.create());return t}function la(e,t){var r={};for(var n in e)e.hasOwnProperty(n)&&(r[n]=e[n](t[n],n),r[n]&&typeof r[n]=="object"&&(r[n]._isCycleSource=n));return r}function fa(e){for(var t in e)e.hasOwnProperty(t)&&e[t]&&typeof e[t].shamefullySendNext=="function"&&(e[t]=sa(e[t]));return e}function ca(e,t){var r=pn(),n=Object.keys(e).filter(function(p){return!!t[p]}),o={},i={};n.forEach(function(p){o[p]={_n:[],_e:[]},i[p]={next:function(g){return o[p]._n.push(g)},error:function(g){return o[p]._e.push(g)},complete:function(){}}});var f=n.map(function(p){return et.fromObservable(e[p]).subscribe(i[p])});return n.forEach(function(p){var g=t[p],A=function(x){r(function(){return g._n(x)})},E=function(x){r(function(){(console.error||console.log)(x),g._e(x)})};o[p]._n.forEach(A),o[p]._e.forEach(E),i[p].next=A,i[p].error=E,i[p]._n=A,i[p]._e=E}),o=null,function(){f.forEach(function(g){return g.unsubscribe()})}}function pa(e){Object.keys(e).forEach(function(t){return e[t]._c()})}function da(e){for(var t in e)e.hasOwnProperty(t)&&e[t]&&e[t].dispose&&e[t].dispose()}function yn(e){return Object.keys(e).length===0}function mn(e,t){if(typeof e!="function")throw new Error("First argument given to Cycle must be the 'main' function.");if(typeof t!="object"||t===null)throw new Error("Second argument given to Cycle must be an object with driver functions as properties.");if(yn(t))throw new Error("Second argument given to Cycle must be an object with at least one driver function declared as a property.");var r=gn(t),n=e(r.sources);typeof window!="undefined"&&(window.Cyclejs=window.Cyclejs||{},window.Cyclejs.sinks=n);function o(){var i=r.run(n);return function(){i(),r.dispose()}}return{sinks:n,sources:r.sources,run:o}}function gn(e){if(typeof e!="object"||e===null)throw new Error("Argument given to setupReusable must be an object with driver functions as properties.");if(yn(e))throw new Error("Argument given to setupReusable must be an object with at least one driver function declared as a property.");var t=ua(e),r=la(e,t),n=fa(r);function o(f){return ca(f,t)}function i(){da(n),pa(t)}return{sources:n,run:o,dispose:i}}function Ar(e,t){var r=mn(e,t);return typeof window!="undefined"&&window.CyclejsDevTool_startGraphSerializer&&window.CyclejsDevTool_startGraphSerializer(r.sinks),r.run()}var ha=Object.freeze(Object.defineProperty({__proto__:null,setup:mn,setupReusable:gn,run:Ar,default:Ar},Symbol.toStringTag,{value:"Module"})),va=Oe(ha);function ya(e,t){return document.createElement(e,t)}function ma(e,t,r){return document.createElementNS(e,t,r)}function ga(){return document.createDocumentFragment()}function ba(e){return document.createTextNode(e)}function _a(e){return document.createComment(e)}function wa(e,t,r){e.insertBefore(t,r)}function Sa(e,t){e.removeChild(t)}function Oa(e,t){e.appendChild(t)}function Aa(e){return e.parentNode}function xa(e){return e.nextSibling}function Ea(e){return e.tagName}function Pa(e,t){e.textContent=t}function Da(e){return e.textContent}function $a(e){return e.nodeType===1}function Ta(e){return e.nodeType===3}function Ca(e){return e.nodeType===8}function Na(e){return e.nodeType===11}const bn={createElement:ya,createElementNS:ma,createTextNode:ba,createDocumentFragment:ga,createComment:_a,insertBefore:wa,removeChild:Sa,appendChild:Oa,parentNode:Aa,nextSibling:xa,tagName:Ea,setTextContent:Pa,getTextContent:Da,isElement:$a,isText:Ta,isComment:Ca,isDocumentFragment:Na};function xt(e,t,r,n,o){const i=t===void 0?void 0:t.key;return{sel:e,data:t,children:r,text:n,elm:o,key:i}}const He=Array.isArray;function ve(e){return typeof e=="string"||typeof e=="number"||e instanceof String||e instanceof Number}function Le(e){return e===void 0}function yt(e){return e!==void 0}const Fe=xt("",{},[],void 0,void 0);function ee(e,t){var r,n;const o=e.key===t.key,i=((r=e.data)===null||r===void 0?void 0:r.is)===((n=t.data)===null||n===void 0?void 0:n.is);return e.sel===t.sel&&o&&i}function Ia(){throw new Error("The document fragment is not supported on this platform.")}function Ma(e,t){return e.isElement(t)}function ka(e,t){return e.isDocumentFragment(t)}function ja(e,t,r){var n;const o={};for(let i=t;i<=r;++i){const f=(n=e[i])===null||n===void 0?void 0:n.key;f!==void 0&&(o[f]=i)}return o}const Ra=["create","update","remove","destroy","pre","post"];function La(e,t,r){const n={create:[],update:[],remove:[],destroy:[],pre:[],post:[]},o=t!==void 0?t:bn;for(const u of Ra)for(const a of e){const v=a[u];v!==void 0&&n[u].push(v)}function i(u){const a=u.id?"#"+u.id:"",v=u.getAttribute("class"),c=v?"."+v.split(" ").join("."):"";return xt(o.tagName(u).toLowerCase()+a+c,{},[],void 0,u)}function f(u){return xt(void 0,{},[],void 0,u)}function p(u,a){return function(){if(--a===0){const c=o.parentNode(u);o.removeChild(c,u)}}}function g(u,a){var v,c,h,d;let m,b=u.data;if(b!==void 0){const O=(v=b.hook)===null||v===void 0?void 0:v.init;yt(O)&&(O(u),b=u.data)}const y=u.children,_=u.sel;if(_==="!")Le(u.text)&&(u.text=""),u.elm=o.createComment(u.text);else if(_!==void 0){const O=_.indexOf("#"),N=_.indexOf(".",O),I=O>0?O:_.length,B=N>0?N:_.length,L=O!==-1||N!==-1?_.slice(0,Math.min(I,B)):_,G=u.elm=yt(b)&&yt(m=b.ns)?o.createElementNS(m,L,b):o.createElement(L,b);for(I<B&&G.setAttribute("id",_.slice(I+1,B)),N>0&&G.setAttribute("class",_.slice(B+1).replace(/\./g," ")),m=0;m<n.create.length;++m)n.create[m](Fe,u);if(He(y))for(m=0;m<y.length;++m){const nt=y[m];nt!=null&&o.appendChild(G,g(nt,a))}else ve(u.text)&&o.appendChild(G,o.createTextNode(u.text));const q=u.data.hook;yt(q)&&((c=q.create)===null||c===void 0||c.call(q,Fe,u),q.insert&&a.push(u))}else if(((h=r==null?void 0:r.experimental)===null||h===void 0?void 0:h.fragments)&&u.children){const O=u.children;for(u.elm=((d=o.createDocumentFragment)!==null&&d!==void 0?d:Ia)(),m=0;m<n.create.length;++m)n.create[m](Fe,u);for(m=0;m<O.length;++m){const N=O[m];N!=null&&o.appendChild(u.elm,g(N,a))}}else u.elm=o.createTextNode(u.text);return u.elm}function A(u,a,v,c,h,d){for(;c<=h;++c){const m=v[c];m!=null&&o.insertBefore(u,g(m,d),a)}}function E(u){var a,v;const c=u.data;if(c!==void 0){(v=(a=c==null?void 0:c.hook)===null||a===void 0?void 0:a.destroy)===null||v===void 0||v.call(a,u);for(let h=0;h<n.destroy.length;++h)n.destroy[h](u);if(u.children!==void 0)for(let h=0;h<u.children.length;++h){const d=u.children[h];d!=null&&typeof d!="string"&&E(d)}}}function x(u,a,v,c){for(var h,d;v<=c;++v){let m,b;const y=a[v];if(y!=null)if(yt(y.sel)){E(y),m=n.remove.length+1,b=p(y.elm,m);for(let O=0;O<n.remove.length;++O)n.remove[O](y,b);const _=(d=(h=y==null?void 0:y.data)===null||h===void 0?void 0:h.hook)===null||d===void 0?void 0:d.remove;yt(_)?_(y,b):b()}else o.removeChild(u,y.elm)}}function T(u,a,v,c){let h=0,d=0,m=a.length-1,b=a[0],y=a[m],_=v.length-1,O=v[0],N=v[_],I,B,L,G;for(;h<=m&&d<=_;)b==null?b=a[++h]:y==null?y=a[--m]:O==null?O=v[++d]:N==null?N=v[--_]:ee(b,O)?(l(b,O,c),b=a[++h],O=v[++d]):ee(y,N)?(l(y,N,c),y=a[--m],N=v[--_]):ee(b,N)?(l(b,N,c),o.insertBefore(u,b.elm,o.nextSibling(y.elm)),b=a[++h],N=v[--_]):ee(y,O)?(l(y,O,c),o.insertBefore(u,y.elm,b.elm),y=a[--m],O=v[++d]):(I===void 0&&(I=ja(a,h,m)),B=I[O.key],Le(B)?o.insertBefore(u,g(O,c),b.elm):(L=a[B],L.sel!==O.sel?o.insertBefore(u,g(O,c),b.elm):(l(L,O,c),a[B]=void 0,o.insertBefore(u,L.elm,b.elm))),O=v[++d]);d<=_&&(G=v[_+1]==null?null:v[_+1].elm,A(u,G,v,d,_,c)),h<=m&&x(u,a,h,m)}function l(u,a,v){var c,h,d,m,b,y,_,O;const N=(c=a.data)===null||c===void 0?void 0:c.hook;(h=N==null?void 0:N.prepatch)===null||h===void 0||h.call(N,u,a);const I=a.elm=u.elm,B=u.children,L=a.children;if(u!==a){if(a.data!==void 0||yt(a.text)&&a.text!==u.text){(d=a.data)!==null&&d!==void 0||(a.data={}),(m=u.data)!==null&&m!==void 0||(u.data={});for(let G=0;G<n.update.length;++G)n.update[G](u,a);(_=(y=(b=a.data)===null||b===void 0?void 0:b.hook)===null||y===void 0?void 0:y.update)===null||_===void 0||_.call(y,u,a)}Le(a.text)?yt(B)&&yt(L)?B!==L&&T(I,B,L,v):yt(L)?(yt(u.text)&&o.setTextContent(I,""),A(I,null,L,0,L.length-1,v)):yt(B)?x(I,B,0,B.length-1):yt(u.text)&&o.setTextContent(I,""):u.text!==a.text&&(yt(B)&&x(I,B,0,B.length-1),o.setTextContent(I,a.text)),(O=N==null?void 0:N.postpatch)===null||O===void 0||O.call(N,u,a)}}return function(a,v){let c,h,d;const m=[];for(c=0;c<n.pre.length;++c)n.pre[c]();for(Ma(o,a)?a=i(a):ka(o,a)&&(a=f(a)),ee(a,v)?l(a,v,m):(h=a.elm,d=o.parentNode(h),g(v,m),d!==null&&(o.insertBefore(d,v.elm,o.nextSibling(h)),x(d,[a],0,0))),c=0;c<m.length;++c)m[c].data.hook.insert(m[c]);for(c=0;c<n.post.length;++c)n.post[c]();return v}}function ir(e,t,r){if(e.ns="http://www.w3.org/2000/svg",r!=="foreignObject"&&t!==void 0)for(let n=0;n<t.length;++n){const o=t[n];if(typeof o=="string")continue;const i=o.data;i!==void 0&&ir(i,o.children,o.sel)}}function At(e,t,r){let n={},o,i,f;if(r!==void 0?(t!==null&&(n=t),He(r)?o=r:ve(r)?i=r.toString():r&&r.sel&&(o=[r])):t!=null&&(He(t)?o=t:ve(t)?i=t.toString():t&&t.sel?o=[t]:n=t),o!==void 0)for(f=0;f<o.length;++f)ve(o[f])&&(o[f]=xt(void 0,void 0,void 0,o[f],void 0));return e[0]==="s"&&e[1]==="v"&&e[2]==="g"&&(e.length===3||e[3]==="."||e[3]==="#")&&ir(n,o,e),xt(e,n,o,i,void 0)}function Ke(e,t){const r=t!==void 0?t:bn;let n;if(r.isElement(e)){const o=e.id?"#"+e.id:"",i=e.getAttribute("class"),f=i?"."+i.split(" ").join("."):"",p=r.tagName(e).toLowerCase()+o+f,g={},A={},E={},x=[];let T,l,u;const a=e.attributes,v=e.childNodes;for(l=0,u=a.length;l<u;l++)T=a[l].nodeName,T[0]==="d"&&T[1]==="a"&&T[2]==="t"&&T[3]==="a"&&T[4]==="-"?A[T.slice(5)]=a[l].nodeValue||"":T!=="id"&&T!=="class"&&(g[T]=a[l].nodeValue);for(l=0,u=v.length;l<u;l++)x.push(Ke(v[l],t));return Object.keys(g).length>0&&(E.attrs=g),Object.keys(A).length>0&&(E.datasets=A),p[0]==="s"&&p[1]==="v"&&p[2]==="g"&&(p.length===3||p[3]==="."||p[3]==="#")&&ir(E,x,p),xt(p,E,x,void 0,e)}else return r.isText(e)?(n=r.getTextContent(e),xt(void 0,void 0,void 0,n,e)):r.isComment(e)?(n=r.getTextContent(e),xt("!",{},[],n,e)):xt("",{},[],void 0,e)}const Fa="http://www.w3.org/1999/xlink",Ba="http://www.w3.org/XML/1998/namespace",xr=58,qa=120;function Er(e,t){let r;const n=t.elm;let o=e.data.attrs,i=t.data.attrs;if(!(!o&&!i)&&o!==i){o=o||{},i=i||{};for(r in i){const f=i[r];o[r]!==f&&(f===!0?n.setAttribute(r,""):f===!1?n.removeAttribute(r):r.charCodeAt(0)!==qa?n.setAttribute(r,f):r.charCodeAt(3)===xr?n.setAttributeNS(Ba,r,f):r.charCodeAt(5)===xr?n.setAttributeNS(Fa,r,f):n.setAttribute(r,f))}for(r in o)r in i||n.removeAttribute(r)}}const Wa={create:Er,update:Er};function Pr(e,t){let r,n;const o=t.elm;let i=e.data.class,f=t.data.class;if(!(!i&&!f)&&i!==f){i=i||{},f=f||{};for(n in i)i[n]&&!Object.prototype.hasOwnProperty.call(f,n)&&o.classList.remove(n);for(n in f)r=f[n],r!==i[n]&&o.classList[r?"add":"remove"](n)}}const Ua={create:Pr,update:Pr},Dr=/[A-Z]/g;function $r(e,t){const r=t.elm;let n=e.data.dataset,o=t.data.dataset,i;if(!n&&!o||n===o)return;n=n||{},o=o||{};const f=r.dataset;for(i in n)o[i]||(f?i in f&&delete f[i]:r.removeAttribute("data-"+i.replace(Dr,"-$&").toLowerCase()));for(i in o)n[i]!==o[i]&&(f?f[i]=o[i]:r.setAttribute("data-"+i.replace(Dr,"-$&").toLowerCase(),o[i]))}const Ga={create:$r,update:$r};function Tr(e,t){let r,n,o;const i=t.elm;let f=e.data.props,p=t.data.props;if(!(!f&&!p)&&f!==p){f=f||{},p=p||{};for(r in p)n=p[r],o=f[r],o!==n&&(r!=="value"||i[r]!==n)&&(i[r]=n)}}const za={create:Tr,update:Tr},Cr=typeof window!="undefined"&&window.requestAnimationFrame.bind(window)||setTimeout,Ha=function(e){Cr(function(){Cr(e)})};let Je=!1;function Ka(e,t,r){Ha(function(){e[t]=r})}function Nr(e,t){let r,n;const o=t.elm;let i=e.data.style,f=t.data.style;if(!i&&!f||i===f)return;i=i||{},f=f||{};const p="delayed"in i;for(n in i)f[n]||(n[0]==="-"&&n[1]==="-"?o.style.removeProperty(n):o.style[n]="");for(n in f)if(r=f[n],n==="delayed"&&f.delayed)for(const g in f.delayed)r=f.delayed[g],(!p||r!==i.delayed[g])&&Ka(o.style,g,r);else n!=="remove"&&r!==i[n]&&(n[0]==="-"&&n[1]==="-"?o.style.setProperty(n,r):o.style[n]=r)}function Ja(e){let t,r;const n=e.elm,o=e.data.style;if(!(!o||!(t=o.destroy)))for(r in t)n.style[r]=t[r]}function Ya(e,t){const r=e.data.style;if(!r||!r.remove){t();return}Je||(e.elm.offsetLeft,Je=!0);let n;const o=e.elm;let i=0;const f=r.remove;let p=0;const g=[];for(n in f)g.push(n),o.style[n]=f[n];const E=getComputedStyle(o)["transition-property"].split(", ");for(;i<E.length;++i)g.indexOf(E[i])!==-1&&p++;o.addEventListener("transitionend",function(x){x.target===o&&--p,p===0&&t()})}function Va(){Je=!1}const Xa={pre:Va,create:Nr,update:Nr,destroy:Ja,remove:Ya};function ye(e,t){t.elm=e.elm,e.data.fn=t.data.fn,e.data.args=t.data.args,e.data.isolate=t.data.isolate,t.data=e.data,t.children=e.children,t.text=e.text,t.elm=e.elm}function Za(e){var t=e.data,r=t.fn.apply(void 0,t.args);ye(r,e)}function Qa(e,t){var r=e.data,n=t.data,o,i=r.args,f=n.args;for((r.fn!==n.fn||i.length!==f.length)&&ye(n.fn.apply(void 0,f),t),o=0;o<f.length;++o)if(i[o]!==f[o]){ye(n.fn.apply(void 0,f),t);return}ye(e,t)}function ts(e,t,r,n){return n===void 0&&(n=r,r=t,t=void 0),At(e,{key:t,hook:{init:Za,prepatch:Qa},fn:r,args:n})}function we(e,t,r,n,o){r===void 0&&(r=!1),n===void 0&&(n=!1),o===void 0&&(o=!1);var i=null;return xe.create({start:function(p){n?i=function(A){wn(A,n),p.next(A)}:i=function(A){p.next(A)},e.addEventListener(t,i,{capture:r,passive:o})},stop:function(){e.removeEventListener(t,i,r),i=null}})}function _n(e,t){for(var r=Object.keys(e),n=r.length,o=0;o<n;o++){var i=r[o];if(typeof e[i]=="object"&&typeof t[i]=="object"){if(!_n(e[i],t[i]))return!1}else if(e[i]!==t[i])return!1}return!0}function wn(e,t){if(t)if(typeof t=="boolean")e.preventDefault();else if(es(t))t(e)&&e.preventDefault();else if(typeof t=="object")_n(t,e)&&e.preventDefault();else throw new Error("preventDefault has to be either a boolean, predicate function or object")}function es(e){return typeof e=="function"}var rs=function(){function e(t){this._name=t}return e.prototype.select=function(t){return this},e.prototype.elements=function(){var t=pt(et.of([document]));return t._isCycleSource=this._name,t},e.prototype.element=function(){var t=pt(et.of(document));return t._isCycleSource=this._name,t},e.prototype.events=function(t,r,n){r===void 0&&(r={});var o;o=we(document,t,r.useCapture,r.preventDefault);var i=pt(o);return i._isCycleSource=this._name,i},e}(),ns=function(){function e(t){this._name=t}return e.prototype.select=function(t){return this},e.prototype.elements=function(){var t=pt(et.of([document.body]));return t._isCycleSource=this._name,t},e.prototype.element=function(){var t=pt(et.of(document.body));return t._isCycleSource=this._name,t},e.prototype.events=function(t,r,n){r===void 0&&(r={});var o;o=we(document.body,t,r.useCapture,r.preventDefault);var i=pt(o);return i._isCycleSource=this._name,i},e}();function os(e){var t=1,r=11;return typeof HTMLElement=="object"?e instanceof HTMLElement||e instanceof DocumentFragment:e&&typeof e=="object"&&e!==null&&(e.nodeType===t||e.nodeType===r)&&typeof e.nodeName=="string"}function is(e){return e.length>1&&(e[0]==="."||e[0]==="#")}function as(e){return e.nodeType===11}function ss(e){if(typeof e!="string"&&!os(e))throw new Error("Given container is not a DOM element neither a selector string.")}function us(e){var t=typeof e=="string"?document.querySelector(e):e;if(typeof e=="string"&&t===null)throw new Error("Cannot render into unknown element `"+e+"`");return t}function Sn(e){for(var t="",r=e.length-1;r>=0&&e[r].type==="selector";r--)t=e[r].scope+" "+t;return t.trim()}function ar(e,t){if(!Array.isArray(e)||!Array.isArray(t)||e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==t[r].type||e[r].scope!==t[r].scope)return!1;return!0}var On=function(){function e(t,r){this.namespace=t,this.isolateModule=r,this._namespace=t.filter(function(n){return n.type!=="selector"})}return e.prototype.isDirectlyInScope=function(t){var r=this.isolateModule.getNamespace(t);if(!r||this._namespace.length>r.length||!ar(this._namespace,r.slice(0,this._namespace.length)))return!1;for(var n=this._namespace.length;n<r.length;n++)if(r[n].type==="total")return!1;return!0},e}();function ls(e){return Array.prototype.slice.call(e)}var An=function(){function e(t,r){this.namespace=t,this.isolateModule=r}return e.prototype.call=function(){var t=this.namespace,r=Sn(t),n=new On(t,this.isolateModule),o=this.isolateModule.getElement(t.filter(function(i){return i.type!=="selector"}));return o===void 0?[]:r===""?[o]:ls(o.querySelectorAll(r)).filter(n.isDirectlyInScope,n).concat(o.matches(r)?[o]:[])},e}(),ie=globalThis&&globalThis.__assign||function(){return ie=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},ie.apply(this,arguments)};function fs(e){return function(t,r){return r===":root"?t:t.map(function(n){if(!n)return n;var o=xn(r),i=ie({},n,{data:ie({},n.data,{isolate:!n.data||!Array.isArray(n.data.isolate)?e.concat([o]):n.data.isolate})});return ie({},i,{key:i.key!==void 0?i.key:JSON.stringify(i.data.isolate)})})}}function xn(e){return{type:is(e)?"sibling":"total",scope:e}}var En=function(){function e(t,r,n,o,i,f){n===void 0&&(n=[]),this._rootElement$=t,this._sanitation$=r,this._namespace=n,this._isolateModule=o,this._eventDelegator=i,this._name=f,this.isolateSource=function(p,g){return new e(p._rootElement$,p._sanitation$,p._namespace.concat(xn(g)),p._isolateModule,p._eventDelegator,p._name)},this.isolateSink=fs(this._namespace)}return e.prototype._elements=function(){if(this._namespace.length===0)return this._rootElement$.map(function(r){return[r]});var t=new An(this._namespace,this._isolateModule);return this._rootElement$.map(function(){return t.call()})},e.prototype.elements=function(){var t=pt(this._elements().remember());return t._isCycleSource=this._name,t},e.prototype.element=function(){var t=pt(this._elements().filter(function(r){return r.length>0}).map(function(r){return r[0]}).remember());return t._isCycleSource=this._name,t},Object.defineProperty(e.prototype,"namespace",{get:function(){return this._namespace},enumerable:!0,configurable:!0}),e.prototype.select=function(t){if(typeof t!="string")throw new Error("DOM driver's select() expects the argument to be a string as a CSS selector");if(t==="document")return new rs(this._name);if(t==="body")return new ns(this._name);var r=t===":root"?[]:this._namespace.concat({type:"selector",scope:t.trim()});return new e(this._rootElement$,this._sanitation$,r,this._isolateModule,this._eventDelegator,this._name)},e.prototype.events=function(t,r,n){if(r===void 0&&(r={}),typeof t!="string")throw new Error("DOM driver's events() expects argument to be a string representing the event type to listen for.");var o=this._eventDelegator.addEventListener(t,this._namespace,r,n),i=pt(o);return i._isCycleSource=this._name,i},e.prototype.dispose=function(){this._sanitation$.shamefullySendNext(null)},e}(),Vt={},cs=wt&&wt.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),o=0,t=0;t<r;t++)for(var i=arguments[t],f=0,p=i.length;f<p;f++,o++)n[o]=i[f];return n};Object.defineProperty(Vt,"__esModule",{value:!0});Vt.SampleCombineOperator=Vt.SampleCombineListener=void 0;var ps=ft,Ct={},Pn=function(){function e(t,r){this.i=t,this.p=r,r.ils[t]=this}return e.prototype._n=function(t){var r=this.p;r.out!==Ct&&r.up(t,this.i)},e.prototype._e=function(t){this.p._e(t)},e.prototype._c=function(){this.p.down(this.i,this)},e}();Vt.SampleCombineListener=Pn;var Dn=function(){function e(t,r){this.type="sampleCombine",this.ins=t,this.others=r,this.out=Ct,this.ils=[],this.Nn=0,this.vals=[]}return e.prototype._start=function(t){this.out=t;for(var r=this.others,n=this.Nn=r.length,o=this.vals=new Array(n),i=0;i<n;i++)o[i]=Ct,r[i]._add(new Pn(i,this));this.ins._add(this)},e.prototype._stop=function(){var t=this.others,r=t.length,n=this.ils;this.ins._remove(this);for(var o=0;o<r;o++)t[o]._remove(n[o]);this.out=Ct,this.vals=[],this.ils=[]},e.prototype._n=function(t){var r=this.out;r!==Ct&&(this.Nn>0||r._n(cs([t],this.vals)))},e.prototype._e=function(t){var r=this.out;r!==Ct&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==Ct&&t._c()},e.prototype.up=function(t,r){var n=this.vals[r];this.Nn>0&&n===Ct&&this.Nn--,this.vals[r]=t},e.prototype.down=function(t,r){this.others[t]._remove(r)},e}();Vt.SampleCombineOperator=Dn;var $n;$n=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return function(o){return new ps.Stream(new Dn(o,t))}};var Tn=Vt.default=$n;globalThis&&globalThis.__assign;function Cn(e){if(!e.sel)return{tagName:"",id:"",className:""};var t=e.sel,r=t.indexOf("#"),n=t.indexOf(".",r),o=r>0?r:t.length,i=n>0?n:t.length,f=r!==-1||n!==-1?t.slice(0,Math.min(o,i)):t,p=o<i?t.slice(o+1,i):void 0,g=n>0?t.slice(i+1).replace(/\./g," "):void 0;return{tagName:f,id:p,className:g}}function ds(e){var t=Cn(e).className,r=t===void 0?"":t;if(!e.data)return r;var n=e.data,o=n.class,i=n.props;if(o){var f=Object.keys(o).filter(function(p){return o[p]});r+=" "+f.join(" ")}return i&&i.className&&(r+=" "+i.className),r&&r.trim()}var ne;typeof self!="undefined"?ne=self:typeof window!="undefined"?ne=window:typeof global!="undefined"?ne=global:ne=Function("return this")();var Ir=ne.Symbol;typeof Ir=="function"&&Ir("parent");var hs=function(){function e(t){this.rootElement=t}return e.prototype.call=function(t){if(as(this.rootElement))return this.wrapDocFrag(t===null?[]:[t]);if(t===null)return this.wrap([]);var r=Cn(t),n=r.tagName,o=r.id,i=ds(t),f=t.data||{},p=f.props||{},g=p.id,A=g===void 0?o:g,E=typeof A=="string"&&A.toUpperCase()===this.rootElement.id.toUpperCase()&&n.toUpperCase()===this.rootElement.tagName.toUpperCase()&&i.toUpperCase()===this.rootElement.className.toUpperCase();return E?t:this.wrap([t])},e.prototype.wrapDocFrag=function(t){return xt("",{isolate:[]},t,void 0,this.rootElement)},e.prototype.wrap=function(t){var r=this.rootElement,n=r.tagName,o=r.id,i=r.className,f=o?"#"+o:"",p=i?"."+i.split(" ").join("."):"",g=At(""+n.toLowerCase()+f+p,{},t);return g.data=g.data||{},g.data.isolate=g.data.isolate||[],g},e}(),vs=[Xa,Ua,za,Wa,Ga],Nn=function(){function e(t){this.mapper=t,this.tree=[void 0,{}]}return e.prototype.set=function(t,r,n){for(var o=this.tree,i=n!==void 0?n:t.length,f=0;f<i;f++){var p=this.mapper(t[f]),g=o[1][p];g||(g=[void 0,{}],o[1][p]=g),o=g}o[0]=r},e.prototype.getDefault=function(t,r,n){return this.get(t,r,n)},e.prototype.get=function(t,r,n){for(var o=this.tree,i=n!==void 0?n:t.length,f=0;f<i;f++){var p=this.mapper(t[f]),g=o[1][p];if(!g)if(r)g=[void 0,{}],o[1][p]=g;else return;o=g}return r&&!o[0]&&(o[0]=r()),o[0]},e.prototype.delete=function(t){for(var r=this.tree,n=0;n<t.length-1;n++){var o=r[1][this.mapper(t[n])];if(!o)return;r=o}delete r[1][this.mapper(t[t.length-1])]},e}(),ys=function(){function e(){this.namespaceTree=new Nn(function(t){return t.scope}),this.namespaceByElement=new Map,this.vnodesBeingRemoved=[]}return e.prototype.setEventDelegator=function(t){this.eventDelegator=t},e.prototype.insertElement=function(t,r){this.namespaceByElement.set(r,t),this.namespaceTree.set(t,r)},e.prototype.removeElement=function(t){this.namespaceByElement.delete(t);var r=this.getNamespace(t);r&&this.namespaceTree.delete(r)},e.prototype.getElement=function(t,r){return this.namespaceTree.get(t,void 0,r)},e.prototype.getRootElement=function(t){if(this.namespaceByElement.has(t))return t;for(var r=t;!this.namespaceByElement.has(r);)if(r=r.parentNode,r){if(r.tagName==="HTML")throw new Error("No root element found, this should not happen at all")}else return;return r},e.prototype.getNamespace=function(t){var r=this.getRootElement(t);if(!!r)return this.namespaceByElement.get(r)},e.prototype.createModule=function(){var t=this;return{create:function(r,n){var o=n.elm,i=n.data,f=i===void 0?{}:i,p=f.isolate;Array.isArray(p)&&t.insertElement(p,o)},update:function(r,n){var o=r.elm,i=r.data,f=i===void 0?{}:i,p=n.elm,g=n.data,A=g===void 0?{}:g,E=f.isolate,x=A.isolate;ar(E,x)||Array.isArray(E)&&t.removeElement(o),Array.isArray(x)&&t.insertElement(x,p)},destroy:function(r){t.vnodesBeingRemoved.push(r)},remove:function(r,n){t.vnodesBeingRemoved.push(r),n()},post:function(){for(var r=t.vnodesBeingRemoved,n=r.length-1;n>=0;n--){var o=r[n],i=o.data!==void 0?o.data.isolation:void 0;i!==void 0&&t.removeElement(i),t.eventDelegator.removeElement(o.elm,i)}t.vnodesBeingRemoved=[]}}},e}(),ms=function(){function e(){this.arr=[],this.prios=[]}return e.prototype.add=function(t,r){for(var n=0;n<this.arr.length;n++)if(this.prios[n]<r){this.arr.splice(n,0,t),this.prios.splice(n,0,r);return}this.arr.push(t),this.prios.push(r)},e.prototype.forEach=function(t){for(var r=0;r<this.arr.length;r++)t(this.arr[r],r,this.arr)},e.prototype.delete=function(t){for(var r=0;r<this.arr.length;r++)if(this.arr[r]===t){this.arr.splice(r,1),this.prios.splice(r,1);return}},e}(),Se=globalThis&&globalThis.__assign||function(){return Se=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Se.apply(this,arguments)},gs=["blur","canplay","canplaythrough","durationchange","emptied","ended","focus","load","loadeddata","loadedmetadata","mouseenter","mouseleave","pause","play","playing","ratechange","reset","scroll","seeked","seeking","stalled","submit","suspend","timeupdate","unload","volumechange","waiting"],bs=function(){function e(t,r){var n=this;this.rootElement$=t,this.isolateModule=r,this.virtualListeners=new Nn(function(o){return o.scope}),this.nonBubblingListenersToAdd=new Set,this.virtualNonBubblingListener=[],this.isolateModule.setEventDelegator(this),this.domListeners=new Map,this.domListenersToAdd=new Map,this.nonBubblingListeners=new Map,t.addListener({next:function(o){n.origin!==o&&(n.origin=o,n.resetEventListeners(),n.domListenersToAdd.forEach(function(i,f){return n.setupDOMListener(f,i)}),n.domListenersToAdd.clear()),n.nonBubblingListenersToAdd.forEach(function(i){n.setupNonBubblingListener(i)})}})}return e.prototype.addEventListener=function(t,r,n,o){var i=et.never(),f,p=new On(r,this.isolateModule),g=o===void 0?gs.indexOf(t)===-1:o;if(g)return this.domListeners.has(t)||this.setupDOMListener(t,!!n.passive),f=this.insertListener(i,p,t,n),i;var A=[];this.nonBubblingListenersToAdd.forEach(function(b){return A.push(b)});for(var E=void 0,x=0,T=A.length,l=function(b){b[0];var y=b[1],_=b[2];return b[3],t===y&&ar(_.namespace,r)};!E&&x<T;){var u=A[x];E=l(u)?u:E,x++}var a=E,v;if(a){var h=a[0];v=h}else{var c=new An(r,this.isolateModule);f=this.insertListener(i,p,t,n),a=[i,t,c,f],v=i,this.nonBubblingListenersToAdd.add(a),this.setupNonBubblingListener(a)}var d=this,m=null;return et.create({start:function(b){m=v.subscribe(b)},stop:function(){a[0];var b=a[1],y=a[2];a[3];var _=y.call();_.forEach(function(O){var N=O.subs;N&&N[b]&&(N[b].unsubscribe(),delete N[b])}),d.nonBubblingListenersToAdd.delete(a),m.unsubscribe()}})},e.prototype.removeElement=function(t,r){r!==void 0&&this.virtualListeners.delete(r);var n=[];this.nonBubblingListeners.forEach(function(f,p){if(f.has(t)){n.push([p,t]);var g=t.subs;g&&Object.keys(g).forEach(function(A){g[A].unsubscribe()})}});for(var o=0;o<n.length;o++){var i=this.nonBubblingListeners.get(n[o][0]);!i||(i.delete(n[o][1]),i.size===0?this.nonBubblingListeners.delete(n[o][0]):this.nonBubblingListeners.set(n[o][0],i))}},e.prototype.insertListener=function(t,r,n,o){var i=[],f=r._namespace,p=f.length;do i.push(this.getVirtualListeners(n,f,!0,p)),p--;while(p>=0&&f[p].type!=="total");for(var g=Se({},o,{scopeChecker:r,subject:t,bubbles:!!o.bubbles,useCapture:!!o.useCapture,passive:!!o.passive}),A=0;A<i.length;A++)i[A].add(g,f.length);return g},e.prototype.getVirtualListeners=function(t,r,n,o){n===void 0&&(n=!1);var i=o!==void 0?o:r.length;if(!n)for(var f=i-1;f>=0;f--){if(r[f].type==="total"){i=f+1;break}i=f}var p=this.virtualListeners.getDefault(r,function(){return new Map},i);return p.has(t)||p.set(t,new ms),p.get(t)},e.prototype.setupDOMListener=function(t,r){var n=this;if(this.origin){var o=we(this.origin,t,!1,!1,r).subscribe({next:function(i){return n.onEvent(t,i,r)},error:function(){},complete:function(){}});this.domListeners.set(t,{sub:o,passive:r})}else this.domListenersToAdd.set(t,r)},e.prototype.setupNonBubblingListener=function(t){t[0];var r=t[1],n=t[2],o=t[3];if(!!this.origin){var i=n.call();if(i.length){var f=this;i.forEach(function(p){var g,A=p.subs;if(!A||!A[r]){var E=we(p,r,!1,!1,o.passive).subscribe({next:function(T){return f.onEvent(r,T,!!o.passive,!1)},error:function(){},complete:function(){}});f.nonBubblingListeners.has(r)||f.nonBubblingListeners.set(r,new Map);var x=f.nonBubblingListeners.get(r);if(!x)return;x.set(p,{sub:E,destination:o}),p.subs=Se({},A,(g={},g[r]=E,g))}})}}},e.prototype.resetEventListeners=function(){for(var t=this.domListeners.entries(),r=t.next();!r.done;){var n=r.value,o=n[0],i=n[1],f=i.sub,p=i.passive;f.unsubscribe(),this.setupDOMListener(o,p),r=t.next()}},e.prototype.putNonBubblingListener=function(t,r,n,o){var i=this.nonBubblingListeners.get(t);if(!!i){var f=i.get(r);f&&f.destination.passive===o&&f.destination.useCapture===n&&(this.virtualNonBubblingListener[0]=f.destination)}},e.prototype.onEvent=function(t,r,n,o){o===void 0&&(o=!0);var i=this.patchEvent(r),f=this.isolateModule.getRootElement(r.target);if(o){var p=this.isolateModule.getNamespace(r.target);if(!p)return;var g=this.getVirtualListeners(t,p);this.bubble(t,r.target,f,i,g,p,p.length-1,!0,n),this.bubble(t,r.target,f,i,g,p,p.length-1,!1,n)}else this.putNonBubblingListener(t,r.target,!0,n),this.doBubbleStep(t,r.target,f,i,this.virtualNonBubblingListener,!0,n),this.putNonBubblingListener(t,r.target,!1,n),this.doBubbleStep(t,r.target,f,i,this.virtualNonBubblingListener,!1,n),r.stopPropagation()},e.prototype.bubble=function(t,r,n,o,i,f,p,g,A){!g&&!o.propagationHasBeenStopped&&this.doBubbleStep(t,r,n,o,i,g,A);var E=n,x=p;if(r===n)if(p>=0&&f[p].type==="sibling")E=this.isolateModule.getElement(f,p),x--;else return;r.parentNode&&E&&this.bubble(t,r.parentNode,E,o,i,f,x,g,A),g&&!o.propagationHasBeenStopped&&this.doBubbleStep(t,r,n,o,i,g,A)},e.prototype.doBubbleStep=function(t,r,n,o,i,f,p){!n||(this.mutateEventCurrentTarget(o,r),i.forEach(function(g){if(g.passive===p&&g.useCapture===f){var A=Sn(g.scopeChecker.namespace);!o.propagationHasBeenStopped&&g.scopeChecker.isDirectlyInScope(r)&&(A!==""&&r.matches(A)||A===""&&r===n)&&(wn(o,g.preventDefault),g.subject.shamefullySendNext(o))}}))},e.prototype.patchEvent=function(t){var r=t;r.propagationHasBeenStopped=!1;var n=r.stopPropagation;return r.stopPropagation=function(){n.call(this),this.propagationHasBeenStopped=!0},r},e.prototype.mutateEventCurrentTarget=function(t,r){try{Object.defineProperty(t,"currentTarget",{value:r,configurable:!0})}catch{console.log("please use event.ownerTarget")}t.ownerTarget=r},e}();function _s(e){if(!Array.isArray(e))throw new Error("Optional modules option must be an array for snabbdom modules")}function ws(e){if(!e||typeof e.addListener!="function"||typeof e.fold!="function")throw new Error("The DOM driver function expects as input a Stream of virtual DOM elements")}function Ss(e){return et.merge(e,et.never())}function Os(e){return e.elm}function As(e){(console.error||console.log)(e)}function xs(){return et.create({start:function(e){document.readyState==="loading"?document.addEventListener("readystatechange",function(){var t=document.readyState;(t==="interactive"||t==="complete")&&(e.next(null),e.complete())}):(e.next(null),e.complete())},stop:function(){}})}function Es(e){return e.data=e.data||{},e.data.isolate=[],e}function Ps(e,t){t===void 0&&(t={}),ss(e);var r=t.modules||vs;_s(r);var n=new ys,o=t&&t.snabbdomOptions||void 0,i=La([n.createModule()].concat(r),void 0,o),f=xs(),p,g,A=et.create({start:function(x){g=new MutationObserver(function(){return x.next(null)})},stop:function(){g.disconnect()}});function E(x,T){T===void 0&&(T="DOM"),ws(x);var l=et.create(),u=f.map(function(){var d=us(e)||document.body;return p=new hs(d),d}),a=x.remember();a.addListener({}),A.addListener({});var v=u.map(function(d){return et.merge(a.endWhen(l),l).map(function(m){return p.call(m)}).startWith(Es(Ke(d))).fold(i,Ke(d)).drop(1).map(Os).startWith(d).map(function(m){return g.observe(m,{childList:!0,attributes:!0,characterData:!0,subtree:!0,attributeOldValue:!0,characterDataOldValue:!0}),m}).compose(Ss)}).flatten(),c=fn(f,A).endWhen(l).compose(Tn(v)).map(function(d){return d[1]}).remember();c.addListener({error:t.reportSnabbdomError||As});var h=new bs(c,n);return new En(c,l,[],n,h,T)}return E}var Be="___",In=function(){function e(t){this._mockConfig=t,t.elements?this._elements=t.elements:this._elements=pt(et.empty())}return e.prototype.elements=function(){var t=this._elements;return t._isCycleSource="MockedDOM",t},e.prototype.element=function(){var t=this.elements().filter(function(n){return n.length>0}).map(function(n){return n[0]}).remember(),r=pt(t);return r._isCycleSource="MockedDOM",r},e.prototype.events=function(t,r,n){var o=this._mockConfig[t],i=pt(o||et.empty());return i._isCycleSource="MockedDOM",i},e.prototype.select=function(t){var r=this._mockConfig[t]||{};return new e(r)},e.prototype.isolateSource=function(t,r){return t.select("."+Be+r)},e.prototype.isolateSink=function(t,r){return pt(et.fromObservable(t).map(function(n){return n.sel&&n.sel.indexOf(Be+r)!==-1||(n.sel+="."+Be+r),n}))},e}();function Ds(e){return new In(e)}function $s(e){return typeof e=="string"&&e.length>0}function Mn(e){return $s(e)&&(e[0]==="."||e[0]==="#")}function Pe(e){return function(r,n,o){var i=typeof r!="undefined",f=typeof n!="undefined",p=typeof o!="undefined";return Mn(r)?f&&p?At(e+r,n,o):f?At(e+r,n):At(e+r,{}):p?At(e+r,n,o):f?At(e,r,n):i?At(e,r):At(e,{})}}var kn=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","colorProfile","cursor","defs","desc","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotlight","feTile","feTurbulence","filter","font","fontFace","fontFaceFormat","fontFaceName","fontFaceSrc","fontFaceUri","foreignObject","g","glyph","glyphRef","hkern","image","line","linearGradient","marker","mask","metadata","missingGlyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],jn=Pe("svg");kn.forEach(function(e){jn[e]=Pe(e)});var Rn=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","dd","del","details","dfn","dir","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","meta","nav","noscript","object","ol","optgroup","option","p","param","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","u","ul","video"],P={SVG_TAG_NAMES:kn,TAG_NAMES:Rn,svg:jn,isSelector:Mn,createTagFunction:Pe};Rn.forEach(function(e){P[e]=Pe(e)});var Ts=P.svg,Cs=P.a,Ns=P.abbr,Is=P.address,Ms=P.area,ks=P.article,js=P.aside,Rs=P.audio,Ls=P.b,Fs=P.base,Bs=P.bdi,qs=P.bdo,Ws=P.blockquote,Us=P.body,Gs=P.br,zs=P.button,Hs=P.canvas,Ks=P.caption,Js=P.cite,Ys=P.code,Vs=P.col,Xs=P.colgroup,Zs=P.dd,Qs=P.del,tu=P.dfn,eu=P.dir,ru=P.div,nu=P.dl,ou=P.dt,iu=P.em,au=P.embed,su=P.fieldset,uu=P.figcaption,lu=P.figure,fu=P.footer,cu=P.form,pu=P.h1,du=P.h2,hu=P.h3,vu=P.h4,yu=P.h5,mu=P.h6,gu=P.head,bu=P.header,_u=P.hgroup,wu=P.hr,Su=P.html,Ou=P.i,Au=P.iframe,xu=P.img,Eu=P.input,Pu=P.ins,Du=P.kbd,$u=P.keygen,Tu=P.label,Cu=P.legend,Nu=P.li,Iu=P.link,Mu=P.main,ku=P.map,ju=P.mark,Ru=P.menu,Lu=P.meta,Fu=P.nav,Bu=P.noscript,qu=P.object,Wu=P.ol,Uu=P.optgroup,Gu=P.option,zu=P.p,Hu=P.param,Ku=P.pre,Ju=P.progress,Yu=P.q,Vu=P.rp,Xu=P.rt,Zu=P.ruby,Qu=P.s,tl=P.samp,el=P.script,rl=P.section,nl=P.select,ol=P.small,il=P.source,al=P.span,sl=P.strong,ul=P.style,ll=P.sub,fl=P.sup,cl=P.table,pl=P.tbody,dl=P.td,hl=P.textarea,vl=P.tfoot,yl=P.th,ml=P.thead,gl=P.title,bl=P.tr,_l=P.u,wl=P.ul,Sl=P.video,Ol=Object.freeze(Object.defineProperty({__proto__:null,svg:Ts,a:Cs,abbr:Ns,address:Is,area:Ms,article:ks,aside:js,audio:Rs,b:Ls,base:Fs,bdi:Bs,bdo:qs,blockquote:Ws,body:Us,br:Gs,button:zs,canvas:Hs,caption:Ks,cite:Js,code:Ys,col:Vs,colgroup:Xs,dd:Zs,del:Qs,dfn:tu,dir:eu,div:ru,dl:nu,dt:ou,em:iu,embed:au,fieldset:su,figcaption:uu,figure:lu,footer:fu,form:cu,h1:pu,h2:du,h3:hu,h4:vu,h5:yu,h6:mu,head:gu,header:bu,hgroup:_u,hr:wu,html:Su,i:Ou,iframe:Au,img:xu,input:Eu,ins:Pu,kbd:Du,keygen:$u,label:Tu,legend:Cu,li:Nu,link:Iu,main:Mu,map:ku,mark:ju,menu:Ru,meta:Lu,nav:Fu,noscript:Bu,object:qu,ol:Wu,optgroup:Uu,option:Gu,p:zu,param:Hu,pre:Ku,progress:Ju,q:Yu,rp:Vu,rt:Xu,ruby:Zu,s:Qu,samp:tl,script:el,section:rl,select:nl,small:ol,source:il,span:al,strong:sl,style:ul,sub:ll,sup:fl,table:cl,tbody:pl,td:dl,textarea:hl,tfoot:vl,th:yl,thead:ml,title:gl,tr:bl,u:_l,ul:wl,video:Sl,thunk:ts,MainDOMSource:En,makeDOMDriver:Ps,mockDOMSource:Ds,MockedDOMSource:In,h:At},Symbol.toStringTag,{value:"Module"})),Ln=Oe(Ol),Fn={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=o;var t=n(ft),r=Ee;function n(i){return i&&i.__esModule?i:{default:i}}function o(i){var f=new EventTarget;return i.subscribe({next:function(g){return f.dispatchEvent(new CustomEvent("data",{detail:g}))}}),{select:function(g){var A=!g,E=Array.isArray(g)?g:[g],x,T=t.default.create({start:function(u){x=function(v){var c=v.detail,h=c&&c.data||null;(A||E.includes(c.type))&&u.next(h)},f.addEventListener("data",x)},stop:function(u){return f.removeEventListener("data",x)}});return(0,r.adapt)(T)}}}})(Fn);var Bn={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t;function t(r){r.addListener({next:function(o){console.log(o)}})}})(Bn);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=E;var t=va,r=rr,n=Ln,o=f(Fn),i=f(Bn);function f(x){return x&&x.__esModule?x:{default:x}}function p(x,T){var l=Object.keys(x);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(x);T&&(u=u.filter(function(a){return Object.getOwnPropertyDescriptor(x,a).enumerable})),l.push.apply(l,u)}return l}function g(x){for(var T=1;T<arguments.length;T++){var l=arguments[T]!=null?arguments[T]:{};T%2?p(Object(l),!0).forEach(function(u){A(x,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(x,Object.getOwnPropertyDescriptors(l)):p(Object(l)).forEach(function(u){Object.defineProperty(x,u,Object.getOwnPropertyDescriptor(l,u))})}return x}function A(x,T,l){return T in x?Object.defineProperty(x,T,{value:l,enumerable:!0,configurable:!0,writable:!0}):x[T]=l,x}function E(x){var T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},l=(0,r.withState)(x,"STATE"),u={EVENTS:o.default,DOM:(0,n.makeDOMDriver)("#root"),LOG:i.default},a=g(g({},u),T);return(0,t.run)(l,a)}})(vn);var qn={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=T;function t(c,h){return o(c)||n(c,h)||g(c,h)||r()}function r(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function n(c,h){var d=c==null?null:typeof Symbol!="undefined"&&c[Symbol.iterator]||c["@@iterator"];if(d!=null){var m=[],b=!0,y=!1,_,O;try{for(d=d.call(c);!(b=(_=d.next()).done)&&(m.push(_.value),!(h&&m.length===h));b=!0);}catch(N){y=!0,O=N}finally{try{!b&&d.return!=null&&d.return()}finally{if(y)throw O}}return m}}function o(c){if(Array.isArray(c))return c}function i(c){return i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h},i(c)}function f(c){return E(c)||A(c)||g(c)||p()}function p(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function g(c,h){if(!!c){if(typeof c=="string")return x(c,h);var d=Object.prototype.toString.call(c).slice(8,-1);if(d==="Object"&&c.constructor&&(d=c.constructor.name),d==="Map"||d==="Set")return Array.from(c);if(d==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d))return x(c,h)}}function A(c){if(typeof Symbol!="undefined"&&c[Symbol.iterator]!=null||c["@@iterator"]!=null)return Array.from(c)}function E(c){if(Array.isArray(c))return x(c)}function x(c,h){(h==null||h>c.length)&&(h=c.length);for(var d=0,m=new Array(h);d<h;d++)m[d]=c[d];return m}function T(){for(var c=arguments.length,h=new Array(c),d=0;d<c;d++)h[d]=arguments[d];return h.reduce(function(m,b){return typeof b=="string"&&!m.includes(b)?m.push.apply(m,f(u(b))):Array.isArray(b)?m.push.apply(m,f(a(b))):i(b)==="object"&&m.push.apply(m,f(v(b))),m},[]).join(" ")}function l(c){return/^[a-zA-Z0-9-_]+$/.test(c)}function u(c){if(typeof c!="string")throw new Error("Class name must be a string");return c.trim().split(" ").reduce(function(h,d){if(d.trim().length===0)return h;if(!l(d))throw new Error("".concat(d," is not a valid CSS class name"));return h.push(d),h},[])}function a(c){return c.map(u).flat()}function v(c){var h=Object.entries(c).filter(function(d){var m=t(d,2);m[0];var b=m[1];return typeof b=="function"?b():!!b}).map(function(d){var m=t(d,2),b=m[0];m[1];var y=b.trim();if(!l(y))throw new Error("".concat(y," is not a valid CSS class name"));return y});return h}})(qn);(function(e){function t(u){return t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},t(u)}Object.defineProperty(e,"__esModule",{value:!0});var r={component:!0,ABORT:!0,collection:!0,switchable:!0,processForm:!0,run:!0,classes:!0,xs:!0};Object.defineProperty(e,"ABORT",{enumerable:!0,get:function(){return n.ABORT}}),Object.defineProperty(e,"classes",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(e,"collection",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(e,"component",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(e,"processForm",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(e,"run",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(e,"switchable",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(e,"xs",{enumerable:!0,get:function(){return E.default}});var n=l(Br),o=x(tr),i=x(dn),f=x(hn),p=x(vn),g=x(qn),A=Ln;Object.keys(A).forEach(function(u){u==="default"||u==="__esModule"||Object.prototype.hasOwnProperty.call(r,u)||u in e&&e[u]===A[u]||Object.defineProperty(e,u,{enumerable:!0,get:function(){return A[u]}})});var E=x(ft);function x(u){return u&&u.__esModule?u:{default:u}}function T(u){if(typeof WeakMap!="function")return null;var a=new WeakMap,v=new WeakMap;return(T=function(h){return h?v:a})(u)}function l(u,a){if(!a&&u&&u.__esModule)return u;if(u===null||t(u)!=="object"&&typeof u!="function")return{default:u};var v=T(a);if(v&&v.has(u))return v.get(u);var c={},h=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var d in u)if(d!=="default"&&Object.prototype.hasOwnProperty.call(u,d)){var m=h?Object.getOwnPropertyDescriptor(u,d):null;m&&(m.get||m.set)?Object.defineProperty(c,d,m):c[d]=u[d]}return c.default=u,v&&v.set(u,c),c}})(St);function Al(e){e.subscribe({next:t=>{const{selector:r,value:n}=t.data;if(t.type==="SET_VALUE")for(let o of document.querySelectorAll(r))o.value=n||"",o.dispatchEvent(new Event("change"));t.type==="FOCUS"&&document.querySelector(r).focus()}})}function xl(e){return e.addListener({next:({key:t,value:r})=>{try{localStorage.setItem(t,JSON.stringify(r))}catch(n){console.log(n)}}}),{get:(t,r,n=!1)=>{const o=window.localStorage.getItem(t);let i;try{i=o&&o!="null"?JSON.parse(o):r}catch{console.log("Error reading from local storage"),i=r}return n?e.filter(({key:f,value:p})=>t==f).map(({value:f})=>f).compose(nn()).startWith(i):et.of(i)}}}var Wn={};(function(e){(function(t){var r=document.location;function n(){return r.hash===""||r.hash==="#"}var o={mode:"modern",hash:r.hash,history:!1,check:function(){var l=r.hash;l!=this.hash&&(this.hash=l,this.onHashChanged())},fire:function(){this.mode==="modern"?this.history===!0?window.onpopstate():window.onhashchange():this.onHashChanged()},init:function(l,u){var a=this;this.history=u,i.listeners||(i.listeners=[]);function v(h){for(var d=0,m=i.listeners.length;d<m;d++)i.listeners[d](h)}if("onhashchange"in window&&(document.documentMode===void 0||document.documentMode>7))this.history===!0?setTimeout(function(){window.onpopstate=v},500):window.onhashchange=v,this.mode="modern";else{var c=document.createElement("iframe");c.id="state-frame",c.style.display="none",document.body.appendChild(c),this.writeFrame(""),"onpropertychange"in document&&"attachEvent"in document&&document.attachEvent("onpropertychange",function(){event.propertyName==="location"&&a.check()}),window.setInterval(function(){a.check()},50),this.onHashChanged=v,this.mode="legacy"}return i.listeners.push(l),this.mode},destroy:function(l){if(!(!i||!i.listeners))for(var u=i.listeners,a=u.length-1;a>=0;a--)u[a]===l&&u.splice(a,1)},setHash:function(l){return this.mode==="legacy"&&this.writeFrame(l),this.history===!0?(window.history.pushState({},document.title,l),this.fire()):r.hash=l[0]==="/"?l:"/"+l,this},writeFrame:function(l){var u=document.getElementById("state-frame"),a=u.contentDocument||u.contentWindow.document;a.open(),a.write("<script>_hash = '"+l+"'; onload = parent.listener.syncHash;<script>"),a.close()},syncHash:function(){var l=this._hash;return l!=r.hash&&(r.hash=l),this},onHashChanged:function(){}},i=t.Router=function(l){if(!(this instanceof i))return new i(l);this.params={},this.routes={},this.methods=["on","once","after","before"],this.scope=[],this._methods={},this._insert=this.insert,this.insert=this.insertEx,this.historySupport=(window.history!=null?window.history.pushState:null)!=null,this.configure(),this.mount(l||{})};i.prototype.init=function(l){var u=this,a;return this.handler=function(v){var c=v&&v.newURL||window.location.hash,h=u.history===!0?u.getPath():c.replace(/.*#/,"");u.dispatch("on",h.charAt(0)==="/"?h:"/"+h)},o.init(this.handler,this.history),this.history===!1?n()&&l?r.hash=l:n()||u.dispatch("on","/"+r.hash.replace(/^(#\/|#|\/)/,"")):(this.convert_hash_in_init?(a=n()&&l?l:n()?null:r.hash.replace(/^#/,""),a&&window.history.replaceState({},document.title,a)):a=this.getPath(),(a||this.run_in_init===!0)&&this.handler()),this},i.prototype.explode=function(){var l=this.history===!0?this.getPath():r.hash;return l.charAt(1)==="/"&&(l=l.slice(1)),l.slice(1,l.length).split("/")},i.prototype.setRoute=function(l,u,a){var v=this.explode();return typeof l=="number"&&typeof u=="string"?v[l]=u:typeof a=="string"?v.splice(l,u,s):v=[l],o.setHash(v.join("/")),v},i.prototype.insertEx=function(l,u,a,v){return l==="once"&&(l="on",a=function(c){var h=!1;return function(){if(!h)return h=!0,c.apply(this,arguments)}}(a)),this._insert(l,u,a,v)},i.prototype.getRoute=function(l){var u=l;if(typeof l=="number")u=this.explode()[l];else if(typeof l=="string"){var a=this.explode();u=a.indexOf(l)}else u=this.explode();return u},i.prototype.destroy=function(){return o.destroy(this.handler),this},i.prototype.getPath=function(){var l=window.location.pathname;return l.substr(0,1)!=="/"&&(l="/"+l),l};function f(l,u){for(var a=0;a<l.length;a+=1)if(u(l[a],a,l)===!1)return}function p(l){for(var u=[],a=0,v=l.length;a<v;a++)u=u.concat(l[a]);return u}function g(l,u,a){if(!l.length)return a();var v=0;(function c(){u(l[v],function(h){h||h===!1?(a(h),a=function(){}):(v+=1,v===l.length?a():c())})})()}function A(l,u,a){a=l;for(var v in u)if(u.hasOwnProperty(v)&&(a=u[v](l),a!==l))break;return a===l?"([._a-zA-Z0-9-%()]+)":a}function E(l,u){for(var a,v=0,c="";a=l.substr(v).match(/[^\w\d\- %@&]*\*[^\w\d\- %@&]*/);)v=a.index+a[0].length,a[0]=a[0].replace(/^\*/,"([_.()!\\ %@&a-zA-Z0-9-]+)"),c+=l.substr(0,a.index)+a[0];l=c+=l.substr(v);var h=l.match(/:([^\/]+)/ig),d,m;if(h){m=h.length;for(var b=0;b<m;b++)d=h[b],d.slice(0,2)==="::"?l=d.slice(1):l=l.replace(d,A(d,u))}return l}function x(l,u,m,b){var c=0,h=0,d=0,m=(m||"(").toString(),b=(b||")").toString(),y;for(y=0;y<l.length;y++){var _=l[y];if(_.indexOf(m,c)>_.indexOf(b,c)||~_.indexOf(m,c)&&!~_.indexOf(b,c)||!~_.indexOf(m,c)&&~_.indexOf(b,c)){if(h=_.indexOf(m,c),d=_.indexOf(b,c),~h&&!~d||!~h&&~d){var O=l.slice(0,(y||1)+1).join(u);l=[O].concat(l.slice((y||1)+1))}c=(d>h?d:h)+1,y=0}else c=0}return l}var T=/\?.*/;i.prototype.configure=function(l){l=l||{};for(var u=0;u<this.methods.length;u++)this._methods[this.methods[u]]=!0;return this.recurse=l.recurse||this.recurse||!1,this.async=l.async||!1,this.delimiter=l.delimiter||"/",this.strict=typeof l.strict=="undefined"?!0:l.strict,this.notfound=l.notfound,this.resource=l.resource,this.history=l.html5history&&this.historySupport||!1,this.run_in_init=this.history===!0&&l.run_handler_in_init!==!1,this.convert_hash_in_init=this.history===!0&&l.convert_hash_in_init!==!1,this.every={after:l.after||null,before:l.before||null,on:l.on||null},this},i.prototype.param=function(l,u){l[0]!==":"&&(l=":"+l);var a=new RegExp(l,"g");return this.params[l]=function(v){return v.replace(a,u.source||u)},this},i.prototype.on=i.prototype.route=function(l,u,a){var v=this;if(!a&&typeof u=="function"&&(a=u,u=l,l="on"),Array.isArray(u))return u.forEach(function(c){v.on(l,c,a)});if(u.source&&(u=u.source.replace(/\\\//ig,"/")),Array.isArray(l))return l.forEach(function(c){v.on(c.toLowerCase(),u,a)});u=u.split(new RegExp(this.delimiter)),u=x(u,this.delimiter),this.insert(l,this.scope.concat(u),a)},i.prototype.path=function(l,u){var a=this.scope.length;l.source&&(l=l.source.replace(/\\\//ig,"/")),l=l.split(new RegExp(this.delimiter)),l=x(l,this.delimiter),this.scope=this.scope.concat(l),u.call(this,this),this.scope.splice(a,l.length)},i.prototype.dispatch=function(l,u,a){var v=this,c=this.traverse(l,u.replace(T,""),this.routes,""),h=this._invoked,d;if(this._invoked=!0,!c||c.length===0)return this.last=[],typeof this.notfound=="function"&&this.invoke([this.notfound],{method:l,path:u},a),!1;this.recurse==="forward"&&(c=c.reverse());function m(){v.last=c.after,v.invoke(v.runlist(c),v,a)}return d=this.every&&this.every.after?[this.every.after].concat(this.last):[this.last],d&&d.length>0&&h?(this.async?this.invoke(d,this,m):(this.invoke(d,this),m()),!0):(m(),!0)},i.prototype.invoke=function(l,u,a){var v=this,c;this.async?(c=function(h,d){if(Array.isArray(h))return g(h,c,d);typeof h=="function"&&h.apply(u,(l.captures||[]).concat(d))},g(l,c,function(){a&&a.apply(u,arguments)})):(c=function(h){if(Array.isArray(h))return f(h,c);if(typeof h=="function")return h.apply(u,l.captures||[]);typeof h=="string"&&v.resource&&v.resource[h].apply(u,l.captures||[])},f(l,c))},i.prototype.traverse=function(l,u,a,v,c){var h=[],d,m,b,y;function _(N){if(!c)return N;function I(G){for(var q=[],nt=0;nt<G.length;nt++)q[nt]=Array.isArray(G[nt])?I(G[nt]):G[nt];return q}function B(G){for(var q=G.length-1;q>=0;q--)Array.isArray(G[q])?(B(G[q]),G[q].length===0&&G.splice(q,1)):c(G[q])||G.splice(q,1)}var L=I(N);return L.matched=N.matched,L.captures=N.captures,L.after=N.after.filter(c),B(L),L}if(u===this.delimiter&&a[l])return y=[[a.before,a[l]].filter(Boolean)],y.after=[a.after].filter(Boolean),y.matched=!0,y.captures=[],_(y);for(var O in a)if(a.hasOwnProperty(O)&&(!this._methods[O]||this._methods[O]&&typeof a[O]=="object"&&!Array.isArray(a[O]))){if(d=m=v+this.delimiter+O,this.strict||(m+="["+this.delimiter+"]?"),b=u.match(new RegExp("^"+m)),!b)continue;if(b[0]&&b[0]==u&&a[O][l])return y=[[a[O].before,a[O][l]].filter(Boolean)],y.after=[a[O].after].filter(Boolean),y.matched=!0,y.captures=b.slice(1),this.recurse&&a===this.routes&&(y.push([a.before,a.on].filter(Boolean)),y.after=y.after.concat([a.after].filter(Boolean))),_(y);if(y=this.traverse(l,u,a[O],d),y.matched)return y.length>0&&(h=h.concat(y)),this.recurse&&(h.push([a[O].before,a[O].on].filter(Boolean)),y.after=y.after.concat([a[O].after].filter(Boolean)),a===this.routes&&(h.push([a.before,a.on].filter(Boolean)),y.after=y.after.concat([a.after].filter(Boolean)))),h.matched=!0,h.captures=y.captures,h.after=y.after,_(h)}return!1},i.prototype.insert=function(l,u,a,v){var c,h,d,m,b;if(u=u.filter(function(y){return y&&y.length>0}),v=v||this.routes,b=u.shift(),/\:|\*/.test(b)&&!/\\d|\\w/.test(b)&&(b=E(b,this.params)),u.length>0)return v[b]=v[b]||{},this.insert(l,u,a,v[b]);if(!b&&!u.length&&v===this.routes){switch(c=typeof v[l],c){case"function":v[l]=[v[l],a];return;case"object":v[l].push(a);return;case"undefined":v[l]=a;return}return}if(h=typeof v[b],d=Array.isArray(v[b]),v[b]&&!d&&h=="object")switch(c=typeof v[b][l],c){case"function":v[b][l]=[v[b][l],a];return;case"object":v[b][l].push(a);return;case"undefined":v[b][l]=a;return}else if(h=="undefined"){m={},m[l]=a,v[b]=m;return}throw new Error("Invalid route context: "+h)},i.prototype.extend=function(l){var u=this,a=l.length,v;function c(h){u._methods[h]=!0,u[h]=function(){var d=arguments.length===1?[h,""]:[h];u.on.apply(u,d.concat(Array.prototype.slice.call(arguments)))}}for(v=0;v<a;v++)c(l[v])},i.prototype.runlist=function(l){var u=this.every&&this.every.before?[this.every.before].concat(p(l)):p(l);return this.every&&this.every.on&&u.push(this.every.on),u.captures=l.captures,u.source=l.source,u},i.prototype.mount=function(l,u){if(!l||typeof l!="object"||Array.isArray(l))return;var a=this;u=u||[],Array.isArray(u)||(u=u.split(a.delimiter));function v(h,d){var m=h,b=h.split(a.delimiter),y=typeof l[h],_=b[0]===""||!a._methods[b[0]],O=_?"on":m;if(_&&(m=m.slice((m.match(new RegExp("^"+a.delimiter))||[""])[0].length),b.shift()),_&&y==="object"&&!Array.isArray(l[h])){d=d.concat(b),a.mount(l[h],d);return}_&&(d=d.concat(m.split(a.delimiter)),d=x(d,a.delimiter)),a.insert(O,d,l[h])}for(var c in l)l.hasOwnProperty(c)&&v(c,u.slice(0))}})(e)})(Wn);function El(e){const t=new Wn.Router;t.configure({notfound:n=>{window.location.hash=""}}),t.init();const r=et.create({start:n=>{e.subscribe({next:o=>{o=Array.isArray(o)?o:[o];for(let i of o)t.on(i,f=>{n.next(i)})}})},stop:n=>{}});return pt(r)}var ot={},Un={},it={};Object.defineProperty(it,"__esModule",{value:!0});it.vnode=it.undefinedv=it.text=it.svg=it.string=it.object=it.number=it.nullv=it.fun=it.array=void 0;function Ye(e){return Ye=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ye(e)}var Pl=function(t){return t===null};it.nullv=Pl;var Dl=function(t){return t===void 0};it.undefinedv=Dl;var Gn=function(t){return typeof t=="number"};it.number=Gn;var zn=function(t){return typeof t=="string"};it.string=zn;var $l=function(t){return zn(t)||Gn(t)};it.text=$l;var Tl=function(t){return Array.isArray(t)};it.array=Tl;var Hn=function(t){return Ye(t)==="object"&&t!==null};it.object=Hn;var Cl=function(t){return typeof t=="function"};it.fun=Cl;var Nl=function(t){return Hn(t)&&"sel"in t&&"data"in t&&"children"in t&&"text"in t};it.vnode=Nl;var Il={svg:1,circle:1,ellipse:1,line:1,polygon:1,polyline:1,rect:1,g:1,path:1,text:1},Ml=function(t){return t.sel in Il};it.svg=Ml;var vt={},me=Object.prototype.hasOwnProperty,Kn=Object.prototype.toString,Mr=Object.defineProperty,kr=Object.getOwnPropertyDescriptor,jr=function(t){return typeof Array.isArray=="function"?Array.isArray(t):Kn.call(t)==="[object Array]"},Rr=function(t){if(!t||Kn.call(t)!=="[object Object]")return!1;var r=me.call(t,"constructor"),n=t.constructor&&t.constructor.prototype&&me.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!r&&!n)return!1;var o;for(o in t);return typeof o=="undefined"||me.call(t,o)},Lr=function(t,r){Mr&&r.name==="__proto__"?Mr(t,r.name,{enumerable:!0,configurable:!0,value:r.newValue,writable:!0}):t[r.name]=r.newValue},Fr=function(t,r){if(r==="__proto__")if(me.call(t,r)){if(kr)return kr(t,r).value}else return;return t[r]},kl=function e(){var t,r,n,o,i,f,p=arguments[0],g=1,A=arguments.length,E=!1;for(typeof p=="boolean"&&(E=p,p=arguments[1]||{},g=2),(p==null||typeof p!="object"&&typeof p!="function")&&(p={});g<A;++g)if(t=arguments[g],t!=null)for(r in t)n=Fr(p,r),o=Fr(t,r),p!==o&&(E&&o&&(Rr(o)||(i=jr(o)))?(i?(i=!1,f=n&&jr(n)?n:[]):f=n&&Rr(n)?n:{},Lr(p,{name:r,newValue:e(E,f,o)})):typeof o!="undefined"&&Lr(p,{name:r,newValue:o}));return p};function Ve(e){return Ve=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ve(e)}Object.defineProperty(vt,"__esModule",{value:!0});vt.reduceDeep=vt.omit=vt.mapObject=vt.flatifyKeys=vt.extend=vt.deepifyKeys=vt.assign=void 0;var Jn=Rl(kl),Yn=jl(it);function Vn(e){if(typeof WeakMap!="function")return null;var t=new WeakMap,r=new WeakMap;return(Vn=function(o){return o?r:t})(e)}function jl(e,t){if(!t&&e&&e.__esModule)return e;if(e===null||Ve(e)!=="object"&&typeof e!="function")return{default:e};var r=Vn(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(i!=="default"&&Object.prototype.hasOwnProperty.call(e,i)){var f=o?Object.getOwnPropertyDescriptor(e,i):null;f&&(f.get||f.set)?Object.defineProperty(n,i,f):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}function Rl(e){return e&&e.__esModule?e:{default:e}}function Yt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Xn=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Jn.default.apply(void 0,[!0].concat(r))};vt.extend=Xn;var Ll=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Jn.default.apply(void 0,[!1].concat(r))};vt.assign=Ll;var Fl=function e(t,r,n){for(var o=n,i=0;i<t.length;i++){var f=t[i];Yn.array(f)?o=e(f,r,o):o=r(o,f)}return o};vt.reduceDeep=Fl;var ue=function(t,r){return Object.keys(t).map(function(n){return r(n,t[n])}).reduce(function(n,o){return Xn(n,o)},{})};vt.mapObject=ue;var Bl=function(t,r){return ue(t,function(n,o){var i=n.indexOf("-");if(i>-1&&r[n.slice(0,i)]!==void 0){var f=Yt({},n.slice(i+1),o);return Yt({},n.slice(0,i),f)}return Yt({},n,o)})};vt.deepifyKeys=Bl;var ql=function e(t){return ue(t,function(r,n){return Yn.object(n)?ue(e(n),function(o,i){return Yt({},"".concat(r,"-").concat(o),i)}):Yt({},r,n)})};vt.flatifyKeys=ql;var Wl=function(t,r){return ue(r,function(n,o){return n!==t?Yt({},n,o):{}})};vt.omit=Wl;(function(e){function t(h){return t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d},t(h)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.createElementWithModules=e.createElement=void 0;var r=i(it),n=i(vt);function o(h){if(typeof WeakMap!="function")return null;var d=new WeakMap,m=new WeakMap;return(o=function(y){return y?m:d})(h)}function i(h,d){if(!d&&h&&h.__esModule)return h;if(h===null||t(h)!=="object"&&typeof h!="function")return{default:h};var m=o(d);if(m&&m.has(h))return m.get(h);var b={},y=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var _ in h)if(_!=="default"&&Object.prototype.hasOwnProperty.call(h,_)){var O=y?Object.getOwnPropertyDescriptor(h,_):null;O&&(O.get||O.set)?Object.defineProperty(b,_,O):b[_]=h[_]}return b.default=h,m&&m.set(h,b),b}function f(h,d,m){return d in h?Object.defineProperty(h,d,{value:m,enumerable:!0,configurable:!0,writable:!0}):h[d]=m,h}var p=function(d){return r.text(d)?{text:d,sel:void 0,data:void 0,children:void 0,elm:void 0,key:void 0}:void 0},g=function h(d){return r.svg(d)?n.assign(d,{data:n.omit("props",n.extend(d.data,{ns:"http://www.w3.org/2000/svg",attrs:n.omit("className",n.extend(d.data.props,{class:d.data.props?d.data.props.className:void 0}))}))},{children:r.undefinedv(d.children)?void 0:d.children.map(function(m){return h(m)})}):d},A={for:"attrs",role:"attrs",tabindex:"attrs","aria-*":"attrs",key:null},E=function(d,m){return n.mapObject(d,function(b,y){var _=f({},b,y);if(A[b]&&m[A[b]]!==void 0)return f({},A[b],_);if(A[b]===null)return{};for(var O=Object.keys(A),N=0;N<O.length;N++){var I=O[N];if(I.charAt(I.length-1)==="*"&&b.indexOf(I.slice(0,-1))===0&&m[A[I]]!==void 0)return f({},A[I],_)}return m[b]!==void 0?f({},m[b]?m[b]:b,y):m.props!==void 0?{props:_}:_})},x=function(d,m){return g(E(n.deepifyKeys(d,m),m))},T=function(d){return d.length>1||!r.text(d[0])?void 0:d[0].toString()},l=function(d){return n.reduceDeep(d,function(m,b){var y=r.vnode(b)?b:p(b);return m.push(y),m},[])},u={attrs:"",props:"",class:"",data:"dataset",style:"",hook:"",on:""},a=function(d){return function(m,b){r.fun(m)&&(m=m.name||"unnamed",console.error("JSX Error: A capitalized tag name was used, but was transpiled to a nameless function.  Either use a named function or a lower case tag name to avoid this problem"));for(var y=arguments.length,_=new Array(y>2?y-2:0),O=2;O<y;O++)_[O-2]=arguments[O];var N=T(_);return g({sel:m,data:b?x(b,d):{},children:N?void 0:l(_),text:N,elm:void 0,key:b?b.key:void 0})}};e.createElementWithModules=a;var v=a(u);e.createElement=v;var c={createElement:v,createElementWithModules:a};e.default=c})(Un);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"jsx",{enumerable:!0,get:function(){return t.createElement}});var t=Un})(ot);function Ul(e,t=""){const r=e.events("input"),n=e.events("keydown"),o=e.events("keyup");e.events("change");const i=e.events("focus"),f=e.events("blur"),p=St.xs.merge(i,r).map(E=>E.target.value).startWith(t).remember(),g=n.filter(E=>E.keyCode===13).mapTo("enter"),A=n.filter(E=>E.keyCode===27).mapTo("escape");return{value$:p,input$:r,enter$:g,escape$:A,focus$:i,blur$:f,keydown$:n,keyup$:o}}const Gl=St.component({name:"TODO",model:{TOGGLE:e=>_t(bt({},e),{completed:!e.completed}),DESTROY:e=>{},EDIT_START:(e,t,r)=>{const n=".todo-"+e.id+" .edit";return r("SET_EDIT_VALUE",{selector:n,value:e.title}),r("FOCUS_EDIT_FIELD",{selector:n}),_t(bt({},e),{editing:!0,cachedTitle:e.title})},EDIT_DONE:(e,t)=>e.editing===!1?e:_t(bt({},e),{title:t,editing:!1,cachedTitle:""}),EDIT_CANCEL:(e,t,r)=>{const n=".todo-"+e.id+" .edit";return r("SET_EDIT_VALUE",{selector:n,value:e.cachedTitle}),_t(bt({},e),{title:e.cachedTitle,editing:!1,cachedTitle:""})},SET_EDIT_VALUE:{DOMFX:(e,t)=>({type:"SET_VALUE",data:t})},FOCUS_EDIT_FIELD:{DOMFX:(e,t)=>({type:"FOCUS",data:t})}},intent:({DOM:e})=>{const t=e.select(".toggle").events("click"),r=e.select(".todo label").events("dblclick"),n=e.select(".destroy").events("click"),o=e.select(".edit"),{value$:i,enter$:f,escape$:p,blur$:g}=Ul(o),A=St.xs.merge(f,g).compose(Tn(i)).map(([E,x])=>x);return{TOGGLE:t,DESTROY:n,EDIT_START:r,EDIT_DONE:A,EDIT_CANCEL:p}},view:({state:e})=>{const{id:t,hidden:r,completed:n,editing:o,title:i}=e;if(r)return;const f=St.classes("todo","todo-"+t,{completed:n,editing:o}),p=!!n;return ot.jsx("li",{className:f},ot.jsx("div",{className:"view"},ot.jsx("input",{className:"toggle",type:"checkbox",checked:p}),ot.jsx("label",null,i),ot.jsx("button",{className:"destroy"})),ot.jsx("input",{className:"edit",type:"text",value:i}))}});var zl=St.collection(Gl,"todos");const qe={all:e=>!0,active:e=>!e.completed,completed:e=>e.completed};var Hl=St.component({name:"APP",initialState:{visibility:"all",todos:[]},calculated:{total:e=>e.todos.length,remaining:e=>e.todos.filter(t=>!t.completed).length,completed:e=>e.todos.filter(t=>t.completed).length,allDone:e=>e.todos.every(t=>t.completed)},children:{todos:zl},model:{VISIBILITY:(e,t)=>_t(bt({},e),{visibility:t,todos:e.todos.map(r=>_t(bt({},r),{hidden:!qe[t](r)}))}),FROM_STORE:(e,t)=>_t(bt({},e),{todos:t}),NEW_TODO:(e,t,r)=>{const o={id:Date.now(),title:t,completed:!1};return r("CLEAR_FORM"),_t(bt({},e),{todos:[...e.todos,o]})},TOGGLE_ALL:e=>{const t=e.todos.every(n=>n.completed),r=e.todos.map(n=>_t(bt({},n),{completed:!t}));return _t(bt({},e),{todos:r})},CLEAR_COMPLETED:e=>{const t=e.todos.filter(r=>!r.completed);return _t(bt({},e),{todos:t})},CLEAR_FORM:{DOMFX:{type:"SET_VALUE",data:{selector:".new-todo"}}},ADD_ROUTE:{ROUTER:!0},TO_STORE:{STORE:(e,t)=>{const r=e.todos.map(({id:n,title:o,completed:i})=>({id:n,title:o,completed:i}));return{key:"todos",value:r}}}},intent:({STATE:e,DOM:t,ROUTER:r,STORE:n})=>{const o=n.get("todos",[]),i=t.select(".toggle-all").events("click"),f=t.select(".clear-completed").events("click"),p=t.select(".new-todo-form"),g=St.processForm(p,{events:"submit"}).map(x=>x["new-todo"].trim()).filter(x=>x!==""),A=St.xs.fromArray(Object.keys(qe)),E=e.stream.drop(1);return{VISIBILITY:r,FROM_STORE:o,NEW_TODO:g,TOGGLE_ALL:i,CLEAR_COMPLETED:f,ADD_ROUTE:A,TO_STORE:E}},view:({state:e,todos:t})=>{const{visibility:r,total:n,remaining:o,completed:i,allDone:f}=e,p=Object.keys(qe),g=E=>E.charAt(0).toUpperCase()+E.slice(1),A=E=>ot.jsx("li",null,ot.jsx("a",{href:`#/${E}`,className:St.classes({selected:r==E})},g(E)));return ot.jsx("section",{className:"todoapp"},ot.jsx("header",{className:"header"},ot.jsx("h1",null,"todos"),ot.jsx("form",{className:"new-todo-form"},ot.jsx("input",{className:"new-todo",name:"new-todo",autofocus:!0,autocomplete:"off",placeholder:"What needs to be done?"}))),n>0&&ot.jsx("section",{className:"main"},ot.jsx("input",{id:"toggle-all",className:"toggle-all",type:"checkbox",checked:f}),ot.jsx("label",{for:"toggle-all"},"Mark all as complete"),ot.jsx("ul",{className:"todo-list"},t)),n>0&&ot.jsx("footer",{className:"footer"},ot.jsx("span",{className:"todo-count"},ot.jsx("strong",null,o," ")," ",o===1?"item":"items"," left"),ot.jsx("ul",{className:"filters"},p.map(A)),i>0&&ot.jsx("button",{className:"clear-completed"},"Clear completed")))}});const Kl={DOMFX:Al,STORE:xl,ROUTER:El};St.run(Hl,Kl);
