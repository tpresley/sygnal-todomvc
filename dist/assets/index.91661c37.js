var Eo=Object.defineProperty,xo=Object.defineProperties;var $o=Object.getOwnPropertyDescriptors;var kr=Object.getOwnPropertySymbols;var Po=Object.prototype.hasOwnProperty,Do=Object.prototype.propertyIsEnumerable;var Cr=(e,t,r)=>t in e?Eo(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,St=(e,t)=>{for(var r in t||(t={}))Po.call(t,r)&&Cr(e,r,t[r]);if(kr)for(var r of kr(t))Do.call(t,r)&&Cr(e,r,t[r]);return e},Ot=(e,t)=>xo(e,$o(t));var No=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var kl=No((Ml,fr)=>{const To=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const c of i.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function r(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerpolicy&&(i.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?i.credentials="include":o.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(o){if(o.ep)return;o.ep=!0;const i=r(o);fetch(o.href,i)}};To();var gt=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function ye(e){if(e.__esModule)return e;var t=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(e).forEach(function(r){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})}),t}var oe={},ln={},xt={},pn={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t;function t(r){var n,o=r.Symbol;if(typeof o=="function")if(o.observable)n=o.observable;else{n=o.for("https://github.com/benlesh/symbol-observable");try{o.observable=n}catch{}}else n="@@observable";return n}})(pn);var Io=pn,Mr=Object.prototype.toString,hn=function(t){var r=Mr.call(t),n=r==="[object Arguments]";return n||(n=r!=="[object Array]"&&t!==null&&typeof t=="object"&&typeof t.length=="number"&&t.length>=0&&Mr.call(t.callee)==="[object Function]"),n},dn;if(!Object.keys){var _e=Object.prototype.hasOwnProperty,Lr=Object.prototype.toString,ko=hn,jr=Object.prototype.propertyIsEnumerable,Co=!jr.call({toString:null},"toString"),Mo=jr.call(function(){},"prototype"),ge=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],Be=function(e){var t=e.constructor;return t&&t.prototype===e},Lo={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},jo=function(){if(typeof window=="undefined")return!1;for(var e in window)try{if(!Lo["$"+e]&&_e.call(window,e)&&window[e]!==null&&typeof window[e]=="object")try{Be(window[e])}catch{return!0}}catch{return!0}return!1}(),Ro=function(e){if(typeof window=="undefined"||!jo)return Be(e);try{return Be(e)}catch{return!1}};dn=function(t){var r=t!==null&&typeof t=="object",n=Lr.call(t)==="[object Function]",o=ko(t),i=r&&Lr.call(t)==="[object String]",c=[];if(!r&&!n&&!o)throw new TypeError("Object.keys called on a non-object");var l=Mo&&n;if(i&&t.length>0&&!_e.call(t,0))for(var v=0;v<t.length;++v)c.push(String(v));if(o&&t.length>0)for(var E=0;E<t.length;++E)c.push(String(E));else for(var _ in t)!(l&&_==="prototype")&&_e.call(t,_)&&c.push(String(_));if(Co)for(var S=Ro(t),I=0;I<ge.length;++I)!(S&&ge[I]==="constructor")&&_e.call(t,ge[I])&&c.push(ge[I]);return c}}var Fo=dn,Bo=Array.prototype.slice,Wo=hn,Rr=Object.keys,Se=Rr?function(t){return Rr(t)}:Fo,Fr=Object.keys;Se.shim=function(){if(Object.keys){var t=function(){var r=Object.keys(arguments);return r&&r.length===arguments.length}(1,2);t||(Object.keys=function(n){return Wo(n)?Fr(Bo.call(n)):Fr(n)})}else Object.keys=Se;return Object.keys||Se};var qo=Se,Uo=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var t={},r=Symbol("test"),n=Object(r);if(typeof r=="string"||Object.prototype.toString.call(r)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var o=42;t[r]=o;for(r in t)return!1;if(typeof Object.keys=="function"&&Object.keys(t).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(t).length!==0)return!1;var i=Object.getOwnPropertySymbols(t);if(i.length!==1||i[0]!==r||!Object.prototype.propertyIsEnumerable.call(t,r))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var c=Object.getOwnPropertyDescriptor(t,r);if(c.value!==o||c.enumerable!==!0)return!1}return!0},Br=typeof Symbol!="undefined"&&Symbol,Go=Uo,zo=function(){return typeof Br!="function"||typeof Symbol!="function"||typeof Br("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:Go()},Ho="Function.prototype.bind called on incompatible ",We=Array.prototype.slice,Ko=Object.prototype.toString,Jo="[object Function]",Yo=function(t){var r=this;if(typeof r!="function"||Ko.call(r)!==Jo)throw new TypeError(Ho+r);for(var n=We.call(arguments,1),o,i=function(){if(this instanceof o){var _=r.apply(this,n.concat(We.call(arguments)));return Object(_)===_?_:this}else return r.apply(t,n.concat(We.call(arguments)))},c=Math.max(0,r.length-n.length),l=[],v=0;v<c;v++)l.push("$"+v);if(o=Function("binder","return function ("+l.join(",")+"){ return binder.apply(this,arguments); }")(i),r.prototype){var E=function(){};E.prototype=r.prototype,o.prototype=new E,E.prototype=null}return o},Vo=Yo,vn=Function.prototype.bind||Vo,Xo=vn,Zo=Xo.call(Function.call,Object.prototype.hasOwnProperty),V,de=SyntaxError,yn=Function,re=TypeError,qe=function(e){try{return yn('"use strict"; return ('+e+").constructor;")()}catch{}},Yt=Object.getOwnPropertyDescriptor;if(Yt)try{Yt({},"")}catch{Yt=null}var Ue=function(){throw new re},Qo=Yt?function(){try{return arguments.callee,Ue}catch{try{return Yt(arguments,"callee").get}catch{return Ue}}}():Ue,Qt=zo(),jt=Object.getPrototypeOf||function(e){return e.__proto__},te={},ti=typeof Uint8Array=="undefined"?V:jt(Uint8Array),ne={"%AggregateError%":typeof AggregateError=="undefined"?V:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer=="undefined"?V:ArrayBuffer,"%ArrayIteratorPrototype%":Qt?jt([][Symbol.iterator]()):V,"%AsyncFromSyncIteratorPrototype%":V,"%AsyncFunction%":te,"%AsyncGenerator%":te,"%AsyncGeneratorFunction%":te,"%AsyncIteratorPrototype%":te,"%Atomics%":typeof Atomics=="undefined"?V:Atomics,"%BigInt%":typeof BigInt=="undefined"?V:BigInt,"%Boolean%":Boolean,"%DataView%":typeof DataView=="undefined"?V:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array=="undefined"?V:Float32Array,"%Float64Array%":typeof Float64Array=="undefined"?V:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry=="undefined"?V:FinalizationRegistry,"%Function%":yn,"%GeneratorFunction%":te,"%Int8Array%":typeof Int8Array=="undefined"?V:Int8Array,"%Int16Array%":typeof Int16Array=="undefined"?V:Int16Array,"%Int32Array%":typeof Int32Array=="undefined"?V:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Qt?jt(jt([][Symbol.iterator]())):V,"%JSON%":typeof JSON=="object"?JSON:V,"%Map%":typeof Map=="undefined"?V:Map,"%MapIteratorPrototype%":typeof Map=="undefined"||!Qt?V:jt(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise=="undefined"?V:Promise,"%Proxy%":typeof Proxy=="undefined"?V:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect=="undefined"?V:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set=="undefined"?V:Set,"%SetIteratorPrototype%":typeof Set=="undefined"||!Qt?V:jt(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer=="undefined"?V:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Qt?jt(""[Symbol.iterator]()):V,"%Symbol%":Qt?Symbol:V,"%SyntaxError%":de,"%ThrowTypeError%":Qo,"%TypedArray%":ti,"%TypeError%":re,"%Uint8Array%":typeof Uint8Array=="undefined"?V:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray=="undefined"?V:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array=="undefined"?V:Uint16Array,"%Uint32Array%":typeof Uint32Array=="undefined"?V:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap=="undefined"?V:WeakMap,"%WeakRef%":typeof WeakRef=="undefined"?V:WeakRef,"%WeakSet%":typeof WeakSet=="undefined"?V:WeakSet},ei=function e(t){var r;if(t==="%AsyncFunction%")r=qe("async function () {}");else if(t==="%GeneratorFunction%")r=qe("function* () {}");else if(t==="%AsyncGeneratorFunction%")r=qe("async function* () {}");else if(t==="%AsyncGenerator%"){var n=e("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if(t==="%AsyncIteratorPrototype%"){var o=e("%AsyncGenerator%");o&&(r=jt(o.prototype))}return ne[t]=r,r},Wr={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},ke=vn,Pe=Zo,ri=ke.call(Function.call,Array.prototype.concat),ni=ke.call(Function.apply,Array.prototype.splice),qr=ke.call(Function.call,String.prototype.replace),De=ke.call(Function.call,String.prototype.slice),oi=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,ii=/\\(\\)?/g,ai=function(t){var r=De(t,0,1),n=De(t,-1);if(r==="%"&&n!=="%")throw new de("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&r!=="%")throw new de("invalid intrinsic syntax, expected opening `%`");var o=[];return qr(t,oi,function(i,c,l,v){o[o.length]=l?qr(v,ii,"$1"):c||i}),o},si=function(t,r){var n=t,o;if(Pe(Wr,n)&&(o=Wr[n],n="%"+o[0]+"%"),Pe(ne,n)){var i=ne[n];if(i===te&&(i=ei(n)),typeof i=="undefined"&&!r)throw new re("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:o,name:n,value:i}}throw new de("intrinsic "+t+" does not exist!")},ui=function(t,r){if(typeof t!="string"||t.length===0)throw new re("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new re('"allowMissing" argument must be a boolean');var n=ai(t),o=n.length>0?n[0]:"",i=si("%"+o+"%",r),c=i.name,l=i.value,v=!1,E=i.alias;E&&(o=E[0],ni(n,ri([0,1],E)));for(var _=1,S=!0;_<n.length;_+=1){var I=n[_],u=De(I,0,1),f=De(I,-1);if((u==='"'||u==="'"||u==="`"||f==='"'||f==="'"||f==="`")&&u!==f)throw new de("property names with quotes must have matching quotes");if((I==="constructor"||!S)&&(v=!0),o+="."+I,c="%"+o+"%",Pe(ne,c))l=ne[c];else if(l!=null){if(!(I in l)){if(!r)throw new re("base intrinsic for "+t+" exists, but the property is not available.");return}if(Yt&&_+1>=n.length){var a=Yt(l,I);S=!!a,S&&"get"in a&&!("originalValue"in a.get)?l=a.get:l=l[I]}else S=Pe(l,I),l=l[I];S&&!v&&(ne[c]=l)}}return l},fi=ui,er=fi("%Object.defineProperty%",!0),rr=function(){if(er)try{return er({},"a",{value:1}),!0}catch{return!1}return!1};rr.hasArrayLengthDefineBug=function(){if(!rr())return null;try{return er([],"length",{value:1}).length!==1}catch{return!0}};var ci=rr,li=qo,pi=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",hi=Object.prototype.toString,di=Array.prototype.concat,mn=Object.defineProperty,vi=function(e){return typeof e=="function"&&hi.call(e)==="[object Function]"},yi=ci(),_n=mn&&yi,mi=function(e,t,r,n){t in e&&(!vi(n)||!n())||(_n?mn(e,t,{configurable:!0,enumerable:!1,value:r,writable:!0}):e[t]=r)},gn=function(e,t){var r=arguments.length>2?arguments[2]:{},n=li(t);pi&&(n=di.call(n,Object.getOwnPropertySymbols(t)));for(var o=0;o<n.length;o+=1)mi(e,n[o],t[n[o]],r[n[o]])};gn.supportsDescriptors=!!_n;var bn=gn,pe={exports:{}};typeof self!="undefined"?pe.exports=self:typeof window!="undefined"?pe.exports=window:pe.exports=Function("return this")();var _i=pe.exports,wn=function(){return typeof gt!="object"||!gt||gt.Math!==Math||gt.Array!==Array?_i:gt},gi=bn,bi=wn,wi=function(){var t=bi();if(gi.supportsDescriptors){var r=Object.getOwnPropertyDescriptor(t,"globalThis");(!r||r.configurable&&(r.enumerable||!r.writable||globalThis!==t))&&Object.defineProperty(t,"globalThis",{configurable:!0,enumerable:!1,value:t,writable:!0})}else(typeof globalThis!="object"||globalThis!==t)&&(t.globalThis=t);return t},Si=bn,Oi=pe.exports,Sn=wn,Ai=wi,Ei=Sn(),On=function(){return Ei};Si(On,{getPolyfill:Sn,implementation:Oi,shim:Ai});var An=On,xi=gt&&gt.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)o.hasOwnProperty(i)&&(n[i]=o[i])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(xt,"__esModule",{value:!0});xt.NO_IL=xt.NO=xt.MemoryStream=xt.Stream=void 0;var $i=Io,Pi=An,be=$i.default(Pi.getPolyfill()),N={};xt.NO=N;function vt(){}function Oe(e){for(var t=e.length,r=Array(t),n=0;n<t;++n)r[n]=e[n];return r}function Di(e,t){return function(n){return e(n)&&t(n)}}function cr(e,t,r){try{return e.f(t)}catch(n){return r._e(n),N}}var Ht={_n:vt,_e:vt,_c:vt};xt.NO_IL=Ht;function Ur(e){e._start=function(r){r.next=r._n,r.error=r._e,r.complete=r._c,this.start(r)},e._stop=e.stop}var Ni=function(){function e(t,r){this._stream=t,this._listener=r}return e.prototype.unsubscribe=function(){this._stream._remove(this._listener)},e}(),Ti=function(){function e(t){this._listener=t}return e.prototype.next=function(t){this._listener._n(t)},e.prototype.error=function(t){this._listener._e(t)},e.prototype.complete=function(){this._listener._c()},e}(),Ii=function(){function e(t){this.type="fromObservable",this.ins=t,this.active=!1}return e.prototype._start=function(t){this.out=t,this.active=!0,this._sub=this.ins.subscribe(new Ti(t)),this.active||this._sub.unsubscribe()},e.prototype._stop=function(){this._sub&&this._sub.unsubscribe(),this.active=!1},e}(),ki=function(){function e(t){this.type="merge",this.insArr=t,this.out=N,this.ac=0}return e.prototype._start=function(t){this.out=t;var r=this.insArr,n=r.length;this.ac=n;for(var o=0;o<n;o++)r[o]._add(this)},e.prototype._stop=function(){for(var t=this.insArr,r=t.length,n=0;n<r;n++)t[n]._remove(this);this.out=N},e.prototype._n=function(t){var r=this.out;r!==N&&r._n(t)},e.prototype._e=function(t){var r=this.out;r!==N&&r._e(t)},e.prototype._c=function(){if(--this.ac<=0){var t=this.out;if(t===N)return;t._c()}},e}(),Ci=function(){function e(t,r,n){this.i=t,this.out=r,this.p=n,n.ils.push(this)}return e.prototype._n=function(t){var r=this.p,n=this.out;if(n!==N&&r.up(t,this.i)){var o=Oe(r.vals);n._n(o)}},e.prototype._e=function(t){var r=this.out;r!==N&&r._e(t)},e.prototype._c=function(){var t=this.p;t.out!==N&&--t.Nc===0&&t.out._c()},e}(),Mi=function(){function e(t){this.type="combine",this.insArr=t,this.out=N,this.ils=[],this.Nc=this.Nn=0,this.vals=[]}return e.prototype.up=function(t,r){var n=this.vals[r],o=this.Nn?n===N?--this.Nn:this.Nn:0;return this.vals[r]=t,o===0},e.prototype._start=function(t){this.out=t;var r=this.insArr,n=this.Nc=this.Nn=r.length,o=this.vals=new Array(n);if(n===0)t._n([]),t._c();else for(var i=0;i<n;i++)o[i]=N,r[i]._add(new Ci(i,t,this))},e.prototype._stop=function(){for(var t=this.insArr,r=t.length,n=this.ils,o=0;o<r;o++)t[o]._remove(n[o]);this.out=N,this.ils=[],this.vals=[]},e}(),Li=function(){function e(t){this.type="fromArray",this.a=t}return e.prototype._start=function(t){for(var r=this.a,n=0,o=r.length;n<o;n++)t._n(r[n]);t._c()},e.prototype._stop=function(){},e}(),ji=function(){function e(t){this.type="fromPromise",this.on=!1,this.p=t}return e.prototype._start=function(t){var r=this;this.on=!0,this.p.then(function(n){r.on&&(t._n(n),t._c())},function(n){t._e(n)}).then(vt,function(n){setTimeout(function(){throw n})})},e.prototype._stop=function(){this.on=!1},e}(),Ri=function(){function e(t){this.type="periodic",this.period=t,this.intervalID=-1,this.i=0}return e.prototype._start=function(t){var r=this;function n(){t._n(r.i++)}this.intervalID=setInterval(n,this.period)},e.prototype._stop=function(){this.intervalID!==-1&&clearInterval(this.intervalID),this.intervalID=-1,this.i=0},e}(),Fi=function(){function e(t,r){this.type="debug",this.ins=t,this.out=N,this.s=vt,this.l="",typeof r=="string"?this.l=r:typeof r=="function"&&(this.s=r)}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=N},e.prototype._n=function(t){var r=this.out;if(r!==N){var n=this.s,o=this.l;if(n!==vt)try{n(t)}catch(i){r._e(i)}else o?console.log(o+":",t):console.log(t);r._n(t)}},e.prototype._e=function(t){var r=this.out;r!==N&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==N&&t._c()},e}(),Bi=function(){function e(t,r){this.type="drop",this.ins=r,this.out=N,this.max=t,this.dropped=0}return e.prototype._start=function(t){this.out=t,this.dropped=0,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=N},e.prototype._n=function(t){var r=this.out;r!==N&&this.dropped++>=this.max&&r._n(t)},e.prototype._e=function(t){var r=this.out;r!==N&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==N&&t._c()},e}(),Wi=function(){function e(t,r){this.out=t,this.op=r}return e.prototype._n=function(){this.op.end()},e.prototype._e=function(t){this.out._e(t)},e.prototype._c=function(){this.op.end()},e}(),qi=function(){function e(t,r){this.type="endWhen",this.ins=r,this.out=N,this.o=t,this.oil=Ht}return e.prototype._start=function(t){this.out=t,this.o._add(this.oil=new Wi(t,this)),this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.o._remove(this.oil),this.out=N,this.oil=Ht},e.prototype.end=function(){var t=this.out;t!==N&&t._c()},e.prototype._n=function(t){var r=this.out;r!==N&&r._n(t)},e.prototype._e=function(t){var r=this.out;r!==N&&r._e(t)},e.prototype._c=function(){this.end()},e}(),Ge=function(){function e(t,r){this.type="filter",this.ins=r,this.out=N,this.f=t}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=N},e.prototype._n=function(t){var r=this.out;if(r!==N){var n=cr(this,t,r);n===N||!n||r._n(t)}},e.prototype._e=function(t){var r=this.out;r!==N&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==N&&t._c()},e}(),Ui=function(){function e(t,r){this.out=t,this.op=r}return e.prototype._n=function(t){this.out._n(t)},e.prototype._e=function(t){this.out._e(t)},e.prototype._c=function(){this.op.inner=N,this.op.less()},e}(),Gi=function(){function e(t){this.type="flatten",this.ins=t,this.out=N,this.open=!0,this.inner=N,this.il=Ht}return e.prototype._start=function(t){this.out=t,this.open=!0,this.inner=N,this.il=Ht,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.inner!==N&&this.inner._remove(this.il),this.out=N,this.open=!0,this.inner=N,this.il=Ht},e.prototype.less=function(){var t=this.out;t!==N&&!this.open&&this.inner===N&&t._c()},e.prototype._n=function(t){var r=this.out;if(r!==N){var n=this,o=n.inner,i=n.il;o!==N&&i!==Ht&&o._remove(i),(this.inner=t)._add(this.il=new Ui(r,this))}},e.prototype._e=function(t){var r=this.out;r!==N&&r._e(t)},e.prototype._c=function(){this.open=!1,this.less()},e}(),zi=function(){function e(t,r,n){var o=this;this.type="fold",this.ins=n,this.out=N,this.f=function(i){return t(o.acc,i)},this.acc=this.seed=r}return e.prototype._start=function(t){this.out=t,this.acc=this.seed,t._n(this.acc),this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=N,this.acc=this.seed},e.prototype._n=function(t){var r=this.out;if(r!==N){var n=cr(this,t,r);n!==N&&r._n(this.acc=n)}},e.prototype._e=function(t){var r=this.out;r!==N&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==N&&t._c()},e}(),Hi=function(){function e(t){this.type="last",this.ins=t,this.out=N,this.has=!1,this.val=N}return e.prototype._start=function(t){this.out=t,this.has=!1,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=N,this.val=N},e.prototype._n=function(t){this.has=!0,this.val=t},e.prototype._e=function(t){var r=this.out;r!==N&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==N&&(this.has?(t._n(this.val),t._c()):t._e(new Error("last() failed because input stream completed")))},e}(),Ki=function(){function e(t,r){this.type="map",this.ins=r,this.out=N,this.f=t}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=N},e.prototype._n=function(t){var r=this.out;if(r!==N){var n=cr(this,t,r);n!==N&&r._n(n)}},e.prototype._e=function(t){var r=this.out;r!==N&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==N&&t._c()},e}(),Ji=function(){function e(t){this.type="remember",this.ins=t,this.out=N}return e.prototype._start=function(t){this.out=t,this.ins._add(t)},e.prototype._stop=function(){this.ins._remove(this.out),this.out=N},e}(),Yi=function(){function e(t,r){this.type="replaceError",this.ins=r,this.out=N,this.f=t}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=N},e.prototype._n=function(t){var r=this.out;r!==N&&r._n(t)},e.prototype._e=function(t){var r=this.out;if(r!==N)try{this.ins._remove(this),(this.ins=this.f(t))._add(this)}catch(n){r._e(n)}},e.prototype._c=function(){var t=this.out;t!==N&&t._c()},e}(),Vi=function(){function e(t,r){this.type="startWith",this.ins=t,this.out=N,this.val=r}return e.prototype._start=function(t){this.out=t,this.out._n(this.val),this.ins._add(t)},e.prototype._stop=function(){this.ins._remove(this.out),this.out=N},e}(),Xi=function(){function e(t,r){this.type="take",this.ins=r,this.out=N,this.max=t,this.taken=0}return e.prototype._start=function(t){this.out=t,this.taken=0,this.max<=0?t._c():this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=N},e.prototype._n=function(t){var r=this.out;if(r!==N){var n=++this.taken;n<this.max?r._n(t):n===this.max&&(r._n(t),r._c())}},e.prototype._e=function(t){var r=this.out;r!==N&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==N&&t._c()},e}(),lr=function(){function e(t){this._prod=t||N,this._ils=[],this._stopID=N,this._dl=N,this._d=!1,this._target=null,this._err=N}return e.prototype._n=function(t){var r=this._ils,n=r.length;if(this._d&&this._dl._n(t),n==1)r[0]._n(t);else{if(n==0)return;for(var o=Oe(r),i=0;i<n;i++)o[i]._n(t)}},e.prototype._e=function(t){if(this._err===N){this._err=t;var r=this._ils,n=r.length;if(this._x(),this._d&&this._dl._e(t),n==1)r[0]._e(t);else{if(n==0)return;for(var o=Oe(r),i=0;i<n;i++)o[i]._e(t)}if(!this._d&&n==0)throw this._err}},e.prototype._c=function(){var t=this._ils,r=t.length;if(this._x(),this._d&&this._dl._c(),r==1)t[0]._c();else{if(r==0)return;for(var n=Oe(t),o=0;o<r;o++)n[o]._c()}},e.prototype._x=function(){this._ils.length!==0&&(this._prod!==N&&this._prod._stop(),this._err=N,this._ils=[])},e.prototype._stopNow=function(){this._prod._stop(),this._err=N,this._stopID=N},e.prototype._add=function(t){var r=this._target;if(r)return r._add(t);var n=this._ils;if(n.push(t),!(n.length>1))if(this._stopID!==N)clearTimeout(this._stopID),this._stopID=N;else{var o=this._prod;o!==N&&o._start(this)}},e.prototype._remove=function(t){var r=this,n=this._target;if(n)return n._remove(t);var o=this._ils,i=o.indexOf(t);i>-1&&(o.splice(i,1),this._prod!==N&&o.length<=0?(this._err=N,this._stopID=setTimeout(function(){return r._stopNow()})):o.length===1&&this._pruneCycles())},e.prototype._pruneCycles=function(){this._hasNoSinks(this,[])&&this._remove(this._ils[0])},e.prototype._hasNoSinks=function(t,r){if(r.indexOf(t)!==-1)return!0;if(t.out===this)return!0;if(t.out&&t.out!==N)return this._hasNoSinks(t.out,r.concat(t));if(t._ils){for(var n=0,o=t._ils.length;n<o;n++)if(!this._hasNoSinks(t._ils[n],r.concat(t)))return!1;return!0}else return!1},e.prototype.ctor=function(){return this instanceof kt?kt:e},e.prototype.addListener=function(t){t._n=t.next||vt,t._e=t.error||vt,t._c=t.complete||vt,this._add(t)},e.prototype.removeListener=function(t){this._remove(t)},e.prototype.subscribe=function(t){return this.addListener(t),new Ni(this,t)},e.prototype[be]=function(){return this},e.create=function(t){if(t){if(typeof t.start!="function"||typeof t.stop!="function")throw new Error("producer requires both start and stop functions");Ur(t)}return new e(t)},e.createWithMemory=function(t){return t&&Ur(t),new kt(t)},e.never=function(){return new e({_start:vt,_stop:vt})},e.empty=function(){return new e({_start:function(t){t._c()},_stop:vt})},e.throw=function(t){return new e({_start:function(r){r._e(t)},_stop:vt})},e.from=function(t){if(typeof t[be]=="function")return e.fromObservable(t);if(typeof t.then=="function")return e.fromPromise(t);if(Array.isArray(t))return e.fromArray(t);throw new TypeError("Type of input to from() must be an Array, Promise, or Observable")},e.of=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return e.fromArray(t)},e.fromArray=function(t){return new e(new Li(t))},e.fromPromise=function(t){return new e(new ji(t))},e.fromObservable=function(t){if(t.endWhen!==void 0)return t;var r=typeof t[be]=="function"?t[be]():t;return new e(new Ii(r))},e.periodic=function(t){return new e(new Ri(t))},e.prototype._map=function(t){return new(this.ctor())(new Ki(t,this))},e.prototype.map=function(t){return this._map(t)},e.prototype.mapTo=function(t){var r=this.map(function(){return t}),n=r._prod;return n.type="mapTo",r},e.prototype.filter=function(t){var r=this._prod;return r instanceof Ge?new e(new Ge(Di(r.f,t),r.ins)):new e(new Ge(t,this))},e.prototype.take=function(t){return new(this.ctor())(new Xi(t,this))},e.prototype.drop=function(t){return new e(new Bi(t,this))},e.prototype.last=function(){return new e(new Hi(this))},e.prototype.startWith=function(t){return new kt(new Vi(this,t))},e.prototype.endWhen=function(t){return new(this.ctor())(new qi(t,this))},e.prototype.fold=function(t,r){return new kt(new zi(t,r,this))},e.prototype.replaceError=function(t){return new(this.ctor())(new Yi(t,this))},e.prototype.flatten=function(){return new e(new Gi(this))},e.prototype.compose=function(t){return t(this)},e.prototype.remember=function(){return new kt(new Ji(this))},e.prototype.debug=function(t){return new(this.ctor())(new Fi(this,t))},e.prototype.imitate=function(t){if(t instanceof kt)throw new Error("A MemoryStream was given to imitate(), but it only supports a Stream. Read more about this restriction here: https://github.com/staltz/xstream#faq");this._target=t;for(var r=this._ils,n=r.length,o=0;o<n;o++)t._add(r[o]);this._ils=[]},e.prototype.shamefullySendNext=function(t){this._n(t)},e.prototype.shamefullySendError=function(t){this._e(t)},e.prototype.shamefullySendComplete=function(){this._c()},e.prototype.setDebugListener=function(t){t?(this._d=!0,t._n=t.next||vt,t._e=t.error||vt,t._c=t.complete||vt,this._dl=t):(this._d=!1,this._dl=N)},e.merge=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return new e(new ki(r))},e.combine=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return new e(new Mi(r))},e}();xt.Stream=lr;var kt=function(e){xi(t,e);function t(r){var n=e.call(this,r)||this;return n._has=!1,n}return t.prototype._n=function(r){this._v=r,this._has=!0,e.prototype._n.call(this,r)},t.prototype._add=function(r){var n=this._target;if(n)return n._add(r);var o=this._ils;if(o.push(r),o.length>1){this._has&&r._n(this._v);return}if(this._stopID!==N)this._has&&r._n(this._v),clearTimeout(this._stopID),this._stopID=N;else if(this._has)r._n(this._v);else{var i=this._prod;i!==N&&i._start(this)}},t.prototype._stopNow=function(){this._has=!1,e.prototype._stopNow.call(this)},t.prototype._x=function(){this._has=!1,e.prototype._x.call(this)},t.prototype.map=function(r){return this._map(r)},t.prototype.mapTo=function(r){return e.prototype.mapTo.call(this,r)},t.prototype.take=function(r){return e.prototype.take.call(this,r)},t.prototype.endWhen=function(r){return e.prototype.endWhen.call(this,r)},t.prototype.replaceError=function(r){return e.prototype.replaceError.call(this,r)},t.prototype.remember=function(){return this},t.prototype.debug=function(r){return e.prototype.debug.call(this,r)},t}(lr);xt.MemoryStream=kt;var Zi=lr,Qi=xt.default=Zi,Ce={};Object.defineProperty(Ce,"__esModule",{value:!0});function En(){var e;return typeof window!="undefined"?e=window:typeof gt!="undefined"?e=gt:e=this,e.Cyclejs=e.Cyclejs||{},e=e.Cyclejs,e.adaptStream=e.adaptStream||function(t){return t},e}function ta(e){En().adaptStream=e}Ce.setAdapt=ta;function ea(e){return En().adaptStream(e)}var pt=Ce.adapt=ea;function ra(e,t){if(typeof e!="function")throw new Error("First argument given to isolate() must be a 'dataflowComponent' function");if(t===null)throw new Error("Second argument given to isolate() must not be null")}function na(e,t,r){var n={};return Object.keys(e).forEach(function(o){if(typeof t=="string"){n[o]=t;return}var i=t[o];if(typeof i!="undefined"){n[o]=i;return}var c=t["*"];if(typeof c!="undefined"){n[o]=c;return}n[o]=r}),n}function oa(e,t){var r={};for(var n in e){var o=e[n];e.hasOwnProperty(n)&&o&&t[n]!==null&&typeof o.isolateSource=="function"?r[n]=o.isolateSource(o,t[n]):e.hasOwnProperty(n)&&(r[n]=e[n])}return r}function ia(e,t,r){var n={};for(var o in t){var i=e[o],c=t[o];t.hasOwnProperty(o)&&i&&r[o]!==null&&typeof i.isolateSink=="function"?n[o]=pt(i.isolateSink(Qi.fromObservable(c),r[o])):t.hasOwnProperty(o)&&(n[o]=t[o])}return n}var xn=0;function nr(){return"cycle"+ ++xn}function ve(e,t){t===void 0&&(t=nr()),ra(e,t);var r=typeof t=="object"?nr():"",n=typeof t=="string"||typeof t=="object"?t:t.toString();return function(i){for(var c=[],l=1;l<arguments.length;l++)c[l-1]=arguments[l];var v=na(i,n,r),E=oa(i,v),_=e.apply(void 0,[E].concat(c)),S=ia(i,_,v);return S}}ve.reset=function(){return xn=0};function aa(e){return e===void 0&&(e=nr()),function(t){return ve(t,e)}}var sa=Object.freeze(Object.defineProperty({__proto__:null,default:ve,toIsolated:aa},Symbol.toStringTag,{value:"Module"})),$n=ye(sa),pr={},hr={},Tt={};function ua(e){var t,r=e.Symbol;return typeof r=="function"?r.observable?t=r.observable:(t=r("observable"),r.observable=t):t="@@observable",t}var ee;typeof self!="undefined"?ee=self:typeof window!="undefined"?ee=window:typeof global!="undefined"?ee=global:typeof fr!="undefined"?ee=fr:ee=Function("return this")();var fa=ua(ee),ca=Object.freeze(Object.defineProperty({__proto__:null,default:fa},Symbol.toStringTag,{value:"Module"})),la=ye(ca),pa=gt&&gt.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(Tt,"__esModule",{value:!0});var Gr=la,$={},Pn=Tt.NO=$;function yt(){}function ze(e){for(var t=e.length,r=Array(t),n=0;n<t;++n)r[n]=e[n];return r}function ha(e,t){return function(n){return e(n)&&t(n)}}function dr(e,t,r){try{return e.f(t)}catch(n){return r._e(n),$}}var Kt={_n:yt,_e:yt,_c:yt};Tt.NO_IL=Kt;function zr(e){e._start=function(r){r.next=r._n,r.error=r._e,r.complete=r._c,this.start(r)},e._stop=e.stop}var da=function(){function e(t,r){this._stream=t,this._listener=r}return e.prototype.unsubscribe=function(){this._stream.removeListener(this._listener)},e}(),va=function(){function e(t){this._listener=t}return e.prototype.next=function(t){this._listener._n(t)},e.prototype.error=function(t){this._listener._e(t)},e.prototype.complete=function(){this._listener._c()},e}(),ya=function(){function e(t){this.type="fromObservable",this.ins=t,this.active=!1}return e.prototype._start=function(t){this.out=t,this.active=!0,this._sub=this.ins.subscribe(new va(t)),this.active||this._sub.unsubscribe()},e.prototype._stop=function(){this._sub&&this._sub.unsubscribe(),this.active=!1},e}(),ma=function(){function e(t){this.type="merge",this.insArr=t,this.out=$,this.ac=0}return e.prototype._start=function(t){this.out=t;var r=this.insArr,n=r.length;this.ac=n;for(var o=0;o<n;o++)r[o]._add(this)},e.prototype._stop=function(){for(var t=this.insArr,r=t.length,n=0;n<r;n++)t[n]._remove(this);this.out=$},e.prototype._n=function(t){var r=this.out;r!==$&&r._n(t)},e.prototype._e=function(t){var r=this.out;r!==$&&r._e(t)},e.prototype._c=function(){if(--this.ac<=0){var t=this.out;if(t===$)return;t._c()}},e}(),_a=function(){function e(t,r,n){this.i=t,this.out=r,this.p=n,n.ils.push(this)}return e.prototype._n=function(t){var r=this.p,n=this.out;if(n!==$&&r.up(t,this.i)){for(var o=r.vals,i=o.length,c=Array(i),l=0;l<i;++l)c[l]=o[l];n._n(c)}},e.prototype._e=function(t){var r=this.out;r!==$&&r._e(t)},e.prototype._c=function(){var t=this.p;t.out!==$&&--t.Nc===0&&t.out._c()},e}(),ga=function(){function e(t){this.type="combine",this.insArr=t,this.out=$,this.ils=[],this.Nc=this.Nn=0,this.vals=[]}return e.prototype.up=function(t,r){var n=this.vals[r],o=this.Nn?n===$?--this.Nn:this.Nn:0;return this.vals[r]=t,o===0},e.prototype._start=function(t){this.out=t;var r=this.insArr,n=this.Nc=this.Nn=r.length,o=this.vals=new Array(n);if(n===0)t._n([]),t._c();else for(var i=0;i<n;i++)o[i]=$,r[i]._add(new _a(i,t,this))},e.prototype._stop=function(){for(var t=this.insArr,r=t.length,n=this.ils,o=0;o<r;o++)t[o]._remove(n[o]);this.out=$,this.ils=[],this.vals=[]},e}(),ba=function(){function e(t){this.type="fromArray",this.a=t}return e.prototype._start=function(t){for(var r=this.a,n=0,o=r.length;n<o;n++)t._n(r[n]);t._c()},e.prototype._stop=function(){},e}(),wa=function(){function e(t){this.type="fromPromise",this.on=!1,this.p=t}return e.prototype._start=function(t){var r=this;this.on=!0,this.p.then(function(n){r.on&&(t._n(n),t._c())},function(n){t._e(n)}).then(yt,function(n){setTimeout(function(){throw n})})},e.prototype._stop=function(){this.on=!1},e}(),Sa=function(){function e(t){this.type="periodic",this.period=t,this.intervalID=-1,this.i=0}return e.prototype._start=function(t){var r=this;function n(){t._n(r.i++)}this.intervalID=setInterval(n,this.period)},e.prototype._stop=function(){this.intervalID!==-1&&clearInterval(this.intervalID),this.intervalID=-1,this.i=0},e}(),Oa=function(){function e(t,r){this.type="debug",this.ins=t,this.out=$,this.s=yt,this.l="",typeof r=="string"?this.l=r:typeof r=="function"&&(this.s=r)}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=$},e.prototype._n=function(t){var r=this.out;if(r!==$){var n=this.s,o=this.l;if(n!==yt)try{n(t)}catch(i){r._e(i)}else o?console.log(o+":",t):console.log(t);r._n(t)}},e.prototype._e=function(t){var r=this.out;r!==$&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==$&&t._c()},e}(),Aa=function(){function e(t,r){this.type="drop",this.ins=r,this.out=$,this.max=t,this.dropped=0}return e.prototype._start=function(t){this.out=t,this.dropped=0,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=$},e.prototype._n=function(t){var r=this.out;r!==$&&this.dropped++>=this.max&&r._n(t)},e.prototype._e=function(t){var r=this.out;r!==$&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==$&&t._c()},e}(),Ea=function(){function e(t,r){this.out=t,this.op=r}return e.prototype._n=function(){this.op.end()},e.prototype._e=function(t){this.out._e(t)},e.prototype._c=function(){this.op.end()},e}(),xa=function(){function e(t,r){this.type="endWhen",this.ins=r,this.out=$,this.o=t,this.oil=Kt}return e.prototype._start=function(t){this.out=t,this.o._add(this.oil=new Ea(t,this)),this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.o._remove(this.oil),this.out=$,this.oil=Kt},e.prototype.end=function(){var t=this.out;t!==$&&t._c()},e.prototype._n=function(t){var r=this.out;r!==$&&r._n(t)},e.prototype._e=function(t){var r=this.out;r!==$&&r._e(t)},e.prototype._c=function(){this.end()},e}(),He=function(){function e(t,r){this.type="filter",this.ins=r,this.out=$,this.f=t}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=$},e.prototype._n=function(t){var r=this.out;if(r!==$){var n=dr(this,t,r);n===$||!n||r._n(t)}},e.prototype._e=function(t){var r=this.out;r!==$&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==$&&t._c()},e}(),$a=function(){function e(t,r){this.out=t,this.op=r}return e.prototype._n=function(t){this.out._n(t)},e.prototype._e=function(t){this.out._e(t)},e.prototype._c=function(){this.op.inner=$,this.op.less()},e}(),Pa=function(){function e(t){this.type="flatten",this.ins=t,this.out=$,this.open=!0,this.inner=$,this.il=Kt}return e.prototype._start=function(t){this.out=t,this.open=!0,this.inner=$,this.il=Kt,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.inner!==$&&this.inner._remove(this.il),this.out=$,this.open=!0,this.inner=$,this.il=Kt},e.prototype.less=function(){var t=this.out;t!==$&&!this.open&&this.inner===$&&t._c()},e.prototype._n=function(t){var r=this.out;if(r!==$){var n=this,o=n.inner,i=n.il;o!==$&&i!==Kt&&o._remove(i),(this.inner=t)._add(this.il=new $a(r,this))}},e.prototype._e=function(t){var r=this.out;r!==$&&r._e(t)},e.prototype._c=function(){this.open=!1,this.less()},e}(),Da=function(){function e(t,r,n){var o=this;this.type="fold",this.ins=n,this.out=$,this.f=function(i){return t(o.acc,i)},this.acc=this.seed=r}return e.prototype._start=function(t){this.out=t,this.acc=this.seed,t._n(this.acc),this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=$,this.acc=this.seed},e.prototype._n=function(t){var r=this.out;if(r!==$){var n=dr(this,t,r);n!==$&&r._n(this.acc=n)}},e.prototype._e=function(t){var r=this.out;r!==$&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==$&&t._c()},e}(),Na=function(){function e(t){this.type="last",this.ins=t,this.out=$,this.has=!1,this.val=$}return e.prototype._start=function(t){this.out=t,this.has=!1,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=$,this.val=$},e.prototype._n=function(t){this.has=!0,this.val=t},e.prototype._e=function(t){var r=this.out;r!==$&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==$&&(this.has?(t._n(this.val),t._c()):t._e(new Error("last() failed because input stream completed")))},e}(),Ta=function(){function e(t,r){this.type="map",this.ins=r,this.out=$,this.f=t}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=$},e.prototype._n=function(t){var r=this.out;if(r!==$){var n=dr(this,t,r);n!==$&&r._n(n)}},e.prototype._e=function(t){var r=this.out;r!==$&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==$&&t._c()},e}(),Ia=function(){function e(t){this.type="remember",this.ins=t,this.out=$}return e.prototype._start=function(t){this.out=t,this.ins._add(t)},e.prototype._stop=function(){this.ins._remove(this.out),this.out=$},e}(),ka=function(){function e(t,r){this.type="replaceError",this.ins=r,this.out=$,this.f=t}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=$},e.prototype._n=function(t){var r=this.out;r!==$&&r._n(t)},e.prototype._e=function(t){var r=this.out;if(r!==$)try{this.ins._remove(this),(this.ins=this.f(t))._add(this)}catch(n){r._e(n)}},e.prototype._c=function(){var t=this.out;t!==$&&t._c()},e}(),Ca=function(){function e(t,r){this.type="startWith",this.ins=t,this.out=$,this.val=r}return e.prototype._start=function(t){this.out=t,this.out._n(this.val),this.ins._add(t)},e.prototype._stop=function(){this.ins._remove(this.out),this.out=$},e}(),Ma=function(){function e(t,r){this.type="take",this.ins=r,this.out=$,this.max=t,this.taken=0}return e.prototype._start=function(t){this.out=t,this.taken=0,this.max<=0?t._c():this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=$},e.prototype._n=function(t){var r=this.out;if(r!==$){var n=++this.taken;n<this.max?r._n(t):n===this.max&&(r._n(t),r._c())}},e.prototype._e=function(t){var r=this.out;r!==$&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==$&&t._c()},e}(),vr=function(){function e(t){this._prod=t||$,this._ils=[],this._stopID=$,this._dl=$,this._d=!1,this._target=$,this._err=$}return e.prototype._n=function(t){var r=this._ils,n=r.length;if(this._d&&this._dl._n(t),n==1)r[0]._n(t);else{if(n==0)return;for(var o=ze(r),i=0;i<n;i++)o[i]._n(t)}},e.prototype._e=function(t){if(this._err===$){this._err=t;var r=this._ils,n=r.length;if(this._x(),this._d&&this._dl._e(t),n==1)r[0]._e(t);else{if(n==0)return;for(var o=ze(r),i=0;i<n;i++)o[i]._e(t)}if(!this._d&&n==0)throw this._err}},e.prototype._c=function(){var t=this._ils,r=t.length;if(this._x(),this._d&&this._dl._c(),r==1)t[0]._c();else{if(r==0)return;for(var n=ze(t),o=0;o<r;o++)n[o]._c()}},e.prototype._x=function(){this._ils.length!==0&&(this._prod!==$&&this._prod._stop(),this._err=$,this._ils=[])},e.prototype._stopNow=function(){this._prod._stop(),this._err=$,this._stopID=$},e.prototype._add=function(t){var r=this._target;if(r!==$)return r._add(t);var n=this._ils;if(n.push(t),!(n.length>1))if(this._stopID!==$)clearTimeout(this._stopID),this._stopID=$;else{var o=this._prod;o!==$&&o._start(this)}},e.prototype._remove=function(t){var r=this,n=this._target;if(n!==$)return n._remove(t);var o=this._ils,i=o.indexOf(t);i>-1&&(o.splice(i,1),this._prod!==$&&o.length<=0?(this._err=$,this._stopID=setTimeout(function(){return r._stopNow()})):o.length===1&&this._pruneCycles())},e.prototype._pruneCycles=function(){this._hasNoSinks(this,[])&&this._remove(this._ils[0])},e.prototype._hasNoSinks=function(t,r){if(r.indexOf(t)!==-1)return!0;if(t.out===this)return!0;if(t.out&&t.out!==$)return this._hasNoSinks(t.out,r.concat(t));if(t._ils){for(var n=0,o=t._ils.length;n<o;n++)if(!this._hasNoSinks(t._ils[n],r.concat(t)))return!1;return!0}else return!1},e.prototype.ctor=function(){return this instanceof Ct?Ct:e},e.prototype.addListener=function(t){t._n=t.next||yt,t._e=t.error||yt,t._c=t.complete||yt,this._add(t)},e.prototype.removeListener=function(t){this._remove(t)},e.prototype.subscribe=function(t){return this.addListener(t),new da(this,t)},e.prototype[Gr.default]=function(){return this},e.create=function(t){if(t){if(typeof t.start!="function"||typeof t.stop!="function")throw new Error("producer requires both start and stop functions");zr(t)}return new e(t)},e.createWithMemory=function(t){return t&&zr(t),new Ct(t)},e.never=function(){return new e({_start:yt,_stop:yt})},e.empty=function(){return new e({_start:function(t){t._c()},_stop:yt})},e.throw=function(t){return new e({_start:function(r){r._e(t)},_stop:yt})},e.from=function(t){if(typeof t[Gr.default]=="function")return e.fromObservable(t);if(typeof t.then=="function")return e.fromPromise(t);if(Array.isArray(t))return e.fromArray(t);throw new TypeError("Type of input to from() must be an Array, Promise, or Observable")},e.of=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return e.fromArray(t)},e.fromArray=function(t){return new e(new ba(t))},e.fromPromise=function(t){return new e(new wa(t))},e.fromObservable=function(t){return t.endWhen?t:new e(new ya(t))},e.periodic=function(t){return new e(new Sa(t))},e.prototype._map=function(t){return new(this.ctor())(new Ta(t,this))},e.prototype.map=function(t){return this._map(t)},e.prototype.mapTo=function(t){var r=this.map(function(){return t}),n=r._prod;return n.type="mapTo",r},e.prototype.filter=function(t){var r=this._prod;return r instanceof He?new e(new He(ha(r.f,t),r.ins)):new e(new He(t,this))},e.prototype.take=function(t){return new(this.ctor())(new Ma(t,this))},e.prototype.drop=function(t){return new e(new Aa(t,this))},e.prototype.last=function(){return new e(new Na(this))},e.prototype.startWith=function(t){return new Ct(new Ca(this,t))},e.prototype.endWhen=function(t){return new(this.ctor())(new xa(t,this))},e.prototype.fold=function(t,r){return new Ct(new Da(t,r,this))},e.prototype.replaceError=function(t){return new(this.ctor())(new ka(t,this))},e.prototype.flatten=function(){return this._prod,new e(new Pa(this))},e.prototype.compose=function(t){return t(this)},e.prototype.remember=function(){return new Ct(new Ia(this))},e.prototype.debug=function(t){return new(this.ctor())(new Oa(this,t))},e.prototype.imitate=function(t){if(t instanceof Ct)throw new Error("A MemoryStream was given to imitate(), but it only supports a Stream. Read more about this restriction here: https://github.com/staltz/xstream#faq");this._target=t;for(var r=this._ils,n=r.length,o=0;o<n;o++)t._add(r[o]);this._ils=[]},e.prototype.shamefullySendNext=function(t){this._n(t)},e.prototype.shamefullySendError=function(t){this._e(t)},e.prototype.shamefullySendComplete=function(){this._c()},e.prototype.setDebugListener=function(t){t?(this._d=!0,t._n=t.next||yt,t._e=t.error||yt,t._c=t.complete||yt,this._dl=t):(this._d=!1,this._dl=$)},e.merge=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return new e(new ma(r))},e.combine=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return new e(new ga(r))},e}(),yr=Tt.Stream=vr,Ct=function(e){pa(t,e);function t(r){var n=e.call(this,r)||this;return n._has=!1,n}return t.prototype._n=function(r){this._v=r,this._has=!0,e.prototype._n.call(this,r)},t.prototype._add=function(r){var n=this._target;if(n!==$)return n._add(r);var o=this._ils;if(o.push(r),o.length>1){this._has&&r._n(this._v);return}if(this._stopID!==$)this._has&&r._n(this._v),clearTimeout(this._stopID),this._stopID=$;else if(this._has)r._n(this._v);else{var i=this._prod;i!==$&&i._start(this)}},t.prototype._stopNow=function(){this._has=!1,e.prototype._stopNow.call(this)},t.prototype._x=function(){this._has=!1,e.prototype._x.call(this)},t.prototype.map=function(r){return this._map(r)},t.prototype.mapTo=function(r){return e.prototype.mapTo.call(this,r)},t.prototype.take=function(r){return e.prototype.take.call(this,r)},t.prototype.endWhen=function(r){return e.prototype.endWhen.call(this,r)},t.prototype.replaceError=function(r){return e.prototype.replaceError.call(this,r)},t.prototype.remember=function(){return this},t.prototype.debug=function(r){return e.prototype.debug.call(this,r)},t}(vr);Tt.MemoryStream=Ct;var et=Tt.default=vr;Object.defineProperty(hr,"__esModule",{value:!0});var La=Tt,Ke={},Dn=function(){function e(t,r){this.ins=t,this.type="dropRepeats",this.out=null,this.v=Ke,this.isEq=r||function(n,o){return n===o}}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=null,this.v=Ke},e.prototype._n=function(t){var r=this.out;if(!!r){var n=this.v;n!==Ke&&this.isEq(t,n)||(this.v=t,r._n(t))}},e.prototype._e=function(t){var r=this.out;!r||r._e(t)},e.prototype._c=function(){var t=this.out;!t||t._c()},e}();hr.DropRepeatsOperator=Dn;function ja(e){return e===void 0&&(e=void 0),function(r){return new La.Stream(new Dn(r,e))}}var Nn=hr.default=ja,or=globalThis&&globalThis.__assign||function(){return or=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},or.apply(this,arguments)};function Ra(e,t,r){if(r===e[t])return e;var n=parseInt(t);return typeof r=="undefined"?e.filter(function(o,i){return i!==n}):e.map(function(o,i){return i===n?r:o})}function Tn(e){return typeof e=="string"||typeof e=="number"?function(r){if(typeof r!="undefined")return r[e]}:e.get}function Fa(e){return typeof e=="string"||typeof e=="number"?function(r,n){var o,i;return Array.isArray(r)?Ra(r,e,n):typeof r=="undefined"?(o={},o[e]=n,o):or({},r,(i={},i[e]=n,i))}:e.set}function In(e,t){return e.select(t)}function kn(e,t){var r=Tn(t),n=Fa(t);return e.map(function(o){return function(c){var l=r(c),v=o(l);return l===v?c:n(c,v)}})}var Cn=function(){function e(t,r){this.isolateSource=In,this.isolateSink=kn,this._stream=t.filter(function(n){return typeof n!="undefined"}).compose(Nn()).remember(),this._name=r,this.stream=pt(this._stream),this._stream._isCycleSource=r}return e.prototype.select=function(t){var r=Tn(t);return new e(this._stream.map(r),this._name)},e}(),Ba=function(){function e(t,r,n){this.ins=n,this.out=t,this.p=r}return e.prototype._n=function(t){this.p;var r=this.out;r!==null&&r._n(t)},e.prototype._e=function(t){var r=this.out;r!==null&&r._e(t)},e.prototype._c=function(){},e}(),Wa=function(){function e(t,r){this.type="pickMerge",this.ins=r,this.out=null,this.sel=t,this.ils=new Map,this.inst=null}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this);var t=this.ils;t.forEach(function(r,n){r.ins._remove(r),r.ins=null,r.out=null,t.delete(n)}),t.clear(),this.out=null,this.ils=new Map,this.inst=null},e.prototype._n=function(t){this.inst=t;for(var r=t.arr,n=this.ils,o=this.out,i=this.sel,c=r.length,l=0;l<c;++l){var v=r[l],E=v._key,_=et.fromObservable(v[i]||et.never());n.has(E)||(n.set(E,new Ba(o,this,_)),_._add(n.get(E)))}n.forEach(function(S,I){(!t.dict.has(I)||!t.dict.get(I))&&(S.ins._remove(S),S.ins=null,S.out=null,n.delete(I))})},e.prototype._e=function(t){var r=this.out;r!==null&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==null&&t._c()},e}();function qa(e){return function(r){return new yr(new Wa(e,r))}}var Ua=function(){function e(t,r,n,o){this.key=t,this.out=r,this.p=n,this.val=Pn,this.ins=o}return e.prototype._n=function(t){this.p;var r=this.out;this.val=t,r!==null&&this.p.up()},e.prototype._e=function(t){var r=this.out;r!==null&&r._e(t)},e.prototype._c=function(){},e}(),Ga=function(){function e(t,r){this.type="combine",this.ins=r,this.sel=t,this.out=null,this.ils=new Map,this.inst=null}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this);var t=this.ils;t.forEach(function(r){r.ins._remove(r),r.ins=null,r.out=null,r.val=null}),t.clear(),this.out=null,this.ils=new Map,this.inst=null},e.prototype.up=function(){for(var t=this.inst.arr,r=t.length,n=this.ils,o=Array(r),i=0;i<r;++i){var c=t[i],l=c._key;if(!n.has(l))return;var v=n.get(l).val;if(v===Pn)return;o[i]=v}this.out._n(o)},e.prototype._n=function(t){this.inst=t;var r=t.arr,n=this.ils,o=this.out,i=this.sel,c=t.dict,l=r.length,v=!1;if(n.forEach(function(u,f){c.has(f)||(u.ins._remove(u),u.ins=null,u.out=null,u.val=null,n.delete(f),v=!0)}),l===0){o._n([]);return}for(var E=0;E<l;++E){var _=r[E],S=_._key;if(!_[i])throw new Error("pickCombine found an undefined child sink stream");var I=et.fromObservable(_[i]);n.has(S)||(n.set(S,new Ua(S,o,this,I)),I._add(n.get(S)))}v&&this.up()},e.prototype._e=function(t){var r=this.out;r!==null&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==null&&t._c()},e}();function za(e){return function(r){return new yr(new Ga(e,r))}}var Ne=globalThis&&globalThis.__assign||function(){return Ne=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Ne.apply(this,arguments)},Mn=function(){function e(t){this._instances$=t}return e.prototype.pickMerge=function(t){return pt(this._instances$.compose(qa(t)))},e.prototype.pickCombine=function(t){return pt(this._instances$.compose(za(t)))},e}();function Ha(e){return{"*":null}}function Ka(e,t){return{get:function(r){if(typeof r!="undefined"){for(var n=0,o=r.length;n<o;++n)if(""+e(r[n],n)===t)return r[n];return}},set:function(r,n){return typeof r=="undefined"?[n]:typeof n=="undefined"?r.filter(function(o,i){return""+e(o,i)!==t}):r.map(function(o,i){return""+e(o,i)===t?n:o})}}}var Ja={get:function(e){return e},set:function(e,t){return t}};function Ya(e){return function(r){var n=e.channel||"state",o=e.itemKey,i=e.itemScope||Ha,c=et.fromObservable(r[n].stream),l=c.fold(function(v,E){var _,S,I,u,f=v.dict;if(Array.isArray(E)){for(var a=Array(E.length),p=new Set,d=0,b=E.length;d<b;++d){var O=""+(o?o(E[d],d):d);if(p.add(O),f.has(O))a[d]=f.get(O);else{var x=o?Ka(o,O):""+d,A=i(O),h=typeof A=="string"?(_={"*":A},_[n]=x,_):Ne({},A,(S={},S[n]=x,S)),g=e.itemFactory?e.itemFactory(E[d],d):e.item,w=ve(g,h)(r);f.set(O,w),a[d]=w}a[d]._key=O}return f.forEach(function(C,M){p.has(M)||f.delete(M)}),p.clear(),{dict:f,arr:a}}else{f.clear();var O=""+(o?o(E,0):"this"),x=Ja,A=i(O),h=typeof A=="string"?(I={"*":A},I[n]=x,I):Ne({},A,(u={},u[n]=x,u)),g=e.itemFactory?e.itemFactory(E,0):e.item,w=ve(g,h)(r);return f.set(O,w),{dict:f,arr:[w]}}},{dict:new Map,arr:[]});return e.collectSinks(new Mn(l))}}var Ln={};Object.defineProperty(Ln,"__esModule",{value:!0});var Va=Tt,Xa=function(){function e(t){this.streams=t,this.type="concat",this.out=null,this.i=0}return e.prototype._start=function(t){this.out=t,this.streams[this.i]._add(this)},e.prototype._stop=function(){var t=this.streams;this.i<t.length&&t[this.i]._remove(this),this.i=0,this.out=null},e.prototype._n=function(t){var r=this.out;!r||r._n(t)},e.prototype._e=function(t){var r=this.out;!r||r._e(t)},e.prototype._c=function(){var t=this.out;if(!!t){var r=this.streams;r[this.i]._remove(this),++this.i<r.length?r[this.i]._add(this):t._c()}},e}();function Za(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new Va.Stream(new Xa(e))}var jn=Ln.default=Za,Rn={};Object.defineProperty(Rn,"__esModule",{value:!0});function Qa(){return typeof queueMicrotask!="undefined"?queueMicrotask:typeof setImmediate!="undefined"?setImmediate:typeof process!="undefined"?process.nextTick:setTimeout}var Fn=Rn.default=Qa,Je=Fn();function ts(e,t){return t===void 0&&(t="state"),function(n){var o=et.create(),i=o.fold(function(E,_){return _(E)},void 0).drop(1),c=n;c[t]=new Cn(i,t);var l=e(c);if(l[t]){var v=jn(et.fromObservable(l[t]),et.never());v.subscribe({next:function(E){return Je(function(){return o._n(E)})},error:function(E){return Je(function(){return o._e(E)})},complete:function(){return Je(function(){return o._c()})}})}return l}}var es=Object.freeze(Object.defineProperty({__proto__:null,StateSource:Cn,isolateSource:In,isolateSink:kn,Instances:Mn,withState:ts,makeCollection:Ya},Symbol.toStringTag,{value:"Module"})),mr=ye(es);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=S;var t=n($n),r=mr;function n(u){return u&&u.__esModule?u:{default:u}}function o(u,f,a){return f in u?Object.defineProperty(u,f,{value:a,enumerable:!0,configurable:!0,writable:!0}):u[f]=a,u}function i(u,f){return _(u)||E(u,f)||l(u,f)||c()}function c(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function l(u,f){if(!!u){if(typeof u=="string")return v(u,f);var a=Object.prototype.toString.call(u).slice(8,-1);if(a==="Object"&&u.constructor&&(a=u.constructor.name),a==="Map"||a==="Set")return Array.from(u);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return v(u,f)}}function v(u,f){(f==null||f>u.length)&&(f=u.length);for(var a=0,p=new Array(f);a<f;a++)p[a]=u[a];return p}function E(u,f){var a=u==null?null:typeof Symbol!="undefined"&&u[Symbol.iterator]||u["@@iterator"];if(a!=null){var p=[],d=!0,b=!1,O,x;try{for(a=a.call(u);!(d=(O=a.next()).done)&&(p.push(O.value),!(f&&p.length===f));d=!0);}catch(A){b=!0,x=A}finally{try{!d&&a.return!=null&&a.return()}finally{if(b)throw x}}return p}}function _(u){if(Array.isArray(u))return u}function S(u,f){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:["DOM"],p=arguments.length>3&&arguments[3]!==void 0?arguments[3]:["EVENTS"],d=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"STATE";return function(b){var O={item:u,itemKey:function(h){return h.id},itemScope:function(h){return h},channel:d,collectSinks:function(h){return Object.entries(b).reduce(function(g,w){var C=i(w,2),M=C[0];return C[1],a.includes(M)?g[M]=h.pickCombine(M):g[M]=h.pickMerge(M),g},{})}},x=o({},d,f);return p.forEach(function(A){return x[A]=null}),a.forEach(function(A){return x[A]=null}),I(O,x,b)}}function I(u,f,a){return(0,t.default)((0,r.makeCollection)(u),f)(a)}})(pr);var ht={},Bn={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t;function t(r){var n,o=r.Symbol;if(typeof o=="function")if(o.observable)n=o.observable;else{n=o.for("https://github.com/benlesh/symbol-observable");try{o.observable=n}catch{}}else n="@@observable";return n}})(Bn);var rs=Bn,ns=gt&&gt.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)o.hasOwnProperty(i)&&(n[i]=o[i])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(ht,"__esModule",{value:!0});ht.NO_IL=ht.NO=ht.MemoryStream=ht.Stream=void 0;var os=rs,is=An,we=os.default(is.getPolyfill()),T={};ht.NO=T;function mt(){}function Ae(e){for(var t=e.length,r=Array(t),n=0;n<t;++n)r[n]=e[n];return r}function as(e,t){return function(n){return e(n)&&t(n)}}function _r(e,t,r){try{return e.f(t)}catch(n){return r._e(n),T}}var Jt={_n:mt,_e:mt,_c:mt};ht.NO_IL=Jt;function Hr(e){e._start=function(r){r.next=r._n,r.error=r._e,r.complete=r._c,this.start(r)},e._stop=e.stop}var ss=function(){function e(t,r){this._stream=t,this._listener=r}return e.prototype.unsubscribe=function(){this._stream._remove(this._listener)},e}(),us=function(){function e(t){this._listener=t}return e.prototype.next=function(t){this._listener._n(t)},e.prototype.error=function(t){this._listener._e(t)},e.prototype.complete=function(){this._listener._c()},e}(),fs=function(){function e(t){this.type="fromObservable",this.ins=t,this.active=!1}return e.prototype._start=function(t){this.out=t,this.active=!0,this._sub=this.ins.subscribe(new us(t)),this.active||this._sub.unsubscribe()},e.prototype._stop=function(){this._sub&&this._sub.unsubscribe(),this.active=!1},e}(),cs=function(){function e(t){this.type="merge",this.insArr=t,this.out=T,this.ac=0}return e.prototype._start=function(t){this.out=t;var r=this.insArr,n=r.length;this.ac=n;for(var o=0;o<n;o++)r[o]._add(this)},e.prototype._stop=function(){for(var t=this.insArr,r=t.length,n=0;n<r;n++)t[n]._remove(this);this.out=T},e.prototype._n=function(t){var r=this.out;r!==T&&r._n(t)},e.prototype._e=function(t){var r=this.out;r!==T&&r._e(t)},e.prototype._c=function(){if(--this.ac<=0){var t=this.out;if(t===T)return;t._c()}},e}(),ls=function(){function e(t,r,n){this.i=t,this.out=r,this.p=n,n.ils.push(this)}return e.prototype._n=function(t){var r=this.p,n=this.out;if(n!==T&&r.up(t,this.i)){var o=Ae(r.vals);n._n(o)}},e.prototype._e=function(t){var r=this.out;r!==T&&r._e(t)},e.prototype._c=function(){var t=this.p;t.out!==T&&--t.Nc===0&&t.out._c()},e}(),ps=function(){function e(t){this.type="combine",this.insArr=t,this.out=T,this.ils=[],this.Nc=this.Nn=0,this.vals=[]}return e.prototype.up=function(t,r){var n=this.vals[r],o=this.Nn?n===T?--this.Nn:this.Nn:0;return this.vals[r]=t,o===0},e.prototype._start=function(t){this.out=t;var r=this.insArr,n=this.Nc=this.Nn=r.length,o=this.vals=new Array(n);if(n===0)t._n([]),t._c();else for(var i=0;i<n;i++)o[i]=T,r[i]._add(new ls(i,t,this))},e.prototype._stop=function(){for(var t=this.insArr,r=t.length,n=this.ils,o=0;o<r;o++)t[o]._remove(n[o]);this.out=T,this.ils=[],this.vals=[]},e}(),hs=function(){function e(t){this.type="fromArray",this.a=t}return e.prototype._start=function(t){for(var r=this.a,n=0,o=r.length;n<o;n++)t._n(r[n]);t._c()},e.prototype._stop=function(){},e}(),ds=function(){function e(t){this.type="fromPromise",this.on=!1,this.p=t}return e.prototype._start=function(t){var r=this;this.on=!0,this.p.then(function(n){r.on&&(t._n(n),t._c())},function(n){t._e(n)}).then(mt,function(n){setTimeout(function(){throw n})})},e.prototype._stop=function(){this.on=!1},e}(),vs=function(){function e(t){this.type="periodic",this.period=t,this.intervalID=-1,this.i=0}return e.prototype._start=function(t){var r=this;function n(){t._n(r.i++)}this.intervalID=setInterval(n,this.period)},e.prototype._stop=function(){this.intervalID!==-1&&clearInterval(this.intervalID),this.intervalID=-1,this.i=0},e}(),ys=function(){function e(t,r){this.type="debug",this.ins=t,this.out=T,this.s=mt,this.l="",typeof r=="string"?this.l=r:typeof r=="function"&&(this.s=r)}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=T},e.prototype._n=function(t){var r=this.out;if(r!==T){var n=this.s,o=this.l;if(n!==mt)try{n(t)}catch(i){r._e(i)}else o?console.log(o+":",t):console.log(t);r._n(t)}},e.prototype._e=function(t){var r=this.out;r!==T&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==T&&t._c()},e}(),ms=function(){function e(t,r){this.type="drop",this.ins=r,this.out=T,this.max=t,this.dropped=0}return e.prototype._start=function(t){this.out=t,this.dropped=0,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=T},e.prototype._n=function(t){var r=this.out;r!==T&&this.dropped++>=this.max&&r._n(t)},e.prototype._e=function(t){var r=this.out;r!==T&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==T&&t._c()},e}(),_s=function(){function e(t,r){this.out=t,this.op=r}return e.prototype._n=function(){this.op.end()},e.prototype._e=function(t){this.out._e(t)},e.prototype._c=function(){this.op.end()},e}(),gs=function(){function e(t,r){this.type="endWhen",this.ins=r,this.out=T,this.o=t,this.oil=Jt}return e.prototype._start=function(t){this.out=t,this.o._add(this.oil=new _s(t,this)),this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.o._remove(this.oil),this.out=T,this.oil=Jt},e.prototype.end=function(){var t=this.out;t!==T&&t._c()},e.prototype._n=function(t){var r=this.out;r!==T&&r._n(t)},e.prototype._e=function(t){var r=this.out;r!==T&&r._e(t)},e.prototype._c=function(){this.end()},e}(),Ye=function(){function e(t,r){this.type="filter",this.ins=r,this.out=T,this.f=t}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=T},e.prototype._n=function(t){var r=this.out;if(r!==T){var n=_r(this,t,r);n===T||!n||r._n(t)}},e.prototype._e=function(t){var r=this.out;r!==T&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==T&&t._c()},e}(),bs=function(){function e(t,r){this.out=t,this.op=r}return e.prototype._n=function(t){this.out._n(t)},e.prototype._e=function(t){this.out._e(t)},e.prototype._c=function(){this.op.inner=T,this.op.less()},e}(),ws=function(){function e(t){this.type="flatten",this.ins=t,this.out=T,this.open=!0,this.inner=T,this.il=Jt}return e.prototype._start=function(t){this.out=t,this.open=!0,this.inner=T,this.il=Jt,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.inner!==T&&this.inner._remove(this.il),this.out=T,this.open=!0,this.inner=T,this.il=Jt},e.prototype.less=function(){var t=this.out;t!==T&&!this.open&&this.inner===T&&t._c()},e.prototype._n=function(t){var r=this.out;if(r!==T){var n=this,o=n.inner,i=n.il;o!==T&&i!==Jt&&o._remove(i),(this.inner=t)._add(this.il=new bs(r,this))}},e.prototype._e=function(t){var r=this.out;r!==T&&r._e(t)},e.prototype._c=function(){this.open=!1,this.less()},e}(),Ss=function(){function e(t,r,n){var o=this;this.type="fold",this.ins=n,this.out=T,this.f=function(i){return t(o.acc,i)},this.acc=this.seed=r}return e.prototype._start=function(t){this.out=t,this.acc=this.seed,t._n(this.acc),this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=T,this.acc=this.seed},e.prototype._n=function(t){var r=this.out;if(r!==T){var n=_r(this,t,r);n!==T&&r._n(this.acc=n)}},e.prototype._e=function(t){var r=this.out;r!==T&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==T&&t._c()},e}(),Os=function(){function e(t){this.type="last",this.ins=t,this.out=T,this.has=!1,this.val=T}return e.prototype._start=function(t){this.out=t,this.has=!1,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=T,this.val=T},e.prototype._n=function(t){this.has=!0,this.val=t},e.prototype._e=function(t){var r=this.out;r!==T&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==T&&(this.has?(t._n(this.val),t._c()):t._e(new Error("last() failed because input stream completed")))},e}(),As=function(){function e(t,r){this.type="map",this.ins=r,this.out=T,this.f=t}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=T},e.prototype._n=function(t){var r=this.out;if(r!==T){var n=_r(this,t,r);n!==T&&r._n(n)}},e.prototype._e=function(t){var r=this.out;r!==T&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==T&&t._c()},e}(),Es=function(){function e(t){this.type="remember",this.ins=t,this.out=T}return e.prototype._start=function(t){this.out=t,this.ins._add(t)},e.prototype._stop=function(){this.ins._remove(this.out),this.out=T},e}(),xs=function(){function e(t,r){this.type="replaceError",this.ins=r,this.out=T,this.f=t}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=T},e.prototype._n=function(t){var r=this.out;r!==T&&r._n(t)},e.prototype._e=function(t){var r=this.out;if(r!==T)try{this.ins._remove(this),(this.ins=this.f(t))._add(this)}catch(n){r._e(n)}},e.prototype._c=function(){var t=this.out;t!==T&&t._c()},e}(),$s=function(){function e(t,r){this.type="startWith",this.ins=t,this.out=T,this.val=r}return e.prototype._start=function(t){this.out=t,this.out._n(this.val),this.ins._add(t)},e.prototype._stop=function(){this.ins._remove(this.out),this.out=T},e}(),Ps=function(){function e(t,r){this.type="take",this.ins=r,this.out=T,this.max=t,this.taken=0}return e.prototype._start=function(t){this.out=t,this.taken=0,this.max<=0?t._c():this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=T},e.prototype._n=function(t){var r=this.out;if(r!==T){var n=++this.taken;n<this.max?r._n(t):n===this.max&&(r._n(t),r._c())}},e.prototype._e=function(t){var r=this.out;r!==T&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==T&&t._c()},e}(),gr=function(){function e(t){this._prod=t||T,this._ils=[],this._stopID=T,this._dl=T,this._d=!1,this._target=null,this._err=T}return e.prototype._n=function(t){var r=this._ils,n=r.length;if(this._d&&this._dl._n(t),n==1)r[0]._n(t);else{if(n==0)return;for(var o=Ae(r),i=0;i<n;i++)o[i]._n(t)}},e.prototype._e=function(t){if(this._err===T){this._err=t;var r=this._ils,n=r.length;if(this._x(),this._d&&this._dl._e(t),n==1)r[0]._e(t);else{if(n==0)return;for(var o=Ae(r),i=0;i<n;i++)o[i]._e(t)}if(!this._d&&n==0)throw this._err}},e.prototype._c=function(){var t=this._ils,r=t.length;if(this._x(),this._d&&this._dl._c(),r==1)t[0]._c();else{if(r==0)return;for(var n=Ae(t),o=0;o<r;o++)n[o]._c()}},e.prototype._x=function(){this._ils.length!==0&&(this._prod!==T&&this._prod._stop(),this._err=T,this._ils=[])},e.prototype._stopNow=function(){this._prod._stop(),this._err=T,this._stopID=T},e.prototype._add=function(t){var r=this._target;if(r)return r._add(t);var n=this._ils;if(n.push(t),!(n.length>1))if(this._stopID!==T)clearTimeout(this._stopID),this._stopID=T;else{var o=this._prod;o!==T&&o._start(this)}},e.prototype._remove=function(t){var r=this,n=this._target;if(n)return n._remove(t);var o=this._ils,i=o.indexOf(t);i>-1&&(o.splice(i,1),this._prod!==T&&o.length<=0?(this._err=T,this._stopID=setTimeout(function(){return r._stopNow()})):o.length===1&&this._pruneCycles())},e.prototype._pruneCycles=function(){this._hasNoSinks(this,[])&&this._remove(this._ils[0])},e.prototype._hasNoSinks=function(t,r){if(r.indexOf(t)!==-1)return!0;if(t.out===this)return!0;if(t.out&&t.out!==T)return this._hasNoSinks(t.out,r.concat(t));if(t._ils){for(var n=0,o=t._ils.length;n<o;n++)if(!this._hasNoSinks(t._ils[n],r.concat(t)))return!1;return!0}else return!1},e.prototype.ctor=function(){return this instanceof Mt?Mt:e},e.prototype.addListener=function(t){t._n=t.next||mt,t._e=t.error||mt,t._c=t.complete||mt,this._add(t)},e.prototype.removeListener=function(t){this._remove(t)},e.prototype.subscribe=function(t){return this.addListener(t),new ss(this,t)},e.prototype[we]=function(){return this},e.create=function(t){if(t){if(typeof t.start!="function"||typeof t.stop!="function")throw new Error("producer requires both start and stop functions");Hr(t)}return new e(t)},e.createWithMemory=function(t){return t&&Hr(t),new Mt(t)},e.never=function(){return new e({_start:mt,_stop:mt})},e.empty=function(){return new e({_start:function(t){t._c()},_stop:mt})},e.throw=function(t){return new e({_start:function(r){r._e(t)},_stop:mt})},e.from=function(t){if(typeof t[we]=="function")return e.fromObservable(t);if(typeof t.then=="function")return e.fromPromise(t);if(Array.isArray(t))return e.fromArray(t);throw new TypeError("Type of input to from() must be an Array, Promise, or Observable")},e.of=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return e.fromArray(t)},e.fromArray=function(t){return new e(new hs(t))},e.fromPromise=function(t){return new e(new ds(t))},e.fromObservable=function(t){if(t.endWhen!==void 0)return t;var r=typeof t[we]=="function"?t[we]():t;return new e(new fs(r))},e.periodic=function(t){return new e(new vs(t))},e.prototype._map=function(t){return new(this.ctor())(new As(t,this))},e.prototype.map=function(t){return this._map(t)},e.prototype.mapTo=function(t){var r=this.map(function(){return t}),n=r._prod;return n.type="mapTo",r},e.prototype.filter=function(t){var r=this._prod;return r instanceof Ye?new e(new Ye(as(r.f,t),r.ins)):new e(new Ye(t,this))},e.prototype.take=function(t){return new(this.ctor())(new Ps(t,this))},e.prototype.drop=function(t){return new e(new ms(t,this))},e.prototype.last=function(){return new e(new Os(this))},e.prototype.startWith=function(t){return new Mt(new $s(this,t))},e.prototype.endWhen=function(t){return new(this.ctor())(new gs(t,this))},e.prototype.fold=function(t,r){return new Mt(new Ss(t,r,this))},e.prototype.replaceError=function(t){return new(this.ctor())(new xs(t,this))},e.prototype.flatten=function(){return new e(new ws(this))},e.prototype.compose=function(t){return t(this)},e.prototype.remember=function(){return new Mt(new Es(this))},e.prototype.debug=function(t){return new(this.ctor())(new ys(this,t))},e.prototype.imitate=function(t){if(t instanceof Mt)throw new Error("A MemoryStream was given to imitate(), but it only supports a Stream. Read more about this restriction here: https://github.com/staltz/xstream#faq");this._target=t;for(var r=this._ils,n=r.length,o=0;o<n;o++)t._add(r[o]);this._ils=[]},e.prototype.shamefullySendNext=function(t){this._n(t)},e.prototype.shamefullySendError=function(t){this._e(t)},e.prototype.shamefullySendComplete=function(){this._c()},e.prototype.setDebugListener=function(t){t?(this._d=!0,t._n=t.next||mt,t._e=t.error||mt,t._c=t.complete||mt,this._dl=t):(this._d=!1,this._dl=T)},e.merge=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return new e(new cs(r))},e.combine=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return new e(new ps(r))},e}();ht.Stream=gr;var Mt=function(e){ns(t,e);function t(r){var n=e.call(this,r)||this;return n._has=!1,n}return t.prototype._n=function(r){this._v=r,this._has=!0,e.prototype._n.call(this,r)},t.prototype._add=function(r){var n=this._target;if(n)return n._add(r);var o=this._ils;if(o.push(r),o.length>1){this._has&&r._n(this._v);return}if(this._stopID!==T)this._has&&r._n(this._v),clearTimeout(this._stopID),this._stopID=T;else if(this._has)r._n(this._v);else{var i=this._prod;i!==T&&i._start(this)}},t.prototype._stopNow=function(){this._has=!1,e.prototype._stopNow.call(this)},t.prototype._x=function(){this._has=!1,e.prototype._x.call(this)},t.prototype.map=function(r){return this._map(r)},t.prototype.mapTo=function(r){return e.prototype.mapTo.call(this,r)},t.prototype.take=function(r){return e.prototype.take.call(this,r)},t.prototype.endWhen=function(r){return e.prototype.endWhen.call(this,r)},t.prototype.replaceError=function(r){return e.prototype.replaceError.call(this,r)},t.prototype.remember=function(){return this},t.prototype.debug=function(r){return e.prototype.debug.call(this,r)},t}(gr);ht.MemoryStream=Mt;var Ds=gr;ht.default=Ds;var br={};Object.defineProperty(br,"__esModule",{value:!0});var Ns=ht,Ts=function(){function e(t,r){this.dt=t,this.ins=r,this.type="delay",this.out=null}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=null},e.prototype._n=function(t){var r=this.out;if(!!r)var n=setInterval(function(){r._n(t),clearInterval(n)},this.dt)},e.prototype._e=function(t){var r=this.out;if(!!r)var n=setInterval(function(){r._e(t),clearInterval(n)},this.dt)},e.prototype._c=function(){var t=this.out;if(!!t)var r=setInterval(function(){t._c(),clearInterval(r)},this.dt)},e}();function Is(e){return function(r){return new Ns.Stream(new Ts(e,r))}}br.default=Is;var wr={};Object.defineProperty(wr,"__esModule",{value:!0});var ks=ht,Cs=function(){function e(t){this.streams=t,this.type="concat",this.out=null,this.i=0}return e.prototype._start=function(t){this.out=t,this.streams[this.i]._add(this)},e.prototype._stop=function(){var t=this.streams;this.i<t.length&&t[this.i]._remove(this),this.i=0,this.out=null},e.prototype._n=function(t){var r=this.out;!r||r._n(t)},e.prototype._e=function(t){var r=this.out;!r||r._e(t)},e.prototype._c=function(){var t=this.out;if(!!t){var r=this.streams;r[this.i]._remove(this),++this.i<r.length?r[this.i]._add(this):t._c()}},e}();function Ms(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new ks.Stream(new Cs(e))}wr.default=Ms;var Sr={};Object.defineProperty(Sr,"__esModule",{value:!0});var ce=ht,Ls=function(){function e(t,r){this.dt=t,this.ins=r,this.type="debounce",this.out=null,this.id=null,this.t=ce.NO}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=null,this.clearInterval()},e.prototype.clearInterval=function(){var t=this.id;t!==null&&clearInterval(t),this.id=null},e.prototype._n=function(t){var r=this,n=this.out;!n||(this.clearInterval(),this.t=t,this.id=setInterval(function(){r.clearInterval(),n._n(t),r.t=ce.NO},this.dt))},e.prototype._e=function(t){var r=this.out;!r||(this.clearInterval(),r._e(t))},e.prototype._c=function(){var t=this.out;!t||(this.clearInterval(),this.t!=ce.NO&&t._n(this.t),this.t=ce.NO,t._c())},e}();function js(e){return function(r){return new ce.Stream(new Ls(e,r))}}Sr.default=js;var ie={};Object.defineProperty(ie,"__esModule",{value:!0});ie.DropRepeatsOperator=void 0;var Rs=ht,Ve={},Wn=function(){function e(t,r){this.ins=t,this.type="dropRepeats",this.out=null,this.v=Ve,this.isEq=r||function(n,o){return n===o}}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=null,this.v=Ve},e.prototype._n=function(t){var r=this.out;if(!!r){var n=this.v;n!==Ve&&this.isEq(t,n)||(this.v=t,r._n(t))}},e.prototype._e=function(t){var r=this.out;!r||r._e(t)},e.prototype._c=function(){var t=this.out;!t||t._c()},e}();ie.DropRepeatsOperator=Wn;function Fs(e){return e===void 0&&(e=void 0),function(r){return new Rs.Stream(new Wn(r,e))}}ie.default=Fs;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ABORT=void 0,e.default=Rt;var t=S($n),r=S(pr),n=mr,o=_(ht),i=S(br),c=S(wr),l=S(Sr),v=S(ie);function E(m){if(typeof WeakMap!="function")return null;var k=new WeakMap,y=new WeakMap;return(E=function(L){return L?y:k})(m)}function _(m,k){if(!k&&m&&m.__esModule)return m;if(m===null||B(m)!=="object"&&typeof m!="function")return{default:m};var y=E(k);if(y&&y.has(m))return y.get(m);var D={},L=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var j in m)if(j!=="default"&&Object.prototype.hasOwnProperty.call(m,j)){var W=L?Object.getOwnPropertyDescriptor(m,j):null;W&&(W.get||W.set)?Object.defineProperty(D,j,W):D[j]=m[j]}return D.default=m,y&&y.set(m,D),D}function S(m){return m&&m.__esModule?m:{default:m}}function I(m){return a(m)||f(m)||b(m)||u()}function u(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function f(m){if(typeof Symbol!="undefined"&&m[Symbol.iterator]!=null||m["@@iterator"]!=null)return Array.from(m)}function a(m){if(Array.isArray(m))return O(m)}function p(m,k){return A(m)||x(m,k)||b(m,k)||d()}function d(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function b(m,k){if(!!m){if(typeof m=="string")return O(m,k);var y=Object.prototype.toString.call(m).slice(8,-1);if(y==="Object"&&m.constructor&&(y=m.constructor.name),y==="Map"||y==="Set")return Array.from(m);if(y==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(y))return O(m,k)}}function O(m,k){(k==null||k>m.length)&&(k=m.length);for(var y=0,D=new Array(k);y<k;y++)D[y]=m[y];return D}function x(m,k){var y=m==null?null:typeof Symbol!="undefined"&&m[Symbol.iterator]||m["@@iterator"];if(y!=null){var D=[],L=!0,j=!1,W,Y;try{for(y=y.call(m);!(L=(W=y.next()).done)&&(D.push(W.value),!(k&&D.length===k));L=!0);}catch(R){j=!0,Y=R}finally{try{!L&&y.return!=null&&y.return()}finally{if(j)throw Y}}return D}}function A(m){if(Array.isArray(m))return m}function h(m,k){if(!(m instanceof k))throw new TypeError("Cannot call a class as a function")}function g(m,k){for(var y=0;y<k.length;y++){var D=k[y];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(m,D.key,D)}}function w(m,k,y){return k&&g(m.prototype,k),y&&g(m,y),Object.defineProperty(m,"prototype",{writable:!1}),m}function C(m,k){var y=Object.keys(m);if(Object.getOwnPropertySymbols){var D=Object.getOwnPropertySymbols(m);k&&(D=D.filter(function(L){return Object.getOwnPropertyDescriptor(m,L).enumerable})),y.push.apply(y,D)}return y}function M(m){for(var k=1;k<arguments.length;k++){var y=arguments[k]!=null?arguments[k]:{};k%2?C(Object(y),!0).forEach(function(D){q(m,D,y[D])}):Object.getOwnPropertyDescriptors?Object.defineProperties(m,Object.getOwnPropertyDescriptors(y)):C(Object(y)).forEach(function(D){Object.defineProperty(m,D,Object.getOwnPropertyDescriptor(y,D))})}return m}function q(m,k,y){return k in m?Object.defineProperty(m,k,{value:y,enumerable:!0,configurable:!0,writable:!0}):m[k]=y,m}function B(m){return B=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(k){return typeof k}:function(k){return k&&typeof Symbol=="function"&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":typeof k},B(m)}var H=typeof window!="undefined"&&window||process&&process.env||{},U="request",it="BOOTSTRAP",ft="INITIALIZE",dt="HYDRATE",bt=!0,At="~#~#~ABORT~#~#~";e.ABORT=At;function Rt(m){var k=m.name,y=m.sources,D=m.isolateOpts,L=m.stateSourceName,j=L===void 0?"STATE":L;if(y&&B(y)!=="object")throw new Error("Sources must be a Cycle.js sources object:",k);var W;typeof D=="string"?W=q({},j,D):D===!0?W={}:W=D;var Y=typeof y=="undefined";if(B(W)=="object"){var R=function(z){var F=M(M({},m),{},{sources:z});return new Pt(F).sinks};return Y?(0,t.default)(R,W):(0,t.default)(R,W)(y)}else return Y?function(G){return new Pt(M(M({},m),{},{sources:G})).sinks}:new Pt(m).sinks}var Pt=function(){function m(k){var y=this,D=k.name,L=D===void 0?"NO NAME":D,j=k.sources,W=k.intent,Y=k.request,R=k.model,G=k.response,z=k.view,F=k.children,K=F===void 0?{}:F,J=k.components,Q=J===void 0?{}:J,ot=k.initialState,ut=k.calculated,st=k.storeCalculatedInState,X=st===void 0?!0:st,rt=k.DOMSourceName,nt=rt===void 0?"DOM":rt,Z=k.stateSourceName,ct=Z===void 0?"STATE":Z,lt=k.requestSourceName,tt=lt===void 0?"HTTP":lt;if(h(this,m),!j||B(j)!="object")throw new Error("Missing or invalid sources");this.name=L,this.sources=j,this.intent=W,this.request=Y,this.model=R,this.response=G,this.view=z,this.children=K,this.components=Q,this.initialState=ot,this.calculated=ut,this.storeCalculatedInState=X,this.DOMSourceName=nt,this.stateSourceName=ct,this.requestSourceName=tt,this.sourceNames=Object.keys(j),this.isSubComponent=this.sourceNames.includes("props$");var wt=j[ct]&&j[ct].stream;wt&&(this.currentState=ot||{},this.sources[this.stateSourceName]=new n.StateSource(wt.map(function(Dt){return y.currentState=Dt,Dt}))),bt&&typeof this.intent=="undefined"&&typeof this.model=="undefined"&&(this.initialState=ot||!0,this.intent=function(Dt){return{__NOOP_ACTION__:o.default.never()}},this.model={__NOOP_ACTION__:function(Vt){return Vt}}),bt=!1,this.log=ae(L),this.initIntent$(),this.initAction$(),this.initResponse$(),this.initState(),this.initModel$(),this.initSendResponse$(),this.initChildren$(),this.initSubComponentSink$(),this.initVdom$(),this.initSinks()}return w(m,[{key:"initIntent$",value:function(){if(!!this.intent){if(typeof this.intent!="function")throw new Error("Intent must be a function");if(this.intent$=this.intent(this.sources),!(this.intent$ instanceof o.Stream)&&B(this.intent$)!="object")throw new Error("Intent must return either an action$ stream or map of event streams")}}},{key:"initAction$",value:function(){var y=this.sources&&this.sources[this.requestSourceName]||null;if(!this.intent$){this.action$=o.default.never();return}var D;if(this.intent$ instanceof o.Stream)D=this.intent$;else{var L=Object.entries(this.intent$).map(function(G){var z=p(G,2),F=z[0],K=z[1];return K.map(function(J){return{type:F,data:J}})});D=o.default.merge.apply(o.default,[o.default.never()].concat(I(L)))}var j=D instanceof o.Stream?D:D.apply&&D(this.sources)||o.default.never(),W=(0,c.default)(o.default.of({type:it}),j).compose((0,i.default)(10)),Y;y&&typeof y.select=="function"?Y=y.select("initial").flatten():Y=o.default.never();var R=Y.map(function(G){return{type:dt,data:G}});this.action$=o.default.merge(W,R).compose(this.log(function(G){var z=G.type;return"Action triggered: <".concat(z,">")}))}},{key:"initResponse$",value:function(){var y=this;if(typeof this.request!="undefined"){if(B(this.request)!="object")throw new Error("The request parameter must be an object");var D=this.sources[this.requestSourceName],L=Object.entries(this.request),j=L.reduce(function(W,Y){var R=p(Y,2),G=R[0],z=R[1],F=G.toLowerCase();if(typeof D[F]!="function")throw new Error("Invalid method in request object:",G);var K=Object.entries(z),J=K.reduce(function(ot,ut){var st=p(ut,2),X=st[0],rt=st[1],nt="[".concat(F.toUpperCase(),"]:").concat(X||"none"),Z=B(rt);if(Z==="undefined")throw new Error("Action for '".concat(X,"' route in request object not specified"));if(Z!=="string"&&Z!=="function")throw new Error("Invalid action for '".concat(X,"' route: expecting string or function"));var ct=Z==="function"?"[ FUNCTION ]":"< ".concat(rt," >");console.log("[".concat(y.name,"] Adding ").concat(y.requestSourceName," route:"),F.toUpperCase(),"'".concat(X,"' <").concat(ct,">"));var lt=D[F](X).compose((0,v.default)(function(tt,wt){return tt.id==wt.id})).map(function(tt){if(!tt||!tt.id)throw new Error("No id found in request: ".concat(nt));try{var wt=tt.id,Dt=tt.params,Vt=tt.body,je=tt.cookies,Xt=Z==="function"?"FUNCTION":rt,Nr={params:Dt,body:Vt,cookies:je,req:tt},It={type:Xt,data:Vt,req:tt,_reqId:wt,_action:Xt},se=new Date().toISOString(),Ft=tt.get?tt.get("host"):"0.0.0.0";if(console.log("".concat(se," ").concat(Ft," ").concat(tt.method," ").concat(tt.url)),H.DEBUG&&y.action$.setDebugListener({next:function(Nt){var Zt=Nt.type;return console.log("[".concat(y.name,"] Action from ").concat(y.requestSourceName," request: <").concat(Zt,">"))}}),Z==="function"){var Bt=y.addCalculated(y.currentState),Wt=rt(Bt,tt);return o.default.of(M(M({},It),{},{data:Wt}))}else{y.action$.shamefullySendNext(It);var Re=Object.entries(y.sources),Fe=Re.reduce(function(qt,Nt){var Zt=p(Nt,2),Tr=Zt[0],ue=Zt[1];if(!ue||typeof ue[U]!="function")return qt;var Ut=ue[U](wt);return[].concat(I(qt),[Ut])},[]);return o.default.merge.apply(o.default,I(Fe))}}catch(qt){console.error(qt)}}).flatten();return[].concat(I(ot),[lt])},[]),Q=o.default.merge.apply(o.default,I(J));return[].concat(I(W),[Q])},[]);if(this.response$=o.default.merge.apply(o.default,I(j)).compose(this.log(function(W){return W._action?"[".concat(y.requestSourceName,"] response data received for Action: <").concat(W._action,">"):"[".concat(y.requestSourceName,"] response data received from FUNCTION")})),typeof this.response!="undefined"&&typeof this.response$=="undefined")throw new Error("Cannot have a response parameter without a request parameter")}}},{key:"initState",value:function(){var y=this;this.model!=null&&(this.model[ft]===void 0?this.model[ft]=q({},this.stateSourceName,function(D,L){return M({},y.addCalculated(L))}):Object.keys(this.model[ft]).forEach(function(D){D!==y.stateSourceName&&(console.warn("".concat(ft," can only be used with the ").concat(y.stateSourceName," source... disregarding ").concat(D)),delete y.model[ft][D])}))}},{key:"initModel$",value:function(){var y=this;if(typeof this.model=="undefined"){this.model$=this.sourceNames.reduce(function(z,F){return z[F]=o.default.never(),z},{});return}var D={type:ft,data:this.initialState},L=this.initialState?(0,c.default)(o.default.of(D),this.action$).compose((0,i.default)(0)):this.action$,j=this.makeOnAction(L,!0,this.action$),W=this.makeOnAction(this.action$,!1,this.action$),Y=Object.entries(this.model),R={};Y.forEach(function(z){var F=p(z,2),K=F[0],J=F[1];if(typeof J=="function"&&(J=q({},y.stateSourceName,J)),B(J)!=="object")throw new Error("Entry for each action must be an object: ".concat(y.name," ").concat(K));var Q=Object.entries(J);Q.forEach(function(ot){var ut=p(ot,2),st=ut[0],X=ut[1],rt=st==y.stateSourceName,nt=rt?j:W,Z=nt(K,X),ct=Z.compose(y.log(function(lt){if(rt)return"State reducer added: <".concat(K,">");var tt=lt&&(lt.type||lt.command||lt.name||lt.key||Array.isArray(lt)&&"Array"||lt);return"Data sent to [".concat(st,"]: <").concat(K,"> ").concat(tt)}));Array.isArray(R[st])?R[st].push(ct):R[st]=[ct]})});var G=Object.entries(R).reduce(function(z,F){var K=p(F,2),J=K[0],Q=K[1];return z[J]=o.default.merge.apply(o.default,[o.default.never()].concat(I(Q))),z},{});this.model$=G}},{key:"initSendResponse$",value:function(){var y=this,D=B(this.response);if(D!="function"&&D!="undefined")throw new Error("The response parameter must be a function");if(D=="undefined"){this.response$&&this.response$.subscribe({next:this.log(function(R){var G=R._reqId,z=R._action;return"Unhandled response for request: ".concat(z," ").concat(G)})}),this.sendResponse$=o.default.never();return}var L={select:function(G){return typeof G=="undefined"?y.response$:(Array.isArray(G)||(G=[G]),y.response$.filter(function(z){var F=z._action;return G.length>0?F==="FUNCTION"||G.includes(F):!0}))}},j=this.response(L);if(B(j)!="object")throw new Error("The response function must return an object");var W=Object.entries(j),Y=W.reduce(function(R,G){var z=p(G,2),F=z[0],K=z[1],J=K.map(function(Q){var ot=Q._reqId,ut=Q._action,st=Q.data;if(!ot)throw new Error("No request id found for response for: ".concat(F));return{_reqId:ot,_action:ut,command:F,data:st}});return[].concat(I(R),[J])},[]);this.sendResponse$=o.default.merge.apply(o.default,I(Y)).compose(this.log(function(R){R._reqId;var G=R._action;return"[".concat(y.requestSourceName,"] response sent for: <").concat(G,">")}))}},{key:"initChildren$",value:function(){var y=this,D=this.sourceNames.reduce(function(L,j){return j==y.DOMSourceName?L[j]={}:L[j]=[],L},{});this.children$=Object.entries(this.children).reduce(function(L,j){var W=p(j,2),Y=W[0],R=W[1],G=R(y.sources);return y.sourceNames.forEach(function(z){z==y.DOMSourceName?L[z][Y]=G[z]:L[z].push(G[z])}),L},D)}},{key:"initSubComponentSink$",value:function(){var y=this,D=o.default.create({start:function(j){y.newSubComponentSinks=j.next.bind(j)},stop:function(j){}});D.subscribe({next:function(j){return j}}),this.subComponentSink$=D.filter(function(L){return Object.keys(L).length>0})}},{key:"initVdom$",value:function(){var y=this;if(typeof this.view!="function"){this.vdom$=o.default.of(null);return}var D=this.sources[this.stateSourceName],L=M({},this.children$[this.DOMSourceName]),j=D&&D.isolateSource(D,{get:function(K){return y.addCalculated(K)}}),W=j&&j.stream||o.default.never();L.state=W,L[this.stateSourceName]=W,this.sources.props$&&(L.props=this.sources.props$),this.sources.children$&&(L.children=this.sources.children$);var Y=Object.entries(L).reduce(function(F,K){var J=p(K,2),Q=J[0],ot=J[1];return F.names.push(Q),F.streams.push(ot),F},{names:[],streams:[]}),R=o.default.combine.apply(o.default,I(Y.streams)),G=R.compose((0,l.default)(1)).map(function(F){return Y.names.reduce(function(K,J,Q){return K[J]=F[Q],K},{})}),z=Object.keys(this.components);this.vdom$=G.fold(function(F,K){var J=y.view(K)||{sel:"div",data:{},children:[]},Q=$r(J,z),ot=Object.entries(Q),ut={"::ROOT::":J};if(ot.length===0)return ut;var st=ot.reduce(function(X,rt){var nt=p(rt,2),Z=nt[0],ct=nt[1],lt=ct.sel,tt=ct.data,wt=tt.props||{},Dt=ct.children||[],Vt=tt.isCollection||!1,je=tt.isSwitchable||!1;if(F[Z]){var Xt=F[Z];return X[Z]=Xt,Xt.props$.shamefullySendNext(wt),Xt.children$.shamefullySendNext(Dt),X}var Nr=y.components[lt],It=o.default.create().startWith(wt),se=o.default.create().startWith(Dt),Ft,Bt;if(Vt){var Wt;Ft=new n.StateSource(It.map(function(Ut){return Ut.value}).remember());var Re=M(M({},y.sources),{},(Wt={},q(Wt,y.stateSourceName,Ft),q(Wt,"props$",It),q(Wt,"children$",se),Wt)),Fe=y.components[tt.component],qt={get:function(Gt){return Gt},set:function(Gt){return Gt}};Bt=(0,r.default)(Fe,qt)(Re)}else if(!je){var Nt,Zt=function(Gt){var me=Gt.state;if(typeof me=="undefined")return Gt;if(B(me)!=="object")return me;var Ir=M({},Gt);return delete Ir.state,M(M({},Ir),me)};Ft=new n.StateSource(It.map(Zt));var Tr=M(M({},y.sources),{},(Nt={},q(Nt,y.stateSourceName,Ft),q(Nt,"props$",It),q(Nt,"children$",se),Nt));Bt=Nr(Tr)}var ue=Bt[y.DOMSourceName];return Bt[y.DOMSourceName]=Ft.stream.map(function(Ut){return ue.compose((0,l.default)(2))}).flatten(),X[Z]={sink$:Bt,props$:It,children$:se},X},ut);return st},{}).map(function(F){var K=F["::ROOT::"],J=[],Q=Object.entries(F).filter(function(X){var rt=p(X,1),nt=rt[0];return nt!=="::ROOT::"});if(Q.length===0)return o.default.of(K);var ot=Q.reduce(function(X,rt){var nt=p(rt,2);nt[0];var Z=nt[1];return Object.entries(Z.sink$).forEach(function(ct){var lt=p(ct,2),tt=lt[0],wt=lt[1];X[tt]||(X[tt]=[]),tt!==y.DOMSourceName&&X[tt].push(wt)}),X},{}),ut=Object.entries(ot).reduce(function(X,rt){var nt=p(rt,2),Z=nt[0],ct=nt[1];return X[Z]=o.default.merge.apply(o.default,I(ct)),X},{});y.newSubComponentSinks(ut);var st=Q.map(function(X){var rt=p(X,2),nt=rt[0],Z=rt[1];return J.push(nt),Z.sink$[y.DOMSourceName]});return st.length===0?o.default.of(K):o.default.combine.apply(o.default,I(st)).map(function(X){var rt=X.reduce(function(Z,ct,lt){return Z[J[lt]]=ct,Z},{}),nt=Pr(K,rt,z);return nt})}).flatten().filter(function(F){return!!F}).remember().compose(this.log("View Rendered"))}},{key:"initSinks",value:function(){var y=this;this.sinks=this.sourceNames.reduce(function(D,L){if(L==y.DOMSourceName)return D;var j=y.subComponentSink$?y.subComponentSink$.map(function(W){return W[L]}).filter(function(W){return!!W}).flatten():o.default.never();return L===y.stateSourceName?D[L]=o.default.merge.apply(o.default,[y.model$[L]||o.default.never(),y.sources[y.stateSourceName].stream.filter(function(W){return!1})].concat(I(y.children$[L]))):D[L]=o.default.merge.apply(o.default,[y.model$[L]||o.default.never(),j].concat(I(y.children$[L]))),D},{}),this.sinks[this.DOMSourceName]=this.vdom$,this.sinks[this.requestSourceName]=o.default.merge(this.sendResponse$,this.sinks[this.requestSourceName])}},{key:"makeOnAction",value:function(y){var D=this,L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,j=arguments.length>2?arguments[2]:void 0;return j=j||y,function(W,Y){var R=y.filter(function(F){var K=F.type;return K==W}),G;if(typeof Y=="function")G=R.map(function(F){var K=function(rt,nt){var Z=F._reqId||F.req&&F.req.id,ct=Z?B(nt)=="object"?M(M({},nt),{},{_reqId:Z,_action:W}):{data:nt,_reqId:Z,_action:W}:nt;setTimeout(function(){j.shamefullySendNext({type:rt,data:ct})},10)},J=F.data;if(J&&J.data&&J._reqId&&(J=J.data),L)return function(X){var rt=D.isSubComponent?D.currentState:X,nt=D.addCalculated(rt),Z=Y(nt,J,K,F.req);return Z==At?rt:D.cleanupCalculated(Z)};var Q=D.addCalculated(D.currentState),ot=Y(Q,J,K,F.req),ut=B(ot),st=F._reqId||F.req&&F.req.id;if(["string","number","boolean","function"].includes(ut))return ot;if(ut=="object")return M(M({},ot),{},{_reqId:st,_action:W});if(ut=="undefined")return console.warn("'undefined' value sent to ".concat(W)),ot;throw new Error("Invalid reducer type for ".concat(W," ").concat(ut))}).filter(function(F){return F!=At});else if(Y===void 0||Y===!0)G=R.map(function(F){var K=F.data;return K});else{var z=Y;G=R.mapTo(z)}return G}}},{key:"addCalculated",value:function(y){if(!this.calculated||B(y)!=="object")return y;if(B(this.calculated)!=="object")throw new Error("'calculated' parameter must be an object mapping calculated state field named to functions");var D=Object.entries(this.calculated),L=D.reduce(function(j,W){var Y=p(W,2),R=Y[0],G=Y[1];if(typeof G!="function")throw new Error("Missing or invalid calculator function for calculated field '".concat(R));try{j[R]=G(y)}catch(z){console.warn("Calculated field '".concat(R,"' threw an error during calculation: ").concat(z.message))}return j},{});return M(M({},y),L)}},{key:"cleanupCalculated",value:function(y){var D=this;if(this.storeCalculatedInState)return this.addCalculated(y);if(!this.calculated||!y||B(y)!=="object")return y;var L=Object.keys(this.calculated),j=M({},y);return L.forEach(function(W){D.initialState&&typeof D.initialState[W]!="undefined"?j[W]=D.initialState[W]:delete j[W]}),j}}]),m}();function ae(m){return function(k){var y=typeof k=="function"?k:function(D){return k};return function(D){return D.debug(function(L){(H.DEBUG=="true"||H.DEBUG===!0)&&console.log("[".concat(m,"] ").concat(y(L)))})}}}function $r(m,k){var y,D=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(!m)return{};if((y=m.data)!==null&&y!==void 0&&y.componentsProcessed)return{};D||(m.data.componentsProcessed=!0);var L=m.sel,j=L&&L.toLowerCase()==="collection",W=L&&L.toLowerCase()==="switchable",Y=L&&["collection","swtichable"].concat(I(k)).includes(m.sel),R=m.data&&m.data.props||{},G=m.children||[],z={};if(Y){var F=Dr(m);if(j){if(!R.component)throw new Error("Collection element missing required 'component' property");if(typeof R.component!="string")throw new Error("Invalid 'component' property of collection element: found ".concat(B(R.component)," requires string"));if(!k.includes(R.component))throw new Error("Specified component for collection not found: ".concat(R.component));(!R.value||!Array.isArray(R.value))&&console.warn("No valid array found in the 'value' property of collection ".concat(R.component,": no collection components will be created")),m.data.isCollection=!0,m.data.component=R.component}else if(W){if(!R.components)throw new Error("Switchable element missing required 'components' property");if(B(R.components)!=="object")throw new Error("Invalid 'components' property of switchable element: found ".concat(B(R.components)," requires object mapping names to component factories"));var K=Object.values(R.components);if(!K.every(function(Q){return typeof Q=="function"}))throw new Error("One or more invalid component factories for switchable element is not a valid component factory");if(!R.current||typeof R.current!="string")throw new Error("Missing or invalid 'current' property for switchable element: found ".concat(B(R.current)," requires string"));var J=Object.keys(R.components);if(!J.includes(R.current))throw new Error("Component '".concat(R.current,"' not found in switchable element"));m.data.isSwitchable=!0,m.data.components=R.components,m.data.currentComponent=R.current}z[F]=m}return G.length>0&&G.map(function(Q){return $r(Q,k,!0)}).forEach(function(Q){Object.entries(Q).forEach(function(ot){var ut=p(ot,2),st=ut[0],X=ut[1];return z[st]=X})}),z}function Pr(m,k,y){var D,L,j,W=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!!m){if((D=m.data)!==null&&D!==void 0&&D.componentsInjected)return m;!W&&m.data&&(m.data.componentsInjected=!0);var Y=m.sel||"NO SELECTOR",R=["collection","swtichable"].concat(I(y)).includes(Y),G=m==null||(L=m.data)===null||L===void 0?void 0:L.isCollection;m==null||(j=m.data)===null||j===void 0||j.isSwitchable,m.data&&m.data.props;var z=m.children||[];if(R){var F=Dr(m),K=k[F];return G?(m.sel="div",delete m.elm,m.children=K,m):K}else return z.length>0&&(m.children=z.map(function(J){return Pr(J,k,y)}).flat()),m}}function Dr(m){var k=m.sel,y=m.data&&m.data.props||{},D=y.id&&JSON.stringify(y.id)||JSON.stringify(y);return"".concat(k,"::").concat(D)}})(ln);var qn={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=x;var t=i(ht),r=n(ie);function n(h){return h&&h.__esModule?h:{default:h}}function o(h){if(typeof WeakMap!="function")return null;var g=new WeakMap,w=new WeakMap;return(o=function(M){return M?w:g})(h)}function i(h,g){if(!g&&h&&h.__esModule)return h;if(h===null||O(h)!=="object"&&typeof h!="function")return{default:h};var w=o(g);if(w&&w.has(h))return w.get(h);var C={},M=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var q in h)if(q!=="default"&&Object.prototype.hasOwnProperty.call(h,q)){var B=M?Object.getOwnPropertyDescriptor(h,q):null;B&&(B.get||B.set)?Object.defineProperty(C,q,B):C[q]=h[q]}return C.default=h,w&&w.set(h,C),C}function c(h){return E(h)||v(h)||a(h)||l()}function l(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function v(h){if(typeof Symbol!="undefined"&&h[Symbol.iterator]!=null||h["@@iterator"]!=null)return Array.from(h)}function E(h){if(Array.isArray(h))return p(h)}function _(h,g){var w=Object.keys(h);if(Object.getOwnPropertySymbols){var C=Object.getOwnPropertySymbols(h);g&&(C=C.filter(function(M){return Object.getOwnPropertyDescriptor(h,M).enumerable})),w.push.apply(w,C)}return w}function S(h){for(var g=1;g<arguments.length;g++){var w=arguments[g]!=null?arguments[g]:{};g%2?_(Object(w),!0).forEach(function(C){I(h,C,w[C])}):Object.getOwnPropertyDescriptors?Object.defineProperties(h,Object.getOwnPropertyDescriptors(w)):_(Object(w)).forEach(function(C){Object.defineProperty(h,C,Object.getOwnPropertyDescriptor(w,C))})}return h}function I(h,g,w){return g in h?Object.defineProperty(h,g,{value:w,enumerable:!0,configurable:!0,writable:!0}):h[g]=w,h}function u(h,g){return b(h)||d(h,g)||a(h,g)||f()}function f(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function a(h,g){if(!!h){if(typeof h=="string")return p(h,g);var w=Object.prototype.toString.call(h).slice(8,-1);if(w==="Object"&&h.constructor&&(w=h.constructor.name),w==="Map"||w==="Set")return Array.from(h);if(w==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(w))return p(h,g)}}function p(h,g){(g==null||g>h.length)&&(g=h.length);for(var w=0,C=new Array(g);w<g;w++)C[w]=h[w];return C}function d(h,g){var w=h==null?null:typeof Symbol!="undefined"&&h[Symbol.iterator]||h["@@iterator"];if(w!=null){var C=[],M=!0,q=!1,B,H;try{for(w=w.call(h);!(M=(B=w.next()).done)&&(C.push(B.value),!(g&&C.length===g));M=!0);}catch(U){q=!0,H=U}finally{try{!M&&w.return!=null&&w.return()}finally{if(q)throw H}}return C}}function b(h){if(Array.isArray(h))return h}function O(h){return O=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},O(h)}function x(h,g,w){var C=arguments.length>3&&arguments[3]!==void 0?arguments[3]:["DOM"],M=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"STATE",q=O(g);if(!g)throw new Error("Missing 'name$' parameter for switchable()");if(!(q==="string"||q==="function"||g instanceof t.Stream))throw new Error("Invalid 'name$' parameter for switchable(): expects Stream, String, or Function");if(g instanceof t.Stream){var B=g.compose((0,r.default)()).startWith(w).remember();return function(U){return A(h,U,B,C)}}else{var H=q==="function"&&g||function(U){return U[g]};return function(U){var it=U&&(typeof M=="string"&&U[M]||U.STATE||U.state).stream;if(!it instanceof t.Stream)throw new Error("Could not find the state source: ".concat(M));var ft=it.map(H).filter(function(dt){return typeof dt=="string"}).compose((0,r.default)()).startWith(w).remember();return A(h,U,ft,C,M)}}}function A(h,g,w){var C=arguments.length>3&&arguments[3]!==void 0?arguments[3]:["DOM"],M=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"STATE";typeof C=="string"&&(C=[C]);var q=Object.entries(h).map(function(H){var U=u(H,2),it=U[0],ft=U[1];if(g[M]){var dt=g[M].stream,bt=t.default.combine(w,dt).filter(function(Rt){var Pt=u(Rt,2),ae=Pt[0];return Pt[1],ae==it}).map(function(Rt){var Pt=u(Rt,2);Pt[0];var ae=Pt[1];return ae}).remember(),At=new g[M].constructor(bt,g[M]._name);return[it,ft(S(S({},g),{},{state:At}))]}return[it,ft(g)]}),B=Object.keys(g).reduce(function(H,U){if(C.includes(U))H[U]=w.map(function(ft){var dt=q.find(function(bt){var At=u(bt,2),Rt=At[0];return At[1],Rt===ft});return dt&&dt[1][U]||t.default.never()}).flatten().remember().startWith("");else{var it=q.filter(function(ft){var dt=u(ft,2);dt[0];var bt=dt[1];return bt[U]!==void 0}).map(function(ft){var dt=u(ft,2);dt[0];var bt=dt[1];return bt[U]});H[U]=t.default.merge.apply(t.default,c(it))}return H},{});return B}})(qn);var Un={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=f;var t=r(ht);function r(a){return a&&a.__esModule?a:{default:a}}function n(a,p){return c(a)||i(a,p)||_(a,p)||o()}function o(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function i(a,p){var d=a==null?null:typeof Symbol!="undefined"&&a[Symbol.iterator]||a["@@iterator"];if(d!=null){var b=[],O=!0,x=!1,A,h;try{for(d=d.call(a);!(O=(A=d.next()).done)&&(b.push(A.value),!(p&&b.length===p));O=!0);}catch(g){x=!0,h=g}finally{try{!O&&d.return!=null&&d.return()}finally{if(x)throw h}}return b}}function c(a){if(Array.isArray(a))return a}function l(a,p){var d=typeof Symbol!="undefined"&&a[Symbol.iterator]||a["@@iterator"];if(!d){if(Array.isArray(a)||(d=_(a))||p&&a&&typeof a.length=="number"){d&&(a=d);var b=0,O=function(){};return{s:O,n:function(){return b>=a.length?{done:!0}:{done:!1,value:a[b++]}},e:function(w){throw w},f:O}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var x=!0,A=!1,h;return{s:function(){d=d.call(a)},n:function(){var w=d.next();return x=w.done,w},e:function(w){A=!0,h=w},f:function(){try{!x&&d.return!=null&&d.return()}finally{if(A)throw h}}}}function v(a){return I(a)||S(a)||_(a)||E()}function E(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _(a,p){if(!!a){if(typeof a=="string")return u(a,p);var d=Object.prototype.toString.call(a).slice(8,-1);if(d==="Object"&&a.constructor&&(d=a.constructor.name),d==="Map"||d==="Set")return Array.from(a);if(d==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d))return u(a,p)}}function S(a){if(typeof Symbol!="undefined"&&a[Symbol.iterator]!=null||a["@@iterator"]!=null)return Array.from(a)}function I(a){if(Array.isArray(a))return u(a)}function u(a,p){(p==null||p>a.length)&&(p=a.length);for(var d=0,b=new Array(p);d<p;d++)b[d]=a[d];return b}function f(a){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},d=p.events,b=d===void 0?["input","submit"]:d,O=p.preventDefault,x=O===void 0?!0:O;typeof b=="string"&&(b=[b]);var A=b.map(function(g){return a.events(g)}),h=t.default.merge.apply(t.default,v(A));return h.map(function(g){x&&g.preventDefault();var w=g.type==="submit"?g.srcElement:g.currentTarget,C=new FormData(w),M={};M.event=g,M.eventType=g.type;var q=w.querySelector("input[type=submit]:focus");if(q){var B=q.name,H=q.value;M[B||"submit"]=H}var U=l(C.entries()),it;try{for(U.s();!(it=U.n()).done;){var ft=n(it.value,2),dt=ft[0],bt=ft[1];M[dt]=bt}}catch(At){U.e(At)}finally{U.f()}return M})}})(Un);var Gn={};function Bs(){var e;return typeof window!="undefined"?e=window:typeof global!="undefined"?e=global:e=this,e.Cyclejs=e.Cyclejs||{},e=e.Cyclejs,e.adaptStream=e.adaptStream||function(t){return t},e}function Ws(e){return Bs().adaptStream(e)}function qs(e){var t={};for(var r in e)e.hasOwnProperty(r)&&(t[r]=et.create());return t}function Us(e,t){var r={};for(var n in e)e.hasOwnProperty(n)&&(r[n]=e[n](t[n],n),r[n]&&typeof r[n]=="object"&&(r[n]._isCycleSource=n));return r}function Gs(e){for(var t in e)e.hasOwnProperty(t)&&e[t]&&typeof e[t].shamefullySendNext=="function"&&(e[t]=Ws(e[t]));return e}function zs(e,t){var r=Fn(),n=Object.keys(e).filter(function(l){return!!t[l]}),o={},i={};n.forEach(function(l){o[l]={_n:[],_e:[]},i[l]={next:function(v){return o[l]._n.push(v)},error:function(v){return o[l]._e.push(v)},complete:function(){}}});var c=n.map(function(l){return et.fromObservable(e[l]).subscribe(i[l])});return n.forEach(function(l){var v=t[l],E=function(S){r(function(){return v._n(S)})},_=function(S){r(function(){(console.error||console.log)(S),v._e(S)})};o[l]._n.forEach(E),o[l]._e.forEach(_),i[l].next=E,i[l].error=_,i[l]._n=E,i[l]._e=_}),o=null,function(){c.forEach(function(v){return v.unsubscribe()})}}function Hs(e){Object.keys(e).forEach(function(t){return e[t]._c()})}function Ks(e){for(var t in e)e.hasOwnProperty(t)&&e[t]&&e[t].dispose&&e[t].dispose()}function zn(e){return Object.keys(e).length===0}function Hn(e,t){if(typeof e!="function")throw new Error("First argument given to Cycle must be the 'main' function.");if(typeof t!="object"||t===null)throw new Error("Second argument given to Cycle must be an object with driver functions as properties.");if(zn(t))throw new Error("Second argument given to Cycle must be an object with at least one driver function declared as a property.");var r=Kn(t),n=e(r.sources);typeof window!="undefined"&&(window.Cyclejs=window.Cyclejs||{},window.Cyclejs.sinks=n);function o(){var i=r.run(n);return function(){i(),r.dispose()}}return{sinks:n,sources:r.sources,run:o}}function Kn(e){if(typeof e!="object"||e===null)throw new Error("Argument given to setupReusable must be an object with driver functions as properties.");if(zn(e))throw new Error("Argument given to setupReusable must be an object with at least one driver function declared as a property.");var t=qs(e),r=Us(e,t),n=Gs(r);function o(c){return zs(c,t)}function i(){Ks(n),Hs(t)}return{sources:n,run:o,dispose:i}}function Kr(e,t){var r=Hn(e,t);return typeof window!="undefined"&&window.CyclejsDevTool_startGraphSerializer&&window.CyclejsDevTool_startGraphSerializer(r.sinks),r.run()}var Js=Object.freeze(Object.defineProperty({__proto__:null,setup:Hn,setupReusable:Kn,run:Kr,default:Kr},Symbol.toStringTag,{value:"Module"})),Ys=ye(Js);function Vs(e,t){return document.createElement(e,t)}function Xs(e,t,r){return document.createElementNS(e,t,r)}function Zs(){return document.createDocumentFragment()}function Qs(e){return document.createTextNode(e)}function tu(e){return document.createComment(e)}function eu(e,t,r){e.insertBefore(t,r)}function ru(e,t){e.removeChild(t)}function nu(e,t){e.appendChild(t)}function ou(e){return e.parentNode}function iu(e){return e.nextSibling}function au(e){return e.tagName}function su(e,t){e.textContent=t}function uu(e){return e.textContent}function fu(e){return e.nodeType===1}function cu(e){return e.nodeType===3}function lu(e){return e.nodeType===8}function pu(e){return e.nodeType===11}const Jn={createElement:Vs,createElementNS:Xs,createTextNode:Qs,createDocumentFragment:Zs,createComment:tu,insertBefore:eu,removeChild:ru,appendChild:nu,parentNode:ou,nextSibling:iu,tagName:au,setTextContent:su,getTextContent:uu,isElement:fu,isText:cu,isComment:lu,isDocumentFragment:pu};function $t(e,t,r,n,o){const i=t===void 0?void 0:t.key;return{sel:e,data:t,children:r,text:n,elm:o,key:i}}const ir=Array.isArray;function Ee(e){return typeof e=="string"||typeof e=="number"||e instanceof String||e instanceof Number}function Xe(e){return e===void 0}function _t(e){return e!==void 0}const Ze=$t("",{},[],void 0,void 0);function fe(e,t){var r,n;const o=e.key===t.key,i=((r=e.data)===null||r===void 0?void 0:r.is)===((n=t.data)===null||n===void 0?void 0:n.is);return e.sel===t.sel&&o&&i}function hu(){throw new Error("The document fragment is not supported on this platform.")}function du(e,t){return e.isElement(t)}function vu(e,t){return e.isDocumentFragment(t)}function yu(e,t,r){var n;const o={};for(let i=t;i<=r;++i){const c=(n=e[i])===null||n===void 0?void 0:n.key;c!==void 0&&(o[c]=i)}return o}const mu=["create","update","remove","destroy","pre","post"];function _u(e,t,r){const n={create:[],update:[],remove:[],destroy:[],pre:[],post:[]},o=t!==void 0?t:Jn;for(const f of mu)for(const a of e){const p=a[f];p!==void 0&&n[f].push(p)}function i(f){const a=f.id?"#"+f.id:"",p=f.getAttribute("class"),d=p?"."+p.split(" ").join("."):"";return $t(o.tagName(f).toLowerCase()+a+d,{},[],void 0,f)}function c(f){return $t(void 0,{},[],void 0,f)}function l(f,a){return function(){if(--a===0){const d=o.parentNode(f);o.removeChild(d,f)}}}function v(f,a){var p,d,b,O;let x,A=f.data;if(A!==void 0){const w=(p=A.hook)===null||p===void 0?void 0:p.init;_t(w)&&(w(f),A=f.data)}const h=f.children,g=f.sel;if(g==="!")Xe(f.text)&&(f.text=""),f.elm=o.createComment(f.text);else if(g!==void 0){const w=g.indexOf("#"),C=g.indexOf(".",w),M=w>0?w:g.length,q=C>0?C:g.length,B=w!==-1||C!==-1?g.slice(0,Math.min(M,q)):g,H=f.elm=_t(A)&&_t(x=A.ns)?o.createElementNS(x,B,A):o.createElement(B,A);for(M<q&&H.setAttribute("id",g.slice(M+1,q)),C>0&&H.setAttribute("class",g.slice(q+1).replace(/\./g," ")),x=0;x<n.create.length;++x)n.create[x](Ze,f);if(ir(h))for(x=0;x<h.length;++x){const it=h[x];it!=null&&o.appendChild(H,v(it,a))}else Ee(f.text)&&o.appendChild(H,o.createTextNode(f.text));const U=f.data.hook;_t(U)&&((d=U.create)===null||d===void 0||d.call(U,Ze,f),U.insert&&a.push(f))}else if(((b=r==null?void 0:r.experimental)===null||b===void 0?void 0:b.fragments)&&f.children){const w=f.children;for(f.elm=((O=o.createDocumentFragment)!==null&&O!==void 0?O:hu)(),x=0;x<n.create.length;++x)n.create[x](Ze,f);for(x=0;x<w.length;++x){const C=w[x];C!=null&&o.appendChild(f.elm,v(C,a))}}else f.elm=o.createTextNode(f.text);return f.elm}function E(f,a,p,d,b,O){for(;d<=b;++d){const x=p[d];x!=null&&o.insertBefore(f,v(x,O),a)}}function _(f){var a,p;const d=f.data;if(d!==void 0){(p=(a=d==null?void 0:d.hook)===null||a===void 0?void 0:a.destroy)===null||p===void 0||p.call(a,f);for(let b=0;b<n.destroy.length;++b)n.destroy[b](f);if(f.children!==void 0)for(let b=0;b<f.children.length;++b){const O=f.children[b];O!=null&&typeof O!="string"&&_(O)}}}function S(f,a,p,d){for(var b,O;p<=d;++p){let x,A;const h=a[p];if(h!=null)if(_t(h.sel)){_(h),x=n.remove.length+1,A=l(h.elm,x);for(let w=0;w<n.remove.length;++w)n.remove[w](h,A);const g=(O=(b=h==null?void 0:h.data)===null||b===void 0?void 0:b.hook)===null||O===void 0?void 0:O.remove;_t(g)?g(h,A):A()}else o.removeChild(f,h.elm)}}function I(f,a,p,d){let b=0,O=0,x=a.length-1,A=a[0],h=a[x],g=p.length-1,w=p[0],C=p[g],M,q,B,H;for(;b<=x&&O<=g;)A==null?A=a[++b]:h==null?h=a[--x]:w==null?w=p[++O]:C==null?C=p[--g]:fe(A,w)?(u(A,w,d),A=a[++b],w=p[++O]):fe(h,C)?(u(h,C,d),h=a[--x],C=p[--g]):fe(A,C)?(u(A,C,d),o.insertBefore(f,A.elm,o.nextSibling(h.elm)),A=a[++b],C=p[--g]):fe(h,w)?(u(h,w,d),o.insertBefore(f,h.elm,A.elm),h=a[--x],w=p[++O]):(M===void 0&&(M=yu(a,b,x)),q=M[w.key],Xe(q)?o.insertBefore(f,v(w,d),A.elm):(B=a[q],B.sel!==w.sel?o.insertBefore(f,v(w,d),A.elm):(u(B,w,d),a[q]=void 0,o.insertBefore(f,B.elm,A.elm))),w=p[++O]);O<=g&&(H=p[g+1]==null?null:p[g+1].elm,E(f,H,p,O,g,d)),b<=x&&S(f,a,b,x)}function u(f,a,p){var d,b,O,x,A,h,g,w;const C=(d=a.data)===null||d===void 0?void 0:d.hook;(b=C==null?void 0:C.prepatch)===null||b===void 0||b.call(C,f,a);const M=a.elm=f.elm,q=f.children,B=a.children;if(f!==a){if(a.data!==void 0||_t(a.text)&&a.text!==f.text){(O=a.data)!==null&&O!==void 0||(a.data={}),(x=f.data)!==null&&x!==void 0||(f.data={});for(let H=0;H<n.update.length;++H)n.update[H](f,a);(g=(h=(A=a.data)===null||A===void 0?void 0:A.hook)===null||h===void 0?void 0:h.update)===null||g===void 0||g.call(h,f,a)}Xe(a.text)?_t(q)&&_t(B)?q!==B&&I(M,q,B,p):_t(B)?(_t(f.text)&&o.setTextContent(M,""),E(M,null,B,0,B.length-1,p)):_t(q)?S(M,q,0,q.length-1):_t(f.text)&&o.setTextContent(M,""):f.text!==a.text&&(_t(q)&&S(M,q,0,q.length-1),o.setTextContent(M,a.text)),(w=C==null?void 0:C.postpatch)===null||w===void 0||w.call(C,f,a)}}return function(a,p){let d,b,O;const x=[];for(d=0;d<n.pre.length;++d)n.pre[d]();for(du(o,a)?a=i(a):vu(o,a)&&(a=c(a)),fe(a,p)?u(a,p,x):(b=a.elm,O=o.parentNode(b),v(p,x),O!==null&&(o.insertBefore(O,p.elm,o.nextSibling(b)),S(O,[a],0,0))),d=0;d<x.length;++d)x[d].data.hook.insert(x[d]);for(d=0;d<n.post.length;++d)n.post[d]();return p}}function Or(e,t,r){if(e.ns="http://www.w3.org/2000/svg",r!=="foreignObject"&&t!==void 0)for(let n=0;n<t.length;++n){const o=t[n];if(typeof o=="string")continue;const i=o.data;i!==void 0&&Or(i,o.children,o.sel)}}function Et(e,t,r){let n={},o,i,c;if(r!==void 0?(t!==null&&(n=t),ir(r)?o=r:Ee(r)?i=r.toString():r&&r.sel&&(o=[r])):t!=null&&(ir(t)?o=t:Ee(t)?i=t.toString():t&&t.sel?o=[t]:n=t),o!==void 0)for(c=0;c<o.length;++c)Ee(o[c])&&(o[c]=$t(void 0,void 0,void 0,o[c],void 0));return e[0]==="s"&&e[1]==="v"&&e[2]==="g"&&(e.length===3||e[3]==="."||e[3]==="#")&&Or(n,o,e),$t(e,n,o,i,void 0)}function ar(e,t){const r=t!==void 0?t:Jn;let n;if(r.isElement(e)){const o=e.id?"#"+e.id:"",i=e.getAttribute("class"),c=i?"."+i.split(" ").join("."):"",l=r.tagName(e).toLowerCase()+o+c,v={},E={},_={},S=[];let I,u,f;const a=e.attributes,p=e.childNodes;for(u=0,f=a.length;u<f;u++)I=a[u].nodeName,I[0]==="d"&&I[1]==="a"&&I[2]==="t"&&I[3]==="a"&&I[4]==="-"?E[I.slice(5)]=a[u].nodeValue||"":I!=="id"&&I!=="class"&&(v[I]=a[u].nodeValue);for(u=0,f=p.length;u<f;u++)S.push(ar(p[u],t));return Object.keys(v).length>0&&(_.attrs=v),Object.keys(E).length>0&&(_.datasets=E),l[0]==="s"&&l[1]==="v"&&l[2]==="g"&&(l.length===3||l[3]==="."||l[3]==="#")&&Or(_,S,l),$t(l,_,S,void 0,e)}else return r.isText(e)?(n=r.getTextContent(e),$t(void 0,void 0,void 0,n,e)):r.isComment(e)?(n=r.getTextContent(e),$t("!",{},[],n,e)):$t("",{},[],void 0,e)}const gu="http://www.w3.org/1999/xlink",bu="http://www.w3.org/XML/1998/namespace",Jr=58,wu=120;function Yr(e,t){let r;const n=t.elm;let o=e.data.attrs,i=t.data.attrs;if(!(!o&&!i)&&o!==i){o=o||{},i=i||{};for(r in i){const c=i[r];o[r]!==c&&(c===!0?n.setAttribute(r,""):c===!1?n.removeAttribute(r):r.charCodeAt(0)!==wu?n.setAttribute(r,c):r.charCodeAt(3)===Jr?n.setAttributeNS(bu,r,c):r.charCodeAt(5)===Jr?n.setAttributeNS(gu,r,c):n.setAttribute(r,c))}for(r in o)r in i||n.removeAttribute(r)}}const Su={create:Yr,update:Yr};function Vr(e,t){let r,n;const o=t.elm;let i=e.data.class,c=t.data.class;if(!(!i&&!c)&&i!==c){i=i||{},c=c||{};for(n in i)i[n]&&!Object.prototype.hasOwnProperty.call(c,n)&&o.classList.remove(n);for(n in c)r=c[n],r!==i[n]&&o.classList[r?"add":"remove"](n)}}const Ou={create:Vr,update:Vr},Xr=/[A-Z]/g;function Zr(e,t){const r=t.elm;let n=e.data.dataset,o=t.data.dataset,i;if(!n&&!o||n===o)return;n=n||{},o=o||{};const c=r.dataset;for(i in n)o[i]||(c?i in c&&delete c[i]:r.removeAttribute("data-"+i.replace(Xr,"-$&").toLowerCase()));for(i in o)n[i]!==o[i]&&(c?c[i]=o[i]:r.setAttribute("data-"+i.replace(Xr,"-$&").toLowerCase(),o[i]))}const Au={create:Zr,update:Zr};function Qr(e,t){let r,n,o;const i=t.elm;let c=e.data.props,l=t.data.props;if(!(!c&&!l)&&c!==l){c=c||{},l=l||{};for(r in l)n=l[r],o=c[r],o!==n&&(r!=="value"||i[r]!==n)&&(i[r]=n)}}const Eu={create:Qr,update:Qr},tn=typeof window!="undefined"&&window.requestAnimationFrame.bind(window)||setTimeout,xu=function(e){tn(function(){tn(e)})};let sr=!1;function $u(e,t,r){xu(function(){e[t]=r})}function en(e,t){let r,n;const o=t.elm;let i=e.data.style,c=t.data.style;if(!i&&!c||i===c)return;i=i||{},c=c||{};const l="delayed"in i;for(n in i)c[n]||(n[0]==="-"&&n[1]==="-"?o.style.removeProperty(n):o.style[n]="");for(n in c)if(r=c[n],n==="delayed"&&c.delayed)for(const v in c.delayed)r=c.delayed[v],(!l||r!==i.delayed[v])&&$u(o.style,v,r);else n!=="remove"&&r!==i[n]&&(n[0]==="-"&&n[1]==="-"?o.style.setProperty(n,r):o.style[n]=r)}function Pu(e){let t,r;const n=e.elm,o=e.data.style;if(!(!o||!(t=o.destroy)))for(r in t)n.style[r]=t[r]}function Du(e,t){const r=e.data.style;if(!r||!r.remove){t();return}sr||(e.elm.offsetLeft,sr=!0);let n;const o=e.elm;let i=0;const c=r.remove;let l=0;const v=[];for(n in c)v.push(n),o.style[n]=c[n];const _=getComputedStyle(o)["transition-property"].split(", ");for(;i<_.length;++i)v.indexOf(_[i])!==-1&&l++;o.addEventListener("transitionend",function(S){S.target===o&&--l,l===0&&t()})}function Nu(){sr=!1}const Tu={pre:Nu,create:en,update:en,destroy:Pu,remove:Du};function xe(e,t){t.elm=e.elm,e.data.fn=t.data.fn,e.data.args=t.data.args,e.data.isolate=t.data.isolate,t.data=e.data,t.children=e.children,t.text=e.text,t.elm=e.elm}function Iu(e){var t=e.data,r=t.fn.apply(void 0,t.args);xe(r,e)}function ku(e,t){var r=e.data,n=t.data,o,i=r.args,c=n.args;for((r.fn!==n.fn||i.length!==c.length)&&xe(n.fn.apply(void 0,c),t),o=0;o<c.length;++o)if(i[o]!==c[o]){xe(n.fn.apply(void 0,c),t);return}xe(e,t)}function Cu(e,t,r,n){return n===void 0&&(n=r,r=t,t=void 0),Et(e,{key:t,hook:{init:Iu,prepatch:ku},fn:r,args:n})}function Te(e,t,r,n,o){r===void 0&&(r=!1),n===void 0&&(n=!1),o===void 0&&(o=!1);var i=null;return yr.create({start:function(l){n?i=function(E){Vn(E,n),l.next(E)}:i=function(E){l.next(E)},e.addEventListener(t,i,{capture:r,passive:o})},stop:function(){e.removeEventListener(t,i,r),i=null}})}function Yn(e,t){for(var r=Object.keys(e),n=r.length,o=0;o<n;o++){var i=r[o];if(typeof e[i]=="object"&&typeof t[i]=="object"){if(!Yn(e[i],t[i]))return!1}else if(e[i]!==t[i])return!1}return!0}function Vn(e,t){if(t)if(typeof t=="boolean")e.preventDefault();else if(Mu(t))t(e)&&e.preventDefault();else if(typeof t=="object")Yn(t,e)&&e.preventDefault();else throw new Error("preventDefault has to be either a boolean, predicate function or object")}function Mu(e){return typeof e=="function"}var Lu=function(){function e(t){this._name=t}return e.prototype.select=function(t){return this},e.prototype.elements=function(){var t=pt(et.of([document]));return t._isCycleSource=this._name,t},e.prototype.element=function(){var t=pt(et.of(document));return t._isCycleSource=this._name,t},e.prototype.events=function(t,r,n){r===void 0&&(r={});var o;o=Te(document,t,r.useCapture,r.preventDefault);var i=pt(o);return i._isCycleSource=this._name,i},e}(),ju=function(){function e(t){this._name=t}return e.prototype.select=function(t){return this},e.prototype.elements=function(){var t=pt(et.of([document.body]));return t._isCycleSource=this._name,t},e.prototype.element=function(){var t=pt(et.of(document.body));return t._isCycleSource=this._name,t},e.prototype.events=function(t,r,n){r===void 0&&(r={});var o;o=Te(document.body,t,r.useCapture,r.preventDefault);var i=pt(o);return i._isCycleSource=this._name,i},e}();function Ru(e){var t=1,r=11;return typeof HTMLElement=="object"?e instanceof HTMLElement||e instanceof DocumentFragment:e&&typeof e=="object"&&e!==null&&(e.nodeType===t||e.nodeType===r)&&typeof e.nodeName=="string"}function Fu(e){return e.length>1&&(e[0]==="."||e[0]==="#")}function Bu(e){return e.nodeType===11}function Wu(e){if(typeof e!="string"&&!Ru(e))throw new Error("Given container is not a DOM element neither a selector string.")}function qu(e){var t=typeof e=="string"?document.querySelector(e):e;if(typeof e=="string"&&t===null)throw new Error("Cannot render into unknown element `"+e+"`");return t}function Xn(e){for(var t="",r=e.length-1;r>=0&&e[r].type==="selector";r--)t=e[r].scope+" "+t;return t.trim()}function Ar(e,t){if(!Array.isArray(e)||!Array.isArray(t)||e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==t[r].type||e[r].scope!==t[r].scope)return!1;return!0}var Zn=function(){function e(t,r){this.namespace=t,this.isolateModule=r,this._namespace=t.filter(function(n){return n.type!=="selector"})}return e.prototype.isDirectlyInScope=function(t){var r=this.isolateModule.getNamespace(t);if(!r||this._namespace.length>r.length||!Ar(this._namespace,r.slice(0,this._namespace.length)))return!1;for(var n=this._namespace.length;n<r.length;n++)if(r[n].type==="total")return!1;return!0},e}();function Uu(e){return Array.prototype.slice.call(e)}var Qn=function(){function e(t,r){this.namespace=t,this.isolateModule=r}return e.prototype.call=function(){var t=this.namespace,r=Xn(t),n=new Zn(t,this.isolateModule),o=this.isolateModule.getElement(t.filter(function(i){return i.type!=="selector"}));return o===void 0?[]:r===""?[o]:Uu(o.querySelectorAll(r)).filter(n.isDirectlyInScope,n).concat(o.matches(r)?[o]:[])},e}(),he=globalThis&&globalThis.__assign||function(){return he=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},he.apply(this,arguments)};function Gu(e){return function(t,r){return r===":root"?t:t.map(function(n){if(!n)return n;var o=to(r),i=he({},n,{data:he({},n.data,{isolate:!n.data||!Array.isArray(n.data.isolate)?e.concat([o]):n.data.isolate})});return he({},i,{key:i.key!==void 0?i.key:JSON.stringify(i.data.isolate)})})}}function to(e){return{type:Fu(e)?"sibling":"total",scope:e}}var eo=function(){function e(t,r,n,o,i,c){n===void 0&&(n=[]),this._rootElement$=t,this._sanitation$=r,this._namespace=n,this._isolateModule=o,this._eventDelegator=i,this._name=c,this.isolateSource=function(l,v){return new e(l._rootElement$,l._sanitation$,l._namespace.concat(to(v)),l._isolateModule,l._eventDelegator,l._name)},this.isolateSink=Gu(this._namespace)}return e.prototype._elements=function(){if(this._namespace.length===0)return this._rootElement$.map(function(r){return[r]});var t=new Qn(this._namespace,this._isolateModule);return this._rootElement$.map(function(){return t.call()})},e.prototype.elements=function(){var t=pt(this._elements().remember());return t._isCycleSource=this._name,t},e.prototype.element=function(){var t=pt(this._elements().filter(function(r){return r.length>0}).map(function(r){return r[0]}).remember());return t._isCycleSource=this._name,t},Object.defineProperty(e.prototype,"namespace",{get:function(){return this._namespace},enumerable:!0,configurable:!0}),e.prototype.select=function(t){if(typeof t!="string")throw new Error("DOM driver's select() expects the argument to be a string as a CSS selector");if(t==="document")return new Lu(this._name);if(t==="body")return new ju(this._name);var r=t===":root"?[]:this._namespace.concat({type:"selector",scope:t.trim()});return new e(this._rootElement$,this._sanitation$,r,this._isolateModule,this._eventDelegator,this._name)},e.prototype.events=function(t,r,n){if(r===void 0&&(r={}),typeof t!="string")throw new Error("DOM driver's events() expects argument to be a string representing the event type to listen for.");var o=this._eventDelegator.addEventListener(t,this._namespace,r,n),i=pt(o);return i._isCycleSource=this._name,i},e.prototype.dispose=function(){this._sanitation$.shamefullySendNext(null)},e}(),Me={};Object.defineProperty(Me,"__esModule",{value:!0});var zu=Tt,Lt={},ro=function(){function e(t,r){this.i=t,this.p=r,r.ils[t]=this}return e.prototype._n=function(t){var r=this.p;r.out!==Lt&&r.up(t,this.i)},e.prototype._e=function(t){this.p._e(t)},e.prototype._c=function(){this.p.down(this.i,this)},e}();Me.SampleCombineListener=ro;var no=function(){function e(t,r){this.type="sampleCombine",this.ins=t,this.others=r,this.out=Lt,this.ils=[],this.Nn=0,this.vals=[]}return e.prototype._start=function(t){this.out=t;for(var r=this.others,n=this.Nn=r.length,o=this.vals=new Array(n),i=0;i<n;i++)o[i]=Lt,r[i]._add(new ro(i,this));this.ins._add(this)},e.prototype._stop=function(){var t=this.others,r=t.length,n=this.ils;this.ins._remove(this);for(var o=0;o<r;o++)t[o]._remove(n[o]);this.out=Lt,this.vals=[],this.ils=[]},e.prototype._n=function(t){var r=this.out;r!==Lt&&(this.Nn>0||r._n([t].concat(this.vals)))},e.prototype._e=function(t){var r=this.out;r!==Lt&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==Lt&&t._c()},e.prototype.up=function(t,r){var n=this.vals[r];this.Nn>0&&n===Lt&&this.Nn--,this.vals[r]=t},e.prototype.down=function(t,r){this.others[t]._remove(r)},e}();Me.SampleCombineOperator=no;var oo;oo=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return function(o){return new zu.Stream(new no(o,t))}};var io=Me.default=oo;globalThis&&globalThis.__assign;function ao(e){if(!e.sel)return{tagName:"",id:"",className:""};var t=e.sel,r=t.indexOf("#"),n=t.indexOf(".",r),o=r>0?r:t.length,i=n>0?n:t.length,c=r!==-1||n!==-1?t.slice(0,Math.min(o,i)):t,l=o<i?t.slice(o+1,i):void 0,v=n>0?t.slice(i+1).replace(/\./g," "):void 0;return{tagName:c,id:l,className:v}}function Hu(e){var t=ao(e).className,r=t===void 0?"":t;if(!e.data)return r;var n=e.data,o=n.class,i=n.props;if(o){var c=Object.keys(o).filter(function(l){return o[l]});r+=" "+c.join(" ")}return i&&i.className&&(r+=" "+i.className),r&&r.trim()}var le;typeof self!="undefined"?le=self:typeof window!="undefined"?le=window:typeof global!="undefined"?le=global:le=Function("return this")();var rn=le.Symbol;typeof rn=="function"&&rn("parent");var Ku=function(){function e(t){this.rootElement=t}return e.prototype.call=function(t){if(Bu(this.rootElement))return this.wrapDocFrag(t===null?[]:[t]);if(t===null)return this.wrap([]);var r=ao(t),n=r.tagName,o=r.id,i=Hu(t),c=t.data||{},l=c.props||{},v=l.id,E=v===void 0?o:v,_=typeof E=="string"&&E.toUpperCase()===this.rootElement.id.toUpperCase()&&n.toUpperCase()===this.rootElement.tagName.toUpperCase()&&i.toUpperCase()===this.rootElement.className.toUpperCase();return _?t:this.wrap([t])},e.prototype.wrapDocFrag=function(t){return $t("",{isolate:[]},t,void 0,this.rootElement)},e.prototype.wrap=function(t){var r=this.rootElement,n=r.tagName,o=r.id,i=r.className,c=o?"#"+o:"",l=i?"."+i.split(" ").join("."):"",v=Et(""+n.toLowerCase()+c+l,{},t);return v.data=v.data||{},v.data.isolate=v.data.isolate||[],v},e}(),Ju=[Tu,Ou,Eu,Su,Au],so=function(){function e(t){this.mapper=t,this.tree=[void 0,{}]}return e.prototype.set=function(t,r,n){for(var o=this.tree,i=n!==void 0?n:t.length,c=0;c<i;c++){var l=this.mapper(t[c]),v=o[1][l];v||(v=[void 0,{}],o[1][l]=v),o=v}o[0]=r},e.prototype.getDefault=function(t,r,n){return this.get(t,r,n)},e.prototype.get=function(t,r,n){for(var o=this.tree,i=n!==void 0?n:t.length,c=0;c<i;c++){var l=this.mapper(t[c]),v=o[1][l];if(!v)if(r)v=[void 0,{}],o[1][l]=v;else return;o=v}return r&&!o[0]&&(o[0]=r()),o[0]},e.prototype.delete=function(t){for(var r=this.tree,n=0;n<t.length-1;n++){var o=r[1][this.mapper(t[n])];if(!o)return;r=o}delete r[1][this.mapper(t[t.length-1])]},e}(),Yu=function(){function e(){this.namespaceTree=new so(function(t){return t.scope}),this.namespaceByElement=new Map,this.vnodesBeingRemoved=[]}return e.prototype.setEventDelegator=function(t){this.eventDelegator=t},e.prototype.insertElement=function(t,r){this.namespaceByElement.set(r,t),this.namespaceTree.set(t,r)},e.prototype.removeElement=function(t){this.namespaceByElement.delete(t);var r=this.getNamespace(t);r&&this.namespaceTree.delete(r)},e.prototype.getElement=function(t,r){return this.namespaceTree.get(t,void 0,r)},e.prototype.getRootElement=function(t){if(this.namespaceByElement.has(t))return t;for(var r=t;!this.namespaceByElement.has(r);)if(r=r.parentNode,r){if(r.tagName==="HTML")throw new Error("No root element found, this should not happen at all")}else return;return r},e.prototype.getNamespace=function(t){var r=this.getRootElement(t);if(!!r)return this.namespaceByElement.get(r)},e.prototype.createModule=function(){var t=this;return{create:function(r,n){var o=n.elm,i=n.data,c=i===void 0?{}:i,l=c.isolate;Array.isArray(l)&&t.insertElement(l,o)},update:function(r,n){var o=r.elm,i=r.data,c=i===void 0?{}:i,l=n.elm,v=n.data,E=v===void 0?{}:v,_=c.isolate,S=E.isolate;Ar(_,S)||Array.isArray(_)&&t.removeElement(o),Array.isArray(S)&&t.insertElement(S,l)},destroy:function(r){t.vnodesBeingRemoved.push(r)},remove:function(r,n){t.vnodesBeingRemoved.push(r),n()},post:function(){for(var r=t.vnodesBeingRemoved,n=r.length-1;n>=0;n--){var o=r[n],i=o.data!==void 0?o.data.isolation:void 0;i!==void 0&&t.removeElement(i),t.eventDelegator.removeElement(o.elm,i)}t.vnodesBeingRemoved=[]}}},e}(),Vu=function(){function e(){this.arr=[],this.prios=[]}return e.prototype.add=function(t,r){for(var n=0;n<this.arr.length;n++)if(this.prios[n]<r){this.arr.splice(n,0,t),this.prios.splice(n,0,r);return}this.arr.push(t),this.prios.push(r)},e.prototype.forEach=function(t){for(var r=0;r<this.arr.length;r++)t(this.arr[r],r,this.arr)},e.prototype.delete=function(t){for(var r=0;r<this.arr.length;r++)if(this.arr[r]===t){this.arr.splice(r,1),this.prios.splice(r,1);return}},e}(),Ie=globalThis&&globalThis.__assign||function(){return Ie=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Ie.apply(this,arguments)},Xu=["blur","canplay","canplaythrough","durationchange","emptied","ended","focus","load","loadeddata","loadedmetadata","mouseenter","mouseleave","pause","play","playing","ratechange","reset","scroll","seeked","seeking","stalled","submit","suspend","timeupdate","unload","volumechange","waiting"],Zu=function(){function e(t,r){var n=this;this.rootElement$=t,this.isolateModule=r,this.virtualListeners=new so(function(o){return o.scope}),this.nonBubblingListenersToAdd=new Set,this.virtualNonBubblingListener=[],this.isolateModule.setEventDelegator(this),this.domListeners=new Map,this.domListenersToAdd=new Map,this.nonBubblingListeners=new Map,t.addListener({next:function(o){n.origin!==o&&(n.origin=o,n.resetEventListeners(),n.domListenersToAdd.forEach(function(i,c){return n.setupDOMListener(c,i)}),n.domListenersToAdd.clear()),n.nonBubblingListenersToAdd.forEach(function(i){n.setupNonBubblingListener(i)})}})}return e.prototype.addEventListener=function(t,r,n,o){var i=et.never(),c,l=new Zn(r,this.isolateModule),v=o===void 0?Xu.indexOf(t)===-1:o;if(v)return this.domListeners.has(t)||this.setupDOMListener(t,!!n.passive),c=this.insertListener(i,l,t,n),i;var E=[];this.nonBubblingListenersToAdd.forEach(function(A){return E.push(A)});for(var _=void 0,S=0,I=E.length,u=function(A){A[0];var h=A[1],g=A[2];return A[3],t===h&&Ar(g.namespace,r)};!_&&S<I;){var f=E[S];_=u(f)?f:_,S++}var a=_,p;if(a){var b=a[0];p=b}else{var d=new Qn(r,this.isolateModule);c=this.insertListener(i,l,t,n),a=[i,t,d,c],p=i,this.nonBubblingListenersToAdd.add(a),this.setupNonBubblingListener(a)}var O=this,x=null;return et.create({start:function(A){x=p.subscribe(A)},stop:function(){a[0];var A=a[1],h=a[2];a[3];var g=h.call();g.forEach(function(w){var C=w.subs;C&&C[A]&&(C[A].unsubscribe(),delete C[A])}),O.nonBubblingListenersToAdd.delete(a),x.unsubscribe()}})},e.prototype.removeElement=function(t,r){r!==void 0&&this.virtualListeners.delete(r);var n=[];this.nonBubblingListeners.forEach(function(c,l){if(c.has(t)){n.push([l,t]);var v=t.subs;v&&Object.keys(v).forEach(function(E){v[E].unsubscribe()})}});for(var o=0;o<n.length;o++){var i=this.nonBubblingListeners.get(n[o][0]);!i||(i.delete(n[o][1]),i.size===0?this.nonBubblingListeners.delete(n[o][0]):this.nonBubblingListeners.set(n[o][0],i))}},e.prototype.insertListener=function(t,r,n,o){var i=[],c=r._namespace,l=c.length;do i.push(this.getVirtualListeners(n,c,!0,l)),l--;while(l>=0&&c[l].type!=="total");for(var v=Ie({},o,{scopeChecker:r,subject:t,bubbles:!!o.bubbles,useCapture:!!o.useCapture,passive:!!o.passive}),E=0;E<i.length;E++)i[E].add(v,c.length);return v},e.prototype.getVirtualListeners=function(t,r,n,o){n===void 0&&(n=!1);var i=o!==void 0?o:r.length;if(!n)for(var c=i-1;c>=0;c--){if(r[c].type==="total"){i=c+1;break}i=c}var l=this.virtualListeners.getDefault(r,function(){return new Map},i);return l.has(t)||l.set(t,new Vu),l.get(t)},e.prototype.setupDOMListener=function(t,r){var n=this;if(this.origin){var o=Te(this.origin,t,!1,!1,r).subscribe({next:function(i){return n.onEvent(t,i,r)},error:function(){},complete:function(){}});this.domListeners.set(t,{sub:o,passive:r})}else this.domListenersToAdd.set(t,r)},e.prototype.setupNonBubblingListener=function(t){t[0];var r=t[1],n=t[2],o=t[3];if(!!this.origin){var i=n.call();if(i.length){var c=this;i.forEach(function(l){var v,E=l.subs;if(!E||!E[r]){var _=Te(l,r,!1,!1,o.passive).subscribe({next:function(I){return c.onEvent(r,I,!!o.passive,!1)},error:function(){},complete:function(){}});c.nonBubblingListeners.has(r)||c.nonBubblingListeners.set(r,new Map);var S=c.nonBubblingListeners.get(r);if(!S)return;S.set(l,{sub:_,destination:o}),l.subs=Ie({},E,(v={},v[r]=_,v))}})}}},e.prototype.resetEventListeners=function(){for(var t=this.domListeners.entries(),r=t.next();!r.done;){var n=r.value,o=n[0],i=n[1],c=i.sub,l=i.passive;c.unsubscribe(),this.setupDOMListener(o,l),r=t.next()}},e.prototype.putNonBubblingListener=function(t,r,n,o){var i=this.nonBubblingListeners.get(t);if(!!i){var c=i.get(r);c&&c.destination.passive===o&&c.destination.useCapture===n&&(this.virtualNonBubblingListener[0]=c.destination)}},e.prototype.onEvent=function(t,r,n,o){o===void 0&&(o=!0);var i=this.patchEvent(r),c=this.isolateModule.getRootElement(r.target);if(o){var l=this.isolateModule.getNamespace(r.target);if(!l)return;var v=this.getVirtualListeners(t,l);this.bubble(t,r.target,c,i,v,l,l.length-1,!0,n),this.bubble(t,r.target,c,i,v,l,l.length-1,!1,n)}else this.putNonBubblingListener(t,r.target,!0,n),this.doBubbleStep(t,r.target,c,i,this.virtualNonBubblingListener,!0,n),this.putNonBubblingListener(t,r.target,!1,n),this.doBubbleStep(t,r.target,c,i,this.virtualNonBubblingListener,!1,n),r.stopPropagation()},e.prototype.bubble=function(t,r,n,o,i,c,l,v,E){!v&&!o.propagationHasBeenStopped&&this.doBubbleStep(t,r,n,o,i,v,E);var _=n,S=l;if(r===n)if(l>=0&&c[l].type==="sibling")_=this.isolateModule.getElement(c,l),S--;else return;r.parentNode&&_&&this.bubble(t,r.parentNode,_,o,i,c,S,v,E),v&&!o.propagationHasBeenStopped&&this.doBubbleStep(t,r,n,o,i,v,E)},e.prototype.doBubbleStep=function(t,r,n,o,i,c,l){!n||(this.mutateEventCurrentTarget(o,r),i.forEach(function(v){if(v.passive===l&&v.useCapture===c){var E=Xn(v.scopeChecker.namespace);!o.propagationHasBeenStopped&&v.scopeChecker.isDirectlyInScope(r)&&(E!==""&&r.matches(E)||E===""&&r===n)&&(Vn(o,v.preventDefault),v.subject.shamefullySendNext(o))}}))},e.prototype.patchEvent=function(t){var r=t;r.propagationHasBeenStopped=!1;var n=r.stopPropagation;return r.stopPropagation=function(){n.call(this),this.propagationHasBeenStopped=!0},r},e.prototype.mutateEventCurrentTarget=function(t,r){try{Object.defineProperty(t,"currentTarget",{value:r,configurable:!0})}catch{console.log("please use event.ownerTarget")}t.ownerTarget=r},e}();function Qu(e){if(!Array.isArray(e))throw new Error("Optional modules option must be an array for snabbdom modules")}function tf(e){if(!e||typeof e.addListener!="function"||typeof e.fold!="function")throw new Error("The DOM driver function expects as input a Stream of virtual DOM elements")}function ef(e){return et.merge(e,et.never())}function rf(e){return e.elm}function nf(e){(console.error||console.log)(e)}function of(){return et.create({start:function(e){document.readyState==="loading"?document.addEventListener("readystatechange",function(){var t=document.readyState;(t==="interactive"||t==="complete")&&(e.next(null),e.complete())}):(e.next(null),e.complete())},stop:function(){}})}function af(e){return e.data=e.data||{},e.data.isolate=[],e}function sf(e,t){t===void 0&&(t={}),Wu(e);var r=t.modules||Ju;Qu(r);var n=new Yu,o=t&&t.snabbdomOptions||void 0,i=_u([n.createModule()].concat(r),void 0,o),c=of(),l,v,E=et.create({start:function(S){v=new MutationObserver(function(){return S.next(null)})},stop:function(){v.disconnect()}});function _(S,I){I===void 0&&(I="DOM"),tf(S);var u=et.create(),f=c.map(function(){var O=qu(e)||document.body;return l=new Ku(O),O}),a=S.remember();a.addListener({}),E.addListener({});var p=f.map(function(O){return et.merge(a.endWhen(u),u).map(function(x){return l.call(x)}).startWith(af(ar(O))).fold(i,ar(O)).drop(1).map(rf).startWith(O).map(function(x){return v.observe(x,{childList:!0,attributes:!0,characterData:!0,subtree:!0,attributeOldValue:!0,characterDataOldValue:!0}),x}).compose(ef)}).flatten(),d=jn(c,E).endWhen(u).compose(io(p)).map(function(O){return O[1]}).remember();d.addListener({error:t.reportSnabbdomError||nf});var b=new Zu(d,n);return new eo(d,u,[],n,b,I)}return _}var Qe="___",uo=function(){function e(t){this._mockConfig=t,t.elements?this._elements=t.elements:this._elements=pt(et.empty())}return e.prototype.elements=function(){var t=this._elements;return t._isCycleSource="MockedDOM",t},e.prototype.element=function(){var t=this.elements().filter(function(n){return n.length>0}).map(function(n){return n[0]}).remember(),r=pt(t);return r._isCycleSource="MockedDOM",r},e.prototype.events=function(t,r,n){var o=this._mockConfig[t],i=pt(o||et.empty());return i._isCycleSource="MockedDOM",i},e.prototype.select=function(t){var r=this._mockConfig[t]||{};return new e(r)},e.prototype.isolateSource=function(t,r){return t.select("."+Qe+r)},e.prototype.isolateSink=function(t,r){return pt(et.fromObservable(t).map(function(n){return n.sel&&n.sel.indexOf(Qe+r)!==-1||(n.sel+="."+Qe+r),n}))},e}();function uf(e){return new uo(e)}function ff(e){return typeof e=="string"&&e.length>0}function fo(e){return ff(e)&&(e[0]==="."||e[0]==="#")}function Le(e){return function(r,n,o){var i=typeof r!="undefined",c=typeof n!="undefined",l=typeof o!="undefined";return fo(r)?c&&l?Et(e+r,n,o):c?Et(e+r,n):Et(e+r,{}):l?Et(e+r,n,o):c?Et(e,r,n):i?Et(e,r):Et(e,{})}}var co=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","colorProfile","cursor","defs","desc","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotlight","feTile","feTurbulence","filter","font","fontFace","fontFaceFormat","fontFaceName","fontFaceSrc","fontFaceUri","foreignObject","g","glyph","glyphRef","hkern","image","line","linearGradient","marker","mask","metadata","missingGlyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],lo=Le("svg");co.forEach(function(e){lo[e]=Le(e)});var po=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","dd","del","details","dfn","dir","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","meta","nav","noscript","object","ol","optgroup","option","p","param","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","u","ul","video"],P={SVG_TAG_NAMES:co,TAG_NAMES:po,svg:lo,isSelector:fo,createTagFunction:Le};po.forEach(function(e){P[e]=Le(e)});var cf=P.svg,lf=P.a,pf=P.abbr,hf=P.address,df=P.area,vf=P.article,yf=P.aside,mf=P.audio,_f=P.b,gf=P.base,bf=P.bdi,wf=P.bdo,Sf=P.blockquote,Of=P.body,Af=P.br,Ef=P.button,xf=P.canvas,$f=P.caption,Pf=P.cite,Df=P.code,Nf=P.col,Tf=P.colgroup,If=P.dd,kf=P.del,Cf=P.dfn,Mf=P.dir,Lf=P.div,jf=P.dl,Rf=P.dt,Ff=P.em,Bf=P.embed,Wf=P.fieldset,qf=P.figcaption,Uf=P.figure,Gf=P.footer,zf=P.form,Hf=P.h1,Kf=P.h2,Jf=P.h3,Yf=P.h4,Vf=P.h5,Xf=P.h6,Zf=P.head,Qf=P.header,tc=P.hgroup,ec=P.hr,rc=P.html,nc=P.i,oc=P.iframe,ic=P.img,ac=P.input,sc=P.ins,uc=P.kbd,fc=P.keygen,cc=P.label,lc=P.legend,pc=P.li,hc=P.link,dc=P.main,vc=P.map,yc=P.mark,mc=P.menu,_c=P.meta,gc=P.nav,bc=P.noscript,wc=P.object,Sc=P.ol,Oc=P.optgroup,Ac=P.option,Ec=P.p,xc=P.param,$c=P.pre,Pc=P.progress,Dc=P.q,Nc=P.rp,Tc=P.rt,Ic=P.ruby,kc=P.s,Cc=P.samp,Mc=P.script,Lc=P.section,jc=P.select,Rc=P.small,Fc=P.source,Bc=P.span,Wc=P.strong,qc=P.style,Uc=P.sub,Gc=P.sup,zc=P.table,Hc=P.tbody,Kc=P.td,Jc=P.textarea,Yc=P.tfoot,Vc=P.th,Xc=P.thead,Zc=P.title,Qc=P.tr,tl=P.u,el=P.ul,rl=P.video,nl=Object.freeze(Object.defineProperty({__proto__:null,svg:cf,a:lf,abbr:pf,address:hf,area:df,article:vf,aside:yf,audio:mf,b:_f,base:gf,bdi:bf,bdo:wf,blockquote:Sf,body:Of,br:Af,button:Ef,canvas:xf,caption:$f,cite:Pf,code:Df,col:Nf,colgroup:Tf,dd:If,del:kf,dfn:Cf,dir:Mf,div:Lf,dl:jf,dt:Rf,em:Ff,embed:Bf,fieldset:Wf,figcaption:qf,figure:Uf,footer:Gf,form:zf,h1:Hf,h2:Kf,h3:Jf,h4:Yf,h5:Vf,h6:Xf,head:Zf,header:Qf,hgroup:tc,hr:ec,html:rc,i:nc,iframe:oc,img:ic,input:ac,ins:sc,kbd:uc,keygen:fc,label:cc,legend:lc,li:pc,link:hc,main:dc,map:vc,mark:yc,menu:mc,meta:_c,nav:gc,noscript:bc,object:wc,ol:Sc,optgroup:Oc,option:Ac,p:Ec,param:xc,pre:$c,progress:Pc,q:Dc,rp:Nc,rt:Tc,ruby:Ic,s:kc,samp:Cc,script:Mc,section:Lc,select:jc,small:Rc,source:Fc,span:Bc,strong:Wc,style:qc,sub:Uc,sup:Gc,table:zc,tbody:Hc,td:Kc,textarea:Jc,tfoot:Yc,th:Vc,thead:Xc,title:Zc,tr:Qc,u:tl,ul:el,video:rl,thunk:Cu,MainDOMSource:eo,makeDOMDriver:sf,mockDOMSource:uf,MockedDOMSource:uo,h:Et},Symbol.toStringTag,{value:"Module"})),ol=ye(nl),ho={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=o;var t=n(ht),r=Ce;function n(i){return i&&i.__esModule?i:{default:i}}function o(i){var c=new EventTarget;return i.subscribe({next:function(v){return c.dispatchEvent(new CustomEvent("data",{detail:v}))}}),{select:function(v){var E=!v,_=Array.isArray(v)?v:[v],S,I=t.default.create({start:function(f){S=function(p){var d=p.detail,b=d&&d.data||null;(E||_.includes(d.type))&&f.next(b)},c.addEventListener("data",S)},stop:function(f){return c.removeEventListener("data",S)}});return(0,r.adapt)(I)}}}})(ho);var vo={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t;function t(r){r.addListener({next:function(o){console.log(o)}})}})(vo);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=_;var t=Ys,r=mr,n=ol,o=c(ho),i=c(vo);function c(S){return S&&S.__esModule?S:{default:S}}function l(S,I){var u=Object.keys(S);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(S);I&&(f=f.filter(function(a){return Object.getOwnPropertyDescriptor(S,a).enumerable})),u.push.apply(u,f)}return u}function v(S){for(var I=1;I<arguments.length;I++){var u=arguments[I]!=null?arguments[I]:{};I%2?l(Object(u),!0).forEach(function(f){E(S,f,u[f])}):Object.getOwnPropertyDescriptors?Object.defineProperties(S,Object.getOwnPropertyDescriptors(u)):l(Object(u)).forEach(function(f){Object.defineProperty(S,f,Object.getOwnPropertyDescriptor(u,f))})}return S}function E(S,I,u){return I in S?Object.defineProperty(S,I,{value:u,enumerable:!0,configurable:!0,writable:!0}):S[I]=u,S}function _(S){var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},u=(0,r.withState)(S,"STATE"),f={EVENTS:o.default,DOM:(0,n.makeDOMDriver)("#root"),LOG:i.default},a=v(v({},f),I);return(0,t.run)(u,a)}})(Gn);(function(e){function t(_){return t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(S){return typeof S}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S},t(_)}Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"ABORT",{enumerable:!0,get:function(){return r.ABORT}}),Object.defineProperty(e,"collection",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(e,"component",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(e,"processForm",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(e,"run",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(e,"switchable",{enumerable:!0,get:function(){return o.default}});var r=E(ln),n=l(pr),o=l(qn),i=l(Un),c=l(Gn);function l(_){return _&&_.__esModule?_:{default:_}}function v(_){if(typeof WeakMap!="function")return null;var S=new WeakMap,I=new WeakMap;return(v=function(f){return f?I:S})(_)}function E(_,S){if(!S&&_&&_.__esModule)return _;if(_===null||t(_)!=="object"&&typeof _!="function")return{default:_};var I=v(S);if(I&&I.has(_))return I.get(_);var u={},f=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in _)if(a!=="default"&&Object.prototype.hasOwnProperty.call(_,a)){var p=f?Object.getOwnPropertyDescriptor(_,a):null;p&&(p.get||p.set)?Object.defineProperty(u,a,p):u[a]=_[a]}return u.default=_,I&&I.set(_,u),u}})(oe);function il(e){e.subscribe({next:t=>{const{selector:r,value:n}=t.data;if(t.type==="SET_VALUE")for(let o of document.querySelectorAll(r))o.value=n||"",o.dispatchEvent(new Event("change"));t.type==="FOCUS"&&document.querySelector(r).focus()}})}function al(e){return e.addListener({next:({key:t,value:r})=>{try{localStorage.setItem(t,JSON.stringify(r))}catch(n){console.log(n)}}}),{get:(t,r,n=!1)=>{const o=window.localStorage.getItem(t);let i;try{i=o&&o!="null"?JSON.parse(o):r}catch{console.log("Error reading from local storage"),i=r}return n?e.filter(({key:c,value:l})=>t==c).map(({value:c})=>c).compose(Nn()).startWith(i):et.of(i)}}}var yo={};(function(e){(function(t){var r=document.location;function n(){return r.hash===""||r.hash==="#"}var o={mode:"modern",hash:r.hash,history:!1,check:function(){var u=r.hash;u!=this.hash&&(this.hash=u,this.onHashChanged())},fire:function(){this.mode==="modern"?this.history===!0?window.onpopstate():window.onhashchange():this.onHashChanged()},init:function(u,f){var a=this;this.history=f,i.listeners||(i.listeners=[]);function p(b){for(var O=0,x=i.listeners.length;O<x;O++)i.listeners[O](b)}if("onhashchange"in window&&(document.documentMode===void 0||document.documentMode>7))this.history===!0?setTimeout(function(){window.onpopstate=p},500):window.onhashchange=p,this.mode="modern";else{var d=document.createElement("iframe");d.id="state-frame",d.style.display="none",document.body.appendChild(d),this.writeFrame(""),"onpropertychange"in document&&"attachEvent"in document&&document.attachEvent("onpropertychange",function(){event.propertyName==="location"&&a.check()}),window.setInterval(function(){a.check()},50),this.onHashChanged=p,this.mode="legacy"}return i.listeners.push(u),this.mode},destroy:function(u){if(!(!i||!i.listeners))for(var f=i.listeners,a=f.length-1;a>=0;a--)f[a]===u&&f.splice(a,1)},setHash:function(u){return this.mode==="legacy"&&this.writeFrame(u),this.history===!0?(window.history.pushState({},document.title,u),this.fire()):r.hash=u[0]==="/"?u:"/"+u,this},writeFrame:function(u){var f=document.getElementById("state-frame"),a=f.contentDocument||f.contentWindow.document;a.open(),a.write("<script>_hash = '"+u+"'; onload = parent.listener.syncHash;<script>"),a.close()},syncHash:function(){var u=this._hash;return u!=r.hash&&(r.hash=u),this},onHashChanged:function(){}},i=t.Router=function(u){if(!(this instanceof i))return new i(u);this.params={},this.routes={},this.methods=["on","once","after","before"],this.scope=[],this._methods={},this._insert=this.insert,this.insert=this.insertEx,this.historySupport=(window.history!=null?window.history.pushState:null)!=null,this.configure(),this.mount(u||{})};i.prototype.init=function(u){var f=this,a;return this.handler=function(p){var d=p&&p.newURL||window.location.hash,b=f.history===!0?f.getPath():d.replace(/.*#/,"");f.dispatch("on",b.charAt(0)==="/"?b:"/"+b)},o.init(this.handler,this.history),this.history===!1?n()&&u?r.hash=u:n()||f.dispatch("on","/"+r.hash.replace(/^(#\/|#|\/)/,"")):(this.convert_hash_in_init?(a=n()&&u?u:n()?null:r.hash.replace(/^#/,""),a&&window.history.replaceState({},document.title,a)):a=this.getPath(),(a||this.run_in_init===!0)&&this.handler()),this},i.prototype.explode=function(){var u=this.history===!0?this.getPath():r.hash;return u.charAt(1)==="/"&&(u=u.slice(1)),u.slice(1,u.length).split("/")},i.prototype.setRoute=function(u,f,a){var p=this.explode();return typeof u=="number"&&typeof f=="string"?p[u]=f:typeof a=="string"?p.splice(u,f,s):p=[u],o.setHash(p.join("/")),p},i.prototype.insertEx=function(u,f,a,p){return u==="once"&&(u="on",a=function(d){var b=!1;return function(){if(!b)return b=!0,d.apply(this,arguments)}}(a)),this._insert(u,f,a,p)},i.prototype.getRoute=function(u){var f=u;if(typeof u=="number")f=this.explode()[u];else if(typeof u=="string"){var a=this.explode();f=a.indexOf(u)}else f=this.explode();return f},i.prototype.destroy=function(){return o.destroy(this.handler),this},i.prototype.getPath=function(){var u=window.location.pathname;return u.substr(0,1)!=="/"&&(u="/"+u),u};function c(u,f){for(var a=0;a<u.length;a+=1)if(f(u[a],a,u)===!1)return}function l(u){for(var f=[],a=0,p=u.length;a<p;a++)f=f.concat(u[a]);return f}function v(u,f,a){if(!u.length)return a();var p=0;(function d(){f(u[p],function(b){b||b===!1?(a(b),a=function(){}):(p+=1,p===u.length?a():d())})})()}function E(u,f,a){a=u;for(var p in f)if(f.hasOwnProperty(p)&&(a=f[p](u),a!==u))break;return a===u?"([._a-zA-Z0-9-%()]+)":a}function _(u,f){for(var a,p=0,d="";a=u.substr(p).match(/[^\w\d\- %@&]*\*[^\w\d\- %@&]*/);)p=a.index+a[0].length,a[0]=a[0].replace(/^\*/,"([_.()!\\ %@&a-zA-Z0-9-]+)"),d+=u.substr(0,a.index)+a[0];u=d+=u.substr(p);var b=u.match(/:([^\/]+)/ig),O,x;if(b){x=b.length;for(var A=0;A<x;A++)O=b[A],O.slice(0,2)==="::"?u=O.slice(1):u=u.replace(O,E(O,f))}return u}function S(u,f,x,A){var d=0,b=0,O=0,x=(x||"(").toString(),A=(A||")").toString(),h;for(h=0;h<u.length;h++){var g=u[h];if(g.indexOf(x,d)>g.indexOf(A,d)||~g.indexOf(x,d)&&!~g.indexOf(A,d)||!~g.indexOf(x,d)&&~g.indexOf(A,d)){if(b=g.indexOf(x,d),O=g.indexOf(A,d),~b&&!~O||!~b&&~O){var w=u.slice(0,(h||1)+1).join(f);u=[w].concat(u.slice((h||1)+1))}d=(O>b?O:b)+1,h=0}else d=0}return u}var I=/\?.*/;i.prototype.configure=function(u){u=u||{};for(var f=0;f<this.methods.length;f++)this._methods[this.methods[f]]=!0;return this.recurse=u.recurse||this.recurse||!1,this.async=u.async||!1,this.delimiter=u.delimiter||"/",this.strict=typeof u.strict=="undefined"?!0:u.strict,this.notfound=u.notfound,this.resource=u.resource,this.history=u.html5history&&this.historySupport||!1,this.run_in_init=this.history===!0&&u.run_handler_in_init!==!1,this.convert_hash_in_init=this.history===!0&&u.convert_hash_in_init!==!1,this.every={after:u.after||null,before:u.before||null,on:u.on||null},this},i.prototype.param=function(u,f){u[0]!==":"&&(u=":"+u);var a=new RegExp(u,"g");return this.params[u]=function(p){return p.replace(a,f.source||f)},this},i.prototype.on=i.prototype.route=function(u,f,a){var p=this;if(!a&&typeof f=="function"&&(a=f,f=u,u="on"),Array.isArray(f))return f.forEach(function(d){p.on(u,d,a)});if(f.source&&(f=f.source.replace(/\\\//ig,"/")),Array.isArray(u))return u.forEach(function(d){p.on(d.toLowerCase(),f,a)});f=f.split(new RegExp(this.delimiter)),f=S(f,this.delimiter),this.insert(u,this.scope.concat(f),a)},i.prototype.path=function(u,f){var a=this.scope.length;u.source&&(u=u.source.replace(/\\\//ig,"/")),u=u.split(new RegExp(this.delimiter)),u=S(u,this.delimiter),this.scope=this.scope.concat(u),f.call(this,this),this.scope.splice(a,u.length)},i.prototype.dispatch=function(u,f,a){var p=this,d=this.traverse(u,f.replace(I,""),this.routes,""),b=this._invoked,O;if(this._invoked=!0,!d||d.length===0)return this.last=[],typeof this.notfound=="function"&&this.invoke([this.notfound],{method:u,path:f},a),!1;this.recurse==="forward"&&(d=d.reverse());function x(){p.last=d.after,p.invoke(p.runlist(d),p,a)}return O=this.every&&this.every.after?[this.every.after].concat(this.last):[this.last],O&&O.length>0&&b?(this.async?this.invoke(O,this,x):(this.invoke(O,this),x()),!0):(x(),!0)},i.prototype.invoke=function(u,f,a){var p=this,d;this.async?(d=function(b,O){if(Array.isArray(b))return v(b,d,O);typeof b=="function"&&b.apply(f,(u.captures||[]).concat(O))},v(u,d,function(){a&&a.apply(f,arguments)})):(d=function(b){if(Array.isArray(b))return c(b,d);if(typeof b=="function")return b.apply(f,u.captures||[]);typeof b=="string"&&p.resource&&p.resource[b].apply(f,u.captures||[])},c(u,d))},i.prototype.traverse=function(u,f,a,p,d){var b=[],O,x,A,h;function g(C){if(!d)return C;function M(H){for(var U=[],it=0;it<H.length;it++)U[it]=Array.isArray(H[it])?M(H[it]):H[it];return U}function q(H){for(var U=H.length-1;U>=0;U--)Array.isArray(H[U])?(q(H[U]),H[U].length===0&&H.splice(U,1)):d(H[U])||H.splice(U,1)}var B=M(C);return B.matched=C.matched,B.captures=C.captures,B.after=C.after.filter(d),q(B),B}if(f===this.delimiter&&a[u])return h=[[a.before,a[u]].filter(Boolean)],h.after=[a.after].filter(Boolean),h.matched=!0,h.captures=[],g(h);for(var w in a)if(a.hasOwnProperty(w)&&(!this._methods[w]||this._methods[w]&&typeof a[w]=="object"&&!Array.isArray(a[w]))){if(O=x=p+this.delimiter+w,this.strict||(x+="["+this.delimiter+"]?"),A=f.match(new RegExp("^"+x)),!A)continue;if(A[0]&&A[0]==f&&a[w][u])return h=[[a[w].before,a[w][u]].filter(Boolean)],h.after=[a[w].after].filter(Boolean),h.matched=!0,h.captures=A.slice(1),this.recurse&&a===this.routes&&(h.push([a.before,a.on].filter(Boolean)),h.after=h.after.concat([a.after].filter(Boolean))),g(h);if(h=this.traverse(u,f,a[w],O),h.matched)return h.length>0&&(b=b.concat(h)),this.recurse&&(b.push([a[w].before,a[w].on].filter(Boolean)),h.after=h.after.concat([a[w].after].filter(Boolean)),a===this.routes&&(b.push([a.before,a.on].filter(Boolean)),h.after=h.after.concat([a.after].filter(Boolean)))),b.matched=!0,b.captures=h.captures,b.after=h.after,g(b)}return!1},i.prototype.insert=function(u,f,a,p){var d,b,O,x,A;if(f=f.filter(function(h){return h&&h.length>0}),p=p||this.routes,A=f.shift(),/\:|\*/.test(A)&&!/\\d|\\w/.test(A)&&(A=_(A,this.params)),f.length>0)return p[A]=p[A]||{},this.insert(u,f,a,p[A]);if(!A&&!f.length&&p===this.routes){switch(d=typeof p[u],d){case"function":p[u]=[p[u],a];return;case"object":p[u].push(a);return;case"undefined":p[u]=a;return}return}if(b=typeof p[A],O=Array.isArray(p[A]),p[A]&&!O&&b=="object")switch(d=typeof p[A][u],d){case"function":p[A][u]=[p[A][u],a];return;case"object":p[A][u].push(a);return;case"undefined":p[A][u]=a;return}else if(b=="undefined"){x={},x[u]=a,p[A]=x;return}throw new Error("Invalid route context: "+b)},i.prototype.extend=function(u){var f=this,a=u.length,p;function d(b){f._methods[b]=!0,f[b]=function(){var O=arguments.length===1?[b,""]:[b];f.on.apply(f,O.concat(Array.prototype.slice.call(arguments)))}}for(p=0;p<a;p++)d(u[p])},i.prototype.runlist=function(u){var f=this.every&&this.every.before?[this.every.before].concat(l(u)):l(u);return this.every&&this.every.on&&f.push(this.every.on),f.captures=u.captures,f.source=u.source,f},i.prototype.mount=function(u,f){if(!u||typeof u!="object"||Array.isArray(u))return;var a=this;f=f||[],Array.isArray(f)||(f=f.split(a.delimiter));function p(b,O){var x=b,A=b.split(a.delimiter),h=typeof u[b],g=A[0]===""||!a._methods[A[0]],w=g?"on":x;if(g&&(x=x.slice((x.match(new RegExp("^"+a.delimiter))||[""])[0].length),A.shift()),g&&h==="object"&&!Array.isArray(u[b])){O=O.concat(A),a.mount(u[b],O);return}g&&(O=O.concat(x.split(a.delimiter)),O=S(O,a.delimiter)),a.insert(w,O,u[b])}for(var d in u)u.hasOwnProperty(d)&&p(d,f.slice(0))}})(e)})(yo);function sl(e){const t=new yo.Router;t.configure({notfound:n=>{window.location.hash=""}}),t.init();const r=et.create({start:n=>{e.subscribe({next:o=>{o=Array.isArray(o)?o:[o];for(let i of o)t.on(i,c=>{n.next(i)})}})},stop:n=>{}});return pt(r)}var $e=Object.prototype.hasOwnProperty,mo=Object.prototype.toString,nn=Object.defineProperty,on=Object.getOwnPropertyDescriptor,an=function(t){return typeof Array.isArray=="function"?Array.isArray(t):mo.call(t)==="[object Array]"},sn=function(t){if(!t||mo.call(t)!=="[object Object]")return!1;var r=$e.call(t,"constructor"),n=t.constructor&&t.constructor.prototype&&$e.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!r&&!n)return!1;var o;for(o in t);return typeof o=="undefined"||$e.call(t,o)},un=function(t,r){nn&&r.name==="__proto__"?nn(t,r.name,{enumerable:!0,configurable:!0,value:r.newValue,writable:!0}):t[r.name]=r.newValue},fn=function(t,r){if(r==="__proto__")if($e.call(t,r)){if(on)return on(t,r).value}else return;return t[r]},_o=function e(){var t,r,n,o,i,c,l=arguments[0],v=1,E=arguments.length,_=!1;for(typeof l=="boolean"&&(_=l,l=arguments[1]||{},v=2),(l==null||typeof l!="object"&&typeof l!="function")&&(l={});v<E;++v)if(t=arguments[v],t!=null)for(r in t)n=fn(l,r),o=fn(t,r),l!==o&&(_&&o&&(sn(o)||(i=an(o)))?(i?(i=!1,c=n&&an(n)?n:[]):c=n&&sn(n)?n:{},un(l,{name:r,newValue:e(_,c,o)})):typeof o!="undefined"&&un(l,{name:r,newValue:o}));return l},ul=function(e){return e===void 0},fl=function(e){return typeof e=="number"},cl=function(e){return typeof e=="string"},go=function(e){return cl(e)||fl(e)},ll=function(e){return Array.isArray(e)},pl=function(e){return typeof e=="object"&&e!==null},hl=function(e){return typeof e=="function"},dl=function(e){return pl(e)&&"sel"in e&&"data"in e&&"children"in e&&"text"in e},vl={svg:1,circle:1,ellipse:1,line:1,polygon:1,polyline:1,rect:1,g:1,path:1,text:1},yl=function(e){return e.sel in vl},ur=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return _o.apply(void 0,[!0].concat(e))},ml=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return _o.apply(void 0,[!1].concat(e))},bo=function(e,t,r){for(var n=r,o=0;o<e.length;o++){var i=e[o];ll(i)?n=bo(i,t,n):n=t(n,i)}return n},Er=function(e,t){return Object.keys(e).map(function(r){return t(r,e[r])}).reduce(function(r,n){return ur(r,n)},{})},_l=function(e,t){return Er(e,function(r,n){var o=r.indexOf("-");if(o>-1&&t[r.slice(0,o)]!==void 0){var i={};return i[r.slice(o+1)]=n,c={},c[r.slice(0,o)]=i,c;var c}return l={},l[r]=n,l;var l})},cn=function(e,t){return Er(t,function(r,n){return r!==e?(o={},o[r]=n,o):{};var o})},gl=function(e){return go(e)?{text:e,sel:void 0,data:void 0,children:void 0,elm:void 0,key:void 0}:void 0},xr=function(e){return yl(e)?ml(e,{data:cn("props",ur(e.data,{ns:"http://www.w3.org/2000/svg",attrs:cn("className",ur(e.data.props,{class:e.data.props?e.data.props.className:void 0}))}))},{children:ul(e.children)?void 0:e.children.map(function(t){return xr(t)})}):e},zt={for:"attrs",role:"attrs",tabindex:"attrs","aria-*":"attrs",key:null},bl=function(e,t){return Er(e,function(r,n){var o={};if(o[r]=n,zt[r]&&t[zt[r]]!==void 0){return i={},i[zt[r]]=o,i;var i}if(zt[r]===null)return{};for(var c=Object.keys(zt),l=0;l<c.length;l++){var v=c[l];if(v.charAt(v.length-1)==="*"&&r.indexOf(v.slice(0,-1))===0&&t[zt[v]]!==void 0){return E={},E[zt[v]]=o,E;var E}}if(t[r]!==void 0){return _={},_[t[r]?t[r]:r]=n,_;var _}return t.props!==void 0?{props:o}:o})},wl=function(e,t){return xr(bl(_l(e,t),t))},Sl=function(e){return e.length>1||!go(e[0])?void 0:e[0]},Ol=function(e){return bo(e,function(t,r){var n=dl(r)?r:gl(r);return t.push(n),t},[])},Al={attrs:"",props:"",class:"",data:"dataset",style:"",hook:"",on:""},wo=function(e){return function(t,r){for(var n=[],o=arguments.length-2;o-- >0;)n[o]=arguments[o+2];if(hl(t))return t(r||{},n);var i=Sl(n);return xr({sel:t,data:r?wl(r,e):{},children:i?void 0:Ol(n),text:i,elm:void 0,key:r?r.key:void 0})}},El=wo(Al),at={createElement:El,createElementWithModules:wo};function So(...e){return[...e.reduce((r,n)=>{const o=r.add.bind(r);return typeof n=="string"?Ao(n).map(o):Array.isArray(n)?xl(n).map(o):typeof n=="object"&&$l(n).map(o),r},new Set)].join(" ")}function Oo(e){return/^[a-zA-Z0-9-_]+$/.test(e)}function Ao(e){if(typeof e!="string")throw new Error("Class name must be a string");return e.trim().split(" ").reduce((t,r)=>{if(r.trim().length===0)return t;if(!Oo(r))throw new Error(`${r} is not a valid CSS class name`);return t.push(r),t},[])}function xl(e){if(!Array.isArray(e))throw new Error("Expecting an array of strings");return e.map(Ao).flat()}function $l(e){if(typeof e!="object")throw new Error("Expecting an object");return Object.entries(e).filter(([t,r])=>typeof r=="function"?r():!!r).map(([t,r])=>{const n=t.trim();if(!Oo(n))throw new Error(`${n} is not a valid CSS class name`);return n})}function Pl(e,t=""){const r=e.events("input"),n=e.events("keydown"),o=e.events("keyup");e.events("change");const i=e.events("focus"),c=e.events("blur"),l=et.merge(i,r).map(_=>_.target.value).startWith(t).remember(),v=n.filter(_=>_.keyCode===13).mapTo("enter"),E=n.filter(_=>_.keyCode===27).mapTo("escape");return{value$:l,input$:r,enter$:v,escape$:E,focus$:i,blur$:c,keydown$:n,keyup$:o}}const Dl=oe.component({name:"TODO",model:{TOGGLE:e=>Ot(St({},e),{completed:!e.completed}),DESTROY:e=>{},EDIT_START:(e,t,r)=>{const n=".todo-"+e.id+" .edit";return r("SET_EDIT_VALUE",{selector:n,value:e.title}),r("FOCUS_EDIT_FIELD",{selector:n}),Ot(St({},e),{editing:!0,cachedTitle:e.title})},EDIT_DONE:(e,t)=>e.editing===!1?e:Ot(St({},e),{title:t,editing:!1,cachedTitle:""}),EDIT_CANCEL:(e,t,r)=>{const n=".todo-"+e.id+" .edit";return r("SET_EDIT_VALUE",{selector:n,value:e.cachedTitle}),Ot(St({},e),{title:e.cachedTitle,editing:!1,cachedTitle:""})},SET_EDIT_VALUE:{DOMFX:(e,t)=>({type:"SET_VALUE",data:t})},FOCUS_EDIT_FIELD:{DOMFX:(e,t)=>({type:"FOCUS",data:t})}},intent:({DOM:e})=>{const t=e.select(".toggle").events("click"),r=e.select(".todo label").events("dblclick"),n=e.select(".destroy").events("click"),o=e.select(".edit"),{value$:i,enter$:c,escape$:l,blur$:v}=Pl(o),E=et.merge(c,v).compose(io(i)).map(([_,S])=>S);return{TOGGLE:t,DESTROY:n,EDIT_START:r,EDIT_DONE:E,EDIT_CANCEL:l}},view:({state:e})=>{const{id:t,hidden:r,completed:n,editing:o,title:i}=e;if(r)return;const c=So("todo","todo-"+t,{completed:n,editing:o}),l=!!n;return at.createElement("li",{className:c},at.createElement("div",{className:"view"},at.createElement("input",{className:"toggle",type:"checkbox",checked:l}),at.createElement("label",null,i),at.createElement("button",{className:"destroy"})),at.createElement("form",{className:"edit-form"},at.createElement("input",{className:"edit",type:"text",value:i})))}});var Nl=oe.collection(Dl,"todos");const tr={all:e=>!0,active:e=>!e.completed,completed:e=>e.completed};var Tl=oe.component({name:"APP",initialState:{visibility:"all",todos:[]},calculated:{total:e=>e.todos.length,remaining:e=>e.todos.filter(t=>!t.completed).length,completed:e=>e.todos.filter(t=>t.completed).length,allDone:e=>e.todos.every(t=>t.completed)},children:{todos:Nl},model:{VISIBILITY:(e,t)=>Ot(St({},e),{visibility:t,todos:e.todos.map(r=>Ot(St({},r),{hidden:!tr[t](r)}))}),FROM_STORE:(e,t)=>Ot(St({},e),{todos:t}),NEW_TODO:(e,t,r)=>{const o={id:Date.now(),title:t,completed:!1};return r("CLEAR_FORM"),Ot(St({},e),{todos:[...e.todos,o]})},TOGGLE_ALL:e=>{const t=e.todos.every(n=>n.completed),r=e.todos.map(n=>Ot(St({},n),{completed:!t}));return Ot(St({},e),{todos:r})},CLEAR_COMPLETED:e=>{const t=e.todos.filter(r=>!r.completed);return Ot(St({},e),{todos:t})},CLEAR_FORM:{DOMFX:{type:"SET_VALUE",data:{selector:".new-todo"}}},ADD_ROUTE:{ROUTER:!0},TO_STORE:{STORE:(e,t)=>{const r=e.todos.map(({id:n,title:o,completed:i})=>({id:n,title:o,completed:i}));return{key:"todos",value:r}}}},intent:({STATE:e,DOM:t,ROUTER:r,STORE:n})=>{const o=n.get("todos",[]),i=t.select(".toggle-all").events("click"),c=t.select(".clear-completed").events("click"),l=t.select(".new-todo-form"),v=oe.processForm(l,{events:"submit"}).map(S=>S["new-todo"].trim()).filter(S=>S!==""),E=et.fromArray(Object.keys(tr)),_=e.stream.drop(1);return{VISIBILITY:r,FROM_STORE:o,NEW_TODO:v,TOGGLE_ALL:i,CLEAR_COMPLETED:c,ADD_ROUTE:E,TO_STORE:_}},view:({state:e,todos:t})=>{const{visibility:r,total:n,remaining:o,completed:i,allDone:c}=e,l=Object.keys(tr),v=_=>_.charAt(0).toUpperCase()+_.slice(1),E=_=>at.createElement("li",null,at.createElement("a",{href:`#/${_}`,className:So({selected:r==_})},v(_)));return at.createElement("section",{className:"todoapp"},at.createElement("header",{className:"header"},at.createElement("h1",null,"todos"),at.createElement("form",{className:"new-todo-form"},at.createElement("input",{className:"new-todo",name:"new-todo",autofocus:!0,autocomplete:"off",placeholder:"What needs to be done?"}))),n>0&&at.createElement("section",{className:"main"},at.createElement("input",{id:"toggle-all",className:"toggle-all",type:"checkbox",checked:c}),at.createElement("label",{for:"toggle-all"},"Mark all as complete"),at.createElement("ul",{className:"todo-list"},t)),n>0&&at.createElement("footer",{className:"footer"},at.createElement("span",{className:"todo-count"},at.createElement("strong",null,o," ")," ",o===1?"item":"items"," left"),at.createElement("ul",{className:"filters"},l.map(E)),i>0&&at.createElement("button",{className:"clear-completed"},"Clear completed")))}});const Il={DOMFX:il,STORE:al,ROUTER:sl};oe.run(Tl,Il)});export default kl();
